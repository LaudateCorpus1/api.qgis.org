<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QGIS API Documentation: /tmp/buildd/qgis-3.0.2+14stretch/src/analysis/interpolation/DualEdgeTriangulation.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="api_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QGIS API Documentation
   &#160;<span id="projectnumber">3.0.2-Girona (307d082)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2eec376824a17f48dc36b4bd0c810e01.html">analysis</a></li><li class="navelem"><a class="el" href="dir_ac901fd932b436745b90828d9bba69cc.html">interpolation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">DualEdgeTriangulation.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="DualEdgeTriangulation_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">                          DualEdgeTriangulation.cpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">                          -------------------------</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    copyright            : (C) 2004 by Marco Hugentobler</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    email                : mhugent@geo.unizh.ch</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *   (at your option) any later version.                                   *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DualEdgeTriangulation_8h.html">DualEdgeTriangulation.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathUtils_8h.html">MathUtils.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsgeometry_8h.html">qgsgeometry.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslogger_8h.html">qgslogger.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsvectorfilewriter_8h.html">qgsvectorfilewriter.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsinterpolator_8h.html">qgsinterpolator.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">   26</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> = 0.00000001;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a866d2e64dc709852e7f5028365803c95">   28</a></span>&#160;<a class="code" href="classDualEdgeTriangulation.html#a866d2e64dc709852e7f5028365803c95">DualEdgeTriangulation::~DualEdgeTriangulation</a>()</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;{</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="comment">//remove all the points</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.isEmpty() )</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count(); i++ )</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="keyword">delete</span> <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[i];</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    }</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  }</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">//remove all the HalfEdge</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.isEmpty() )</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count(); i++ )</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      <span class="keyword">delete</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i];</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  }</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a2548323b00504792d8a962512ea3cf98">   49</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#a2548323b00504792d8a962512ea3cf98">DualEdgeTriangulation::performConsistencyTest</a>()</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;performing consistency test&quot;</span> );</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count(); i++ )</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">int</span> a = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;getDual();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">int</span> b = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> ( i != a )</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning, first test failed&quot;</span> );</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span> ( i != b )</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning, second test failed&quot;</span> );</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;consistency test finished&quot;</span> );</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a4b0d932cc9904abc8563a5c49e7a7924">   69</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#a4b0d932cc9904abc8563a5c49e7a7924">DualEdgeTriangulation::addLine</a>( <span class="keyword">const</span> QVector&lt;QgsPoint&gt; &amp;points, <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2f">QgsInterpolator::SourceType</a> lineType )</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordtype">int</span> actpoint = -10;<span class="comment">//number of the last point, which has been inserted from the line</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordtype">int</span> currentpoint = -10;<span class="comment">//number of the point, which is currently inserted from the line</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;point : points )</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    actpoint = <a class="code" href="classDualEdgeTriangulation.html#aea8d834794563c974333105d2b74ce89">mDecorator</a>-&gt;<a class="code" href="classTriangulation.html#a0d17ecf5db958ac13c7e7ed2d97168eb">addPoint</a>( point );</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    i++;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> ( actpoint != -100 )</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span> ( actpoint == -100 )<span class="comment">//no point of the line could be inserted</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">for</span> ( ; i &lt; points.size(); ++i )</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    currentpoint = <a class="code" href="classDualEdgeTriangulation.html#aea8d834794563c974333105d2b74ce89">mDecorator</a>-&gt;<a class="code" href="classTriangulation.html#a0d17ecf5db958ac13c7e7ed2d97168eb">addPoint</a>( points.at( i ) );</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> ( currentpoint != -100 &amp;&amp; actpoint != -100 &amp;&amp; currentpoint != actpoint )<span class="comment">//-100 is the return value if the point could not be not inserted</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( actpoint, currentpoint, lineType );</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    actpoint = currentpoint;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#acd489c0efecba6bcc6f20a139755f38d">  101</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classDualEdgeTriangulation.html#acd489c0efecba6bcc6f20a139755f38d">DualEdgeTriangulation::addPoint</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p )</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">//first update the bounding box</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.isEmpty() )<span class="comment">//update bounding box when the first point is inserted</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#ab97d758efb6c27c6fef1c8e2a620ec6c">xMin</a> = p.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a7214aec389a9cebf743f40f825878306">yMin</a> = p.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#ac14332c3e9c05676da197bb45e733401">xMax</a> = p.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a38fdc3c64b512344ff7870aa27869a0e">yMax</a> = p.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">else</span> <span class="comment">//update bounding box else</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#ab97d758efb6c27c6fef1c8e2a620ec6c">xMin</a> = std::min( p.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), <a class="code" href="classDualEdgeTriangulation.html#ab97d758efb6c27c6fef1c8e2a620ec6c">xMin</a> );</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#ac14332c3e9c05676da197bb45e733401">xMax</a> = std::max( p.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), <a class="code" href="classDualEdgeTriangulation.html#ac14332c3e9c05676da197bb45e733401">xMax</a> );</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a7214aec389a9cebf743f40f825878306">yMin</a> = std::min( p.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), <a class="code" href="classDualEdgeTriangulation.html#a7214aec389a9cebf743f40f825878306">yMin</a> );</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a38fdc3c64b512344ff7870aa27869a0e">yMax</a> = std::max( p.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), <a class="code" href="classDualEdgeTriangulation.html#a38fdc3c64b512344ff7870aa27869a0e">yMax</a> );</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">//then update mPointVector</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.append( <span class="keyword">new</span> <a class="code" href="classQgsPoint.html">QgsPoint</a>( p ) );</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">//then update the HalfEdgeStructure</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() == 1 )<span class="comment">//insert the first point into the triangulation</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> zedge = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, -10, -1, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from p to the virtual point</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fedge = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )zedge, ( <span class="keywordtype">int</span> )zedge, 0, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from the virtual point to p</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( zedge ) )-&gt;setDual( ( <span class="keywordtype">int</span> )fedge );</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( zedge ) )-&gt;setNext( ( <span class="keywordtype">int</span> )fedge );</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() == 2 )<span class="comment">//insert the second point into the triangulation</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">//test, if it is the same point as the first point</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> ( p.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() == <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[0]-&gt;x() &amp;&amp; p.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() == <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[0]-&gt;y() )</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;second point is the same as the first point, it thus has not been inserted&quot;</span> );</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> *p = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[1];</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.remove( 1 );</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keyword">delete</span> p;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">return</span> -100;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sedge = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, -10, 1, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from point 0 to point 1</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tedge = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )sedge, 0, 0, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from point 1 to point 0</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> foedge = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, 4, 1, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from the virtual point to point 1</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fiedge = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )foedge, 1, -1, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from point 2 to the virtual point</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( sedge )-&gt;setDual( ( <span class="keywordtype">int</span> )tedge );</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( sedge )-&gt;setNext( ( <span class="keywordtype">int</span> )fiedge );</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( foedge )-&gt;setDual( ( <span class="keywordtype">int</span> )fiedge );</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( foedge )-&gt;setNext( ( <span class="keywordtype">int</span> )tedge );</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( 0 )-&gt;setNext( ( <span class="keywordtype">int</span> )foedge );</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( 1 )-&gt;setNext( ( <span class="keywordtype">int</span> )sedge );</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a> = 3;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() == 3 )<span class="comment">//insert the third point into the triangulation</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">//we first have to decide, if the third point is to the left or to the right of the line through p0 and p1</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">double</span> number = <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( p, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[0], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[1] );</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> ( number &lt; -<a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> )<span class="comment">//p is on the left side</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="comment">//insert six new edges</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgea = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, -10, 2, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from point1 to point2</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgeb = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edgea, 5, 1, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from point2 to point1</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgec = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, ( <span class="keywordtype">int</span> )edgeb, 2, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from the virtual point to p2</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edged = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, 2, 0, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from point2 to point0</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgee = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edged, -10, 2, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from point0 to point2</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgef = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edgec, 1, -1, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from point2 to the virtual point</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edgea )-&gt;setDual( ( <span class="keywordtype">int</span> )edgeb );</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edgea )-&gt;setNext( ( <span class="keywordtype">int</span> )edged );</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edgec )-&gt;setDual( ( <span class="keywordtype">int</span> )edgef );</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edged )-&gt;setDual( ( <span class="keywordtype">int</span> )edgee );</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edgee )-&gt;setNext( ( <span class="keywordtype">int</span> )edgef );</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( 5 )-&gt;setNext( ( <span class="keywordtype">int</span> )edgec );</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( 1 )-&gt;setNext( ( <span class="keywordtype">int</span> )edgee );</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( 2 )-&gt;setNext( ( <span class="keywordtype">int</span> )edgea );</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( number &gt; <a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> )<span class="comment">//p is on the right side</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="comment">//insert six new edges</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgea = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, -10, 2, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from p0 to p2</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgeb = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edgea, 0, 0, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from p2 to p0</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgec = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, ( <span class="keywordtype">int</span> )edgeb, 2, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from the virtual point to p2</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edged = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, 3, 1, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from p2 to p1</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgee = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edged, -10, 2, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from p1 to p2</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edgef = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edgec, 4, -1, <span class="keyword">false</span>, <span class="keyword">false</span> ); <span class="comment">//edge pointing from p2 to the virtual point</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edgea )-&gt;setDual( ( <span class="keywordtype">int</span> )edgeb );</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edgea )-&gt;setNext( ( <span class="keywordtype">int</span> )edged );</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edgec )-&gt;setDual( ( <span class="keywordtype">int</span> )edgef );</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edged )-&gt;setDual( ( <span class="keywordtype">int</span> )edgee );</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edgee )-&gt;setNext( ( <span class="keywordtype">int</span> )edgef );</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( 0 )-&gt;setNext( ( <span class="keywordtype">int</span> )edgec );</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( 4 )-&gt;setNext( ( <span class="keywordtype">int</span> )edgee );</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( 3 )-&gt;setNext( ( <span class="keywordtype">int</span> )edgea );</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">else</span><span class="comment">//p is in a line with p0 and p1</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.remove( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;error: third point is on the same line as the first and the second point. It thus has not been inserted into the triangulation&quot;</span> );</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> -100;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() &gt;= 4 )<span class="comment">//insert an arbitrary point into the triangulation</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">int</span> number = <a class="code" href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">baseEdgeOfTriangle</a>( p );</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">//point is outside the convex hull----------------------------------------------------</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> ( number == -10 )</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cwedge = <a class="code" href="classDualEdgeTriangulation.html#a5de235d7a4df5e817a43847026248949">mEdgeOutside</a>;<span class="comment">//the last visible edge clockwise from mEdgeOutside</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ccwedge = <a class="code" href="classDualEdgeTriangulation.html#a5de235d7a4df5e817a43847026248949">mEdgeOutside</a>;<span class="comment">//the last visible edge counterclockwise from mEdgeOutside</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="comment">//mEdgeOutside is in each case visible</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a5de235d7a4df5e817a43847026248949">mEdgeOutside</a>]-&gt;getNext()]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="comment">//find cwedge and replace the virtual point with the new point when necessary</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">while</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( *<a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ) <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;getNext()]-&gt;getDual()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], &amp;p, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ) <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] ) &lt; ( -<a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> ) )</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">//set the point number of the necessary edge to the actual point instead of the virtual point</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;getNext()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext()]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">//advance cwedge one edge further clockwise</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        cwedge = ( <span class="keywordtype">unsigned</span> int )<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;getNext()]-&gt;getDual()]-&gt;getNext();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="comment">//build the necessary connections with the virtual point</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge1 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;getNext(), -10, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from the new point to the last visible point clockwise</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge2 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;getNext()]-&gt;getDual(), -10, -1, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//edge pointing from the last visible point to the virtual point</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge3 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, edge1, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );<span class="comment">//edge pointing from the virtual point to new point</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">//adjust the other pointers</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;getNext()]-&gt;getDual()]-&gt;setDual( edge2 );</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[cwedge]-&gt;getNext()]-&gt;setDual( edge1 );</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;setNext( edge2 );</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;setNext( edge3 );</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="comment">//find ccwedge and replace the virtual point with the new point when necessary</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">while</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( *<a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getNext()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getNext()]-&gt;getNext()]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint()] ) &lt; ( -<a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> ) )</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment">//set the point number of the necessary edge to the actual point instead of the virtual point</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getNext()]-&gt;getNext()]-&gt;getDual()]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">//advance ccwedge one edge further counterclockwise</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        ccwedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getNext()]-&gt;getNext()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="comment">//build the necessary connections with the virtual point</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge4 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getNext()]-&gt;getNext(), -10, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );<span class="comment">//points from the last visible point counterclockwise to the new point</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge5 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( edge3, -10, -1, <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//points from the new point to the virtual point</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge6 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getNext()]-&gt;getNext()]-&gt;getDual(), edge4, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );<span class="comment">//points from the virtual point to the last visible point counterclockwise</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="comment">//adjust the other pointers</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getNext()]-&gt;getNext()]-&gt;getDual()]-&gt;setDual( edge6 );</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ccwedge]-&gt;getNext()]-&gt;getNext()]-&gt;setDual( edge4 );</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge4]-&gt;setNext( edge5 );</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge5]-&gt;setNext( edge6 );</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;setDual( edge5 );</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="comment">//now test the HalfEdge at the former convex hull for swappint</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = ccwedge;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> toswap;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">while</span> ( <span class="keyword">true</span> )</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        toswap = index;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        index = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[index]-&gt;getNext()]-&gt;getDual()]-&gt;getNext();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( toswap, 0 );</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">if</span> ( toswap == cwedge )</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">//point is inside the convex hull------------------------------------------------------</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( number &gt;= 0 )</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordtype">int</span> nextnumber = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[number]-&gt;getNext();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordtype">int</span> nextnextnumber = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[number]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="comment">//insert 6 new HalfEdges for the connections to the vertices of the triangle</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge1 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, nextnumber, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[number]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge2 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edge1, -10, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge3 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, nextnextnumber, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextnumber]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge4 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edge3, ( <span class="keywordtype">int</span> )edge1, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge5 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, number, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextnextnumber]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge6 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( ( <span class="keywordtype">int</span> )edge5, ( <span class="keywordtype">int</span> )edge3, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edge1 )-&gt;setDual( ( <span class="keywordtype">int</span> )edge2 );</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edge2 )-&gt;setNext( ( <span class="keywordtype">int</span> )edge5 );</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edge3 )-&gt;setDual( ( <span class="keywordtype">int</span> )edge4 );</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( edge5 )-&gt;setDual( ( <span class="keywordtype">int</span> )edge6 );</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( number )-&gt;setNext( ( <span class="keywordtype">int</span> )edge2 );</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( nextnumber )-&gt;setNext( ( <span class="keywordtype">int</span> )edge4 );</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.at( nextnextnumber )-&gt;setNext( ( <span class="keywordtype">int</span> )edge6 );</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="comment">//check, if there are swaps necessary</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( number, 0 );</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( nextnumber, 0 );</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( nextnextnumber, 0 );</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">//the point is exactly on an existing edge (the number of the edge is stored in the variable &#39;mEdgeWithPoint&#39;---------------</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( number == -20 )</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordtype">int</span> edgea = <a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordtype">int</span> edgeb = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>]-&gt;getDual();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keywordtype">int</span> edgec = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgea]-&gt;getNext();</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordtype">int</span> edged = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgec]-&gt;getNext();</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordtype">int</span> edgee = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgeb]-&gt;getNext();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordtype">int</span> edgef = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgee]-&gt;getNext();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="comment">//insert the six new edges</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordtype">int</span> nedge1 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgea]-&gt;getNext(), <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgea]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordtype">int</span> nedge2 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( nedge1, -10, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordtype">int</span> nedge3 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, edged, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgec]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordtype">int</span> nedge4 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( nedge3, nedge1, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordtype">int</span> nedge5 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, edgef, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgee]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordtype">int</span> nedge6 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( nedge5, edgeb, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">//adjust the triangular structure</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nedge1]-&gt;setDual( nedge2 );</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nedge2]-&gt;setNext( nedge5 );</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nedge3]-&gt;setDual( nedge4 );</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nedge5]-&gt;setDual( nedge6 );</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgea]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgea]-&gt;setNext( nedge3 );</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgec]-&gt;setNext( nedge4 );</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgee]-&gt;setNext( nedge6 );</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edgef]-&gt;setNext( nedge2 );</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">//swap edges if necessary</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( edgec, 0 );</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( edged, 0 );</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( edgee, 0 );</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( edgef, 0 );</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( number == -100 || number == -5 )<span class="comment">//this means unknown problems or a numerical error occurred in &#39;baseEdgeOfTriangle&#39;</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="comment">// QgsDebugMsg(&quot;point has not been inserted because of unknown problems&quot;);</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> *p = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1];</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.remove( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keyword">delete</span> p;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">return</span> -100;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( number == -25 )<span class="comment">//this means that the point has already been inserted in the triangulation</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="comment">//Take the higher z-Value in case of two equal points</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> *newPoint = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1];</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> *existingPoint = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">mTwiceInsPoint</a>];</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      existingPoint-&gt;<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( std::max( newPoint-&gt;<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>(), existingPoint-&gt;<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() ) );</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.remove( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keyword">delete</span> newPoint;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">mTwiceInsPoint</a>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">return</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">  372</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">DualEdgeTriangulation::baseEdgeOfPoint</a>( <span class="keywordtype">int</span> point )</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;{</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> actedge = <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a>;<span class="comment">//starting edge</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() &lt; 4 || point == -1 )<span class="comment">//at the beginning, mEdgeInside is not defined yet</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">//first find pointingedge(an edge pointing to p1)</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count(); i++ )</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == point )<span class="comment">//we found it</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordtype">int</span> control = 0;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">while</span> ( <span class="keyword">true</span> )<span class="comment">//otherwise, start the search</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    control += 1;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> ( control &gt; 1000000 )</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="comment">// QgsDebugMsg( &quot;warning, endless loop&quot; );</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="comment">//use the secure and slow method</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="comment">//qWarning( &quot;******************warning, using the slow method in baseEdgeOfPoint****************************************&quot; );</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count(); i++ )</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == point &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getPoint() != -1 )<span class="comment">//we found it</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordtype">int</span> frompoint = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordtype">int</span> topoint = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getPoint();</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> ( frompoint == -1 || topoint == -1 )<span class="comment">//this would cause a crash. Therefore we use the slow method in this case</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count(); i++ )</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == point &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getPoint() != -1 )<span class="comment">//we found it</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a> = i;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;          <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordtype">double</span> leftofnumber = <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( *<a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[point], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] );</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == point &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() != -1 )<span class="comment">//we found the edge</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a> = actedge;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">return</span> actedge;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( leftofnumber &lt;= 0.0 )</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext();</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;getNext()]-&gt;getNext()]-&gt;getDual();</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">  444</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">DualEdgeTriangulation::baseEdgeOfTriangle</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;point )</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> actedge = <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a>;<span class="comment">//start with an edge which does not point to the virtual point (usually number 3)</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordtype">int</span> counter = 0;<span class="comment">//number of consecutive successful left-of-tests</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordtype">int</span> nulls = 0;<span class="comment">//number of left-of-tests, which returned 0. 1 means, that the point is on a line, 2 means that it is on an existing point</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordtype">int</span> numinstabs = 0;<span class="comment">//number of suspect left-of-tests due to &#39;leftOfTresh&#39;</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordtype">int</span> runs = 0;<span class="comment">//counter for the number of iterations in the loop to prevent an endless loop</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordtype">int</span> firstendp = 0, secendp = 0, thendp = 0, fouendp = 0; <span class="comment">//four numbers of endpoints in cases when two left-of-test are 0</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">while</span> ( <span class="keyword">true</span> )</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">if</span> ( runs &gt; <a class="code" href="classDualEdgeTriangulation.html#a8640d2dfe3eb9e3ad3af5e1d1dfb3043">MAX_BASE_ITERATIONS</a> )<span class="comment">//prevents endless loops</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="comment">// QgsDebugMsg(&quot;warning, probable endless loop detected&quot;);</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordflow">return</span> -100;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordtype">double</span> leftofvalue = <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( point, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] );</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> ( leftofvalue &lt; ( -<a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> ) )<span class="comment">//point is on the left side</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      counter += 1;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">if</span> ( counter == 3 )<span class="comment">//three successful passes means that we have found the triangle</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( leftofvalue == 0 )<span class="comment">//point is exactly in the line of the edge</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">if</span> ( nulls == 0 )</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="comment">//store the numbers of the two endpoints of the line</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        firstendp = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        secendp = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getPoint();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( nulls == 1 )</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="comment">//store the numbers of the two endpoints of the line</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        thendp = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        fouendp = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getPoint();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      counter += 1;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a> = actedge;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      nulls += 1;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">if</span> ( counter == 3 )<span class="comment">//three successful passes means that we have found the triangle</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( leftofvalue &lt; <a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> )<span class="comment">//numerical problems</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      counter += 1;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      numinstabs += 1;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordflow">if</span> ( counter == 3 )<span class="comment">//three successful passes means that we have found the triangle</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">else</span><span class="comment">//point is on the right side</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual();</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      counter = 1;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      nulls = 0;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      numinstabs = 0;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext();</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 )<span class="comment">//the half edge points to the virtual point</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">if</span> ( nulls == 1 )<span class="comment">//point is exactly on the convex hull</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">return</span> -20;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a5de235d7a4df5e817a43847026248949">mEdgeOutside</a> = ( <span class="keywordtype">unsigned</span> int )<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a> = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a5de235d7a4df5e817a43847026248949">mEdgeOutside</a>]-&gt;getDual()]-&gt;getNext();</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">return</span> -10;<span class="comment">//the point is outside the convex hull</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    runs++;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">if</span> ( numinstabs &gt; 0 )<span class="comment">//we hit an existing point or a numerical instability occurred</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="comment">// QgsDebugMsg(&quot;numerical instability occurred&quot;);</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a02cdee6c119b5e65bb24a629b6d63677">mUnstableEdge</a> = actedge;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">return</span> -5;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">if</span> ( nulls == 2 )</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">//find out the number of the point, which has already been inserted</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> ( firstendp == thendp || firstendp == fouendp )</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="comment">//firstendp is the number of the point which has been inserted twice</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">mTwiceInsPoint</a> = firstendp;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="comment">// QgsDebugMsg(QString(&quot;point nr %1 already inserted&quot;).arg(firstendp));</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( secendp == thendp || secendp == fouendp )</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="comment">//secendp is the number of the point which has been inserted twice</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">mTwiceInsPoint</a> = secendp;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="comment">// QgsDebugMsg(QString(&quot;point nr %1 already inserted&quot;).arg(secendp));</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">return</span> -25;<span class="comment">//return the code for a point that is already contained in the triangulation</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">if</span> ( nulls == 1 )<span class="comment">//point is on an existing edge</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">return</span> -20;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a> = actedge;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordtype">int</span> nr1, nr2, nr3;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  nr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getPoint();</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  nr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  nr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordtype">double</span> x1 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[nr1]-&gt;x();</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordtype">double</span> y1 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[nr1]-&gt;y();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordtype">double</span> x2 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[nr2]-&gt;x();</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordtype">double</span> y2 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[nr2]-&gt;y();</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordtype">double</span> x3 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[nr3]-&gt;x();</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordtype">double</span> y3 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[nr3]-&gt;y();</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">//now make sure that always the same edge is returned</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">if</span> ( x1 &lt; x2 &amp;&amp; x1 &lt; x3 )<span class="comment">//return the edge which points to the point with the lowest x-coordinate</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">return</span> actedge;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( x2 &lt; x1 &amp;&amp; x2 &lt; x3 )</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext();</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( x3 &lt; x1 &amp;&amp; x3 &lt; x2 )</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">//in case two x-coordinates are the same, the edge pointing to the point with the lower y-coordinate is returned</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( x1 == x2 )</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> ( y1 &lt; y2 )</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">return</span> actedge;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( y2 &lt; y1 )</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext();</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( x2 == x3 )</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">if</span> ( y2 &lt; y3 )</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( y3 &lt; y2 )</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( x1 == x3 )</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span> ( y1 &lt; y3 )</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">return</span> actedge;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( y3 &lt; y1 )</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">return</span> -100;<span class="comment">//this means a bug happened</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a7a0970ddd6a39bf1af490c2ba541ed6b">  621</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#a7a0970ddd6a39bf1af490c2ba541ed6b">DualEdgeTriangulation::calcNormal</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <a class="code" href="classVector3D.html">Vector3D</a> *result )</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;{</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> ( result &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#ac7f1b349544ad42833f0069d45819051">mTriangleInterpolator</a> )</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#ac7f1b349544ad42833f0069d45819051">mTriangleInterpolator</a>-&gt;<a class="code" href="classTriangleInterpolator.html#a2d80beff61d25019996536fa04b063a2">calcNormVec</a>( x, y, result );</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning, null pointer&quot;</span> );</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a2347bf831fea72b60243df7ee48c73af">  634</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#a2347bf831fea72b60243df7ee48c73af">DualEdgeTriangulation::calcPoint</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;result )</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;{</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#ac7f1b349544ad42833f0069d45819051">mTriangleInterpolator</a> )</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#ac7f1b349544ad42833f0069d45819051">mTriangleInterpolator</a>-&gt;<a class="code" href="classTriangleInterpolator.html#a365cd0197b8cb48e56150f505a5cd925">calcPoint</a>( x, y, result );</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning, null pointer&quot;</span> );</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">  647</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">DualEdgeTriangulation::checkSwap</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> recursiveDeep )</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;{</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">swapPossible</a>( edge ) )</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *pta = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getPoint()];</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *ptb = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mHalfEdge[edge]-&gt;getNext()]-&gt;getPoint()];</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *ptc = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mHalfEdge[mHalfEdge[edge]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint()];</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *ptd = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mHalfEdge[mHalfEdge[edge]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint()];</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#adb9679ec8d078309f4c991dda20f729a">MathUtils::inCircle</a>( ptd, pta, ptb, ptc ) &amp;&amp; recursiveDeep &lt; 100 )<span class="comment">//empty circle criterion violated</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a0a120e3e0d1554e8eb52bdc1afe1e6f1">doSwap</a>( edge, recursiveDeep );<span class="comment">//swap the edge (recursive)</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">  664</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">DualEdgeTriangulation::doOnlySwap</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge )</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;{</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge1 = edge;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual();</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext();</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge4 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge5 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext();</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge6 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;setNext( edge4 );<span class="comment">//set the necessary nexts</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;setNext( edge6 );</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;setNext( edge2 );</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge4]-&gt;setNext( edge5 );</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge5]-&gt;setNext( edge1 );</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge6]-&gt;setNext( edge3 );</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );<span class="comment">//change the points to which edge1 and edge2 point</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge5]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a0a120e3e0d1554e8eb52bdc1afe1e6f1">  682</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#a0a120e3e0d1554e8eb52bdc1afe1e6f1">DualEdgeTriangulation::doSwap</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> recursiveDeep )</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;{</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge1 = edge;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual();</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext();</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge4 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge5 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext();</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge6 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;setNext( edge4 );<span class="comment">//set the necessary nexts</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;setNext( edge6 );</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;setNext( edge2 );</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge4]-&gt;setNext( edge5 );</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge5]-&gt;setNext( edge1 );</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge6]-&gt;setNext( edge3 );</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );<span class="comment">//change the points to which edge1 and edge2 point</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge5]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  recursiveDeep++;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( edge3, recursiveDeep );</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( edge6, recursiveDeep );</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( edge4, recursiveDeep );</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( edge5, recursiveDeep );</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="keywordtype">void</span> DualEdgeTriangulation::draw( QPainter *p, <span class="keywordtype">double</span> xlowleft, <span class="keywordtype">double</span> ylowleft, <span class="keywordtype">double</span> xupright, <span class="keywordtype">double</span> yupright, <span class="keywordtype">double</span> width, <span class="keywordtype">double</span> height )<span class="keyword"> const</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">//if mPointVector is empty, there is nothing to do</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.isEmpty() )</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  p-&gt;setPen( <a class="code" href="classDualEdgeTriangulation.html#a1d008997130061213c4146faef72dcd5">mEdgeColor</a> );</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordtype">bool</span> *control = <span class="keyword">new</span> <span class="keywordtype">bool</span>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count()];<span class="comment">//controllarray that no edge is painted twice</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordtype">bool</span> *control2 = <span class="keyword">new</span> <span class="keywordtype">bool</span>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count()];<span class="comment">//controllarray for the flat triangles</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() - 1; i++ )</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    control[i] = <span class="keyword">false</span>;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    control2[i] = <span class="keyword">false</span>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">if</span> ( ( ( xupright - xlowleft ) / width ) &gt; ( ( yupright - ylowleft ) / height ) )</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordtype">double</span> lowerborder = -( height * ( xupright - xlowleft ) / width - yupright );<span class="comment">//real world coordinates of the lower widget border. This is useful to know because of the HalfEdge bounding box test</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() - 1; i++ )</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 || <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;getPoint() == -1 )</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      {<span class="keywordflow">continue</span>;}</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="comment">//check, if the edge belongs to a flat triangle, remove this later</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> ( !control2[i] )</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordtype">double</span> p1, p2, p3;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() != -1 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getPoint() != -1 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint() != -1 )</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;          p1 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getPoint()]-&gt;getZ();</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;          p2 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getPoint()]-&gt;getZ();</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;          p3 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint()]-&gt;getZ();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;          <span class="keywordflow">if</span> ( p1 == p2 &amp;&amp; p2 == p3 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">halfEdgeBBoxTest</a>( i, xlowleft, lowerborder, xupright, yupright ) &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">halfEdgeBBoxTest</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext(), xlowleft, lowerborder, xupright, yupright ) &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">halfEdgeBBoxTest</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext(), xlowleft, lowerborder, xupright, yupright ) )<span class="comment">//draw the triangle</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;          {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            QPointArray pa( 3 );</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            pa.setPoint( 0, ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( xupright - xlowleft )*width, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( xupright - xlowleft )*width );</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            pa.setPoint( 1, ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( xupright - xlowleft )*width, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( xupright - xlowleft )*width );</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            pa.setPoint( 2, ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( xupright - xlowleft )*width, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( xupright - xlowleft )*width );</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            QColor c( 255, 0, 0 );</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            p-&gt;setBrush( c );</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            p-&gt;drawPolygon( pa );</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;          }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        control2[i] = <span class="keyword">true</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        control2[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()] = <span class="keyword">true</span>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        control2[mHalfEdge[mHalfEdge[i]-&gt;getNext()]-&gt;getNext()] = <span class="keyword">true</span>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      }<span class="comment">//end of the section, which has to be removed later</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">if</span> ( control[i] )<span class="comment">//check, if edge has already been drawn</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      {<span class="keywordflow">continue</span>;}</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="comment">//draw the edge;</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">halfEdgeBBoxTest</a>( i, xlowleft, lowerborder, xupright, yupright ) )<span class="comment">//only draw the halfedge if its bounding box intersects the painted area</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getBreak() )<span class="comment">//change the color it the edge is a breakline</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;          p-&gt;setPen( <a class="code" href="classDualEdgeTriangulation.html#af9763bb523890fb2b808fe8616c5b7ef">mBreakEdgeColor</a> );</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getForced() )<span class="comment">//change the color if the edge is forced</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;          p-&gt;setPen( <a class="code" href="classDualEdgeTriangulation.html#abecc4c1681668112d713355926b06f55">mForcedEdgeColor</a> );</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        p-&gt;drawLine( ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( xupright - xlowleft )*width, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( xupright - xlowleft )*width, ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( xupright - xlowleft )*width, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( xupright - xlowleft )*width );</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getForced() )</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;          p-&gt;setPen( <a class="code" href="classDualEdgeTriangulation.html#a1d008997130061213c4146faef72dcd5">mEdgeColor</a> );</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      control[i] = <span class="keyword">true</span>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      control[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()] = <span class="keyword">true</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordtype">double</span> rightborder = width * ( yupright - ylowleft ) / height + xlowleft;<span class="comment">//real world coordinates of the right widget border. This is useful to know because of the HalfEdge bounding box test</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() - 1; i++ )</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 || <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;getPoint() == -1 )</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      {<span class="keywordflow">continue</span>;}</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="comment">//check, if the edge belongs to a flat triangle, remove this section later</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">if</span> ( !control2[i] )</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordtype">double</span> p1, p2, p3;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() != -1 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getPoint() != -1 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint() != -1 )</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          p1 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getPoint()]-&gt;getZ();</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;          p2 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getPoint()]-&gt;getZ();</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;          p3 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint()]-&gt;getZ();</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;          <span class="keywordflow">if</span> ( p1 == p2 &amp;&amp; p2 == p3 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">halfEdgeBBoxTest</a>( i, xlowleft, ylowleft, rightborder, yupright ) &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">halfEdgeBBoxTest</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext(), xlowleft, ylowleft, rightborder, yupright ) &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">halfEdgeBBoxTest</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext(), xlowleft, ylowleft, rightborder, yupright ) )<span class="comment">//draw the triangle</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;          {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            QPointArray pa( 3 );</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            pa.setPoint( 0, ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( yupright - ylowleft )*height, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( yupright - ylowleft )*height );</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            pa.setPoint( 1, ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( yupright - ylowleft )*height, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( yupright - ylowleft )*height );</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            pa.setPoint( 2, ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( yupright - ylowleft )*height, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( yupright - ylowleft )*height );</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            QColor c( 255, 0, 0 );</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            p-&gt;setBrush( c );</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            p-&gt;drawPolygon( pa );</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;          }</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        control2[i] = <span class="keyword">true</span>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        control2[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()] = <span class="keyword">true</span>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        control2[mHalfEdge[mHalfEdge[i]-&gt;getNext()]-&gt;getNext()] = <span class="keyword">true</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      }<span class="comment">//end of the section, which has to be removed later</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordflow">if</span> ( control[i] )<span class="comment">//check, if edge has already been drawn</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      {<span class="keywordflow">continue</span>;}</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="comment">//draw the edge</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">halfEdgeBBoxTest</a>( i, xlowleft, ylowleft, rightborder, yupright ) )<span class="comment">//only draw the edge if its bounding box intersects with the painted area</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getBreak() )<span class="comment">//change the color if the edge is a breakline</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;          p-&gt;setPen( <a class="code" href="classDualEdgeTriangulation.html#af9763bb523890fb2b808fe8616c5b7ef">mBreakEdgeColor</a> );</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getForced() )<span class="comment">//change the color if the edge is forced</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;          p-&gt;setPen( <a class="code" href="classDualEdgeTriangulation.html#abecc4c1681668112d713355926b06f55">mForcedEdgeColor</a> );</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        p-&gt;drawLine( ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( yupright - ylowleft )*height, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( yupright - ylowleft )*height, ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getX() - xlowleft ) / ( yupright - ylowleft )*height, ( yupright - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;getY() ) / ( yupright - ylowleft )*height );</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getForced() )</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;          p-&gt;setPen( <a class="code" href="classDualEdgeTriangulation.html#a1d008997130061213c4146faef72dcd5">mEdgeColor</a> );</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      control[i] = <span class="keyword">true</span>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      control[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()] = <span class="keyword">true</span>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keyword">delete</span>[] control;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keyword">delete</span>[] control2;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;}</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a17653c0cbe5d0cba5ea26b8f3b09d92b">  856</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classDualEdgeTriangulation.html#a17653c0cbe5d0cba5ea26b8f3b09d92b">DualEdgeTriangulation::getOppositePoint</a>( <span class="keywordtype">int</span> p1, <span class="keywordtype">int</span> p2 )</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;{</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">//first find a half edge which points to p2</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordtype">int</span> firstedge = <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">baseEdgeOfPoint</a>( p2 );</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">//then find the edge which comes from p1 or print an error message if there isn&#39;t any</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordtype">int</span> theedge = -10;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="keywordtype">int</span> nextnextedge = firstedge;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordtype">int</span> edge, nextedge;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    edge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextnextedge]-&gt;getDual();</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == p1 )</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      theedge = nextnextedge;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    }<span class="comment">//we found the edge</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    nextedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext();</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    nextnextedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextedge]-&gt;getNext();</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordflow">while</span> ( nextnextedge != firstedge );</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">if</span> ( theedge == -10 )<span class="comment">//there is no edge between p1 and p2</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;warning, error: the points are: %1 and %2&quot;</span> ).arg( p1 ).arg( p2 ) );</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">return</span> -10;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">//finally find the opposite point</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[theedge]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#adbc8f25c60034f6ccdcea5e63ac69cc2">  890</a></span>&#160;QList&lt;int&gt; <a class="code" href="classDualEdgeTriangulation.html#adbc8f25c60034f6ccdcea5e63ac69cc2">DualEdgeTriangulation::getSurroundingTriangles</a>( <span class="keywordtype">int</span> pointno )</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;{</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordtype">int</span> firstedge = <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">baseEdgeOfPoint</a>( pointno );</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  QList&lt;int&gt; vlist;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">if</span> ( firstedge == -1 )<span class="comment">//an error occurred</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">return</span> vlist;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordtype">int</span> actedge = firstedge;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keywordtype">int</span> edge, nextedge, nextnextedge;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    edge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual();</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    vlist.append( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );<span class="comment">//add the number of the endpoint of the first edge to the value list</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    nextedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext();</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    vlist.append( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );<span class="comment">//add the number of the endpoint of the second edge to the value list</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    nextnextedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextedge]-&gt;getNext();</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    vlist.append( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextnextedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );<span class="comment">//add the number of endpoint of the third edge to the value list</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextnextedge]-&gt;getBreak() )<span class="comment">//add, whether the third edge is a breakline or not</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      vlist.append( -10 );</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      vlist.append( -20 );</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    actedge = nextnextedge;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">while</span> ( nextnextedge != firstedge );</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">return</span> vlist;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;}</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a4484215f19577ad8cc8bb99de5d57c35">  926</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#a4484215f19577ad8cc8bb99de5d57c35">DualEdgeTriangulation::getTriangle</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p1, <span class="keywordtype">int</span> &amp;n1, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p2, <span class="keywordtype">int</span> &amp;n2, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p3, <span class="keywordtype">int</span> &amp;n3 )</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;{</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.size() &lt; 3 )</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> point( x, y, 0 );</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keywordtype">int</span> edge = <a class="code" href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">baseEdgeOfTriangle</a>( point );</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordflow">if</span> ( edge == -10 )<span class="comment">//the point is outside the convex hull</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( edge &gt;= 0 )<span class="comment">//the point is inside the convex hull</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordtype">int</span> ptnr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getPoint();</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordtype">int</span> ptnr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordtype">int</span> ptnr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;x() );</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;y() );</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    p1.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;z() );</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;x() );</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;y() );</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    p2.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;z() );</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;x() );</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;y() );</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    p3.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;z() );</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    n1 = ptnr1;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    n2 = ptnr2;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    n3 = ptnr3;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  }</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( edge == -20 )<span class="comment">//the point is exactly on an edge</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  {</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordtype">int</span> ptnr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>]-&gt;getPoint();</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordtype">int</span> ptnr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordtype">int</span> ptnr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> ( ptnr1 == -1 || ptnr2 == -1 || ptnr3 == -1 )</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;x() );</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;y() );</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    p1.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;z() );</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;x() );</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;y() );</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    p2.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;z() );</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;x() );</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;y() );</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    p3.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;z() );</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    n1 = ptnr1;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    n2 = ptnr2;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    n3 = ptnr3;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( edge == -25 )<span class="comment">//x and y are the coordinates of an existing point</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordtype">int</span> edge1 = <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">baseEdgeOfPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">mTwiceInsPoint</a> );</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordtype">int</span> edge2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getNext();</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordtype">int</span> edge3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getNext();</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordtype">int</span> ptnr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getPoint();</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordtype">int</span> ptnr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getPoint();</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordtype">int</span> ptnr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;getPoint();</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;x() );</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;y() );</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    p1.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;z() );</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;x() );</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;y() );</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    p2.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;z() );</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;x() );</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;y() );</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    p3.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;z() );</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    n1 = ptnr1;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    n2 = ptnr2;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    n3 = ptnr3;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( edge == -5 )<span class="comment">//numerical problems in &#39;baseEdgeOfTriangle&#39;</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordtype">int</span> ptnr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a02cdee6c119b5e65bb24a629b6d63677">mUnstableEdge</a>]-&gt;getPoint();</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordtype">int</span> ptnr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a02cdee6c119b5e65bb24a629b6d63677">mUnstableEdge</a>]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordtype">int</span> ptnr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a02cdee6c119b5e65bb24a629b6d63677">mUnstableEdge</a>]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">if</span> ( ptnr1 == -1 || ptnr2 == -1 || ptnr3 == -1 )</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;x() );</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;y() );</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    p1.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;z() );</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;x() );</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;y() );</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    p2.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;z() );</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;x() );</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;y() );</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    p3.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;z() );</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    n1 = ptnr1;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    n2 = ptnr2;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    n3 = ptnr3;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">else</span><span class="comment">//problems</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;problem: the edge is: %1&quot;</span> ).arg( edge ) );</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;}</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#ac968240e8e2097dfec115b463acdeb86"> 1034</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#a4484215f19577ad8cc8bb99de5d57c35">DualEdgeTriangulation::getTriangle</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p1, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p2, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p3 )</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;{</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.size() &lt; 3 )</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> point( x, y, 0 );</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="keywordtype">int</span> edge = <a class="code" href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">baseEdgeOfTriangle</a>( point );</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">if</span> ( edge == -10 )<span class="comment">//the point is outside the convex hull</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( edge &gt;= 0 )<span class="comment">//the point is inside the convex hull</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordtype">int</span> ptnr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getPoint();</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordtype">int</span> ptnr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordtype">int</span> ptnr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;x() );</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;y() );</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    p1.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;z() );</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;x() );</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;y() );</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    p2.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;z() );</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;x() );</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;y() );</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    p3.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;z() );</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( edge == -20 )<span class="comment">//the point is exactly on an edge</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordtype">int</span> ptnr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>]-&gt;getPoint();</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordtype">int</span> ptnr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordtype">int</span> ptnr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">if</span> ( ptnr1 == -1 || ptnr2 == -1 || ptnr3 == -1 )</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    }</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;x() );</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;y() );</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    p1.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;z() );</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;x() );</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;y() );</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    p2.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;z() );</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;x() );</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;y() );</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    p3.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;z() );</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( edge == -25 )<span class="comment">//x and y are the coordinates of an existing point</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordtype">int</span> edge1 = <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">baseEdgeOfPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">mTwiceInsPoint</a> );</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordtype">int</span> edge2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getNext();</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordtype">int</span> edge3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getNext();</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordtype">int</span> ptnr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getPoint();</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordtype">int</span> ptnr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getPoint();</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordtype">int</span> ptnr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;getPoint();</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">if</span> ( ptnr1 == -1 || ptnr2 == -1 || ptnr3 == -1 )</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    }</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;x() );</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;y() );</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    p1.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;z() );</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;x() );</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;y() );</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    p2.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;z() );</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;x() );</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;y() );</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    p3.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;z() );</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  }</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( edge == -5 )<span class="comment">//numerical problems in &#39;baseEdgeOfTriangle&#39;</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordtype">int</span> ptnr1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a02cdee6c119b5e65bb24a629b6d63677">mUnstableEdge</a>]-&gt;getPoint();</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordtype">int</span> ptnr2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a02cdee6c119b5e65bb24a629b6d63677">mUnstableEdge</a>]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordtype">int</span> ptnr3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a02cdee6c119b5e65bb24a629b6d63677">mUnstableEdge</a>]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">if</span> ( ptnr1 == -1 || ptnr2 == -1 || ptnr3 == -1 )</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;x() );</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    p1.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;y() );</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    p1.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr1]-&gt;z() );</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;x() );</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    p2.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;y() );</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    p2.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr2]-&gt;z() );</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">setX</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;x() );</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    p3.<a class="code" href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">setY</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;y() );</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    p3.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[ptnr3]-&gt;z() );</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">else</span><span class="comment">//problems</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044"> 1132</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">DualEdgeTriangulation::insertEdge</a>( <span class="keywordtype">int</span> dual, <span class="keywordtype">int</span> next, <span class="keywordtype">int</span> point, <span class="keywordtype">bool</span> mbreak, <span class="keywordtype">bool</span> forced )</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;{</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="classHalfEdge.html">HalfEdge</a> *edge = <span class="keyword">new</span> <a class="code" href="classHalfEdge.html">HalfEdge</a>( dual, next, point, mbreak, forced );</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.append( edge );</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() - 1;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;}</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4"> 1140</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">DualEdgeTriangulation::insertForcedSegment</a>( <span class="keywordtype">int</span> p1, <span class="keywordtype">int</span> p2, <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2f">QgsInterpolator::SourceType</a> segmentType )</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;{</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">if</span> ( p1 == p2 )</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  {</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="comment">//list with (half of) the crossed edges</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  QList&lt;int&gt; crossedEdges;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">//an edge pointing to p1</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordtype">int</span> pointingedge = 0;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  pointingedge = <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">baseEdgeOfPoint</a>( p1 );</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordflow">if</span> ( pointingedge == -1 )</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  {</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">return</span> -100;<span class="comment">//return an error code</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">//go around p1 and find out, if the segment already exists and if not, which is the first cutted edge</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordtype">int</span> actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[pointingedge]-&gt;getDual();</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="comment">//number to prevent endless loops</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordtype">int</span> control = 0;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">while</span> ( <span class="keyword">true</span> )<span class="comment">//if it&#39;s an endless loop, something went wrong</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    control += 1;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">if</span> ( control &gt; 17000 )</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning, endless loop&quot;</span> );</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="keywordflow">return</span> -100;<span class="comment">//return an error code</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 )<span class="comment">//actedge points to the virtual point</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    {</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext()]-&gt;getDual();</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">//test, if actedge is already the forced edge</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == p2 )</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordflow">return</span> actedge;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="comment">//test, if the forced segment is a multiple of actedge and if the direction is the same</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <span class="comment">/*lines are parallel*/</span>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2]-&gt;y() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;y() ) / ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;y() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;y() ) == ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2]-&gt;x() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;x() ) / ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;x() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;x() ) &amp;&amp; ( ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2]-&gt;y() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;y() ) &gt;= 0 ) == ( ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;y() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;y() ) &gt; 0 ) &amp;&amp; ( ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2]-&gt;x() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;x() ) &gt;= 0 ) == ( ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;x() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;x() ) &gt; 0 ) )</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="comment">//mark actedge and Dual(actedge) as forced, reset p1 and start the method from the beginning</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordtype">int</span> a = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), p2, segmentType );</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keywordflow">return</span> a;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    }</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">//test, if the forced segment intersects Next(actedge)</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 )<span class="comment">//intersection with line to the virtual point makes no sense</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    {</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext()]-&gt;getDual();</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    }</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] ) )</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getForced() &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a5de2754deaeb1be4f990628f1c0e2695">mForcedCrossBehavior</a> == <a class="code" href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413aeaadcebf3abc9ed8808490d773ca0dc9">Triangulation::SnappingTypeVertex</a> )<span class="comment">//if the crossed edge is a forced edge, we have to snap the forced line to the next node</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <a class="code" href="classQgsPoint.html">QgsPoint</a> crosspoint( 0, 0, 0 );</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="keywordtype">int</span> p3, p4;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        p3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        p4 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4], &amp;crosspoint );</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <span class="keywordtype">double</span> dista = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;y() ) );</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordtype">double</span> distb = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;y() ) );</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <span class="keywordflow">if</span> ( dista &lt;= distb )</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, p3, segmentType );</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;          <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p3, p2, segmentType );</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;          <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( distb &lt;= dista )</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, p4, segmentType );</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;          <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p4, p2, segmentType );</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;          <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        }</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getForced() &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a5de2754deaeb1be4f990628f1c0e2695">mForcedCrossBehavior</a> == <a class="code" href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413aa60878fb5905d503f9537994c397c5c1">Triangulation::InsertVertex</a> )<span class="comment">//if the crossed edge is a forced edge, we have to insert a new vertice on this edge</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      {</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <a class="code" href="classQgsPoint.html">QgsPoint</a> crosspoint( 0, 0, 0 );</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordtype">int</span> p3, p4;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        p3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        p4 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4], &amp;crosspoint );</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordtype">double</span> distpart = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;y() ) );</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordtype">double</span> disttot = std::sqrt( ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;x() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;x() ) * ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;x() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;x() ) + ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;y() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;y() ) * ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;y() - <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p4]-&gt;y() ) );</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <span class="keywordtype">float</span> frac = distpart / disttot;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <span class="keywordflow">if</span> ( frac == 0 || frac == 1 )<span class="comment">//just in case MathUtils::lineIntersection does not work as expected</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;          <span class="keywordflow">if</span> ( frac == 0 )</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;          {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="comment">//mark actedge and Dual(actedge) as forced, reset p1 and start the method from the beginning</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <span class="keywordtype">int</span> a = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p4, p2, segmentType );</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="keywordflow">return</span> a;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;          }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( frac == 1 )</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;          {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="comment">//mark actedge and Dual(actedge) as forced, reset p1 and start the method from the beginning</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">if</span> ( p3 != p2 )</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;              <span class="keywordtype">int</span> a = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p3, p2, segmentType );</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;              <span class="keywordflow">return</span> a;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;              <span class="keywordflow">return</span> actedge;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;          }</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;          <span class="keywordtype">int</span> newpoint = <a class="code" href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386">splitHalfEdge</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext(), frac );</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, newpoint, segmentType );</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;          <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( newpoint, p2, segmentType );</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;          <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="comment">//add the first HalfEdge to the list of crossed edges</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      crossedEdges.append( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext() );</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    }</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext()]-&gt;getDual();</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="comment">//we found the first edge, terminated the method or called the method with other points. Lets search for all the other crossed edges</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">while</span> ( <span class="keyword">true</span> )<span class="comment">//if its an endless loop, something went wrong.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  {</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[crossedEdges.last()]-&gt;getDual()]-&gt;getPoint()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1], mPointVector[p2] ) )</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordflow">if</span> ( mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getForced() &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a5de2754deaeb1be4f990628f1c0e2695">mForcedCrossBehavior</a> == <a class="code" href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413aeaadcebf3abc9ed8808490d773ca0dc9">Triangulation::SnappingTypeVertex</a> )<span class="comment">//if the crossed edge is a forced edge and mForcedCrossBehavior is SnappingType_VERTICE, we have to snap the forced line to the next node</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <a class="code" href="classQgsPoint.html">QgsPoint</a> crosspoint( 0, 0, 0 );</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="keywordtype">int</span> p3, p4;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        p3 = mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        p4 = mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( mPointVector[p1], mPointVector[p2], mPointVector[p3], mPointVector[p4], &amp;crosspoint );</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keywordtype">double</span> dista = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p3]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p3]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p3]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p3]-&gt;y() ) );</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="keywordtype">double</span> distb = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p4]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p4]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p4]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p4]-&gt;y() ) );</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">if</span> ( dista &lt;= distb )</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, p3, segmentType );</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;          <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p3, p2, segmentType );</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;          <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        }</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( distb &lt;= dista )</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        {</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, p4, segmentType );</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;          <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p4, p2, segmentType );</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;          <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        }</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      }</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getForced() &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a5de2754deaeb1be4f990628f1c0e2695">mForcedCrossBehavior</a> == <a class="code" href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413aa60878fb5905d503f9537994c397c5c1">Triangulation::InsertVertex</a> )<span class="comment">//if the crossed edge is a forced edge, we have to insert a new vertice on this edge</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      {</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <a class="code" href="classQgsPoint.html">QgsPoint</a> crosspoint( 0, 0, 0 );</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="keywordtype">int</span> p3, p4;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        p3 = mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        p4 = mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( mPointVector[p1], mPointVector[p2], mPointVector[p3], mPointVector[p4], &amp;crosspoint );</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordtype">double</span> distpart = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p3]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p3]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p3]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p3]-&gt;y() ) );</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordtype">double</span> disttot = std::sqrt( ( mPointVector[p3]-&gt;x() - mPointVector[p4]-&gt;x() ) * ( mPointVector[p3]-&gt;x() - mPointVector[p4]-&gt;x() ) + ( mPointVector[p3]-&gt;y() - mPointVector[p4]-&gt;y() ) * ( mPointVector[p3]-&gt;y() - mPointVector[p4]-&gt;y() ) );</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <span class="keywordtype">float</span> frac = distpart / disttot;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">if</span> ( frac == 0 || frac == 1 )</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;          <span class="keywordflow">break</span>;<span class="comment">//seems that a roundoff error occurred. We found the endpoint</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keywordtype">int</span> newpoint = <a class="code" href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386">splitHalfEdge</a>( mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext(), frac );</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, newpoint, segmentType );</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( newpoint, p2, segmentType );</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      crossedEdges.append( mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext() );</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( mPointVector[mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint()], mPointVector[mHalfEdge[mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint()], mPointVector[p1], mPointVector[p2] ) )</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    {</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">if</span> ( mHalfEdge[mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext()]-&gt;getForced() &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a5de2754deaeb1be4f990628f1c0e2695">mForcedCrossBehavior</a> == <a class="code" href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413aeaadcebf3abc9ed8808490d773ca0dc9">Triangulation::SnappingTypeVertex</a> )<span class="comment">//if the crossed edge is a forced edge and mForcedCrossBehavior is SnappingType_VERTICE, we have to snap the forced line to the next node</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <a class="code" href="classQgsPoint.html">QgsPoint</a> crosspoint( 0, 0, 0 );</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordtype">int</span> p3, p4;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        p3 = mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        p4 = mHalfEdge[mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( mPointVector[p1], mPointVector[p2], mPointVector[p3], mPointVector[p4], &amp;crosspoint );</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordtype">double</span> dista = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p3]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p3]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p3]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p3]-&gt;y() ) );</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <span class="keywordtype">double</span> distb = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p4]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p4]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p4]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p4]-&gt;y() ) );</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <span class="keywordflow">if</span> ( dista &lt;= distb )</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, p3, segmentType );</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;          <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p3, p2, segmentType );</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;          <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( distb &lt;= dista )</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        {</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, p4, segmentType );</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;          <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p4, p2, segmentType );</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;          <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        }</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( mHalfEdge[mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext()]-&gt;getForced() &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a5de2754deaeb1be4f990628f1c0e2695">mForcedCrossBehavior</a> == <a class="code" href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413aa60878fb5905d503f9537994c397c5c1">Triangulation::InsertVertex</a> )<span class="comment">//if the crossed edge is a forced edge, we have to insert a new vertice on this edge</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <a class="code" href="classQgsPoint.html">QgsPoint</a> crosspoint( 0, 0, 0 );</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <span class="keywordtype">int</span> p3, p4;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        p3 = mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        p4 = mHalfEdge[mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <a class="code" href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a>( mPointVector[p1], mPointVector[p2], mPointVector[p3], mPointVector[p4], &amp;crosspoint );</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <span class="keywordtype">double</span> distpart = std::sqrt( ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p3]-&gt;x() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mPointVector[p3]-&gt;x() ) + ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p3]-&gt;y() ) * ( crosspoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mPointVector[p3]-&gt;y() ) );</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <span class="keywordtype">double</span> disttot = std::sqrt( ( mPointVector[p3]-&gt;x() - mPointVector[p4]-&gt;x() ) * ( mPointVector[p3]-&gt;x() - mPointVector[p4]-&gt;x() ) + ( mPointVector[p3]-&gt;y() - mPointVector[p4]-&gt;y() ) * ( mPointVector[p3]-&gt;y() - mPointVector[p4]-&gt;y() ) );</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <span class="keywordtype">float</span> frac = distpart / disttot;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="keywordflow">if</span> ( frac == 0 || frac == 1 )</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;          <span class="keywordflow">break</span>;<span class="comment">//seems that a roundoff error occurred. We found the endpoint</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        }</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordtype">int</span> newpoint = <a class="code" href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386">splitHalfEdge</a>( mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext(), frac );</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( p1, newpoint, segmentType );</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordtype">int</span> e = <a class="code" href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">insertForcedSegment</a>( newpoint, p2, segmentType );</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <span class="keywordflow">return</span> e;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      }</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      crossedEdges.append( mHalfEdge[mHalfEdge[mHalfEdge[crossedEdges.last()]-&gt;getDual()]-&gt;getNext()]-&gt;getNext() );</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    }</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">else</span><span class="comment">//forced edge terminates</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="comment">//set the flags &#39;forced&#39; and &#39;break&#39; to false for every edge and dualedge of &#39;crossEdges&#39;</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  QList&lt;int&gt;::const_iterator iter;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">for</span> ( iter = crossedEdges.constBegin(); iter != crossedEdges.constEnd(); ++iter )</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  {</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *( iter ) )]-&gt;setForced( <span class="keyword">false</span> );</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *( iter ) )]-&gt;setBreak( <span class="keyword">false</span> );</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *( iter ) )]-&gt;getDual()]-&gt;setForced( <span class="keyword">false</span> );</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *( iter ) )]-&gt;getDual()]-&gt;setBreak( <span class="keyword">false</span> );</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="comment">//crossed edges is filled, now the two polygons to be retriangulated can be build</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  QList&lt;int&gt; freelist = crossedEdges;<span class="comment">//copy the list with the crossed edges to remove the edges already reused</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">//create the left polygon as a list of the numbers of the halfedges</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  QList&lt;int&gt; leftPolygon;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  QList&lt;int&gt; rightPolygon;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="comment">//insert the forced edge and enter the corresponding halfedges as the first edges in the left and right polygons. The nexts and points are set later because of the algorithm to build two polygons from &#39;crossedEdges&#39;</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="keywordtype">int</span> firstedge = freelist.first();<span class="comment">//edge pointing from p1 to p2</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[firstedge]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[firstedge]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  leftPolygon.append( firstedge );</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordtype">int</span> dualfirstedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[freelist.first()]-&gt;getDual();<span class="comment">//edge pointing from p2 to p1</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dualfirstedge]-&gt;setForced( <span class="keyword">true</span> );</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dualfirstedge]-&gt;setBreak( segmentType == <a class="code" href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a> );</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  rightPolygon.append( dualfirstedge );</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  freelist.pop_front();<span class="comment">//delete the first entry from the freelist</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="comment">//finish the polygon on the left side</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="keywordtype">int</span> actpointl = p2;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  QList&lt;int&gt;::const_iterator leftiter; <span class="comment">//todo: is there a better way to set an iterator to the last list element?</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  leftiter = crossedEdges.constEnd();</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  --leftiter;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="keywordflow">while</span> ( <span class="keyword">true</span> )</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  {</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordtype">int</span> newpoint = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *leftiter )]-&gt;getDual()]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">if</span> ( newpoint != actpointl )</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="comment">//insert the edge into the leftPolygon</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      actpointl = newpoint;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="keywordtype">int</span> theedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *leftiter )]-&gt;getDual()]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      leftPolygon.append( theedge );</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    }</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="keywordflow">if</span> ( leftiter == crossedEdges.constBegin() )</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    {<span class="keywordflow">break</span>;}</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    --leftiter;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">//insert the last element into leftPolygon</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  leftPolygon.append( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[crossedEdges.first()]-&gt;getNext() );</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="comment">//finish the polygon on the right side</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  QList&lt;int&gt;::const_iterator rightiter;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="keywordtype">int</span> actpointr = p1;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordflow">for</span> ( rightiter = crossedEdges.constBegin(); rightiter != crossedEdges.constEnd(); ++rightiter )</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  {</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordtype">int</span> newpoint = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *rightiter )]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">if</span> ( newpoint != actpointr )</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="comment">//insert the edge into the right polygon</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      actpointr = newpoint;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="keywordtype">int</span> theedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *rightiter )]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      rightPolygon.append( theedge );</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    }</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="comment">//insert the last element into rightPolygon</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  rightPolygon.append( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[crossedEdges.last()]-&gt;getDual()]-&gt;getNext() );</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[rightPolygon.last()]-&gt;setNext( dualfirstedge );<span class="comment">//set &#39;Next&#39; of the last edge to dualfirstedge</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">//set the necessary nexts of leftPolygon(except the first)</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="keywordtype">int</span> actedgel = leftPolygon[1];</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  leftiter = leftPolygon.constBegin();</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  leftiter += 2;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">for</span> ( ; leftiter != leftPolygon.constEnd(); ++leftiter )</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  {</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedgel]-&gt;setNext( ( *leftiter ) );</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    actedgel = ( *leftiter );</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  }</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="comment">//set all the necessary nexts of rightPolygon</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="keywordtype">int</span> actedger = rightPolygon[1];</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  rightiter = rightPolygon.constBegin();</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  rightiter += 2;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">for</span> ( ; rightiter != rightPolygon.constEnd(); ++rightiter )</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedger]-&gt;setNext( ( *rightiter ) );</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    actedger = ( *( rightiter ) );</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="comment">//setNext and setPoint for the forced edge because this would disturb the building of &#39;leftpoly&#39; and &#39;rightpoly&#39; otherwise</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[leftPolygon.first()]-&gt;setNext( ( *( ++( leftiter = leftPolygon.constBegin() ) ) ) );</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[leftPolygon.first()]-&gt;setPoint( p2 );</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[leftPolygon.last()]-&gt;setNext( firstedge );</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[rightPolygon.first()]-&gt;setNext( ( *( ++( rightiter = rightPolygon.constBegin() ) ) ) );</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[rightPolygon.first()]-&gt;setPoint( p1 );</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[rightPolygon.last()]-&gt;setNext( dualfirstedge );</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9">triangulatePolygon</a>( &amp;leftPolygon, &amp;freelist, firstedge );</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9">triangulatePolygon</a>( &amp;rightPolygon, &amp;freelist, dualfirstedge );</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">//optimisation of the new edges</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="keywordflow">for</span> ( iter = crossedEdges.constBegin(); iter != crossedEdges.constEnd(); ++iter )</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  {</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( ( *( iter ) ), 0 );</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  }</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="keywordflow">return</span> leftPolygon.first();</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;}</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a568b90457b069c484301581a65223c79"> 1510</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#a568b90457b069c484301581a65223c79">DualEdgeTriangulation::setForcedCrossBehavior</a>( <a class="code" href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413">Triangulation::ForcedCrossBehavior</a> b )</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;{</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a5de2754deaeb1be4f990628f1c0e2695">mForcedCrossBehavior</a> = b;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;}</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div><div class="line"><a name="l01515"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#acafec9bde50fbb251d38e6c946fc919b"> 1515</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#acafec9bde50fbb251d38e6c946fc919b">DualEdgeTriangulation::setEdgeColor</a>( <span class="keywordtype">int</span> r, <span class="keywordtype">int</span> g, <span class="keywordtype">int</span> b )</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;{</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a1d008997130061213c4146faef72dcd5">mEdgeColor</a>.setRgb( r, g, b );</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;}</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#af83b74b89303d099bdaa9dfdec98b0f3"> 1520</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#af83b74b89303d099bdaa9dfdec98b0f3">DualEdgeTriangulation::setForcedEdgeColor</a>( <span class="keywordtype">int</span> r, <span class="keywordtype">int</span> g, <span class="keywordtype">int</span> b )</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;{</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#abecc4c1681668112d713355926b06f55">mForcedEdgeColor</a>.setRgb( r, g, b );</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;}</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div><div class="line"><a name="l01525"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#ac03fcc457c8dfcad2a8b5955648b4786"> 1525</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#ac03fcc457c8dfcad2a8b5955648b4786">DualEdgeTriangulation::setBreakEdgeColor</a>( <span class="keywordtype">int</span> r, <span class="keywordtype">int</span> g, <span class="keywordtype">int</span> b )</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;{</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af9763bb523890fb2b808fe8616c5b7ef">mBreakEdgeColor</a>.setRgb( r, g, b );</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;}</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a78c1ced446bc174f86d2f437c517ec38"> 1530</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#a78c1ced446bc174f86d2f437c517ec38">DualEdgeTriangulation::setTriangleInterpolator</a>( <a class="code" href="classTriangleInterpolator.html">TriangleInterpolator</a> *interpolator )</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;{</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#ac7f1b349544ad42833f0069d45819051">mTriangleInterpolator</a> = interpolator;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;}</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div><div class="line"><a name="l01535"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a401d272d3c5ad3cf951d99ddf7ca64a0"> 1535</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#a401d272d3c5ad3cf951d99ddf7ca64a0">DualEdgeTriangulation::eliminateHorizontalTriangles</a>()</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;{</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;am in eliminateHorizontalTriangles&quot;</span> );</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="keywordtype">double</span> minangle = 0;<span class="comment">//minimum angle for swapped triangles. If triangles generated by a swap would have a minimum angle (in degrees) below that value, the swap will not be done.</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="keywordflow">while</span> ( <span class="keyword">true</span> )</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  {</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordtype">bool</span> swapped = <span class="keyword">false</span>;<span class="comment">//flag which allows exiting the loop</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordtype">bool</span> *control = <span class="keyword">new</span> <span class="keywordtype">bool</span>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count()];<span class="comment">//controlarray</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() - 1; i++ )</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      control[i] = <span class="keyword">false</span>;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    }</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() - 1; i++ )</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    {</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      <span class="keywordflow">if</span> ( control[i] )<span class="comment">//edge has already been examined</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      {</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      }</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="keywordtype">int</span> e1, e2, e3;<span class="comment">//numbers of the three edges</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      e1 = i;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      e2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[e1]-&gt;getNext();</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      e3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[e2]-&gt;getNext();</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="keywordtype">int</span> p1, p2, p3;<span class="comment">//numbers of the three points</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      p1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[e1]-&gt;getPoint();</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      p2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[e2]-&gt;getPoint();</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      p3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[e3]-&gt;getPoint();</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <span class="comment">//skip the iteration, if one point is the virtual point</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <span class="keywordflow">if</span> ( p1 == -1 || p2 == -1 || p3 == -1 )</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      {</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        control[e1] = <span class="keyword">true</span>;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        control[e2] = <span class="keyword">true</span>;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        control[e3] = <span class="keyword">true</span>;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      }</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="keywordtype">double</span> el1, el2, el3;<span class="comment">//elevations of the points</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      el1 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1]-&gt;z();</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      el2 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2]-&gt;z();</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      el3 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3]-&gt;z();</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">if</span> ( el1 == el2 &amp;&amp; el2 == el3 )<span class="comment">//we found a horizonal triangle</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="comment">//swap edges if it is possible, if it would remove the horizontal triangle and if the minimum angle generated by the swap is high enough</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">swapPossible</a>( ( uint )e1 ) &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[e1]-&gt;getDual()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;z() != el1 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a69cb169d099922de5092b3d52750f3c6">swapMinAngle</a>( e1 ) &gt; minangle )</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        {</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">doOnlySwap</a>( ( uint )e1 );</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;          swapped = <span class="keyword">true</span>;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">swapPossible</a>( ( uint )e2 ) &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[e2]-&gt;getDual()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;z() != el2 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a69cb169d099922de5092b3d52750f3c6">swapMinAngle</a>( e2 ) &gt; minangle )</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        {</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">doOnlySwap</a>( ( uint )e2 );</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;          swapped = <span class="keyword">true</span>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">swapPossible</a>( ( uint )e3 ) &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[e3]-&gt;getDual()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;z() != el3 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a69cb169d099922de5092b3d52750f3c6">swapMinAngle</a>( e3 ) &gt; minangle )</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        {</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">doOnlySwap</a>( ( uint )e3 );</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;          swapped = <span class="keyword">true</span>;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        }</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        control[e1] = <span class="keyword">true</span>;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        control[e2] = <span class="keyword">true</span>;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        control[e3] = <span class="keyword">true</span>;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      }</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <span class="keywordflow">else</span><span class="comment">//no horizontal triangle, go to the next one</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      {</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        control[e1] = <span class="keyword">true</span>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        control[e2] = <span class="keyword">true</span>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        control[e3] = <span class="keyword">true</span>;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      }</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    }</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">if</span> ( !swapped )</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    {</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="keyword">delete</span>[] control;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keyword">delete</span>[] control;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  }</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;end of method&quot;</span> );</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;}</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div><div class="line"><a name="l01624"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a8d7c0e7de6a7c4c8287e6712bc6f5aa9"> 1624</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#a8d7c0e7de6a7c4c8287e6712bc6f5aa9">DualEdgeTriangulation::ruppertRefinement</a>()</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;{</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="comment">//minimum angle</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <span class="keywordtype">double</span> mintol = 17;<span class="comment">//refinement stops after the minimum angle reached this tolerance</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <span class="comment">//data structures</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  std::map&lt;int, double&gt; edge_angle;<span class="comment">//search tree with the edge number as key</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  std::multimap&lt;double, int&gt; angle_edge;<span class="comment">//multimap (map with not unique keys) with angle as key</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  QSet&lt;int&gt; dontexamine;<span class="comment">//search tree containing the edges which do not have to be examined (because of numerical problems)</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="comment">//first, go through all the forced edges and subdivide if they are encroached by a point</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="keywordtype">bool</span> stop = <span class="keyword">false</span>;<span class="comment">//flag to ensure that the for-loop is repeated until no half edge is split any more</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="keywordflow">while</span> ( !stop )</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    stop = <span class="keyword">true</span>;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordtype">int</span> nhalfedges = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count();</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; nhalfedges - 1; i++ )</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    {</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="keywordtype">int</span> next = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext();</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="keywordtype">int</span> nextnext = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[next]-&gt;getNext();</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[next]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() != -1 &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 ) )<span class="comment">//check for encroached points on forced segments and segments on the inner side of the convex hull, but don&#39;t consider edges on the outer side of the convex hull</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      {</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="keywordflow">if</span> ( !( ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[next]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( next ) ) || ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[nextnext]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( nextnext ) ) ) ) <span class="comment">//don&#39;t consider triangles where all three edges are forced edges or hull edges</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        {</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;          <span class="comment">//test for encroachment</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;          <span class="keywordflow">while</span> ( <a class="code" href="namespaceMathUtils.html#a19ff746de07404e129026ba0f8f583b0">MathUtils::inDiametral</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[next]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] ) )</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;          {</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            <span class="comment">//split segment</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            <span class="keywordtype">int</span> pointno = <a class="code" href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386">splitHalfEdge</a>( i, 0.5 );</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;            Q_UNUSED( pointno );</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;            stop = <span class="keyword">false</span>;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;          }</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        }</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      }</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    }</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  }</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="comment">//examine the triangulation for angles below the minimum and insert the edges into angle_edge and edge_angle, except the small angle is between forced segments or convex hull edges</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>;<span class="comment">//angle between edge i and the consecutive edge</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <span class="keywordtype">int</span> p1, p2, p3;<span class="comment">//numbers of the triangle points</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() - 1; i++ )</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  {</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    p1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    p2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getPoint();</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    p3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">if</span> ( p1 == -1 || p2 == -1 || p3 == -1 )<span class="comment">//don&#39;t consider triangles with the virtual point</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    }</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    angle = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[p2] );</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordtype">bool</span> twoforcededges;<span class="comment">//flag to decide, if edges should be added to the maps. Do not add them if true</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    twoforcededges = ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( i ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext() ) );</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">if</span> ( angle &lt; mintol &amp;&amp; !twoforcededges )</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    {</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      edge_angle.insert( std::make_pair( i, angle ) );</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      angle_edge.insert( std::make_pair( angle, i ) );</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    }</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  }</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="comment">//debugging: print out all the angles below the minimum for a test</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="keywordflow">for</span> ( std::multimap&lt;double, int&gt;::const_iterator it = angle_edge.begin(); it != angle_edge.end(); ++it )</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  {</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;angle: %1&quot;</span> ).arg( it-&gt;first ) );</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  }</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="keywordtype">double</span> minangle = 0;<span class="comment">//actual minimum angle</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="keywordtype">int</span> minedge;<span class="comment">//first edge adjacent to the minimum angle</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="keywordtype">int</span> minedgenext;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="keywordtype">int</span> minedgenextnext;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> <a class="code" href="namespaceMathUtils.html#a87493cf9ae1ae89975010b8f9350a22a">circumcenter</a>( 0, 0, 0 );</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordflow">while</span> ( !edge_angle.empty() )</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  {</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    minangle = angle_edge.begin()-&gt;first;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;minangle: %1&quot;</span> ).arg( minangle ) );</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    minedge = angle_edge.begin()-&gt;second;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    minedgenext = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[minedge]-&gt;getNext();</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    minedgenextnext = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[minedgenext]-&gt;getNext();</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="comment">//calculate the circumcenter</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="namespaceMathUtils.html#a87493cf9ae1ae89975010b8f9350a22a">MathUtils::circumcenter</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[minedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[minedgenext]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[minedgenextnext]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], &amp;circumcenter ) )</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    {</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning, calculation of circumcenter failed&quot;</span> );</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="comment">//put all three edges to dontexamine and remove them from the other maps</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      dontexamine.insert( minedge );</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      edge_angle.erase( minedge );</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      std::multimap&lt;double, int&gt;::iterator minedgeiter = angle_edge.find( minangle );</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;      <span class="keywordflow">while</span> ( minedgeiter-&gt;second != minedge )</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      {</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        ++minedgeiter;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      }</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      angle_edge.erase( minedgeiter );</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="classDualEdgeTriangulation.html#abf7f07cfc4c07060141f7634229a7781">pointInside</a>( circumcenter.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), circumcenter.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) )</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    {</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      <span class="comment">//put all three edges to dontexamine and remove them from the other maps</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;put circumcenter %1//%2 on dontexamine list because it is outside the convex hull&quot;</span> )</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                   .arg( circumcenter.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ).arg( circumcenter.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) );</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      dontexamine.insert( minedge );</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      edge_angle.erase( minedge );</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      std::multimap&lt;double, int&gt;::iterator minedgeiter = angle_edge.find( minangle );</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <span class="keywordflow">while</span> ( minedgeiter-&gt;second != minedge )</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      {</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        ++minedgeiter;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      }</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      angle_edge.erase( minedgeiter );</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    }</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="comment">/*******find out, if any forced segment or convex hull segment is in the influence region of the circumcenter. In this case, split the segment********************/</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordtype">bool</span> encroached = <span class="keyword">false</span>;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="preprocessor">#if 0 //slow version</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordtype">int</span> numhalfedges = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count();<span class="comment">//begin slow version</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; numhalfedges; i++ )</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    {</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( i ) )</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      {</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a19ff746de07404e129026ba0f8f583b0">MathUtils::inDiametral</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], &amp;circumcenter ) )</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;          encroached = <span class="keyword">true</span>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;          <span class="comment">//split segment</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;          <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;segment split&quot;</span> );</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;          <span class="keywordtype">int</span> pointno = <a class="code" href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386">splitHalfEdge</a>( i, 0.5 );</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;          <span class="comment">//update dontexmine, angle_edge, edge_angle</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;          <span class="keywordtype">int</span> pointingedge = <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">baseEdgeOfPoint</a>( pointno );</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;          <span class="keywordtype">int</span> actedge = pointingedge;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;          <span class="keywordtype">int</span> ed1, ed2, ed3;<span class="comment">//numbers of the three edges</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;          <span class="keywordtype">int</span> pt1, pt2, pt3;<span class="comment">//numbers of the three points</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;          <span class="keywordtype">double</span> angle1, angle2, angle3;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;          <span class="keywordflow">do</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;          {</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            ed1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual();</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            pt1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getPoint();</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;            ed2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getNext();</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            pt2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getPoint();</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            ed3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getNext();</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            pt3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getPoint();</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            actedge = ed3;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            <span class="keywordflow">if</span> ( pt1 == -1 || pt2 == -1 || pt3 == -1 )<span class="comment">//don&#39;t consider triangles with the virtual point</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            {</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            }</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            angle1 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1] );</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            angle2 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2] );</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            angle3 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3] );</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            <span class="comment">//don&#39;t put the edges on the maps if two segments are forced or on a hull</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="keywordtype">bool</span> twoforcededges1, twoforcededges2, twoforcededges3;<span class="comment">//flag to indicate, if angle1, angle2 and angle3 are between forced edges or hull edges</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            <span class="keywordflow">if</span> ( ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed1 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed2 ) ) )</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            {</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;              twoforcededges1 = <span class="keyword">true</span>;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;            }</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            {</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;              twoforcededges1 = <span class="keyword">false</span>;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            }</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            <span class="keywordflow">if</span> ( ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed2 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed3 ) ) )</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            {</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;              twoforcededges2 = <span class="keyword">true</span>;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            }</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            {</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;              twoforcededges2 = <span class="keyword">false</span>;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            }</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            <span class="keywordflow">if</span> ( ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed3 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed1 ) ) )</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            {</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;              twoforcededges3 = <span class="keyword">true</span>;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            }</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            {</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;              twoforcededges3 = <span class="keyword">false</span>;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            }</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            <span class="comment">//update the settings related to ed1</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            QSet&lt;int&gt;::iterator ed1iter = dontexamine.find( ed1 );</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            <span class="keywordflow">if</span> ( ed1iter != dontexamine.end() )</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;              <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;              dontexamine.erase( ed1iter );</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;            }</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            {</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;              <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;              std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;              tempit1 = edge_angle.find( ed1 );</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;              <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;              {</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                <span class="comment">//erase the entries</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                edge_angle.erase( ed1 );</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                <span class="keywordflow">while</span> ( tempit2-&gt;second != ed1 )</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                  ++tempit2;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                }</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                angle_edge.erase( tempit2 );</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;              }</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            }</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            <span class="keywordflow">if</span> ( angle1 &lt; mintol &amp;&amp; !twoforcededges1 )</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            {</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;              edge_angle.insert( std::make_pair( ed1, angle1 ) );</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;              angle_edge.insert( std::make_pair( angle1, ed1 ) );</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            }</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <span class="comment">//update the settings related to ed2</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            QSet&lt;int&gt;::iterator ed2iter = dontexamine.find( ed2 );</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            <span class="keywordflow">if</span> ( ed2iter != dontexamine.end() )</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;              <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;              dontexamine.erase( ed2iter );</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;              <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;              std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;              tempit1 = edge_angle.find( ed2 );</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;              <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;              {</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                <span class="comment">//erase the entries</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                edge_angle.erase( ed2 );</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                <span class="keywordflow">while</span> ( tempit2-&gt;second != ed2 )</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                  ++tempit2;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                angle_edge.erase( tempit2 );</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;              }</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            }</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;            <span class="keywordflow">if</span> ( angle2 &lt; mintol &amp;&amp; !twoforcededges2 )</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;              edge_angle.insert( std::make_pair( ed2, angle2 ) );</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;              angle_edge.insert( std::make_pair( angle2, ed2 ) );</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            <span class="comment">//update the settings related to ed3</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            QSet&lt;int&gt;::iterator ed3iter = dontexamine.find( ed3 );</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            <span class="keywordflow">if</span> ( ed3iter != dontexamine.end() )</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;              <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;              dontexamine.erase( ed3iter );</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            }</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            {</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;              <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;              std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;              tempit1 = edge_angle.find( ed3 );</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;              <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;              {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                <span class="comment">//erase the entries</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                edge_angle.erase( ed3 );</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                <span class="keywordflow">while</span> ( tempit2-&gt;second != ed3 )</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                  ++tempit2;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                angle_edge.erase( tempit2 );</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;              }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            }</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;            <span class="keywordflow">if</span> ( angle3 &lt; mintol &amp;&amp; !twoforcededges3 )</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;              edge_angle.insert( std::make_pair( ed3, angle3 ) );</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;              angle_edge.insert( std::make_pair( angle3, ed3 ) );</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;            }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;          }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;          <span class="keywordflow">while</span> ( actedge != pointingedge );</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        }</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      }</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    }</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="preprocessor">#endif //end slow version</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="comment">//fast version. Maybe this does not work</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    QSet&lt;int&gt; influenceedges;<span class="comment">//begin fast method</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordtype">int</span> baseedge = <a class="code" href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">baseEdgeOfTriangle</a>( circumcenter );</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <span class="keywordflow">if</span> ( baseedge == -5 )<span class="comment">//a numerical instability occurred or the circumcenter already exists in the triangulation</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    {</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <span class="comment">//delete minedge from edge_angle and minangle from angle_edge</span></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      edge_angle.erase( minedge );</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      std::multimap&lt;double, int&gt;::iterator minedgeiter = angle_edge.find( minangle );</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <span class="keywordflow">while</span> ( minedgeiter-&gt;second != minedge )</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        ++minedgeiter;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      }</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      angle_edge.erase( minedgeiter );</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    }</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( baseedge == -25 )<span class="comment">//circumcenter already exists in the triangulation</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    {</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      <span class="comment">//delete minedge from edge_angle and minangle from angle_edge</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      edge_angle.erase( minedge );</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      std::multimap&lt;double, int&gt;::iterator minedgeiter = angle_edge.find( minangle );</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      <span class="keywordflow">while</span> ( minedgeiter-&gt;second != minedge )</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      {</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        ++minedgeiter;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      }</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      angle_edge.erase( minedgeiter );</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    }</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( baseedge == -20 )</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    {</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      baseedge = <a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a>;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    }</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#adbfae2d13b6a4e69d2b803e1eb8dc59a">evaluateInfluenceRegion</a>( &amp;circumcenter, baseedge, influenceedges );</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#adbfae2d13b6a4e69d2b803e1eb8dc59a">evaluateInfluenceRegion</a>( &amp;circumcenter, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[baseedge]-&gt;getNext(), influenceedges );</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#adbfae2d13b6a4e69d2b803e1eb8dc59a">evaluateInfluenceRegion</a>( &amp;circumcenter, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[baseedge]-&gt;getNext()]-&gt;getNext(), influenceedges );</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordflow">for</span> ( QSet&lt;int&gt;::iterator it = influenceedges.begin(); it != influenceedges.end(); ++it )</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    {</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <span class="keywordflow">if</span> ( ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[*it]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( *it ) ) &amp;&amp; <a class="code" href="namespaceMathUtils.html#a19ff746de07404e129026ba0f8f583b0">MathUtils::inDiametral</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[*it]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[*it]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], &amp;circumcenter ) )</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      {</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <span class="comment">//split segment</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;segment split&quot;</span> );</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        <span class="keywordtype">int</span> pointno = <a class="code" href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386">splitHalfEdge</a>( *it, 0.5 );</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        encroached = <span class="keyword">true</span>;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="comment">//update dontexmine, angle_edge, edge_angle</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        <span class="keywordtype">int</span> pointingedge = <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">baseEdgeOfPoint</a>( pointno );</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordtype">int</span> actedge = pointingedge;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        <span class="keywordtype">int</span> ed1, ed2, ed3;<span class="comment">//numbers of the three edges</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <span class="keywordtype">int</span> pt1, pt2, pt3;<span class="comment">//numbers of the three points</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        <span class="keywordtype">double</span> angle1, angle2, angle3;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        {</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;          ed1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual();</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;          pt1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getPoint();</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;          ed2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getNext();</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;          pt2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getPoint();</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;          ed3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getNext();</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;          pt3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getPoint();</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;          actedge = ed3;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;          <span class="keywordflow">if</span> ( pt1 == -1 || pt2 == -1 || pt3 == -1 )<span class="comment">//don&#39;t consider triangles with the virtual point</span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;          {</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;          }</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;          angle1 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1] );</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;          angle2 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2] );</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;          angle3 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3] );</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;          <span class="comment">//don&#39;t put the edges on the maps if two segments are forced or on a hull</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;          <span class="keywordtype">bool</span> twoforcededges1, twoforcededges2, twoforcededges3;<span class="comment">//flag to decide, if edges should be added to the maps. Do not add them if true</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;          twoforcededges1 = ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed1 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed2 ) );</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;          twoforcededges2 = ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed2 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed3 ) );</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;          twoforcededges3 = ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed3 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed1 ) );</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;          <span class="comment">//update the settings related to ed1</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;          QSet&lt;int&gt;::iterator ed1iter = dontexamine.find( ed1 );</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;          <span class="keywordflow">if</span> ( ed1iter != dontexamine.end() )</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;          {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            dontexamine.erase( ed1iter );</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;          }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;          {</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;            <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            tempit1 = edge_angle.find( ed1 );</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            {</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;              <span class="comment">//erase the entries</span></div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;              <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;              edge_angle.erase( ed1 );</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;              std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;              <span class="keywordflow">while</span> ( tempit2-&gt;second != ed1 )</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;              {</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                ++tempit2;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;              }</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;              angle_edge.erase( tempit2 );</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;            }</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;          }</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;          <span class="keywordflow">if</span> ( angle1 &lt; mintol &amp;&amp; !twoforcededges1 )</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;          {</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            edge_angle.insert( std::make_pair( ed1, angle1 ) );</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            angle_edge.insert( std::make_pair( angle1, ed1 ) );</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;          }</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;          <span class="comment">//update the settings related to ed2</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;          QSet&lt;int&gt;::iterator ed2iter = dontexamine.find( ed2 );</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;          <span class="keywordflow">if</span> ( ed2iter != dontexamine.end() )</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;          {</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            dontexamine.erase( ed2iter );</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;          }</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;          {</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;            <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;            std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;            tempit1 = edge_angle.find( ed2 );</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;            <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;            {</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;              <span class="comment">//erase the entries</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;              <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;              edge_angle.erase( ed2 );</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;              std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;              <span class="keywordflow">while</span> ( tempit2-&gt;second != ed2 )</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;              {</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                ++tempit2;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;              }</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;              angle_edge.erase( tempit2 );</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            }</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;          }</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;          <span class="keywordflow">if</span> ( angle2 &lt; mintol &amp;&amp; !twoforcededges2 )</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;          {</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;            edge_angle.insert( std::make_pair( ed2, angle2 ) );</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;            angle_edge.insert( std::make_pair( angle2, ed2 ) );</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;          }</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;          <span class="comment">//update the settings related to ed3</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;          QSet&lt;int&gt;::iterator ed3iter = dontexamine.find( ed3 );</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;          <span class="keywordflow">if</span> ( ed3iter != dontexamine.end() )</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;          {</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;            dontexamine.erase( ed3iter );</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;          }</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;          {</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            tempit1 = edge_angle.find( ed3 );</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            {</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;              <span class="comment">//erase the entries</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;              <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;              edge_angle.erase( ed3 );</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;              std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;              <span class="keywordflow">while</span> ( tempit2-&gt;second != ed3 )</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;              {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                ++tempit2;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;              }</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;              angle_edge.erase( tempit2 );</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;            }</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;          }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;          <span class="keywordflow">if</span> ( angle3 &lt; mintol &amp;&amp; !twoforcededges3 )</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;          {</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            edge_angle.insert( std::make_pair( ed3, angle3 ) );</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;            angle_edge.insert( std::make_pair( angle3, ed3 ) );</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;          }</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        }</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="keywordflow">while</span> ( actedge != pointingedge );</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      }</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    } <span class="comment">//end fast method</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keywordflow">if</span> ( encroached )</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    {</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    }</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="comment">/*******otherwise, try to add the circumcenter to the triangulation************************************************************************************************/</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> p( 0, 0, 0 );</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#aea8d834794563c974333105d2b74ce89">mDecorator</a>-&gt;<a class="code" href="classTriangulation.html#a51951fbe164a241e8d1e64051c666b30">calcPoint</a>( circumcenter.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), circumcenter.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), p );</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordtype">int</span> pointno = <a class="code" href="classDualEdgeTriangulation.html#aea8d834794563c974333105d2b74ce89">mDecorator</a>-&gt;<a class="code" href="classTriangulation.html#a0d17ecf5db958ac13c7e7ed2d97168eb">addPoint</a>( p );</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">if</span> ( pointno == -100 || pointno == <a class="code" href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">mTwiceInsPoint</a> )</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      <span class="keywordflow">if</span> ( pointno == -100 )</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      {</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;put circumcenter %1//%2 on dontexamine list because of numerical instabilities&quot;</span> )</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                     .arg( circumcenter.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ).arg( circumcenter.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) );</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      }</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( pointno == <a class="code" href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">mTwiceInsPoint</a> )</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;put circumcenter %1//%2 on dontexamine list because it is already inserted&quot;</span> )</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                     .arg( circumcenter.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ).arg( circumcenter.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) );</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        <span class="comment">//test, if the point is present in the triangulation</span></div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        <span class="keywordtype">bool</span> flag = <span class="keyword">false</span>;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count(); i++ )</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        {</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;          <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[i]-&gt;x() == circumcenter.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[i]-&gt;y() == circumcenter.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() )</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;          {</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;            flag = <span class="keyword">true</span>;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;          }</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        }</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        <span class="keywordflow">if</span> ( !flag )</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        {</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;          <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;point is not present in the triangulation&quot;</span> );</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        }</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;      }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      <span class="comment">//put all three edges to dontexamine and remove them from the other maps</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      dontexamine.insert( minedge );</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      edge_angle.erase( minedge );</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      std::multimap&lt;double, int&gt;::iterator minedgeiter = angle_edge.lower_bound( minangle );</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;      <span class="keywordflow">while</span> ( minedgeiter-&gt;second != minedge )</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      {</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        ++minedgeiter;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      }</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      angle_edge.erase( minedgeiter );</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    }</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <span class="keywordflow">else</span><span class="comment">//insertion successful</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    {</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;circumcenter added&quot;</span> );</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <span class="comment">//update the maps</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;      <span class="comment">//go around the inserted point and make changes for every half edge</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      <span class="keywordtype">int</span> pointingedge = <a class="code" href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">baseEdgeOfPoint</a>( pointno );</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <span class="keywordtype">int</span> actedge = pointingedge;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <span class="keywordtype">int</span> ed1, ed2, ed3;<span class="comment">//numbers of the three edges</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <span class="keywordtype">int</span> pt1, pt2, pt3;<span class="comment">//numbers of the three points</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <span class="keywordtype">double</span> angle1, angle2, angle3;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <span class="keywordflow">do</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      {</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        ed1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual();</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        pt1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getPoint();</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        ed2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getNext();</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        pt2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getPoint();</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        ed3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getNext();</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        pt3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getPoint();</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        actedge = ed3;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        <span class="keywordflow">if</span> ( pt1 == -1 || pt2 == -1 || pt3 == -1 )<span class="comment">//don&#39;t consider triangles with the virtual point</span></div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        {</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        }</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        angle1 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1] );</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        angle2 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2] );</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        angle3 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt2], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt1], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[pt3] );</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        <span class="comment">//todo: put all three edges on the dontexamine list if two edges are forced or convex hull edges</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;        <span class="keywordtype">bool</span> twoforcededges1, twoforcededges2, twoforcededges3;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        twoforcededges1 = ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed1 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed2 ) );</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        twoforcededges2 = ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed2]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed2 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed3 ) );</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        twoforcededges3 = ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed3]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed3 ) ) &amp;&amp; ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[ed1]-&gt;getForced() || <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( ed1 ) );</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        <span class="comment">//update the settings related to ed1</span></div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        QSet&lt;int&gt;::iterator ed1iter = dontexamine.find( ed1 );</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        <span class="keywordflow">if</span> ( ed1iter != dontexamine.end() )</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        {</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;          <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;          dontexamine.erase( ed1iter );</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        }</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        {</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;          <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;          std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;          tempit1 = edge_angle.find( ed1 );</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;          <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;          {</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;            <span class="comment">//erase the entries</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;            <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;            edge_angle.erase( ed1 );</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;            std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;            <span class="keywordflow">while</span> ( tempit2-&gt;second != ed1 )</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;            {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;              ++tempit2;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            }</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            angle_edge.erase( tempit2 );</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;          }</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        }</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;        <span class="keywordflow">if</span> ( angle1 &lt; mintol &amp;&amp; !twoforcededges1 )</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        {</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;          edge_angle.insert( std::make_pair( ed1, angle1 ) );</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;          angle_edge.insert( std::make_pair( angle1, ed1 ) );</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        }</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        <span class="comment">//update the settings related to ed2</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        QSet&lt;int&gt;::iterator ed2iter = dontexamine.find( ed2 );</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        <span class="keywordflow">if</span> ( ed2iter != dontexamine.end() )</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;          <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;          dontexamine.erase( ed2iter );</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        }</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        {</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;          <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;          std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;          tempit1 = edge_angle.find( ed2 );</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;          <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;          {</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;            <span class="comment">//erase the entries</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;            <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;            edge_angle.erase( ed2 );</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;            std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            <span class="keywordflow">while</span> ( tempit2-&gt;second != ed2 )</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;            {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;              ++tempit2;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;            }</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;            angle_edge.erase( tempit2 );</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;          }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        }</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        <span class="keywordflow">if</span> ( angle2 &lt; mintol &amp;&amp; !twoforcededges2 )</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        {</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;          edge_angle.insert( std::make_pair( ed2, angle2 ) );</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;          angle_edge.insert( std::make_pair( angle2, ed2 ) );</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;        }</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        <span class="comment">//update the settings related to ed3</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        QSet&lt;int&gt;::iterator ed3iter = dontexamine.find( ed3 );</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        <span class="keywordflow">if</span> ( ed3iter != dontexamine.end() )</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        {</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;          <span class="comment">//edge number is on dontexamine list</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;          dontexamine.erase( ed3iter );</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        }</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;          <span class="comment">//test, if it is on edge_angle and angle_edge and erase them if yes</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;          std::map&lt;int, double&gt;::iterator tempit1;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;          tempit1 = edge_angle.find( ed3 );</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;          <span class="keywordflow">if</span> ( tempit1 != edge_angle.end() )</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;          {</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            <span class="comment">//erase the entries</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            <span class="keywordtype">double</span> angle = tempit1-&gt;second;</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            edge_angle.erase( ed3 );</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;            std::multimap&lt;double, int&gt;::iterator tempit2 = angle_edge.lower_bound( angle );</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;            <span class="keywordflow">while</span> ( tempit2-&gt;second != ed3 )</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;            {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;              ++tempit2;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            }</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            angle_edge.erase( tempit2 );</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;          }</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        }</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        <span class="keywordflow">if</span> ( angle3 &lt; mintol &amp;&amp; !twoforcededges3 )</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        {</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;          edge_angle.insert( std::make_pair( ed3, angle3 ) );</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;          angle_edge.insert( std::make_pair( angle3, ed3 ) );</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        }</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      }</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      <span class="keywordflow">while</span> ( actedge != pointingedge );</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  }</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <span class="comment">//debugging: print out all edge of dontexamine</span></div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  <span class="keywordflow">for</span> ( QSet&lt;int&gt;::iterator it = dontexamine.begin(); it != dontexamine.end(); ++it )</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  {</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;edge nr. %1 is in dontexamine&quot;</span> ).arg( *it ) );</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  }</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;}</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;</div><div class="line"><a name="l02314"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba"> 2314</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">DualEdgeTriangulation::swapPossible</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> edge )</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;{</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="comment">//test, if edge belongs to a forced edge</span></div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getForced() )</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  {</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  }</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <span class="comment">//test, if the edge is on the convex hull or is connected to the virtual point</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 || <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 || <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 || <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 )</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  {</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  }</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  <span class="comment">//then, test, if the edge is in the middle of a not convex quad</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *pta = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getPoint()];</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *ptb = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mHalfEdge[edge]-&gt;getNext()]-&gt;getPoint()];</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *ptc = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mHalfEdge[mHalfEdge[edge]-&gt;getNext()]-&gt;getNext()]-&gt;getPoint()];</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *ptd = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mHalfEdge[mHalfEdge[edge]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint()];</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( *ptc, pta, ptb ) &gt; <a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> )</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  {</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  }</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( *ptd, ptb, ptc ) &gt; <a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> )</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  {</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  }</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( *pta, ptc, ptd ) &gt; <a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> )</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  }</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( *ptb, ptd, pta ) &gt; <a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> )</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  {</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  }</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;}</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9"> 2351</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9">DualEdgeTriangulation::triangulatePolygon</a>( QList&lt;int&gt; *poly, QList&lt;int&gt; *free, <span class="keywordtype">int</span> mainedge )</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;{</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <span class="keywordflow">if</span> ( poly &amp;&amp; free )</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  {</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">if</span> ( poly-&gt;count() == 3 )<span class="comment">//polygon is already a triangle</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    {</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    }</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <span class="comment">//search for the edge pointing on the closest point(distedge) and for the next(nextdistedge)</span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    QList&lt;int&gt;::const_iterator iterator = ++( poly-&gt;constBegin() );<span class="comment">//go to the second edge</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="keywordtype">double</span> distance = <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *iterator )]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] );</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordtype">int</span> distedge = ( *iterator );</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <span class="keywordtype">int</span> nextdistedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *iterator )]-&gt;getNext();</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    ++iterator;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <span class="keywordflow">while</span> ( iterator != --( poly-&gt;constEnd() ) )</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    {</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *iterator )]-&gt;getPoint()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;getDual()]-&gt;getPoint()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mainedge]-&gt;getPoint()] ) &lt; distance )</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      {</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        distedge = ( *iterator );</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        nextdistedge = mHalfEdge[( *iterator )]-&gt;getNext();</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        distance = <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[( *iterator )]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mHalfEdge[mainedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[mHalfEdge[mainedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] );</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      }</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      ++iterator;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    }</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <span class="keywordflow">if</span> ( nextdistedge == ( *( --poly-&gt;end() ) ) )<span class="comment">//the nearest point is connected to the endpoint of mainedge</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    {</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      <span class="keywordtype">int</span> inserta = free-&gt;first();<span class="comment">//take an edge from the freelist</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;      <span class="keywordtype">int</span> insertb = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;getDual();</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;      free-&gt;pop_front();</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;setNext( ( poly-&gt;at( 1 ) ) );</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertb]-&gt;setNext( nextdistedge );</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertb]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[distedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[distedge]-&gt;setNext( inserta );</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;setNext( insertb );</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;      QList&lt;int&gt; polya;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      <span class="keywordflow">for</span> ( iterator = ( ++( poly-&gt;constBegin() ) ); ( *iterator ) != nextdistedge; ++iterator )</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      {</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        polya.append( ( *iterator ) );</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      }</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      polya.prepend( inserta );</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      <span class="comment">//print out all the elements of polya for a test</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      <span class="keywordflow">for</span> ( iterator = polya.begin(); iterator != polya.end(); ++iterator )</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      {</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( *iterator );</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      }</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9">triangulatePolygon</a>( &amp;polya, free, inserta );</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    }</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( distedge == ( *( ++poly-&gt;begin() ) ) )<span class="comment">//the nearest point is connected to the beginpoint of mainedge</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    {</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      <span class="keywordtype">int</span> inserta = free-&gt;first();<span class="comment">//take an edge from the freelist</span></div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      <span class="keywordtype">int</span> insertb = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;getDual();</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      free-&gt;pop_front();</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;setNext( ( poly-&gt;at( 2 ) ) );</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[distedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertb]-&gt;setNext( mainedge );</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertb]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[distedge]-&gt;setNext( insertb );</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *( --poly-&gt;end() ) )]-&gt;setNext( inserta );</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      QList&lt;int&gt; polya;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      iterator = poly-&gt;constBegin();</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      iterator += 2;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="keywordflow">while</span> ( iterator != poly-&gt;constEnd() )</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      {</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        polya.append( ( *iterator ) );</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        ++iterator;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      }</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      polya.prepend( inserta );</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9">triangulatePolygon</a>( &amp;polya, free, inserta );</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    }</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <span class="keywordflow">else</span><span class="comment">//the nearest point is not connected to an endpoint of mainedge</span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    {</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;      <span class="keywordtype">int</span> inserta = free-&gt;first();<span class="comment">//take an edge from the freelist</span></div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordtype">int</span> insertb = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;getDual();</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      free-&gt;pop_front();</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      <span class="keywordtype">int</span> insertc = free-&gt;first();</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <span class="keywordtype">int</span> insertd = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertc]-&gt;getDual();</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      free-&gt;pop_front();</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;setNext( ( poly-&gt;at( 1 ) ) );</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[inserta]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertb]-&gt;setNext( insertd );</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertb]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[distedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertc]-&gt;setNext( nextdistedge );</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertc]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[distedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertd]-&gt;setNext( mainedge );</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[insertd]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[distedge]-&gt;setNext( inserta );</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[mainedge]-&gt;setNext( insertb );</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[( *( --poly-&gt;end() ) )]-&gt;setNext( insertc );</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <span class="comment">//build two new polygons for recursive triangulation</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;      QList&lt;int&gt; polya;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;      QList&lt;int&gt; polyb;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;      <span class="keywordflow">for</span> ( iterator = ++( poly-&gt;constBegin() ); ( *iterator ) != nextdistedge; ++iterator )</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;      {</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        polya.append( ( *iterator ) );</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      }</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      polya.prepend( inserta );</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      <span class="keywordflow">while</span> ( iterator != poly-&gt;constEnd() )</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      {</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        polyb.append( ( *iterator ) );</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        ++iterator;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      }</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      polyb.prepend( insertc );</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9">triangulatePolygon</a>( &amp;polya, free, inserta );</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9">triangulatePolygon</a>( &amp;polyb, free, insertc );</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    }</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  }</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  {</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning, null pointer&quot;</span> );</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  }</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;}</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;</div><div class="line"><a name="l02488"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#abf7f07cfc4c07060141f7634229a7781"> 2488</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#abf7f07cfc4c07060141f7634229a7781">DualEdgeTriangulation::pointInside</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y )</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;{</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> point( x, y, 0 );</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> actedge = <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a>;<span class="comment">//start with an edge which does not point to the virtual point</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <span class="keywordtype">int</span> counter = 0;<span class="comment">//number of consecutive successful left-of-tests</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  <span class="keywordtype">int</span> nulls = 0;<span class="comment">//number of left-of-tests, which returned 0. 1 means, that the point is on a line, 2 means that it is on an existing point</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <span class="keywordtype">int</span> numinstabs = 0;<span class="comment">//number of suspect left-of-tests due to &#39;leftOfTresh&#39;</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <span class="keywordtype">int</span> runs = 0;<span class="comment">//counter for the number of iterations in the loop to prevent an endless loop</span></div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="keywordflow">while</span> ( <span class="keyword">true</span> )</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  {</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="keywordflow">if</span> ( runs &gt; <a class="code" href="classDualEdgeTriangulation.html#a8640d2dfe3eb9e3ad3af5e1d1dfb3043">MAX_BASE_ITERATIONS</a> )<span class="comment">//prevents endless loops</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    {</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;warning, instability detected: Point coordinates: %1//%2&quot;</span> ).arg( x ).arg( y ) );</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    }</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( point, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] ) &lt; ( -<a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> ) )<span class="comment">//point is on the left side</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    {</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      counter += 1;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      <span class="keywordflow">if</span> ( counter == 3 )<span class="comment">//three successful passes means that we have found the triangle</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      }</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    }</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( point, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] ) == 0 )<span class="comment">//point is exactly in the line of the edge</span></div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    {</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      counter += 1;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">mEdgeWithPoint</a> = actedge;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      nulls += 1;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <span class="keywordflow">if</span> ( counter == 3 )<span class="comment">//three successful passes means that we have found the triangle</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      {</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      }</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    }</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a>( point, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] ) &lt; <a class="code" href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a> )<span class="comment">//numerical problems</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    {</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      counter += 1;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      numinstabs += 1;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      <span class="keywordflow">if</span> ( counter == 3 )<span class="comment">//three successful passes means that we have found the triangle</span></div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;      {</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      }</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    }</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keywordflow">else</span><span class="comment">//point is on the right side</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getDual();</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      counter = 1;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      nulls = 0;</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      numinstabs = 0;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    }</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    actedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext();</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 )<span class="comment">//the half edge points to the virtual point</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    {</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      <span class="keywordflow">if</span> ( nulls == 1 )<span class="comment">//point is exactly on the convex hull</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      {</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      }</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a5de235d7a4df5e817a43847026248949">mEdgeOutside</a> = ( <span class="keywordtype">unsigned</span> int )<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[actedge]-&gt;getNext()]-&gt;getNext();</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;<span class="comment">//the point is outside the convex hull</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    }</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    runs++;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  }</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="keywordflow">if</span> ( nulls == 2 )<span class="comment">//we hit an existing point</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  {</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  }</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="keywordflow">if</span> ( numinstabs &gt; 0 )<span class="comment">//a numerical instability occurred</span></div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  {</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;numerical instabilities&quot;</span> );</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  }</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="keywordflow">if</span> ( nulls == 1 )<span class="comment">//point is on an existing edge</span></div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  {</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  }</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a> = actedge;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;}</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="keywordtype">bool</span> DualEdgeTriangulation::readFromTAFF( QString filename )</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;{</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  QApplication::setOverrideCursor( QCursor( Qt::WaitCursor ) );<span class="comment">//change the cursor</span></div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  QFile file( filename );<span class="comment">//the file to be read</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  file.open( IO_Raw | IO_ReadOnly );</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  QBuffer buffer( file.readAll() );<span class="comment">//the buffer to copy the file to</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  file.close();</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  QTextStream textstream( &amp;buffer );</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  buffer.open( IO_ReadOnly );</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  QString buff;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  <span class="keywordtype">int</span> numberofhalfedges;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  <span class="keywordtype">int</span> numberofpoints;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <span class="comment">//edge section</span></div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="keywordflow">while</span> ( buff.mid( 0, 4 ) != <span class="stringliteral">&quot;TRIA&quot;</span> )<span class="comment">//search for the TRIA-section</span></div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  {</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    buff = textstream.readLine();</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  }</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  <span class="keywordflow">while</span> ( buff.mid( 0, 4 ) != <span class="stringliteral">&quot;NEDG&quot;</span> )</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  {</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    buff = textstream.readLine();</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  }</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  numberofhalfedges = buff.section( <span class="charliteral">&#39; &#39;</span>, 1, 1 ).toInt();</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.resize( numberofhalfedges );</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  <span class="keywordflow">while</span> ( buff.mid( 0, 4 ) != <span class="stringliteral">&quot;DATA&quot;</span> )<span class="comment">//search for the data section</span></div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    textstream &gt;&gt; buff;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  }</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <span class="keywordtype">int</span> nr1, nr2, dual1, dual2, point1, point2, next1, next2, fo1, fo2, b1, b2;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <span class="keywordtype">bool</span> forced1, forced2, break1, break2;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  <span class="comment">//import all the DualEdges</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  QProgressBar *edgebar = <span class="keyword">new</span> QProgressBar();<span class="comment">//use a progress dialog so that it is not boring for the user</span></div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;  edgebar-&gt;setCaption( <span class="stringliteral">&quot;Reading edges…&quot;</span> );</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  edgebar-&gt;setTotalSteps( numberofhalfedges / 2 );</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  edgebar-&gt;setMinimumWidth( 400 );</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  edgebar-&gt;move( 500, 500 );</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  edgebar-&gt;show();</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; numberofhalfedges / 2; i++ )</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  {</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    <span class="keywordflow">if</span> ( i % 1000 == 0 )</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    {</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;      edgebar-&gt;setProgress( i );</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    }</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    textstream &gt;&gt; nr1;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    textstream &gt;&gt; point1;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    textstream &gt;&gt; next1;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    textstream &gt;&gt; fo1;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    <span class="keywordflow">if</span> ( fo1 == 0 )</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    {</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;      forced1 = <span class="keyword">false</span>;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    }</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    {</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;      forced1 = <span class="keyword">true</span>;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    }</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    textstream &gt;&gt; b1;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="keywordflow">if</span> ( b1 == 0 )</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    {</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      break1 = <span class="keyword">false</span>;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    }</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    {</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;      break1 = <span class="keyword">true</span>;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    }</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;    textstream &gt;&gt; nr2;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    textstream &gt;&gt; point2;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    textstream &gt;&gt; next2;</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    textstream &gt;&gt; fo2;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="keywordflow">if</span> ( fo2 == 0 )</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    {</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;      forced2 = <span class="keyword">false</span>;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    }</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    {</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;      forced2 = <span class="keyword">true</span>;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    }</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    textstream &gt;&gt; b2;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <span class="keywordflow">if</span> ( b2 == 0 )</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    {</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      break2 = <span class="keyword">false</span>;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    }</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    {</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      break2 = <span class="keyword">true</span>;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    }</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <a class="code" href="classHalfEdge.html">HalfEdge</a> *hf1 = <span class="keyword">new</span> <a class="code" href="classHalfEdge.html">HalfEdge</a>();</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    hf1-&gt;<a class="code" href="classHalfEdge.html#a9419d54f966e368014fbc09243cc1068">setDual</a>( nr2 );</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    hf1-&gt;<a class="code" href="classHalfEdge.html#a64bc7cfbed0c380d1db25c1e0c93f7cc">setNext</a>( next1 );</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    hf1-&gt;<a class="code" href="classHalfEdge.html#a6a376e082f2d76290d36c6a47f6466d0">setPoint</a>( point1 );</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    hf1-&gt;<a class="code" href="classHalfEdge.html#ad9d2f1a0e0c594f59d27ec26b34a59cf">setBreak</a>( break1 );</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    hf1-&gt;<a class="code" href="classHalfEdge.html#ab40691fe75426707e06b9d876456e6b0">setForced</a>( forced1 );</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    <a class="code" href="classHalfEdge.html">HalfEdge</a> *hf2 = <span class="keyword">new</span> <a class="code" href="classHalfEdge.html">HalfEdge</a>();</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    hf2-&gt;<a class="code" href="classHalfEdge.html#a9419d54f966e368014fbc09243cc1068">setDual</a>( nr1 );</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    hf2-&gt;<a class="code" href="classHalfEdge.html#a64bc7cfbed0c380d1db25c1e0c93f7cc">setNext</a>( next2 );</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    hf2-&gt;<a class="code" href="classHalfEdge.html#a6a376e082f2d76290d36c6a47f6466d0">setPoint</a>( point2 );</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    hf2-&gt;<a class="code" href="classHalfEdge.html#ad9d2f1a0e0c594f59d27ec26b34a59cf">setBreak</a>( break2 );</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    hf2-&gt;<a class="code" href="classHalfEdge.html#ab40691fe75426707e06b9d876456e6b0">setForced</a>( forced2 );</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="comment">// QgsDebugMsg( QString( &quot;inserting half edge pair %1&quot; ).arg( i ) );</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.insert( nr1, hf1 );</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.insert( nr2, hf2 );</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  }</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  edgebar-&gt;setProgress( numberofhalfedges / 2 );</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  <span class="keyword">delete</span> edgebar;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  <span class="comment">//set mEdgeInside to a reasonable value</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; numberofhalfedges; i++ )</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  {</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordtype">int</span> a, b, c, d;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    a = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getPoint();</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    b = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    c = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    d = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="keywordflow">if</span> ( a != -1 &amp;&amp; b != -1 &amp;&amp; c != -1 &amp;&amp; d != -1 )</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    {</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">mEdgeInside</a> = i;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    }</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  }</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <span class="comment">//point section</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <span class="keywordflow">while</span> ( buff.mid( 0, 4 ) != <span class="stringliteral">&quot;POIN&quot;</span> )</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  {</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    buff = textstream.readLine();</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( buff );</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  }</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  <span class="keywordflow">while</span> ( buff.mid( 0, 4 ) != <span class="stringliteral">&quot;NPTS&quot;</span> )</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    buff = textstream.readLine();</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( buff );</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  }</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  numberofpoints = buff.section( <span class="charliteral">&#39; &#39;</span>, 1, 1 ).toInt();</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.resize( numberofpoints );</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <span class="keywordflow">while</span> ( buff.mid( 0, 4 ) != <span class="stringliteral">&quot;DATA&quot;</span> )</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  {</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    textstream &gt;&gt; buff;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  }</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  QProgressBar *pointbar = <span class="keyword">new</span> QProgressBar();</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  pointbar-&gt;setCaption( tr( <span class="stringliteral">&quot;Reading points…&quot;</span> ) );</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  pointbar-&gt;setTotalSteps( numberofpoints );</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  pointbar-&gt;setMinimumWidth( 400 );</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  pointbar-&gt;move( 500, 500 );</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  pointbar-&gt;show();</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <span class="keywordtype">double</span> x, y, z;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; numberofpoints; i++ )</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  {</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <span class="keywordflow">if</span> ( i % 1000 == 0 )</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    {</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;      pointbar-&gt;setProgress( i );</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    }</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    textstream &gt;&gt; x;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    textstream &gt;&gt; y;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    textstream &gt;&gt; z;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *p = <span class="keyword">new</span> <a class="code" href="classQgsPoint.html">QgsPoint</a>( x, y, z );</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="comment">// QgsDebugMsg( QString( &quot;inserting point %1&quot; ).arg( i ) );</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.insert( i, p );</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <span class="keywordflow">if</span> ( i == 0 )</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    {</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#ab97d758efb6c27c6fef1c8e2a620ec6c">xMin</a> = x;</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#ac14332c3e9c05676da197bb45e733401">xMax</a> = x;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a7214aec389a9cebf743f40f825878306">yMin</a> = y;</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#a38fdc3c64b512344ff7870aa27869a0e">yMax</a> = y;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    }</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    {</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;      <span class="comment">//update the bounding box</span></div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;      <span class="keywordflow">if</span> ( x &lt; <a class="code" href="classDualEdgeTriangulation.html#ab97d758efb6c27c6fef1c8e2a620ec6c">xMin</a> )</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;      {</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#ab97d758efb6c27c6fef1c8e2a620ec6c">xMin</a> = x;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;      }</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( x &gt; <a class="code" href="classDualEdgeTriangulation.html#ac14332c3e9c05676da197bb45e733401">xMax</a> )</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      {</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#ac14332c3e9c05676da197bb45e733401">xMax</a> = x;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      }</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;      <span class="keywordflow">if</span> ( y &lt; <a class="code" href="classDualEdgeTriangulation.html#a7214aec389a9cebf743f40f825878306">yMin</a> )</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      {</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#a7214aec389a9cebf743f40f825878306">yMin</a> = y;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      }</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( y &gt; <a class="code" href="classDualEdgeTriangulation.html#a38fdc3c64b512344ff7870aa27869a0e">yMax</a> )</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;      {</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <a class="code" href="classDualEdgeTriangulation.html#a38fdc3c64b512344ff7870aa27869a0e">yMax</a> = y;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      }</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    }</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  }</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  pointbar-&gt;setProgress( numberofpoints );</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <span class="keyword">delete</span> pointbar;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  QApplication::restoreOverrideCursor();</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;}</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="keywordtype">bool</span> DualEdgeTriangulation::saveToTAFF( QString filename )<span class="keyword"> const</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  QFile outputfile( filename );</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;  <span class="keywordflow">if</span> ( !outputfile.open( IO_WriteOnly ) )</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  {</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    QMessageBox::warning( 0, tr( <span class="stringliteral">&quot;Warning&quot;</span> ), tr( <span class="stringliteral">&quot;File could not be written.&quot;</span> ), QMessageBox::Ok, QMessageBox::NoButton, QMessageBox::NoButton );</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  }</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  QTextStream outstream( &amp;outputfile );</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  outstream.precision( 9 );</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <span class="comment">//export the edges. Attention, dual edges must be adjacent in the TAFF-file</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  outstream &lt;&lt; <span class="stringliteral">&quot;TRIA&quot;</span> &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  outstream &lt;&lt; <span class="stringliteral">&quot;NEDG &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  outstream &lt;&lt; <span class="stringliteral">&quot;PANO 1&quot;</span> &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  outstream &lt;&lt; <span class="stringliteral">&quot;DATA &quot;</span>;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="keywordtype">bool</span> *cont = <span class="keyword">new</span> <span class="keywordtype">bool</span>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count()];</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count() - 1; i++ )</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  {</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    cont[i] = <span class="keyword">false</span>;</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  }</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.count(); i++ )</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  {</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="keywordflow">if</span> ( cont[i] )</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    {</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    }</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="keywordtype">int</span> dual = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getDual();</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    outstream &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getPoint() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getNext() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getForced() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i]-&gt;getBreak() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    outstream &lt;&lt; dual &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dual]-&gt;getPoint() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dual]-&gt;getNext() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dual]-&gt;getForced() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dual]-&gt;getBreak() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    cont[i] = <span class="keyword">true</span>;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    cont[dual] = <span class="keyword">true</span>;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  }</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  outstream &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  outstream &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  <span class="keyword">delete</span>[] cont;</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <span class="comment">//export the points to the file</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  outstream &lt;&lt; <span class="stringliteral">&quot;POIN&quot;</span> &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  outstream &lt;&lt; <span class="stringliteral">&quot;NPTS &quot;</span> &lt;&lt; <a class="code" href="classDualEdgeTriangulation.html#a53f45d11a3699fc664d9d327d9838d91">getNumberOfPoints</a>() &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  outstream &lt;&lt; <span class="stringliteral">&quot;PATT 3&quot;</span> &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  outstream &lt;&lt; <span class="stringliteral">&quot;DATA &quot;</span>;</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a53f45d11a3699fc664d9d327d9838d91">getNumberOfPoints</a>(); i++ )</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  {</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *p = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[i];</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    outstream &lt;&lt; p-&gt;getX() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p-&gt;getY() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p-&gt;getZ() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  }</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  outstream &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  outstream &lt;&lt; std::endl &lt;&lt; std::flush;</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;}</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="preprocessor">#endif //0</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;</div><div class="line"><a name="l02854"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a44f05630f5314513989291c5320ce6de"> 2854</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#a44f05630f5314513989291c5320ce6de">DualEdgeTriangulation::swapEdge</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y )</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;{</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> p( x, y, 0 );</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <span class="keywordtype">int</span> edge1 = <a class="code" href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">baseEdgeOfTriangle</a>( p );</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <span class="keywordflow">if</span> ( edge1 &gt;= 0 )</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  {</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    <span class="keywordtype">int</span> edge2, edge3;</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *point1 = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *point2 = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *point3 = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    edge2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getNext();</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    edge3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getNext();</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    point1 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    point2 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    point3 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="keywordflow">if</span> ( point1 &amp;&amp; point2 &amp;&amp; point3 )</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    {</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;      <span class="comment">//find out the closest edge to the point and swap this edge</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <span class="keywordtype">double</span> dist1, dist2, dist3;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      dist1 = <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( &amp;p, point3, point1 );</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      dist2 = <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( &amp;p, point1, point2 );</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;      dist3 = <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( &amp;p, point2, point3 );</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      <span class="keywordflow">if</span> ( dist1 &lt;= dist2 &amp;&amp; dist1 &lt;= dist3 )</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      {</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        <span class="comment">//qWarning(&quot;edge &quot;+QString::number(edge1)+&quot; is closest&quot;);</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">swapPossible</a>( edge1 ) )</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;        {</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">doOnlySwap</a>( edge1 );</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;        }</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;      }</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( dist2 &lt;= dist1 &amp;&amp; dist2 &lt;= dist3 )</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;      {</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        <span class="comment">//qWarning(&quot;edge &quot;+QString::number(edge2)+&quot; is closest&quot;);</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">swapPossible</a>( edge2 ) )</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;        {</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">doOnlySwap</a>( edge2 );</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        }</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      }</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( dist3 &lt;= dist1 &amp;&amp; dist3 &lt;= dist2 )</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      {</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;        <span class="comment">//qWarning(&quot;edge &quot;+QString::number(edge3)+&quot; is closest&quot;);</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">swapPossible</a>( edge3 ) )</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        {</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;          <a class="code" href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">doOnlySwap</a>( edge3 );</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;        }</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;      }</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    }</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    {</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;      <span class="comment">// QgsDebugMsg(&quot;warning: null pointer&quot;);</span></div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    }</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  }</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;  {</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <span class="comment">// QgsDebugMsg(&quot;Edge number negative&quot;);</span></div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  }</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;}</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;</div><div class="line"><a name="l02915"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a4013929acfbdef26db98a064d72092be"> 2915</a></span>&#160;QList&lt;int&gt; *<a class="code" href="classDualEdgeTriangulation.html#a4013929acfbdef26db98a064d72092be">DualEdgeTriangulation::getPointsAroundEdge</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y )</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;{</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> p( x, y, 0 );</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="keywordtype">int</span> p1, p2, p3, p4;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="keywordtype">int</span> edge1 = <a class="code" href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">baseEdgeOfTriangle</a>( p );</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;  <span class="keywordflow">if</span> ( edge1 &gt;= 0 )</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  {</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="keywordtype">int</span> edge2, edge3;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *point1 = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *point2 = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> *point3 = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    edge2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getNext();</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    edge3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getNext();</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    point1 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    point2 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    point3 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <span class="keywordflow">if</span> ( point1 &amp;&amp; point2 &amp;&amp; point3 )</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    {</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;      <span class="keywordtype">double</span> dist1, dist2, dist3;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      dist1 = <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( &amp;p, point3, point1 );</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      dist2 = <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( &amp;p, point1, point2 );</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;      dist3 = <a class="code" href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a>( &amp;p, point2, point3 );</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      <span class="keywordflow">if</span> ( dist1 &lt;= dist2 &amp;&amp; dist1 &lt;= dist3 )</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      {</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        p1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getPoint();</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        p2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;        p3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        p4 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      }</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( dist2 &lt;= dist1 &amp;&amp; dist2 &lt;= dist3 )</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;      {</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        p1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getPoint();</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        p2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        p3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        p4 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;      }</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( dist3 &lt;= dist1 &amp;&amp; dist3 &lt;= dist2 )</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;      {</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;        p1 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;getPoint();</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;        p2 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        p3 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;getDual()]-&gt;getPoint();</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;        p4 = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;getDual()]-&gt;getNext()]-&gt;getPoint();</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      }</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      QList&lt;int&gt; *list = <span class="keyword">new</span> QList&lt;int&gt;();</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;      list-&gt;append( p1 );</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;      list-&gt;append( p2 );</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;      list-&gt;append( p3 );</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      list-&gt;append( p4 );</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;      <span class="keywordflow">return</span> list;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    }</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    {</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning: null pointer&quot;</span> );</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    }</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  }</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  {</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;Edge number negative&quot;</span> );</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  }</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;}</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;</div><div class="line"><a name="l02978"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a1bac7ab7a1af4705be6dff8c666d0d4d"> 2978</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#a1bac7ab7a1af4705be6dff8c666d0d4d">DualEdgeTriangulation::saveTriangulation</a>( <a class="code" href="classQgsFeatureSink.html">QgsFeatureSink</a> *sink, <a class="code" href="classQgsFeedback.html">QgsFeedback</a> *feedback )<span class="keyword"> const</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;  <span class="keywordflow">if</span> ( !sink )</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  {</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  }</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <span class="keywordtype">bool</span> *alreadyVisitedEdges = <span class="keyword">new</span> <span class="keywordtype">bool</span>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.size()];</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <span class="keywordflow">if</span> ( !alreadyVisitedEdges )</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  {</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;out of memory&quot;</span> );</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  }</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.size(); ++i )</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;  {</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    alreadyVisitedEdges[i] = <span class="keyword">false</span>;</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  }</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>.size(); ++i )</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  {</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="keywordflow">if</span> ( feedback &amp;&amp; feedback-&gt;<a class="code" href="classQgsFeedback.html#a166e5fb87ddb57e86de791b14b6a6ce4">isCanceled</a>() )</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    <a class="code" href="classHalfEdge.html">HalfEdge</a> *currentEdge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[i];</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <span class="keywordflow">if</span> ( currentEdge-&gt;<a class="code" href="classHalfEdge.html#a833ef913e7f57c0cd0164e49b8f05a53">getPoint</a>() != -1 &amp;&amp; <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[currentEdge-&gt;<a class="code" href="classHalfEdge.html#a8a433b32bd0a8aa2b463b15088cafdcf">getDual</a>()]-&gt;getPoint() != -1 &amp;&amp; !alreadyVisitedEdges[currentEdge-&gt;<a class="code" href="classHalfEdge.html#a8a433b32bd0a8aa2b463b15088cafdcf">getDual</a>()] )</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    {</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      <a class="code" href="classQgsFeature.html">QgsFeature</a> edgeLineFeature;</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      <span class="comment">//geometry</span></div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> *p1 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[currentEdge-&gt;<a class="code" href="classHalfEdge.html#a833ef913e7f57c0cd0164e49b8f05a53">getPoint</a>()];</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> *p2 = <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[currentEdge-&gt;<a class="code" href="classHalfEdge.html#a8a433b32bd0a8aa2b463b15088cafdcf">getDual</a>()]-&gt;getPoint()];</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;      <a class="code" href="qgsgeometry_8h.html#aa509befb347910684b1a14f10c62cc89">QgsPolylineXY</a> lineGeom;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      lineGeom.push_back( <a class="code" href="classQgsPointXY.html">QgsPointXY</a>( p1-&gt;<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p1-&gt;<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) );</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;      lineGeom.push_back( <a class="code" href="classQgsPointXY.html">QgsPointXY</a>( p2-&gt;<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p2-&gt;<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) );</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      edgeLineFeature.<a class="code" href="classQgsFeature.html#ae6c4c7a5c40d420c95285ce072c24307">setGeometry</a>( <a class="code" href="classQgsGeometry.html#a4bec85aab9d4adc70c37164cb9efc526">QgsGeometry::fromPolylineXY</a>( lineGeom ) );</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;      edgeLineFeature.<a class="code" href="classQgsFeature.html#a4d705310b40a69d0b4aefe9515229455">initAttributes</a>( 1 );</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;      <span class="comment">//attributes</span></div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      QString attributeString;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;      <span class="keywordflow">if</span> ( currentEdge-&gt;<a class="code" href="classHalfEdge.html#a0dd90a4395ddb317c1f6b89f07ae32e6">getForced</a>() )</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      {</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;        <span class="keywordflow">if</span> ( currentEdge-&gt;<a class="code" href="classHalfEdge.html#ad53f54dd15afd946737ff8b4cb567a63">getBreak</a>() )</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        {</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;          attributeString = QStringLiteral( <span class="stringliteral">&quot;break line&quot;</span> );</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;        }</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;        {</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;          attributeString = QStringLiteral( <span class="stringliteral">&quot;structure line&quot;</span> );</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;        }</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      }</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      edgeLineFeature.<a class="code" href="classQgsFeature.html#a0075d1f9c830d62c8fda6b843c307dd8">setAttribute</a>( 0, attributeString );</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      sink-&gt;<a class="code" href="classQgsFeatureSink.html#aef4fbd5b3c521770ea2e7acda0addc05">addFeature</a>( edgeLineFeature, <a class="code" href="classQgsFeatureSink.html#a85446dba6f3f5d74ad85890cfdd58239acd4b5c2a6ae1868f72a80b8fce669072">QgsFeatureSink::FastInsert</a> );</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    }</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    alreadyVisitedEdges[i] = <span class="keyword">true</span>;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;  }</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  <span class="keyword">delete</span> [] alreadyVisitedEdges;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  <span class="keywordflow">return</span> !feedback || !feedback-&gt;<a class="code" href="classQgsFeedback.html#a166e5fb87ddb57e86de791b14b6a6ce4">isCanceled</a>();</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;}</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;</div><div class="line"><a name="l03041"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#a69cb169d099922de5092b3d52750f3c6"> 3041</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classDualEdgeTriangulation.html#a69cb169d099922de5092b3d52750f3c6">DualEdgeTriangulation::swapMinAngle</a>( <span class="keywordtype">int</span> edge )<span class="keyword"> const</span></div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *p1 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *p2 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *p3 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *p4 = <a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() );</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <span class="comment">//search for the minimum angle (it is important, which directions the lines have!)</span></div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  <span class="keywordtype">double</span> minangle;</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  <span class="keywordtype">double</span> angle1 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( p1, p2, p4, p2 );</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  minangle = angle1;</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <span class="keywordtype">double</span> angle2 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( p3, p2, p4, p2 );</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;  <span class="keywordflow">if</span> ( angle2 &lt; minangle )</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  {</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    minangle = angle2;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  }</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  <span class="keywordtype">double</span> angle3 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( p2, p3, p4, p3 );</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <span class="keywordflow">if</span> ( angle3 &lt; minangle )</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  {</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    minangle = angle3;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  }</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  <span class="keywordtype">double</span> angle4 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( p3, p4, p2, p4 );</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <span class="keywordflow">if</span> ( angle4 &lt; minangle )</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  {</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    minangle = angle4;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  }</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <span class="keywordtype">double</span> angle5 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( p2, p4, p1, p4 );</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="keywordflow">if</span> ( angle5 &lt; minangle )</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  {</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    minangle = angle5;</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  }</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <span class="keywordtype">double</span> angle6 = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a>( p4, p1, p2, p1 );</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="keywordflow">if</span> ( angle6 &lt; minangle )</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  {</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    minangle = angle6;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  }</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <span class="keywordflow">return</span> minangle;</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;}</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;</div><div class="line"><a name="l03081"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386"> 3081</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386">DualEdgeTriangulation::splitHalfEdge</a>( <span class="keywordtype">int</span> edge, <span class="keywordtype">float</span> position )</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;{</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;  <span class="comment">//just a short test if position is between 0 and 1</span></div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  <span class="keywordflow">if</span> ( position &lt; 0 || position &gt; 1 )</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  {</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( <span class="stringliteral">&quot;warning, position is not between 0 and 1&quot;</span> );</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  }</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  <span class="comment">//create the new point on the heap</span></div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> *p = <span class="keyword">new</span> <a class="code" href="classQgsPoint.html">QgsPoint</a>( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;x()*position + <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;x() * ( 1 - position ), <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;y()*position + <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()]-&gt;y() * ( 1 - position ), 0 );</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="comment">//calculate the z-value of the point to insert</span></div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> zvaluepoint( 0, 0, 0 );</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#aea8d834794563c974333105d2b74ce89">mDecorator</a>-&gt;<a class="code" href="classTriangulation.html#a51951fbe164a241e8d1e64051c666b30">calcPoint</a>( p-&gt;<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p-&gt;<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), zvaluepoint );</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  p-&gt;<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( zvaluepoint.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() );</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;  <span class="comment">//insert p into mPointVector</span></div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() &gt;= <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.size() )</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  {</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.resize( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() + 1 );</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  }</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QString( <span class="stringliteral">&quot;inserting point nr. %1, %2//%3//%4&quot;</span> ).arg( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() ).arg( p-&gt;<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ).arg( p-&gt;<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ).arg( p-&gt;<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() ) );</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.insert( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count(), p );</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <span class="comment">//insert the six new halfedges</span></div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  <span class="keywordtype">int</span> dualedge = <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual();</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <span class="keywordtype">int</span> edge1 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, -10, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <span class="keywordtype">int</span> edge2 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( edge1, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;getNext(), <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  <span class="keywordtype">int</span> edge3 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dualedge]-&gt;getNext()]-&gt;getNext(), <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dualedge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <span class="keyword">false</span>, <span class="keyword">false</span> );</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;  <span class="keywordtype">int</span> edge4 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( edge3, dualedge, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <span class="keyword">false</span>, false );</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="keywordtype">int</span> edge5 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( -10, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext(), <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>(), <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getBreak(), <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getForced() );</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  <span class="keywordtype">int</span> edge6 = <a class="code" href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">insertEdge</a>( edge5, edge3, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dualedge]-&gt;getBreak(), <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dualedge]-&gt;getForced() );</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;setDual( edge2 );</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge1]-&gt;setNext( edge5 );</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;setDual( edge4 );</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge5]-&gt;setDual( edge6 );</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;  <span class="comment">//adjust the already existing halfedges</span></div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;setNext( edge1 );</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dualedge]-&gt;getNext()]-&gt;setNext( edge4 );</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;setNext( edge2 );</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;setPoint( <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1 );</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;getNext()]-&gt;setNext( edge6 );</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  <span class="comment">//test four times recursively for swapping</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge5]-&gt;getNext(), 0 );</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge2]-&gt;getNext(), 0 );</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[dualedge]-&gt;getNext(), 0 );</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">checkSwap</a>( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge3]-&gt;getNext(), 0 );</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;  <a class="code" href="classDualEdgeTriangulation.html#aea8d834794563c974333105d2b74ce89">mDecorator</a>-&gt;<a class="code" href="classTriangulation.html#a0d17ecf5db958ac13c7e7ed2d97168eb">addPoint</a>( <a class="code" href="classQgsPoint.html">QgsPoint</a>( p-&gt;<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p-&gt;<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), 0 ) );<span class="comment">//dirty hack to enforce update of decorators</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>.count() - 1;</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;}</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;</div><div class="line"><a name="l03136"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73"> 3136</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">DualEdgeTriangulation::edgeOnConvexHull</a>( <span class="keywordtype">int</span> edge )</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;{</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <span class="keywordflow">return</span> ( <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 || <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>() == -1 );</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;}</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;</div><div class="line"><a name="l03141"></a><span class="lineno"><a class="line" href="classDualEdgeTriangulation.html#adbfae2d13b6a4e69d2b803e1eb8dc59a"> 3141</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classDualEdgeTriangulation.html#adbfae2d13b6a4e69d2b803e1eb8dc59a">DualEdgeTriangulation::evaluateInfluenceRegion</a>( <a class="code" href="classQgsPoint.html">QgsPoint</a> *point, <span class="keywordtype">int</span> edge, QSet&lt;int&gt; &amp;<span class="keyword">set</span> )</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;{</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  <span class="keywordflow">if</span> ( <span class="keyword">set</span>.find( edge ) == <span class="keyword">set</span>.<a class="code" href="namespaceplugin__builder.html#a94c642d0c6ed81ba611eb6996e4a0fc7">end</a>() )</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  {</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    <span class="keyword">set</span>.insert( edge );</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  }</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;  <span class="keywordflow">else</span><span class="comment">//prevent endless loops</span></div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  {</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  }</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getForced() &amp;&amp; !<a class="code" href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">edgeOnConvexHull</a>( edge ) )</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;  {</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    <span class="comment">//test, if point is in the circle through both endpoints of edge and the endpoint of edge-&gt;dual-&gt;next-&gt;point</span></div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="namespaceMathUtils.html#adb9679ec8d078309f4c991dda20f729a">MathUtils::inCircle</a>( point, <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()], <a class="code" href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">mPointVector</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getNext()]-&gt;<a class="code" href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">getPoint</a>()] ) )</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    {</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#adbfae2d13b6a4e69d2b803e1eb8dc59a">evaluateInfluenceRegion</a>( point, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext(), <span class="keyword">set</span> );</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <a class="code" href="classDualEdgeTriangulation.html#adbfae2d13b6a4e69d2b803e1eb8dc59a">evaluateInfluenceRegion</a>( point, <a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[<a class="code" href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">mHalfEdge</a>[edge]-&gt;getDual()]-&gt;getNext()]-&gt;getNext(), <span class="keyword">set</span> );</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    }</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;  }</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;}</div><div class="ttc" id="classHalfEdge_html_ad53f54dd15afd946737ff8b4cb567a63"><div class="ttname"><a href="classHalfEdge.html#ad53f54dd15afd946737ff8b4cb567a63">HalfEdge::getBreak</a></div><div class="ttdeci">bool getBreak() const</div><div class="ttdoc">Returns, whether the HalfEdge belongs to a break line or not. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00092">HalfEdge.h:92</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_aea8d834794563c974333105d2b74ce89"><div class="ttname"><a href="classDualEdgeTriangulation.html#aea8d834794563c974333105d2b74ce89">DualEdgeTriangulation::mDecorator</a></div><div class="ttdeci">Triangulation * mDecorator</div><div class="ttdoc">Pointer to the decorator using this triangulation. It it is used directly, mDecorator equals this...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00130">DualEdgeTriangulation.h:130</a></div></div>
<div class="ttc" id="classQgsFeatureSink_html_a85446dba6f3f5d74ad85890cfdd58239acd4b5c2a6ae1868f72a80b8fce669072"><div class="ttname"><a href="classQgsFeatureSink.html#a85446dba6f3f5d74ad85890cfdd58239acd4b5c2a6ae1868f72a80b8fce669072">QgsFeatureSink::FastInsert</a></div><div class="ttdoc">Use faster inserts, at the cost of updating the passed features to reflect changes made at the provid...</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturesink_8h_source.html#l00048">qgsfeaturesink.h:48</a></div></div>
<div class="ttc" id="classQgsPoint_html_ae7c99caa3ae034dc4521fe4a09a907ea"><div class="ttname"><a href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">QgsPoint::y</a></div><div class="ttdeci">double y</div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00042">qgspoint.h:42</a></div></div>
<div class="ttc" id="classQgsGeometry_html_a4bec85aab9d4adc70c37164cb9efc526"><div class="ttname"><a href="classQgsGeometry.html#a4bec85aab9d4adc70c37164cb9efc526">QgsGeometry::fromPolylineXY</a></div><div class="ttdeci">static QgsGeometry fromPolylineXY(const QgsPolylineXY &amp;polyline)</div><div class="ttdoc">Creates a new LineString geometry from a list of QgsPointXY points. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l00169">qgsgeometry.cpp:169</a></div></div>
<div class="ttc" id="classHalfEdge_html"><div class="ttname"><a href="classHalfEdge.html">HalfEdge</a></div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00029">HalfEdge.h:29</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_ac03fcc457c8dfcad2a8b5955648b4786"><div class="ttname"><a href="classDualEdgeTriangulation.html#ac03fcc457c8dfcad2a8b5955648b4786">DualEdgeTriangulation::setBreakEdgeColor</a></div><div class="ttdeci">void setBreakEdgeColor(int r, int g, int b) override</div><div class="ttdoc">Sets the color of the breaklines. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01525">DualEdgeTriangulation.cpp:1525</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_aa8f9c8a36e297b87d2bcaf1c8794a0c9"><div class="ttname"><a href="classDualEdgeTriangulation.html#aa8f9c8a36e297b87d2bcaf1c8794a0c9">DualEdgeTriangulation::triangulatePolygon</a></div><div class="ttdeci">void triangulatePolygon(QList&lt; int &gt; *poly, QList&lt; int &gt; *free, int mainedge)</div><div class="ttdoc">Divides a polygon in a triangle and two polygons and calls itself recursively for these two polygons...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l02351">DualEdgeTriangulation.cpp:2351</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a17653c0cbe5d0cba5ea26b8f3b09d92b"><div class="ttname"><a href="classDualEdgeTriangulation.html#a17653c0cbe5d0cba5ea26b8f3b09d92b">DualEdgeTriangulation::getOppositePoint</a></div><div class="ttdeci">int getOppositePoint(int p1, int p2) override</div><div class="ttdoc">Returns the number of the point opposite to the triangle points p1, p2 (which have to be on a halfedg...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00856">DualEdgeTriangulation.cpp:856</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_aeafdc43102c41312926560ac3a42c2b1"><div class="ttname"><a href="classDualEdgeTriangulation.html#aeafdc43102c41312926560ac3a42c2b1">DualEdgeTriangulation::baseEdgeOfPoint</a></div><div class="ttdeci">int baseEdgeOfPoint(int point)</div><div class="ttdoc">Returns the number of an edge which points to the point with number &amp;#39;point&amp;#39; or -1 if there is an erro...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00372">DualEdgeTriangulation.cpp:372</a></div></div>
<div class="ttc" id="classHalfEdge_html_a833ef913e7f57c0cd0164e49b8f05a53"><div class="ttname"><a href="classHalfEdge.html#a833ef913e7f57c0cd0164e49b8f05a53">HalfEdge::getPoint</a></div><div class="ttdeci">int getPoint() const</div><div class="ttdoc">Returns the number of the point at which this HalfEdge points. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00087">HalfEdge.h:87</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_aa15e9d3dfe9d1dd651e226d27c3af386"><div class="ttname"><a href="classDualEdgeTriangulation.html#aa15e9d3dfe9d1dd651e226d27c3af386">DualEdgeTriangulation::splitHalfEdge</a></div><div class="ttdeci">int splitHalfEdge(int edge, float position)</div><div class="ttdoc">Inserts a new point on the halfedge with number &amp;#39;edge&amp;#39;. The position can have a value from 0 to 1 (e...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l03081">DualEdgeTriangulation.cpp:3081</a></div></div>
<div class="ttc" id="classQgsPoint_html_acf221ee34a130f9e7f24476401f29d4e"><div class="ttname"><a href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">QgsPoint::setZ</a></div><div class="ttdeci">void setZ(double z)</div><div class="ttdoc">Sets the point&amp;#39;s z-coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00216">qgspoint.h:216</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a8947daf2ee4a521c02f986faa0b06044"><div class="ttname"><a href="classDualEdgeTriangulation.html#a8947daf2ee4a521c02f986faa0b06044">DualEdgeTriangulation::insertEdge</a></div><div class="ttdeci">unsigned int insertEdge(int dual, int next, int point, bool mbreak, bool forced)</div><div class="ttdoc">Inserts an edge and makes sure, everything is OK with the storage of the edge. The number of the Half...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01132">DualEdgeTriangulation.cpp:1132</a></div></div>
<div class="ttc" id="qgslogger_8h_html_ab273942cfb1b76ef0a5dafe6ed64fe23"><div class="ttname"><a href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a></div><div class="ttdeci">#define QgsDebugMsg(str)</div><div class="ttdef"><b>Definition:</b> <a href="qgslogger_8h_source.html#l00038">qgslogger.h:38</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a0d72af972737eb3e82570f6fb93a0735"><div class="ttname"><a href="classDualEdgeTriangulation.html#a0d72af972737eb3e82570f6fb93a0735">DualEdgeTriangulation::mTwiceInsPoint</a></div><div class="ttdeci">int mTwiceInsPoint</div><div class="ttdoc">If a point has been inserted twice, its number is stored in this member. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00158">DualEdgeTriangulation.h:158</a></div></div>
<div class="ttc" id="classQgsPointXY_html"><div class="ttname"><a href="classQgsPointXY.html">QgsPointXY</a></div><div class="ttdoc">A class to represent a 2D point. </div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00043">qgspointxy.h:43</a></div></div>
<div class="ttc" id="classQgsFeatureSink_html"><div class="ttname"><a href="classQgsFeatureSink.html">QgsFeatureSink</a></div><div class="ttdoc">An interface for objects which accept features via addFeature(s) methods. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturesink_8h_source.html#l00033">qgsfeaturesink.h:33</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_acdddaab0f0c9e5719ef2928769b904a4"><div class="ttname"><a href="classDualEdgeTriangulation.html#acdddaab0f0c9e5719ef2928769b904a4">DualEdgeTriangulation::getPoint</a></div><div class="ttdeci">QgsPoint * getPoint(int i) const override</div><div class="ttdoc">Draws the points, edges and the forced lines. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00204">DualEdgeTriangulation.h:204</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a915fb044f857c0893fb38ca3fe5d6e5a"><div class="ttname"><a href="classDualEdgeTriangulation.html#a915fb044f857c0893fb38ca3fe5d6e5a">DualEdgeTriangulation::halfEdgeBBoxTest</a></div><div class="ttdeci">bool halfEdgeBBoxTest(int edge, double xlowleft, double ylowleft, double xupright, double yupright) const</div><div class="ttdoc">Tests, if the bounding box of the halfedge with index i intersects the specified bounding box...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00212">DualEdgeTriangulation.h:212</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a7214aec389a9cebf743f40f825878306"><div class="ttname"><a href="classDualEdgeTriangulation.html#a7214aec389a9cebf743f40f825878306">DualEdgeTriangulation::yMin</a></div><div class="ttdeci">double yMin</div><div class="ttdoc">Y-coordinate of the lower left corner of the bounding box. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00110">DualEdgeTriangulation.h:110</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a2347bf831fea72b60243df7ee48c73af"><div class="ttname"><a href="classDualEdgeTriangulation.html#a2347bf831fea72b60243df7ee48c73af">DualEdgeTriangulation::calcPoint</a></div><div class="ttdeci">bool calcPoint(double x, double y, QgsPoint &amp;result) override</div><div class="ttdoc">Calculates x-, y and z-value of the point on the surface and assigns it to &amp;#39;result&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00634">DualEdgeTriangulation.cpp:634</a></div></div>
<div class="ttc" id="namespaceMathUtils_html_a719b1be5d117dd4373e372e7923a8c65"><div class="ttname"><a href="namespaceMathUtils.html#a719b1be5d117dd4373e372e7923a8c65">MathUtils::lineIntersection</a></div><div class="ttdeci">bool ANALYSIS_EXPORT lineIntersection(QgsPoint *p1, QgsPoint *p2, QgsPoint *p3, QgsPoint *p4)</div><div class="ttdoc">Returns true, if line1 (p1 to p2) and line2 (p3 to p4) intersect. If the lines have an endpoint in co...</div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00311">MathUtils.cpp:311</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a53f45d11a3699fc664d9d327d9838d91"><div class="ttname"><a href="classDualEdgeTriangulation.html#a53f45d11a3699fc664d9d327d9838d91">DualEdgeTriangulation::getNumberOfPoints</a></div><div class="ttdeci">int getNumberOfPoints() const override</div><div class="ttdoc">Returns the number of points. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00199">DualEdgeTriangulation.h:199</a></div></div>
<div class="ttc" id="classQgsFeature_html_a0075d1f9c830d62c8fda6b843c307dd8"><div class="ttname"><a href="classQgsFeature.html#a0075d1f9c830d62c8fda6b843c307dd8">QgsFeature::setAttribute</a></div><div class="ttdeci">bool setAttribute(int field, const QVariant &amp;attr)</div><div class="ttdoc">Set an attribute&amp;#39;s value by field index. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00204">qgsfeature.cpp:204</a></div></div>
<div class="ttc" id="classQgsInterpolator_html_a8e8d0a3f66caf3cbf844ddf8baf67f2f"><div class="ttname"><a href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2f">QgsInterpolator::SourceType</a></div><div class="ttdeci">SourceType</div><div class="ttdoc">Describes the type of input data. </div><div class="ttdef"><b>Definition:</b> <a href="qgsinterpolator_8h_source.html#l00068">qgsinterpolator.h:68</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a4b0d932cc9904abc8563a5c49e7a7924"><div class="ttname"><a href="classDualEdgeTriangulation.html#a4b0d932cc9904abc8563a5c49e7a7924">DualEdgeTriangulation::addLine</a></div><div class="ttdeci">void addLine(const QVector&lt; QgsPoint &gt; &amp;points, QgsInterpolator::SourceType lineType) override</div><div class="ttdoc">Adds a line (e.g. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00069">DualEdgeTriangulation.cpp:69</a></div></div>
<div class="ttc" id="classQgsFeature_html"><div class="ttname"><a href="classQgsFeature.html">QgsFeature</a></div><div class="ttdoc">The feature class encapsulates a single feature including its id, geometry and a list of field/values...</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00062">qgsfeature.h:62</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_ac14332c3e9c05676da197bb45e733401"><div class="ttname"><a href="classDualEdgeTriangulation.html#ac14332c3e9c05676da197bb45e733401">DualEdgeTriangulation::xMax</a></div><div class="ttdeci">double xMax</div><div class="ttdoc">X-coordinate of the upper right corner of the bounding box. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00104">DualEdgeTriangulation.h:104</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a0a120e3e0d1554e8eb52bdc1afe1e6f1"><div class="ttname"><a href="classDualEdgeTriangulation.html#a0a120e3e0d1554e8eb52bdc1afe1e6f1">DualEdgeTriangulation::doSwap</a></div><div class="ttdeci">void doSwap(unsigned int edge, unsigned int recursiveDeep)</div><div class="ttdoc">Swaps &amp;#39;edge&amp;#39; and test recursively for other swaps (delaunay criterion) </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00682">DualEdgeTriangulation.cpp:682</a></div></div>
<div class="ttc" id="namespaceMathUtils_html_a19ff746de07404e129026ba0f8f583b0"><div class="ttname"><a href="namespaceMathUtils.html#a19ff746de07404e129026ba0f8f583b0">MathUtils::inDiametral</a></div><div class="ttdeci">bool ANALYSIS_EXPORT inDiametral(QgsPoint *p1, QgsPoint *p2, QgsPoint *point)</div><div class="ttdoc">Tests, whether &amp;#39;point&amp;#39; is inside the diametral circle through &amp;#39;p1&amp;#39; and &amp;#39;p2&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00266">MathUtils.cpp:266</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a02cdee6c119b5e65bb24a629b6d63677"><div class="ttname"><a href="classDualEdgeTriangulation.html#a02cdee6c119b5e65bb24a629b6d63677">DualEdgeTriangulation::mUnstableEdge</a></div><div class="ttdeci">unsigned int mUnstableEdge</div><div class="ttdoc">If an instability occurs in &amp;#39;baseEdgeOfTriangle&amp;#39;, mUnstableEdge is set to the value of the current ed...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00156">DualEdgeTriangulation.h:156</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_af55e1d9edda43c789ac4db15d2fabca4"><div class="ttname"><a href="classDualEdgeTriangulation.html#af55e1d9edda43c789ac4db15d2fabca4">DualEdgeTriangulation::checkSwap</a></div><div class="ttdeci">bool checkSwap(unsigned int edge, unsigned int recursiveDeep)</div><div class="ttdoc">Checks, if &amp;#39;edge&amp;#39; has to be swapped because of the empty circle criterion. If so, doSwap(...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00647">DualEdgeTriangulation.cpp:647</a></div></div>
<div class="ttc" id="namespaceMathUtils_html_a54d06f819763561d0b251e1b1151dfc4"><div class="ttname"><a href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a></div><div class="ttdeci">double ANALYSIS_EXPORT angle(QgsPoint *p1, QgsPoint *p2, QgsPoint *p3, QgsPoint *p4)</div><div class="ttdoc">Calculates the angle between two segments (in 2 dimension, z-values are ignored) </div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00786">MathUtils.cpp:786</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a4484215f19577ad8cc8bb99de5d57c35"><div class="ttname"><a href="classDualEdgeTriangulation.html#a4484215f19577ad8cc8bb99de5d57c35">DualEdgeTriangulation::getTriangle</a></div><div class="ttdeci">bool getTriangle(double x, double y, QgsPoint &amp;p1, int &amp;n1, QgsPoint &amp;p2, int &amp;n2, QgsPoint &amp;p3, int &amp;n3) override</div><div class="ttdoc">Finds out in which triangle the point with coordinates x and y is and assigns the numbers of the vert...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00926">DualEdgeTriangulation.cpp:926</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a7183b661e2cf5e12c06fa3ed252c5197"><div class="ttname"><a href="classDualEdgeTriangulation.html#a7183b661e2cf5e12c06fa3ed252c5197">DualEdgeTriangulation::doOnlySwap</a></div><div class="ttdeci">void doOnlySwap(unsigned int edge)</div><div class="ttdoc">Swaps &amp;#39;edge&amp;#39; and does no recursiv testing. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00664">DualEdgeTriangulation.cpp:664</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a16538ec1a8fac7a804b9afab9675cb60"><div class="ttname"><a href="classDualEdgeTriangulation.html#a16538ec1a8fac7a804b9afab9675cb60">DualEdgeTriangulation::mHalfEdge</a></div><div class="ttdeci">QVector&lt; HalfEdge * &gt; mHalfEdge</div><div class="ttdoc">Stores pointers to the HalfEdges. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00118">DualEdgeTriangulation.h:118</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a568b90457b069c484301581a65223c79"><div class="ttname"><a href="classDualEdgeTriangulation.html#a568b90457b069c484301581a65223c79">DualEdgeTriangulation::setForcedCrossBehavior</a></div><div class="ttdeci">void setForcedCrossBehavior(Triangulation::ForcedCrossBehavior b) override</div><div class="ttdoc">Sets the behavior of the triangulation in case of crossing forced lines. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01510">DualEdgeTriangulation.cpp:1510</a></div></div>
<div class="ttc" id="classQgsFeedback_html"><div class="ttname"><a href="classQgsFeedback.html">QgsFeedback</a></div><div class="ttdoc">Base class for feedback objects to be used for cancelation of something running in a worker thread...</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeedback_8h_source.html#l00044">qgsfeedback.h:44</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_abf7f07cfc4c07060141f7634229a7781"><div class="ttname"><a href="classDualEdgeTriangulation.html#abf7f07cfc4c07060141f7634229a7781">DualEdgeTriangulation::pointInside</a></div><div class="ttdeci">bool pointInside(double x, double y) override</div><div class="ttdoc">Returns true, if the point with coordinates x and y is inside the convex hull and false otherwise...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l02488">DualEdgeTriangulation.cpp:2488</a></div></div>
<div class="ttc" id="DualEdgeTriangulation_8cpp_html_abf1c67e1c2b21ae37f6f0f64f09af8b9"><div class="ttname"><a href="DualEdgeTriangulation_8cpp.html#abf1c67e1c2b21ae37f6f0f64f09af8b9">leftOfTresh</a></div><div class="ttdeci">double leftOfTresh</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00026">DualEdgeTriangulation.cpp:26</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_acafec9bde50fbb251d38e6c946fc919b"><div class="ttname"><a href="classDualEdgeTriangulation.html#acafec9bde50fbb251d38e6c946fc919b">DualEdgeTriangulation::setEdgeColor</a></div><div class="ttdeci">void setEdgeColor(int r, int g, int b) override</div><div class="ttdoc">Sets the color of the normal edges. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01515">DualEdgeTriangulation.cpp:1515</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a78c1ced446bc174f86d2f437c517ec38"><div class="ttname"><a href="classDualEdgeTriangulation.html#a78c1ced446bc174f86d2f437c517ec38">DualEdgeTriangulation::setTriangleInterpolator</a></div><div class="ttdeci">void setTriangleInterpolator(TriangleInterpolator *interpolator) override</div><div class="ttdoc">Sets an interpolator object. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01530">DualEdgeTriangulation.cpp:1530</a></div></div>
<div class="ttc" id="classVector3D_html"><div class="ttname"><a href="classVector3D.html">Vector3D</a></div><div class="ttdoc">Class Vector3D represents a 3D-Vector, capable to store x-,y- and z-coordinates in double values...</div><div class="ttdef"><b>Definition:</b> <a href="Vector3D_8h_source.html#l00033">Vector3D.h:33</a></div></div>
<div class="ttc" id="classTriangleInterpolator_html"><div class="ttname"><a href="classTriangleInterpolator.html">TriangleInterpolator</a></div><div class="ttdoc">This is an interface for interpolator classes for triangulations. </div><div class="ttdef"><b>Definition:</b> <a href="TriangleInterpolator_8h_source.html#l00031">TriangleInterpolator.h:31</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a38fdc3c64b512344ff7870aa27869a0e"><div class="ttname"><a href="classDualEdgeTriangulation.html#a38fdc3c64b512344ff7870aa27869a0e">DualEdgeTriangulation::yMax</a></div><div class="ttdeci">double yMax</div><div class="ttdoc">Y-coordinate of the upper right corner of the bounding box. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00108">DualEdgeTriangulation.h:108</a></div></div>
<div class="ttc" id="classQgsFeature_html_a4d705310b40a69d0b4aefe9515229455"><div class="ttname"><a href="classQgsFeature.html#a4d705310b40a69d0b4aefe9515229455">QgsFeature::initAttributes</a></div><div class="ttdeci">void initAttributes(int fieldCount)</div><div class="ttdoc">Initialize this feature with the given number of fields. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00195">qgsfeature.cpp:195</a></div></div>
<div class="ttc" id="qgsvectorfilewriter_8h_html"><div class="ttname"><a href="qgsvectorfilewriter_8h.html">qgsvectorfilewriter.h</a></div></div>
<div class="ttc" id="classHalfEdge_html_a0dd90a4395ddb317c1f6b89f07ae32e6"><div class="ttname"><a href="classHalfEdge.html#a0dd90a4395ddb317c1f6b89f07ae32e6">HalfEdge::getForced</a></div><div class="ttdeci">bool getForced() const</div><div class="ttdoc">Returns, whether the HalfEdge belongs to a constrained edge or not. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00097">HalfEdge.h:97</a></div></div>
<div class="ttc" id="classTriangleInterpolator_html_a365cd0197b8cb48e56150f505a5cd925"><div class="ttname"><a href="classTriangleInterpolator.html#a365cd0197b8cb48e56150f505a5cd925">TriangleInterpolator::calcPoint</a></div><div class="ttdeci">virtual bool calcPoint(double x, double y, QgsPoint &amp;result SIP_OUT)=0</div><div class="ttdoc">Performs a linear interpolation in a triangle and assigns the x-,y- and z-coordinates to point...</div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_ae9267332186ab8ba93677055299aef73"><div class="ttname"><a href="classDualEdgeTriangulation.html#ae9267332186ab8ba93677055299aef73">DualEdgeTriangulation::edgeOnConvexHull</a></div><div class="ttdeci">bool edgeOnConvexHull(int edge)</div><div class="ttdoc">Returns true, if a half edge is on the convex hull and false otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l03136">DualEdgeTriangulation.cpp:3136</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_abecc4c1681668112d713355926b06f55"><div class="ttname"><a href="classDualEdgeTriangulation.html#abecc4c1681668112d713355926b06f55">DualEdgeTriangulation::mForcedEdgeColor</a></div><div class="ttdeci">QColor mForcedEdgeColor</div><div class="ttdoc">Color to paint the forced edges. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00126">DualEdgeTriangulation.h:126</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_adbfae2d13b6a4e69d2b803e1eb8dc59a"><div class="ttname"><a href="classDualEdgeTriangulation.html#adbfae2d13b6a4e69d2b803e1eb8dc59a">DualEdgeTriangulation::evaluateInfluenceRegion</a></div><div class="ttdeci">void evaluateInfluenceRegion(QgsPoint *point, int edge, QSet&lt; int &gt; &amp;set)</div><div class="ttdoc">Function needed for the ruppert algorithm. Tests, if point is in the circle through both endpoints of...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l03141">DualEdgeTriangulation.cpp:3141</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a69cb169d099922de5092b3d52750f3c6"><div class="ttname"><a href="classDualEdgeTriangulation.html#a69cb169d099922de5092b3d52750f3c6">DualEdgeTriangulation::swapMinAngle</a></div><div class="ttdeci">double swapMinAngle(int edge) const</div><div class="ttdoc">Calculates the minimum angle, which would be present, if the specified halfedge would be swapped...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l03041">DualEdgeTriangulation.cpp:3041</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a1bac7ab7a1af4705be6dff8c666d0d4d"><div class="ttname"><a href="classDualEdgeTriangulation.html#a1bac7ab7a1af4705be6dff8c666d0d4d">DualEdgeTriangulation::saveTriangulation</a></div><div class="ttdeci">bool saveTriangulation(QgsFeatureSink *sink, QgsFeedback *feedback=nullptr) const override</div><div class="ttdoc">Saves the triangulation features to a feature sink. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l02978">DualEdgeTriangulation.cpp:2978</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_acd489c0efecba6bcc6f20a139755f38d"><div class="ttname"><a href="classDualEdgeTriangulation.html#acd489c0efecba6bcc6f20a139755f38d">DualEdgeTriangulation::addPoint</a></div><div class="ttdeci">int addPoint(const QgsPoint &amp;p) override</div><div class="ttdoc">Adds a point to the triangulation. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00101">DualEdgeTriangulation.cpp:101</a></div></div>
<div class="ttc" id="classQgsFeatureSink_html_aef4fbd5b3c521770ea2e7acda0addc05"><div class="ttname"><a href="classQgsFeatureSink.html#aef4fbd5b3c521770ea2e7acda0addc05">QgsFeatureSink::addFeature</a></div><div class="ttdeci">virtual bool addFeature(QgsFeature &amp;feature, QgsFeatureSink::Flags flags=nullptr)</div><div class="ttdoc">Adds a single feature to the sink. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturesink_8cpp_source.html#l00020">qgsfeaturesink.cpp:20</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a866d2e64dc709852e7f5028365803c95"><div class="ttname"><a href="classDualEdgeTriangulation.html#a866d2e64dc709852e7f5028365803c95">DualEdgeTriangulation::~DualEdgeTriangulation</a></div><div class="ttdeci">~DualEdgeTriangulation() override</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00028">DualEdgeTriangulation.cpp:28</a></div></div>
<div class="ttc" id="namespaceMathUtils_html_a87493cf9ae1ae89975010b8f9350a22a"><div class="ttname"><a href="namespaceMathUtils.html#a87493cf9ae1ae89975010b8f9350a22a">MathUtils::circumcenter</a></div><div class="ttdeci">bool ANALYSIS_EXPORT circumcenter(QgsPoint *p1, QgsPoint *p2, QgsPoint *p3, QgsPoint *result)</div><div class="ttdoc">Calculates the center of the circle passing through p1, p2 and p3. Returns true in case of success an...</div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00116">MathUtils.cpp:116</a></div></div>
<div class="ttc" id="namespaceMathUtils_html_ab01b2d45b8363e4f0fa78d380f3e039f"><div class="ttname"><a href="namespaceMathUtils.html#ab01b2d45b8363e4f0fa78d380f3e039f">MathUtils::distPointFromLine</a></div><div class="ttdeci">double ANALYSIS_EXPORT distPointFromLine(QgsPoint *thepoint, QgsPoint *p1, QgsPoint *p2)</div><div class="ttdoc">Calculates the (2 dimensional) distance from &amp;#39;thepoint&amp;#39; to the line defined by p1 and p2...</div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00201">MathUtils.cpp:201</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_af9763bb523890fb2b808fe8616c5b7ef"><div class="ttname"><a href="classDualEdgeTriangulation.html#af9763bb523890fb2b808fe8616c5b7ef">DualEdgeTriangulation::mBreakEdgeColor</a></div><div class="ttdeci">QColor mBreakEdgeColor</div><div class="ttdoc">Color to paint the breaklines. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00128">DualEdgeTriangulation.h:128</a></div></div>
<div class="ttc" id="classQgsPoint_html"><div class="ttname"><a href="classQgsPoint.html">QgsPoint</a></div><div class="ttdoc">Point geometry type, with support for z-dimension and m-values. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00037">qgspoint.h:37</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a601a65827ef5a28f0622c2d9c2a1b3c4"><div class="ttname"><a href="classDualEdgeTriangulation.html#a601a65827ef5a28f0622c2d9c2a1b3c4">DualEdgeTriangulation::insertForcedSegment</a></div><div class="ttdeci">int insertForcedSegment(int p1, int p2, QgsInterpolator::SourceType segmentType)</div><div class="ttdoc">Inserts a forced segment between the points with the numbers p1 and p2 into the triangulation and ret...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01140">DualEdgeTriangulation.cpp:1140</a></div></div>
<div class="ttc" id="classHalfEdge_html_ad9d2f1a0e0c594f59d27ec26b34a59cf"><div class="ttname"><a href="classHalfEdge.html#ad9d2f1a0e0c594f59d27ec26b34a59cf">HalfEdge::setBreak</a></div><div class="ttdeci">void setBreak(bool b)</div><div class="ttdoc">Sets the break flag. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00117">HalfEdge.h:117</a></div></div>
<div class="ttc" id="classHalfEdge_html_a6a376e082f2d76290d36c6a47f6466d0"><div class="ttname"><a href="classHalfEdge.html#a6a376e082f2d76290d36c6a47f6466d0">HalfEdge::setPoint</a></div><div class="ttdeci">void setPoint(int p)</div><div class="ttdoc">Sets the number of point at which this HalfEdge points. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00112">HalfEdge.h:112</a></div></div>
<div class="ttc" id="classHalfEdge_html_a8a433b32bd0a8aa2b463b15088cafdcf"><div class="ttname"><a href="classHalfEdge.html#a8a433b32bd0a8aa2b463b15088cafdcf">HalfEdge::getDual</a></div><div class="ttdeci">int getDual() const</div><div class="ttdoc">Returns the number of the dual HalfEdge. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00077">HalfEdge.h:77</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a6ee9820279be4eda2476efd9607881d1"><div class="ttname"><a href="classDualEdgeTriangulation.html#a6ee9820279be4eda2476efd9607881d1">DualEdgeTriangulation::mEdgeWithPoint</a></div><div class="ttdeci">unsigned int mEdgeWithPoint</div><div class="ttdoc">If an inserted point is exactly on an existing edge, &amp;#39;baseEdgeOfTriangle&amp;#39; returns -20 and sets the va...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00154">DualEdgeTriangulation.h:154</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a9f58554dd766620d20ae006ffaf9a6ff"><div class="ttname"><a href="classDualEdgeTriangulation.html#a9f58554dd766620d20ae006ffaf9a6ff">DualEdgeTriangulation::baseEdgeOfTriangle</a></div><div class="ttdeci">int baseEdgeOfTriangle(const QgsPoint &amp;point)</div><div class="ttdoc">Returns the number of a HalfEdge from a triangle in which &amp;#39;point&amp;#39; is in. If the number -10 is returne...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00444">DualEdgeTriangulation.cpp:444</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a7654aa7e5be6176e778d7e5d3065c5ba"><div class="ttname"><a href="classDualEdgeTriangulation.html#a7654aa7e5be6176e778d7e5d3065c5ba">DualEdgeTriangulation::swapPossible</a></div><div class="ttdeci">bool swapPossible(unsigned int edge)</div><div class="ttdoc">Returns true, if it is possible to swap an edge, otherwise false(concave quad or edge on (or outside)...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l02314">DualEdgeTriangulation.cpp:2314</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a2548323b00504792d8a962512ea3cf98"><div class="ttname"><a href="classDualEdgeTriangulation.html#a2548323b00504792d8a962512ea3cf98">DualEdgeTriangulation::performConsistencyTest</a></div><div class="ttdeci">void performConsistencyTest() override</div><div class="ttdoc">Performs a consistency check, remove this later. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00049">DualEdgeTriangulation.cpp:49</a></div></div>
<div class="ttc" id="classQgsPoint_html_a4faeb4afb2807bd99fa4ac9ff519d832"><div class="ttname"><a href="classQgsPoint.html#a4faeb4afb2807bd99fa4ac9ff519d832">QgsPoint::setX</a></div><div class="ttdeci">void setX(double x)</div><div class="ttdoc">Sets the point&amp;#39;s x-coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00192">qgspoint.h:192</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a5de2754deaeb1be4f990628f1c0e2695"><div class="ttname"><a href="classDualEdgeTriangulation.html#a5de2754deaeb1be4f990628f1c0e2695">DualEdgeTriangulation::mForcedCrossBehavior</a></div><div class="ttdeci">Triangulation::ForcedCrossBehavior mForcedCrossBehavior</div><div class="ttdoc">Member to store the behavior in case of crossing forced segments. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00122">DualEdgeTriangulation.h:122</a></div></div>
<div class="ttc" id="classTriangulation_html_a0d17ecf5db958ac13c7e7ed2d97168eb"><div class="ttname"><a href="classTriangulation.html#a0d17ecf5db958ac13c7e7ed2d97168eb">Triangulation::addPoint</a></div><div class="ttdeci">virtual int addPoint(const QgsPoint &amp;point)=0</div><div class="ttdoc">Adds a point to the triangulation. </div></div>
<div class="ttc" id="qgsinterpolator_8h_html"><div class="ttname"><a href="qgsinterpolator_8h.html">qgsinterpolator.h</a></div></div>
<div class="ttc" id="namespaceplugin__builder_html_a94c642d0c6ed81ba611eb6996e4a0fc7"><div class="ttname"><a href="namespaceplugin__builder.html#a94c642d0c6ed81ba611eb6996e4a0fc7">plugin_builder.end</a></div><div class="ttdeci">end</div><div class="ttdef"><b>Definition:</b> <a href="plugin__builder_8py_source.html#l00038">plugin_builder.py:38</a></div></div>
<div class="ttc" id="classQgsPoint_html_a06c93b509ad9ffc1ad8a2b0e8ef77bc3"><div class="ttname"><a href="classQgsPoint.html#a06c93b509ad9ffc1ad8a2b0e8ef77bc3">QgsPoint::setY</a></div><div class="ttdeci">void setY(double y)</div><div class="ttdoc">Sets the point&amp;#39;s y-coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00203">qgspoint.h:203</a></div></div>
<div class="ttc" id="qgsgeometry_8h_html"><div class="ttname"><a href="qgsgeometry_8h.html">qgsgeometry.h</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a928e79ac62bdd67fd586e82b785a93e6"><div class="ttname"><a href="classDualEdgeTriangulation.html#a928e79ac62bdd67fd586e82b785a93e6">DualEdgeTriangulation::mEdgeInside</a></div><div class="ttdeci">unsigned int mEdgeInside</div><div class="ttdoc">Number of an edge which does not point to the virtual point. It continuously updated for a fast searc...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00150">DualEdgeTriangulation.h:150</a></div></div>
<div class="ttc" id="classTriangulation_html_ab0d77a7723f3dec85caa69106a6df413aeaadcebf3abc9ed8808490d773ca0dc9"><div class="ttname"><a href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413aeaadcebf3abc9ed8808490d773ca0dc9">Triangulation::SnappingTypeVertex</a></div><div class="ttdoc">The second inserted forced line is snapped to the closest vertice of the first inserted forced line...</div><div class="ttdef"><b>Definition:</b> <a href="Triangulation_8h_source.html#l00044">Triangulation.h:44</a></div></div>
<div class="ttc" id="classTriangulation_html_ab0d77a7723f3dec85caa69106a6df413aa60878fb5905d503f9537994c397c5c1"><div class="ttname"><a href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413aa60878fb5905d503f9537994c397c5c1">Triangulation::InsertVertex</a></div><div class="ttdef"><b>Definition:</b> <a href="Triangulation_8h_source.html#l00046">Triangulation.h:46</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_ac7f1b349544ad42833f0069d45819051"><div class="ttname"><a href="classDualEdgeTriangulation.html#ac7f1b349544ad42833f0069d45819051">DualEdgeTriangulation::mTriangleInterpolator</a></div><div class="ttdeci">TriangleInterpolator * mTriangleInterpolator</div><div class="ttdoc">Association to an interpolator object. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00120">DualEdgeTriangulation.h:120</a></div></div>
<div class="ttc" id="classQgsInterpolator_html_a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4"><div class="ttname"><a href="classQgsInterpolator.html#a8e8d0a3f66caf3cbf844ddf8baf67f2fa94cd195b74c463cd188f613bc7a496d4">QgsInterpolator::SourceBreakLines</a></div><div class="ttdoc">Break lines. </div><div class="ttdef"><b>Definition:</b> <a href="qgsinterpolator_8h_source.html#l00072">qgsinterpolator.h:72</a></div></div>
<div class="ttc" id="namespaceMathUtils_html_adb9679ec8d078309f4c991dda20f729a"><div class="ttname"><a href="namespaceMathUtils.html#adb9679ec8d078309f4c991dda20f729a">MathUtils::inCircle</a></div><div class="ttdeci">bool ANALYSIS_EXPORT inCircle(QgsPoint *testp, QgsPoint *p1, QgsPoint *p2, QgsPoint *p3)</div><div class="ttdoc">Tests, whether &amp;#39;testp&amp;#39; is inside the circle through &amp;#39;p1&amp;#39;, &amp;#39;p2&amp;#39; and &amp;#39;p3&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00226">MathUtils.cpp:226</a></div></div>
<div class="ttc" id="qgsgeometry_8h_html_aa509befb347910684b1a14f10c62cc89"><div class="ttname"><a href="qgsgeometry_8h.html#aa509befb347910684b1a14f10c62cc89">QgsPolylineXY</a></div><div class="ttdeci">QVector&lt; QgsPointXY &gt; QgsPolylineXY</div><div class="ttdoc">Polyline as represented as a vector of two-dimensional points. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8h_source.html#l00049">qgsgeometry.h:49</a></div></div>
<div class="ttc" id="classQgsFeedback_html_a166e5fb87ddb57e86de791b14b6a6ce4"><div class="ttname"><a href="classQgsFeedback.html#a166e5fb87ddb57e86de791b14b6a6ce4">QgsFeedback::isCanceled</a></div><div class="ttdeci">bool isCanceled() const</div><div class="ttdoc">Tells whether the operation has been canceled already. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeedback_8h_source.html#l00054">qgsfeedback.h:54</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a7a0970ddd6a39bf1af490c2ba541ed6b"><div class="ttname"><a href="classDualEdgeTriangulation.html#a7a0970ddd6a39bf1af490c2ba541ed6b">DualEdgeTriangulation::calcNormal</a></div><div class="ttdeci">bool calcNormal(double x, double y, Vector3D *result) override</div><div class="ttdoc">Calculates the normal at a point on the surface. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00621">DualEdgeTriangulation.cpp:621</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a401d272d3c5ad3cf951d99ddf7ca64a0"><div class="ttname"><a href="classDualEdgeTriangulation.html#a401d272d3c5ad3cf951d99ddf7ca64a0">DualEdgeTriangulation::eliminateHorizontalTriangles</a></div><div class="ttdeci">void eliminateHorizontalTriangles() override</div><div class="ttdoc">Eliminates the horizontal triangles by swapping or by insertion of new points. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01535">DualEdgeTriangulation.cpp:1535</a></div></div>
<div class="ttc" id="MathUtils_8h_html"><div class="ttname"><a href="MathUtils_8h.html">MathUtils.h</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_af83b74b89303d099bdaa9dfdec98b0f3"><div class="ttname"><a href="classDualEdgeTriangulation.html#af83b74b89303d099bdaa9dfdec98b0f3">DualEdgeTriangulation::setForcedEdgeColor</a></div><div class="ttdeci">void setForcedEdgeColor(int r, int g, int b) override</div><div class="ttdoc">Sets the color of the forced edges. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01520">DualEdgeTriangulation.cpp:1520</a></div></div>
<div class="ttc" id="classQgsFeature_html_ae6c4c7a5c40d420c95285ce072c24307"><div class="ttname"><a href="classQgsFeature.html#ae6c4c7a5c40d420c95285ce072c24307">QgsFeature::setGeometry</a></div><div class="ttdeci">void setGeometry(const QgsGeometry &amp;geometry)</div><div class="ttdoc">Set the feature&amp;#39;s geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00137">qgsfeature.cpp:137</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_adbc8f25c60034f6ccdcea5e63ac69cc2"><div class="ttname"><a href="classDualEdgeTriangulation.html#adbc8f25c60034f6ccdcea5e63ac69cc2">DualEdgeTriangulation::getSurroundingTriangles</a></div><div class="ttdeci">QList&lt; int &gt; getSurroundingTriangles(int pointno) override</div><div class="ttdoc">Returns a pointer to a value list with the information of the triangles surrounding (counterclockwise...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l00890">DualEdgeTriangulation.cpp:890</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a8640d2dfe3eb9e3ad3af5e1d1dfb3043"><div class="ttname"><a href="classDualEdgeTriangulation.html#a8640d2dfe3eb9e3ad3af5e1d1dfb3043">DualEdgeTriangulation::MAX_BASE_ITERATIONS</a></div><div class="ttdeci">static const int MAX_BASE_ITERATIONS</div><div class="ttdoc">Threshold for the leftOfTest to handle numerical instabilities. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00138">DualEdgeTriangulation.h:138</a></div></div>
<div class="ttc" id="classHalfEdge_html_a9419d54f966e368014fbc09243cc1068"><div class="ttname"><a href="classHalfEdge.html#a9419d54f966e368014fbc09243cc1068">HalfEdge::setDual</a></div><div class="ttdeci">void setDual(int d)</div><div class="ttdoc">Sets the number of the dual HalfEdge. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00102">HalfEdge.h:102</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_afbe27941693c40f0abb8757d7fd1a229"><div class="ttname"><a href="classDualEdgeTriangulation.html#afbe27941693c40f0abb8757d7fd1a229">DualEdgeTriangulation::mPointVector</a></div><div class="ttdeci">QVector&lt; QgsPoint * &gt; mPointVector</div><div class="ttdoc">Stores pointers to all points in the triangulations (including the points contained in the lines) ...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00114">DualEdgeTriangulation.h:114</a></div></div>
<div class="ttc" id="DualEdgeTriangulation_8h_html"><div class="ttname"><a href="DualEdgeTriangulation_8h.html">DualEdgeTriangulation.h</a></div></div>
<div class="ttc" id="classQgsPoint_html_a9fac72ae2899169a3ee353fb62d63139"><div class="ttname"><a href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">QgsPoint::z</a></div><div class="ttdeci">double z</div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00043">qgspoint.h:43</a></div></div>
<div class="ttc" id="classHalfEdge_html_ab40691fe75426707e06b9d876456e6b0"><div class="ttname"><a href="classHalfEdge.html#ab40691fe75426707e06b9d876456e6b0">HalfEdge::setForced</a></div><div class="ttdeci">void setForced(bool f)</div><div class="ttdoc">Sets the forced flag. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00122">HalfEdge.h:122</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a1d008997130061213c4146faef72dcd5"><div class="ttname"><a href="classDualEdgeTriangulation.html#a1d008997130061213c4146faef72dcd5">DualEdgeTriangulation::mEdgeColor</a></div><div class="ttdeci">QColor mEdgeColor</div><div class="ttdoc">Color to paint the normal edges. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00124">DualEdgeTriangulation.h:124</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_ab97d758efb6c27c6fef1c8e2a620ec6c"><div class="ttname"><a href="classDualEdgeTriangulation.html#ab97d758efb6c27c6fef1c8e2a620ec6c">DualEdgeTriangulation::xMin</a></div><div class="ttdeci">double xMin</div><div class="ttdoc">X-coordinate of the lower left corner of the bounding box. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00106">DualEdgeTriangulation.h:106</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a8d7c0e7de6a7c4c8287e6712bc6f5aa9"><div class="ttname"><a href="classDualEdgeTriangulation.html#a8d7c0e7de6a7c4c8287e6712bc6f5aa9">DualEdgeTriangulation::ruppertRefinement</a></div><div class="ttdeci">void ruppertRefinement() override</div><div class="ttdoc">Adds points to make the triangles better shaped (algorithm of ruppert) </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l01624">DualEdgeTriangulation.cpp:1624</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a4013929acfbdef26db98a064d72092be"><div class="ttname"><a href="classDualEdgeTriangulation.html#a4013929acfbdef26db98a064d72092be">DualEdgeTriangulation::getPointsAroundEdge</a></div><div class="ttdeci">QList&lt; int &gt; * getPointsAroundEdge(double x, double y) override</div><div class="ttdoc">Returns a value list with the numbers of the four points, which would be affected by an edge swap...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l02915">DualEdgeTriangulation.cpp:2915</a></div></div>
<div class="ttc" id="classTriangulation_html_ab0d77a7723f3dec85caa69106a6df413"><div class="ttname"><a href="classTriangulation.html#ab0d77a7723f3dec85caa69106a6df413">Triangulation::ForcedCrossBehavior</a></div><div class="ttdeci">ForcedCrossBehavior</div><div class="ttdoc">Enumeration describing the behavior, if two forced lines cross. </div><div class="ttdef"><b>Definition:</b> <a href="Triangulation_8h_source.html#l00042">Triangulation.h:42</a></div></div>
<div class="ttc" id="classHalfEdge_html_a64bc7cfbed0c380d1db25c1e0c93f7cc"><div class="ttname"><a href="classHalfEdge.html#a64bc7cfbed0c380d1db25c1e0c93f7cc">HalfEdge::setNext</a></div><div class="ttdeci">void setNext(int n)</div><div class="ttdoc">Sets the number of the next HalfEdge. </div><div class="ttdef"><b>Definition:</b> <a href="HalfEdge_8h_source.html#l00107">HalfEdge.h:107</a></div></div>
<div class="ttc" id="classTriangulation_html_a51951fbe164a241e8d1e64051c666b30"><div class="ttname"><a href="classTriangulation.html#a51951fbe164a241e8d1e64051c666b30">Triangulation::calcPoint</a></div><div class="ttdeci">virtual bool calcPoint(double x, double y, QgsPoint &amp;result)=0</div><div class="ttdoc">Calculates x-, y and z-value of the point on the surface and assigns it to &amp;#39;result&amp;#39;. </div></div>
<div class="ttc" id="namespaceMathUtils_html_a9e4901a73d9797883a106197fca1228e"><div class="ttname"><a href="namespaceMathUtils.html#a9e4901a73d9797883a106197fca1228e">MathUtils::leftOf</a></div><div class="ttdeci">double ANALYSIS_EXPORT leftOf(const QgsPoint &amp;thepoint, const QgsPoint *p1, const QgsPoint *p2)</div><div class="ttdoc">Returns whether &amp;#39;thepoint&amp;#39; is left or right of the line from &amp;#39;p1&amp;#39; to &amp;#39;p2&amp;#39;. Negativ values mean left a...</div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00292">MathUtils.cpp:292</a></div></div>
<div class="ttc" id="classTriangleInterpolator_html_a2d80beff61d25019996536fa04b063a2"><div class="ttname"><a href="classTriangleInterpolator.html#a2d80beff61d25019996536fa04b063a2">TriangleInterpolator::calcNormVec</a></div><div class="ttdeci">virtual bool calcNormVec(double x, double y, Vector3D *result SIP_OUT)=0</div><div class="ttdoc">Calculates the normal vector and assigns it to vec. </div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a5de235d7a4df5e817a43847026248949"><div class="ttname"><a href="classDualEdgeTriangulation.html#a5de235d7a4df5e817a43847026248949">DualEdgeTriangulation::mEdgeOutside</a></div><div class="ttdeci">unsigned int mEdgeOutside</div><div class="ttdoc">Number of an edge on the outside of the convex hull. It is updated in method &amp;#39;baseEdgeOfTriangle&amp;#39; to ...</div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8h_source.html#l00152">DualEdgeTriangulation.h:152</a></div></div>
<div class="ttc" id="classDualEdgeTriangulation_html_a44f05630f5314513989291c5320ce6de"><div class="ttname"><a href="classDualEdgeTriangulation.html#a44f05630f5314513989291c5320ce6de">DualEdgeTriangulation::swapEdge</a></div><div class="ttdeci">bool swapEdge(double x, double y) override</div><div class="ttdoc">Reads the dual edge structure of a taff file. </div><div class="ttdef"><b>Definition:</b> <a href="DualEdgeTriangulation_8cpp_source.html#l02854">DualEdgeTriangulation.cpp:2854</a></div></div>
<div class="ttc" id="qgslogger_8h_html"><div class="ttname"><a href="qgslogger_8h.html">qgslogger.h</a></div></div>
<div class="ttc" id="classQgsPoint_html_aab5c56479f3f9131deb1998a0768ea03"><div class="ttname"><a href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">QgsPoint::x</a></div><div class="ttdeci">double x</div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00041">qgspoint.h:41</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 21 2018 11:45:00 for QGIS API Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
