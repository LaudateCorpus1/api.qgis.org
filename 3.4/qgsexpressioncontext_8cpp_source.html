<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QGIS API Documentation: /tmp/buildd/qgis-3.4.3+14stretch/src/core/qgsexpressioncontext.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="api_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QGIS API Documentation
   &#160;<span id="projectnumber">3.4.3-Madeira (2f64a3c)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qgsexpressioncontext.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qgsexpressioncontext_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">     qgsexpressioncontext.cpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">     ------------------------</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    Date                 : April 2015</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    Copyright            : (C) 2015 by Nyall Dawson</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    Email                : nyall dot dawson at gmail dot com</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> ***************************************************************************</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *   (at your option) any later version.                                   *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsexpressioncontext_8h.html">qgsexpressioncontext.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslogger_8h.html">qgslogger.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsexpression_8h.html">qgsexpression.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsexpressionfunction_8h.html">qgsexpressionfunction.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfields_8h.html">qgsfields.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsvectorlayer_8h.html">qgsvectorlayer.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsproject_8h.html">qgsproject.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgssymbollayerutils_8h.html">qgssymbollayerutils.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsgeometry_8h.html">qgsgeometry.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsapplication_8h.html">qgsapplication.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmapsettings_8h.html">qgsmapsettings.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmaplayerlistutils_8h.html">qgsmaplayerlistutils.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsprocessingcontext_8h.html">qgsprocessingcontext.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsprocessingalgorithm_8h.html">qgsprocessingalgorithm.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutatlas_8h.html">qgslayoutatlas.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayout_8h.html">qgslayout.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutpagecollection_8h.html">qgslayoutpagecollection.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutreportcontext_8h.html">qgslayoutreportcontext.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsexpressionutils_8h.html">qgsexpressionutils.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;QSettings&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;QDir&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#a42b0704e9b7abc58a75967f83f8237e3">QgsExpressionContext::EXPR_FIELDS</a>( QStringLiteral( <span class="stringliteral">&quot;_fields_&quot;</span> ) );</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#adedbaf735924a5be1102251a47c0e0ad">QgsExpressionContext::EXPR_ORIGINAL_VALUE</a>( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) );</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#a7574f63fed04010e6bba4efb369865c5">QgsExpressionContext::EXPR_SYMBOL_COLOR</a>( QStringLiteral( <span class="stringliteral">&quot;symbol_color&quot;</span> ) );</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#aa3093e2813b44988493bd644d7f226b5">QgsExpressionContext::EXPR_SYMBOL_ANGLE</a>( QStringLiteral( <span class="stringliteral">&quot;symbol_angle&quot;</span> ) );</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#a0061740aa2c9bbc88a2a3e3a68f082a3">QgsExpressionContext::EXPR_GEOMETRY_PART_COUNT</a>( QStringLiteral( <span class="stringliteral">&quot;geometry_part_count&quot;</span> ) );</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#a5d0e58040803fded280a64fac881545e">QgsExpressionContext::EXPR_GEOMETRY_PART_NUM</a>( QStringLiteral( <span class="stringliteral">&quot;geometry_part_num&quot;</span> ) );</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#a0558aa150d6d9ad4ebc40be54f88b051">QgsExpressionContext::EXPR_GEOMETRY_POINT_COUNT</a>( QStringLiteral( <span class="stringliteral">&quot;geometry_point_count&quot;</span> ) );</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#a11cd85ed1e3276a53aea4d5d4cfc2899">QgsExpressionContext::EXPR_GEOMETRY_POINT_NUM</a>( QStringLiteral( <span class="stringliteral">&quot;geometry_point_num&quot;</span> ) );</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#a0d2246beeb5f14f539fff912e820225f">QgsExpressionContext::EXPR_CLUSTER_SIZE</a>( QStringLiteral( <span class="stringliteral">&quot;cluster_size&quot;</span> ) );</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">const</span> QString <a class="code" href="classQgsExpressionContext.html#ae28b690c36097a1cf051e2c7f858a88b">QgsExpressionContext::EXPR_CLUSTER_COLOR</a>( QStringLiteral( <span class="stringliteral">&quot;cluster_color&quot;</span> ) );</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// QgsExpressionContextScope</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#ad6007da7679dc3b67e5b979b39566655">   56</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html#ad6007da7679dc3b67e5b979b39566655">QgsExpressionContextScope::QgsExpressionContextScope</a>( <span class="keyword">const</span> QString &amp;name )</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  : mName( name )</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a8405a61c9c74f606758dfdf6db1a43e8">   62</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html#ad6007da7679dc3b67e5b979b39566655">QgsExpressionContextScope::QgsExpressionContextScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> &amp;other )</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  : mName( other.mName )</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  , mVariables( other.mVariables )</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  , mHasFeature( other.mHasFeature )</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  , mFeature( other.mFeature )</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  QHash&lt;QString, QgsScopedExpressionFunction * &gt;::const_iterator it = other.mFunctions.constBegin();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">for</span> ( ; it != other.mFunctions.constEnd(); ++it )</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    mFunctions.insert( it.key(), it.value()-&gt;clone() );</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#ad5638bcf59e4998f7adb057802237766">   75</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> &amp;<a class="code" href="classQgsExpressionContextScope.html#ad5638bcf59e4998f7adb057802237766">QgsExpressionContextScope::operator=</a>( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> &amp;other )</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  mName = other.mName;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  mVariables = other.mVariables;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  mHasFeature = other.mHasFeature;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  mFeature = other.mFeature;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  qDeleteAll( mFunctions );</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  mFunctions.clear();</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  QHash&lt;QString, QgsScopedExpressionFunction * &gt;::const_iterator it = other.mFunctions.constBegin();</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">for</span> ( ; it != other.mFunctions.constEnd(); ++it )</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    mFunctions.insert( it.key(), it.value()-&gt;clone() );</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#af73d64fbafe3854f8fe3661022711583">   93</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html#af73d64fbafe3854f8fe3661022711583">QgsExpressionContextScope::~QgsExpressionContextScope</a>()</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  qDeleteAll( mFunctions );</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">   98</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">QgsExpressionContextScope::setVariable</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a>, <span class="keyword">const</span> QVariant &amp;value, <span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContextScope.html#ab6c05eb19a117dcddcdedbaab65bda79">isStatic</a> )</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">if</span> ( mVariables.contains( name ) )</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">StaticVariable</a> existing = mVariables.value( name );</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    existing.<a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html#ae681c2587f51b24f285be3fde68e46cd">value</a> = value;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    existing.<a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html#ab73d733059f28e401475678d7e86c474">isStatic</a> = <a class="code" href="classQgsExpressionContextScope.html#ab6c05eb19a117dcddcdedbaab65bda79">isStatic</a>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( existing );</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( name, value, <span class="keyword">false</span>, isStatic ) );</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">  113</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">QgsExpressionContextScope::addVariable</a>( <span class="keyword">const</span> <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a> &amp;<a class="code" href="classQgsExpressionContextScope.html#a72554b20e59c5aeb0f3245bf308a7f29">variable</a> )</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  mVariables.insert( variable.<a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html#ab81ef51e91ebf5707cf19afdc88165b0">name</a>, variable );</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a7a8f163527f722946d7252d1e626b852">  118</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContextScope.html#a7a8f163527f722946d7252d1e626b852">QgsExpressionContextScope::removeVariable</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a> )</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">return</span> mVariables.remove( name ) &gt; 0;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a18a077e76b13a235bf3e0e73cb45da73">  123</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContextScope.html#a18a077e76b13a235bf3e0e73cb45da73">QgsExpressionContextScope::hasVariable</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a> )<span class="keyword"> const</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> mVariables.contains( name );</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a72554b20e59c5aeb0f3245bf308a7f29">  128</a></span>&#160;QVariant <a class="code" href="classQgsExpressionContextScope.html#a72554b20e59c5aeb0f3245bf308a7f29">QgsExpressionContextScope::variable</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a> )<span class="keyword"> const</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContextScope.html#a18a077e76b13a235bf3e0e73cb45da73">hasVariable</a>( name ) ? mVariables.value( name ).value : QVariant();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#af79f7dbeadc037cb98a4bab165449dd4">  133</a></span>&#160;QStringList <a class="code" href="classQgsExpressionContextScope.html#af79f7dbeadc037cb98a4bab165449dd4">QgsExpressionContextScope::variableNames</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  QStringList names = mVariables.keys();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">return</span> names;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keywordtype">bool</span> QgsExpressionContextScope::variableNameSort( <span class="keyword">const</span> QString &amp;a, <span class="keyword">const</span> QString &amp;b )</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> QString::localeAwareCompare( a, b ) &lt; 0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keyword">class </span>QgsExpressionContextVariableCompare</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">explicit</span> QgsExpressionContextVariableCompare( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> &amp;scope )</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      : mScope( scope )</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {  }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">bool</span> operator()( <span class="keyword">const</span> QString &amp;a, <span class="keyword">const</span> QString &amp;b )<span class="keyword"> const</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordtype">bool</span> aReadOnly = mScope.isReadOnly( a );</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordtype">bool</span> bReadOnly = mScope.isReadOnly( b );</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">if</span> ( aReadOnly != bReadOnly )</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> aReadOnly;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">return</span> QString::localeAwareCompare( a, b ) &lt; 0;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> &amp;mScope;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;};</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#abfe4e7c94e08a8a5fbf6287cd02bf547">  166</a></span>&#160;QStringList <a class="code" href="classQgsExpressionContextScope.html#abfe4e7c94e08a8a5fbf6287cd02bf547">QgsExpressionContextScope::filteredVariableNames</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  QStringList allVariables = mVariables.keys();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  QStringList filtered;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#a72554b20e59c5aeb0f3245bf308a7f29">variable</a>, allVariables )</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> ( variable.startsWith( <span class="charliteral">&#39;_&#39;</span> ) )</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    filtered &lt;&lt; <a class="code" href="classQgsExpressionContextScope.html#a72554b20e59c5aeb0f3245bf308a7f29">variable</a>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  QgsExpressionContextVariableCompare cmp( *<span class="keyword">this</span> );</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  std::sort( filtered.begin(), filtered.end(), cmp );</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">return</span> filtered;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a8a83d6fd5908ddfe60bf5155dfe54595">  183</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContextScope.html#a8a83d6fd5908ddfe60bf5155dfe54595">QgsExpressionContextScope::isReadOnly</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a> )<span class="keyword"> const</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContextScope.html#a18a077e76b13a235bf3e0e73cb45da73">hasVariable</a>( name ) ? mVariables.value( name ).readOnly : <span class="keyword">false</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#ab6c05eb19a117dcddcdedbaab65bda79">  188</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContextScope.html#ab6c05eb19a117dcddcdedbaab65bda79">QgsExpressionContextScope::isStatic</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a> )<span class="keyword"> const</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContextScope.html#a18a077e76b13a235bf3e0e73cb45da73">hasVariable</a>( name ) ? mVariables.value( name ).isStatic : <span class="keyword">false</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a20172dc1c42ca6fbdc55229707c933de">  193</a></span>&#160;QString <a class="code" href="classQgsExpressionContextScope.html#a20172dc1c42ca6fbdc55229707c933de">QgsExpressionContextScope::description</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a> )<span class="keyword"> const</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContextScope.html#a18a077e76b13a235bf3e0e73cb45da73">hasVariable</a>( name ) ? mVariables.value( name ).description : QString();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a9ec485950cab154b786e98f2310d298d">  198</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContextScope.html#a9ec485950cab154b786e98f2310d298d">QgsExpressionContextScope::hasFunction</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a> )<span class="keyword"> const</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">return</span> mFunctions.contains( name );</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a71e8419d0d7162eeb0ab179cb56b92dc">  203</a></span>&#160;<a class="code" href="classQgsExpressionFunction.html">QgsExpressionFunction</a> *<a class="code" href="classQgsExpressionContextScope.html#a71e8419d0d7162eeb0ab179cb56b92dc">QgsExpressionContextScope::function</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a> )<span class="keyword"> const</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">return</span> mFunctions.contains( name ) ? mFunctions.value( name ) : <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#ad1dd32e332c407d5b15637a56741953d">  208</a></span>&#160;QStringList <a class="code" href="classQgsExpressionContextScope.html#ad1dd32e332c407d5b15637a56741953d">QgsExpressionContextScope::functionNames</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">return</span> mFunctions.keys();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a905a0794fd61464f5c4a126d69c61e21">  213</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextScope.html#a905a0794fd61464f5c4a126d69c61e21">QgsExpressionContextScope::addFunction</a>( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a>, <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a> *<span class="keyword">function</span> )</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;{</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  mFunctions.insert( name, <span class="keyword">function</span> );</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classQgsExpressionContextScope.html#a191fb8dcb07a4f6105b349067b6956eb">  219</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextScope.html#a191fb8dcb07a4f6105b349067b6956eb">QgsExpressionContextScope::setFields</a>( <span class="keyword">const</span> <a class="code" href="classQgsFields.html">QgsFields</a> &amp;fields )</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">StaticVariable</a>( <a class="code" href="classQgsExpressionContext.html#a42b0704e9b7abc58a75967f83f8237e3">QgsExpressionContext::EXPR_FIELDS</a>, QVariant::fromValue( fields ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">// QgsExpressionContext</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#aef64131d41b82edbaa1405f88b64ceb1">  229</a></span>&#160;<a class="code" href="classQgsExpressionContext.html#a3ed6b33dbaf8960bf0132ee40234e5c8">QgsExpressionContext::QgsExpressionContext</a>( <span class="keyword">const</span> QList&lt;QgsExpressionContextScope *&gt; &amp;scopes )</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  : mStack( scopes )</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#acb9e6316da8318ae52f79c66db11614b">  234</a></span>&#160;<a class="code" href="classQgsExpressionContext.html#a3ed6b33dbaf8960bf0132ee40234e5c8">QgsExpressionContext::QgsExpressionContext</a>( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> &amp;other )</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;{</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, other.mStack )</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    mStack &lt;&lt; <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( *scope );</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  mHighlightedVariables = other.mHighlightedVariables;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  mHighlightedFunctions = other.mHighlightedFunctions;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  mCachedValues = other.mCachedValues;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#acb2c2815551e730f24a0dd24034b0930">  245</a></span>&#160;<a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> &amp;<a class="code" href="classQgsExpressionContext.html#a385cabc7da06c7222938c35f6124a540">QgsExpressionContext::operator=</a>( <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> &amp;&amp;other ) noexcept</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">if</span> ( <span class="keyword">this</span> != &amp;other )</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    qDeleteAll( mStack );</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// move the stack over</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    mStack = other.mStack;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    other.mStack.clear();</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    mHighlightedVariables = other.mHighlightedVariables;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    mHighlightedFunctions = other.mHighlightedFunctions;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    mCachedValues = other.mCachedValues;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a385cabc7da06c7222938c35f6124a540">  261</a></span>&#160;<a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> &amp;<a class="code" href="classQgsExpressionContext.html#a385cabc7da06c7222938c35f6124a540">QgsExpressionContext::operator=</a>( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> &amp;other )</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  qDeleteAll( mStack );</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  mStack.clear();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, other.mStack )</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    mStack &lt;&lt; <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( *scope );</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  mHighlightedVariables = other.mHighlightedVariables;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  mHighlightedFunctions = other.mHighlightedFunctions;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  mCachedValues = other.mCachedValues;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#ad4410549290bbce6cf62e8415f96ec6c">  275</a></span>&#160;<a class="code" href="classQgsExpressionContext.html#ad4410549290bbce6cf62e8415f96ec6c">QgsExpressionContext::~QgsExpressionContext</a>()</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  qDeleteAll( mStack );</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  mStack.clear();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a8bbb345070dc112c10c187999ced4bec">  281</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContext.html#a8bbb345070dc112c10c187999ced4bec">QgsExpressionContext::hasVariable</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, mStack )</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> ( scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a18a077e76b13a235bf3e0e73cb45da73">hasVariable</a>( name ) )</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#ae805e766bee826d1345ac8e2b977eda1">  291</a></span>&#160;QVariant <a class="code" href="classQgsExpressionContext.html#ae805e766bee826d1345ac8e2b977eda1">QgsExpressionContext::variable</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <a class="code" href="classQgsExpressionContext.html#a5aaed2cbbb807fdecd5238f1273b1a4a">activeScopeForVariable</a>( name );</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">return</span> scope ? scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a72554b20e59c5aeb0f3245bf308a7f29">variable</a>( name ) : QVariant();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#abd76c81a6755f8eedf7f522aae90293d">  297</a></span>&#160;QVariantMap <a class="code" href="classQgsExpressionContext.html#abd76c81a6755f8eedf7f522aae90293d">QgsExpressionContext::variablesToMap</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  QStringList names = <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a>();</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  QVariantMap m;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> QString &amp;name, names )</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    m.insert( name, <a class="code" href="classQgsExpressionContext.html#ae805e766bee826d1345ac8e2b977eda1">variable</a>( name ) );</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">return</span> m;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a5a7a96f71dc630543e6373992fda4215">  308</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContext.html#a5a7a96f71dc630543e6373992fda4215">QgsExpressionContext::isHighlightedVariable</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">return</span> mHighlightedVariables.contains( name );</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a9df671f33a16ac63398a5051ce51b641">  313</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#a9df671f33a16ac63398a5051ce51b641">QgsExpressionContext::setHighlightedVariables</a>( <span class="keyword">const</span> QStringList &amp;<a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a> )</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  mHighlightedVariables = <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a28c216e86fda75f2b945fcaccd03a248">  318</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContext.html#a28c216e86fda75f2b945fcaccd03a248">QgsExpressionContext::isHighlightedFunction</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">return</span> mHighlightedFunctions.contains( name );</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a19e07045196e0c52f0afd9b7465c0013">  323</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#a19e07045196e0c52f0afd9b7465c0013">QgsExpressionContext::setHighlightedFunctions</a>( <span class="keyword">const</span> QStringList &amp;names )</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  mHighlightedFunctions = names;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a2271eb1e93755f4ea9721d3d3803e4e2">  328</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#a5aaed2cbbb807fdecd5238f1273b1a4a">QgsExpressionContext::activeScopeForVariable</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">//iterate through stack backwards, so that higher priority variables take precedence</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  QList&lt; QgsExpressionContextScope * &gt;::const_iterator it = mStack.constEnd();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">while</span> ( it != mStack.constBegin() )</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    --it;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> ( ( *it )-&gt;hasVariable( name ) )</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">return</span> ( *it );</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a5aaed2cbbb807fdecd5238f1273b1a4a">  341</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#a5aaed2cbbb807fdecd5238f1273b1a4a">QgsExpressionContext::activeScopeForVariable</a>( <span class="keyword">const</span> QString &amp;name )</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">//iterate through stack backwards, so that higher priority variables take precedence</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  QList&lt; QgsExpressionContextScope * &gt;::const_iterator it = mStack.constEnd();</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">while</span> ( it != mStack.constBegin() )</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    --it;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> ( ( *it )-&gt;hasVariable( name ) )</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">return</span> ( *it );</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">  354</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">QgsExpressionContext::scope</a>( <span class="keywordtype">int</span> index )</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;{</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">if</span> ( index &lt; 0 || index &gt;= mStack.count() )</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">return</span> mStack.at( index );</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a7969d8cb48b2d3ca8207f4350d45b67a">  362</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#a7969d8cb48b2d3ca8207f4350d45b67a">QgsExpressionContext::lastScope</a>()</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">if</span> ( mStack.count() &lt; 1 )</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">return</span> mStack.last();</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a14c12c94299611d9548dca7c46248062">  370</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classQgsExpressionContext.html#a14c12c94299611d9548dca7c46248062">QgsExpressionContext::indexOfScope</a>( <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> )<span class="keyword"> const</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">if</span> ( !scope )</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">return</span> mStack.indexOf( scope );</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a5ee05d7f516200f652742df0b292ced1">  378</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classQgsExpressionContext.html#a14c12c94299611d9548dca7c46248062">QgsExpressionContext::indexOfScope</a>( <span class="keyword">const</span> QString &amp;scopeName )<span class="keyword"> const</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordtype">int</span> index = 0;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, mStack )</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> ( scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">name</a>() == scopeName )</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">return</span> index;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    index++;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">  391</a></span>&#160;QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">QgsExpressionContext::variableNames</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  QStringList names;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, mStack )</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    names &lt;&lt; scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#af79f7dbeadc037cb98a4bab165449dd4">variableNames</a>();</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">return</span> names.toSet().toList();</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a445ef1701fe18cb2943f0e18594453d0">  401</a></span>&#160;QStringList <a class="code" href="classQgsExpressionContext.html#a445ef1701fe18cb2943f0e18594453d0">QgsExpressionContext::filteredVariableNames</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  QStringList allVariables = <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a>();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  QStringList filtered;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> QString &amp;<a class="code" href="classQgsExpressionContext.html#ae805e766bee826d1345ac8e2b977eda1">variable</a>, allVariables )</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> ( variable.startsWith( <span class="charliteral">&#39;_&#39;</span> ) )</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    filtered &lt;&lt; <a class="code" href="classQgsExpressionContext.html#ae805e766bee826d1345ac8e2b977eda1">variable</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  filtered.sort();</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">return</span> filtered;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#aa3b1fb20c01c045ea8eeb0666d2d8e69">  417</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContext.html#aa3b1fb20c01c045ea8eeb0666d2d8e69">QgsExpressionContext::isReadOnly</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, mStack )</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> ( scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a8a83d6fd5908ddfe60bf5155dfe54595">isReadOnly</a>( name ) )</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a049e1539045a9dc2b62246bb4870b1e0">  427</a></span>&#160;QString <a class="code" href="classQgsExpressionContext.html#a049e1539045a9dc2b62246bb4870b1e0">QgsExpressionContext::description</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <a class="code" href="classQgsExpressionContext.html#a5aaed2cbbb807fdecd5238f1273b1a4a">activeScopeForVariable</a>( name );</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">return</span> ( scope &amp;&amp; !scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a20172dc1c42ca6fbdc55229707c933de">description</a>( name ).isEmpty() ) ? scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a20172dc1c42ca6fbdc55229707c933de">description</a>( name ) : <a class="code" href="classQgsExpression.html#a3976fd1aaa7537bd091b46fab972149b">QgsExpression::variableHelpText</a>( name );</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;}</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a01d17757b5282006feb3a6cc6b8e3c5f">  433</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContext.html#a01d17757b5282006feb3a6cc6b8e3c5f">QgsExpressionContext::hasFunction</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, mStack )</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> ( scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a9ec485950cab154b786e98f2310d298d">hasFunction</a>( name ) )</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a0f7ab3ccd0220972d6aa57994fe61305">  443</a></span>&#160;QStringList <a class="code" href="classQgsExpressionContext.html#a0f7ab3ccd0220972d6aa57994fe61305">QgsExpressionContext::functionNames</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  QStringList result;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, mStack )</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    result &lt;&lt; scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#ad1dd32e332c407d5b15637a56741953d">functionNames</a>();</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  result = result.toSet().toList();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  result.sort();</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#aab398db52faa0d1d2ef41c9e38fa78ca">  455</a></span>&#160;<a class="code" href="classQgsExpressionFunction.html">QgsExpressionFunction</a> *<a class="code" href="classQgsExpressionContext.html#aab398db52faa0d1d2ef41c9e38fa78ca">QgsExpressionContext::function</a>( <span class="keyword">const</span> QString &amp;name )<span class="keyword"> const</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">//iterate through stack backwards, so that higher priority variables take precedence</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  QList&lt; QgsExpressionContextScope * &gt;::const_iterator it = mStack.constEnd();</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">while</span> ( it != mStack.constBegin() )</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    --it;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span> ( ( *it )-&gt;hasFunction( name ) )</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">return</span> ( *it )-&gt;function( name );</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a979a5012ba60d53f49a14551ef9ff7e5">  468</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classQgsExpressionContext.html#a979a5012ba60d53f49a14551ef9ff7e5">QgsExpressionContext::scopeCount</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">return</span> mStack.count();</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a7f52d87dd7d7fa3148c7b46b22a4af2f">  473</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#a7f52d87dd7d7fa3148c7b46b22a4af2f">QgsExpressionContext::appendScope</a>( <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> )</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  mStack.append( scope );</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a98d9ba9b48cf165fca04cdfcc214debc">  478</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#a98d9ba9b48cf165fca04cdfcc214debc">QgsExpressionContext::appendScopes</a>( <span class="keyword">const</span> QList&lt;QgsExpressionContextScope *&gt; &amp;<a class="code" href="classQgsExpressionContext.html#a7ca055c86c46bd187e81125337bcd17a">scopes</a> )</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;{</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  mStack.append( scopes );</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a0573996d97031c58a4541a72710a88ec">  483</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#a0573996d97031c58a4541a72710a88ec">QgsExpressionContext::popScope</a>()</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">if</span> ( !mStack.isEmpty() )</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span> mStack.takeLast();</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a8db004b232bcda2bedb2f792fcb3ea68">  491</a></span>&#160;QList&lt;QgsExpressionContextScope *&gt; <a class="code" href="classQgsExpressionContext.html#a8db004b232bcda2bedb2f792fcb3ea68">QgsExpressionContext::takeScopes</a>()</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;{</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  QList&lt;QgsExpressionContextScope *&gt; stack = mStack;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  mStack.clear();</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">return</span> stack;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#adad2e33ba2d05f9248b2d48d1979daba">  498</a></span>&#160;<a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> &amp;<a class="code" href="classQgsExpressionContext.html#adad2e33ba2d05f9248b2d48d1979daba">QgsExpressionContext::operator&lt;&lt;</a>( <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> )</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  mStack.append( scope );</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a99a92e3956573acfc28f7199ba13948d">  504</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#a99a92e3956573acfc28f7199ba13948d">QgsExpressionContext::setFeature</a>( <span class="keyword">const</span> <a class="code" href="classQgsFeature.html">QgsFeature</a> &amp;<a class="code" href="classQgsExpressionContext.html#a2b566d09b66e8ee79ebdfa8dc95e59d7">feature</a> )</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">if</span> ( mStack.isEmpty() )</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    mStack.append( <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>() );</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  mStack.last()-&gt;setFeature( feature );</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#af7d4310259bd17e7e9857e6bb261351f">  512</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContext.html#af7d4310259bd17e7e9857e6bb261351f">QgsExpressionContext::hasFeature</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>, mStack )</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> ( scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a905d6470a3a84fc1fd1c8a706b5db118">hasFeature</a>() )</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a2b566d09b66e8ee79ebdfa8dc95e59d7">  522</a></span>&#160;<a class="code" href="classQgsFeature.html">QgsFeature</a> <a class="code" href="classQgsExpressionContext.html#a2b566d09b66e8ee79ebdfa8dc95e59d7">QgsExpressionContext::feature</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">//iterate through stack backwards, so that higher priority variables take precedence</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  QList&lt; QgsExpressionContextScope * &gt;::const_iterator it = mStack.constEnd();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">while</span> ( it != mStack.constBegin() )</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    --it;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> ( ( *it )-&gt;hasFeature() )</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">return</span> ( *it )-&gt;feature();</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsFeature.html">QgsFeature</a>();</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#aba1a8ba2e07af5f1c67deb2e2f419a7f">  535</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#aba1a8ba2e07af5f1c67deb2e2f419a7f">QgsExpressionContext::setFields</a>( <span class="keyword">const</span> <a class="code" href="classQgsFields.html">QgsFields</a> &amp;<a class="code" href="classQgsExpressionContext.html#af94ae6fe63a30c389eb1de8ac5ee2014">fields</a> )</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">if</span> ( mStack.isEmpty() )</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    mStack.append( <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>() );</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  mStack.last()-&gt;setFields( fields );</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#af94ae6fe63a30c389eb1de8ac5ee2014">  543</a></span>&#160;<a class="code" href="classQgsFields.html">QgsFields</a> <a class="code" href="classQgsExpressionContext.html#af94ae6fe63a30c389eb1de8ac5ee2014">QgsExpressionContext::fields</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">return</span> qvariant_cast&lt;<a class="code" href="classQgsFields.html">QgsFields</a>&gt;( <a class="code" href="classQgsExpressionContext.html#ae805e766bee826d1345ac8e2b977eda1">variable</a>( <a class="code" href="classQgsExpressionContext.html#a42b0704e9b7abc58a75967f83f8237e3">QgsExpressionContext::EXPR_FIELDS</a> ) );</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a375097584a8f28a3b5bdba58efeb93c6">  548</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#a375097584a8f28a3b5bdba58efeb93c6">QgsExpressionContext::setOriginalValueVariable</a>( <span class="keyword">const</span> QVariant &amp;value )</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">if</span> ( mStack.isEmpty() )</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    mStack.append( <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>() );</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  mStack.last()-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( <a class="code" href="classQgsExpressionContext.html#adedbaf735924a5be1102251a47c0e0ad">QgsExpressionContext::EXPR_ORIGINAL_VALUE</a>,</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                              value, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a150c133833cb77f7c0fab590d0f64cbb">  557</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#a150c133833cb77f7c0fab590d0f64cbb">QgsExpressionContext::setCachedValue</a>( <span class="keyword">const</span> QString &amp;key, <span class="keyword">const</span> QVariant &amp;value )<span class="keyword"> const</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  mCachedValues.insert( key, value );</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;}</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#ac465a5001e0389802ae9e86ef2152050">  562</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsExpressionContext.html#ac465a5001e0389802ae9e86ef2152050">QgsExpressionContext::hasCachedValue</a>( <span class="keyword">const</span> QString &amp;key )<span class="keyword"> const</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">return</span> mCachedValues.contains( key );</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#aedee253501cfe351a8c105df46af9db9">  567</a></span>&#160;QVariant <a class="code" href="classQgsExpressionContext.html#aedee253501cfe351a8c105df46af9db9">QgsExpressionContext::cachedValue</a>( <span class="keyword">const</span> QString &amp;key )<span class="keyword"> const</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">return</span> mCachedValues.value( key, QVariant() );</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="classQgsExpressionContext.html#a195478aab248154e362251c410bde190">  572</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContext.html#a195478aab248154e362251c410bde190">QgsExpressionContext::clearCachedValues</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  mCachedValues.clear();</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">// QgsExpressionContextUtils</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#afba36ac63b06dd2659710f4f3cd58936">  582</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#afba36ac63b06dd2659710f4f3cd58936">QgsExpressionContextUtils::globalScope</a>()</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;{</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Global&quot;</span> ) );</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  QVariantMap customVariables = <a class="code" href="classQgsApplication.html#a38c75edfd32a897c4536dbdf07b511a5">QgsApplication::customVariables</a>();</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordflow">for</span> ( QVariantMap::const_iterator it = customVariables.constBegin(); it != customVariables.constEnd(); ++it )</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">setVariable</a>( it.key(), it.value(), true );</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">//add some extra global variables</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;qgis_version&quot;</span> ), <a class="code" href="classQgis.html#a5f3df28965caa574493856e7fab01689">Qgis::QGIS_VERSION</a>, <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;qgis_version_no&quot;</span> ), <a class="code" href="classQgis.html#a599a850991eeb103d08d7954439df9d4">Qgis::QGIS_VERSION_INT</a>, <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;qgis_short_version&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;%1.%2&quot;</span> ).arg( <a class="code" href="classQgis.html#a599a850991eeb103d08d7954439df9d4">Qgis::QGIS_VERSION_INT</a> / 10000 ).arg( <a class="code" href="classQgis.html#a599a850991eeb103d08d7954439df9d4">Qgis::QGIS_VERSION_INT</a> / 100 % 100 ), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;qgis_release_name&quot;</span> ), <a class="code" href="classQgis.html#abdb7461299fb3d37204ca14f851996b0">Qgis::QGIS_RELEASE_NAME</a>, <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;qgis_platform&quot;</span> ), <a class="code" href="classQgsApplication.html#a27aa7be25fdf3b447bf1f5343c78de54">QgsApplication::platform</a>(), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;qgis_os_name&quot;</span> ), <a class="code" href="classQgsApplication.html#a18789733c033dabd7c8471a279e067d6">QgsApplication::osName</a>(), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;qgis_locale&quot;</span> ), <a class="code" href="classQgsApplication.html#a70811c3ff8a601a945c2255847c76688">QgsApplication::locale</a>(), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;user_account_name&quot;</span> ), <a class="code" href="classQgsApplication.html#afb60e0f35dddcb8bbd6f36cd4b24b152">QgsApplication::userLoginName</a>(), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;user_full_name&quot;</span> ), <a class="code" href="classQgsApplication.html#af5d33acfc76e57bf925094878b9cc200">QgsApplication::userFullName</a>(), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#ae05f83118513c147a754f90e906982ec">  607</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#ae05f83118513c147a754f90e906982ec">QgsExpressionContextUtils::setGlobalVariable</a>( <span class="keyword">const</span> QString &amp;name, <span class="keyword">const</span> QVariant &amp;value )</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <a class="code" href="classQgsApplication.html#ad9ef42b0f6bf494e6132b06c11e7eca0">QgsApplication::setCustomVariable</a>( name, value );</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a5afdc3d54b2d64e6052743362b97650a">  612</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#a5afdc3d54b2d64e6052743362b97650a">QgsExpressionContextUtils::setGlobalVariables</a>( <span class="keyword">const</span> QVariantMap &amp;variables )</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;{</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <a class="code" href="classQgsApplication.html#a131225075c57b2aca20557cad9ee0989">QgsApplication::setCustomVariables</a>( variables );</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#add23d8e5e5df6e6cfe8d405feb654412">  617</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#add23d8e5e5df6e6cfe8d405feb654412">QgsExpressionContextUtils::removeGlobalVariable</a>( <span class="keyword">const</span> QString &amp;name )</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;{</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  QVariantMap vars = <a class="code" href="classQgsApplication.html#a38c75edfd32a897c4536dbdf07b511a5">QgsApplication::customVariables</a>();</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">if</span> ( vars.remove( name ) )</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="classQgsApplication.html#a131225075c57b2aca20557cad9ee0989">QgsApplication::setCustomVariables</a>( vars );</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="keyword">class </span>GetNamedProjectColor : <span class="keyword">public</span> <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    GetNamedProjectColor( <span class="keyword">const</span> <a class="code" href="classQgsProject.html">QgsProject</a> *project )</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      : <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a>( QStringLiteral( <span class="stringliteral">&quot;project_color&quot;</span> ), 1, QStringLiteral( <span class="stringliteral">&quot;Color&quot;</span> ) )</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      , mProject( project )</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">if</span> ( !project )</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="comment">//build up color list from project. Do this in advance for speed</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      QStringList colorStrings = project-&gt;<a class="code" href="classQgsProject.html#ac3bfc93e4fd7ff07dbe6a21dab698561">readListEntry</a>( QStringLiteral( <span class="stringliteral">&quot;Palette&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;/Colors&quot;</span> ) );</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      QStringList colorLabels = project-&gt;<a class="code" href="classQgsProject.html#ac3bfc93e4fd7ff07dbe6a21dab698561">readListEntry</a>( QStringLiteral( <span class="stringliteral">&quot;Palette&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;/Labels&quot;</span> ) );</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="comment">//generate list from custom colors</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordtype">int</span> colorIndex = 0;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">for</span> ( QStringList::iterator it = colorStrings.begin();</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            it != colorStrings.end(); ++it )</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        QColor color = <a class="code" href="classQgsSymbolLayerUtils.html#a25a8a4362fbbc5a092dc3632b4802ae9">QgsSymbolLayerUtils::decodeColor</a>( *it );</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        QString label;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">if</span> ( colorLabels.length() &gt; colorIndex )</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;          label = colorLabels.at( colorIndex );</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        mColors.insert( label.toLower(), color );</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        colorIndex++;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    QVariant func( <span class="keyword">const</span> QVariantList &amp;values, <span class="keyword">const</span> <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> *, <a class="code" href="classQgsExpression.html">QgsExpression</a> *, <span class="keyword">const</span> <a class="code" href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a> * )<span class="keyword"> override</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      QString colorName = values.at( 0 ).toString().toLower();</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">if</span> ( mColors.contains( colorName ) )</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">return</span> QStringLiteral( <span class="stringliteral">&quot;%1,%2,%3&quot;</span> ).arg( mColors.value( colorName ).red() ).arg( mColors.value( colorName ).green() ).arg( mColors.value( colorName ).blue() );</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span> QVariant();</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a> *clone()<span class="keyword"> const override</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> GetNamedProjectColor( mProject );</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    }</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsProject.html">QgsProject</a> *mProject = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    QHash&lt; QString, QColor &gt; mColors;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;};</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="keyword">class </span>GetLayoutItemVariables : <span class="keyword">public</span> <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;{</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    GetLayoutItemVariables( <span class="keyword">const</span> <a class="code" href="classQgsLayout.html">QgsLayout</a> *<a class="code" href="porting__processing_8dox.html#ac34f8cede000dff1f5b0b47d22fa9070">c</a> )</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      : <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a>( QStringLiteral( <span class="stringliteral">&quot;item_variables&quot;</span> ), <a class="code" href="classQgsExpressionFunction.html#a06d7401e94e98cb20e2014f1ef0d009a">QgsExpressionFunction::ParameterList</a>() &lt;&lt; <a class="code" href="classQgsExpressionFunction_1_1Parameter.html">QgsExpressionFunction::Parameter</a>( QStringLiteral( <span class="stringliteral">&quot;id&quot;</span> ) ), QStringLiteral( <span class="stringliteral">&quot;Layout&quot;</span> ) )</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      , mLayout( c )</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    {}</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    QVariant func( <span class="keyword">const</span> QVariantList &amp;values, <span class="keyword">const</span> <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> *, <a class="code" href="classQgsExpression.html">QgsExpression</a> *, <span class="keyword">const</span> <a class="code" href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a> * )<span class="keyword"> override</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">if</span> ( !mLayout )</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordflow">return</span> QVariant();</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      QString <span class="keywordtype">id</span> = values.at( 0 ).toString();</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="keyword">const</span> <a class="code" href="classQgsLayoutItem.html">QgsLayoutItem</a> *item = mLayout-&gt;itemById( <span class="keywordtype">id</span> );</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">if</span> ( !item )</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">return</span> QVariant();</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> c = item-&gt;<a class="code" href="classQgsLayoutItem.html#a68fd60bc6b9e26d0a892c0602ccb6977">createExpressionContext</a>();</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordflow">return</span> c.<a class="code" href="classQgsExpressionContext.html#abd76c81a6755f8eedf7f522aae90293d">variablesToMap</a>();</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a> *clone()<span class="keyword"> const override</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> GetLayoutItemVariables( mLayout );</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsLayout.html">QgsLayout</a> *mLayout = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;};</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="keyword">class </span>GetCurrentFormFieldValue : <span class="keyword">public</span> <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;{</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    GetCurrentFormFieldValue( )</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      : <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a>( QStringLiteral( <span class="stringliteral">&quot;current_value&quot;</span> ), <a class="code" href="classQgsExpressionFunction.html#a06d7401e94e98cb20e2014f1ef0d009a">QgsExpressionFunction::ParameterList</a>() &lt;&lt; QStringLiteral( <span class="stringliteral">&quot;field_name&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;Form&quot;</span> ) )</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    {}</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    QVariant func( <span class="keyword">const</span> QVariantList &amp;values, <span class="keyword">const</span> <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> *context, <a class="code" href="classQgsExpression.html">QgsExpression</a> *, <span class="keyword">const</span> <a class="code" href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a> * )<span class="keyword"> override</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      QString fieldName( values.at( 0 ).toString() );</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keyword">const</span> <a class="code" href="classQgsFeature.html">QgsFeature</a> feat( context-&gt;<a class="code" href="classQgsExpressionContext.html#ae805e766bee826d1345ac8e2b977eda1">variable</a>( QStringLiteral( <span class="stringliteral">&quot;current_feature&quot;</span> ) ).value&lt;<a class="code" href="classQgsFeature.html">QgsFeature</a>&gt;() );</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">if</span> ( fieldName.isEmpty() || ! feat.isValid( ) )</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">return</span> QVariant();</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">return</span> feat.attribute( fieldName ) ;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a> *clone()<span class="keyword"> const override</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> GetCurrentFormFieldValue( );</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;};</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="keyword">class </span>GetProcessingParameterValue : <span class="keyword">public</span> <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;{</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    GetProcessingParameterValue( <span class="keyword">const</span> QVariantMap &amp;params )</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      : <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a>( QStringLiteral( <span class="stringliteral">&quot;parameter&quot;</span> ), <a class="code" href="classQgsExpressionFunction.html#a06d7401e94e98cb20e2014f1ef0d009a">QgsExpressionFunction::ParameterList</a>() &lt;&lt; <a class="code" href="classQgsExpressionFunction_1_1Parameter.html">QgsExpressionFunction::Parameter</a>( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) ), QStringLiteral( <span class="stringliteral">&quot;Processing&quot;</span> ) )</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      , mParams( params )</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    {}</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    QVariant func( <span class="keyword">const</span> QVariantList &amp;values, <span class="keyword">const</span> <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> *, <a class="code" href="classQgsExpression.html">QgsExpression</a> *, <span class="keyword">const</span> <a class="code" href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a> * )<span class="keyword"> override</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">return</span> mParams.value( values.at( 0 ).toString() );</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a> *clone()<span class="keyword"> const override</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> GetProcessingParameterValue( mParams );</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keyword">const</span> QVariantMap mParams;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;};</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#aa0d383f2d71c0799c2de1d1a89933647">  769</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#aa0d383f2d71c0799c2de1d1a89933647">QgsExpressionContextUtils::formScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsFeature.html">QgsFeature</a> &amp;formFeature, <span class="keyword">const</span> QString &amp;formMode )</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;{</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Form&quot;</span> ) );</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a905a0794fd61464f5c4a126d69c61e21">addFunction</a>( QStringLiteral( <span class="stringliteral">&quot;current_value&quot;</span> ), <span class="keyword">new</span> GetCurrentFormFieldValue( ) );</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">setVariable</a>( QStringLiteral( <span class="stringliteral">&quot;current_geometry&quot;</span> ), formFeature.<a class="code" href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">geometry</a>( ), true );</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">setVariable</a>( QStringLiteral( <span class="stringliteral">&quot;current_feature&quot;</span> ), formFeature, <span class="keyword">true</span> );</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">setVariable</a>( QStringLiteral( <span class="stringliteral">&quot;form_mode&quot;</span> ), formMode, <span class="keyword">true</span> );</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a9b0dc97b5f9e21fa11eb803a33dfa7d8">  779</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#a9b0dc97b5f9e21fa11eb803a33dfa7d8">QgsExpressionContextUtils::projectScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsProject.html">QgsProject</a> *project )</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;{</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Project&quot;</span> ) );</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">if</span> ( !project )</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="keyword">const</span> QVariantMap vars = project-&gt;<a class="code" href="classQgsProject.html#ae4353a5ffca610d828569cada9b0e0c5">customVariables</a>();</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  QVariantMap::const_iterator it = vars.constBegin();</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordflow">for</span> ( ; it != vars.constEnd(); ++it )</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">setVariable</a>( it.key(), it.value(), true );</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  QString projectPath = project-&gt;<a class="code" href="classQgsProject.html#af33062a18269bbeca1c94ad9f330bd39">projectStorage</a>() ? project-&gt;<a class="code" href="classQgsProject.html#a93f3f2a1c4562922da48473311b9b79d">fileName</a>() : project-&gt;<a class="code" href="classQgsProject.html#aad84411bcdfa2eb506f90bfe7b636543">absoluteFilePath</a>();</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  QString projectFolder = QFileInfo( projectPath ).path();</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  QString projectFilename = QFileInfo( projectPath ).fileName();</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  QString projectBasename = project-&gt;<a class="code" href="classQgsProject.html#a7255107d96e9dc8e58c5f902d5bbc4b8">baseName</a>();</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">//add other known project variables</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_title&quot;</span> ), project-&gt;<a class="code" href="classQgsProject.html#a1ed157bbcab69eecbcfc9a818257b4c5">title</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_path&quot;</span> ), QDir::toNativeSeparators( projectPath ), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_folder&quot;</span> ), QDir::toNativeSeparators( projectFolder ), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_filename&quot;</span> ), projectFilename, <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_basename&quot;</span> ), projectBasename, <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_home&quot;</span> ), QDir::toNativeSeparators( project-&gt;<a class="code" href="classQgsProject.html#aea9946353d9dbe54851991f476ed95ba">homePath</a>() ), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="classQgsCoordinateReferenceSystem.html">QgsCoordinateReferenceSystem</a> projectCrs = project-&gt;<a class="code" href="classQgsProject.html#a9ca17432359f56b9e22378f3d8eeb606">crs</a>();</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_crs&quot;</span> ), projectCrs.<a class="code" href="classQgsCoordinateReferenceSystem.html#ab2dee1805d8e3b62448e4d106753b595">authid</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_crs_definition&quot;</span> ), projectCrs.<a class="code" href="classQgsCoordinateReferenceSystem.html#a433853323df4837869a2a8c2ad7521ea">toProj4</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// metadata</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_author&quot;</span> ), project-&gt;<a class="code" href="classQgsProject.html#a6823cda4af28073a1720b62d93922a9f">metadata</a>().<a class="code" href="classQgsProjectMetadata.html#a0e71b256274a88a342257927df34500d">author</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_abstract&quot;</span> ), project-&gt;<a class="code" href="classQgsProject.html#a6823cda4af28073a1720b62d93922a9f">metadata</a>().<a class="code" href="classQgsAbstractMetadataBase.html#a5045248e61ae9cecc71dcd6507f4f637">abstract</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_creation_date&quot;</span> ), project-&gt;<a class="code" href="classQgsProject.html#a6823cda4af28073a1720b62d93922a9f">metadata</a>().<a class="code" href="classQgsProjectMetadata.html#af0c67e7519b82cab8b3795eb6ec048c3">creationDateTime</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_identifier&quot;</span> ), project-&gt;<a class="code" href="classQgsProject.html#a6823cda4af28073a1720b62d93922a9f">metadata</a>().<a class="code" href="classQgsAbstractMetadataBase.html#ad2d572714f7bb0c269af5caa1dae15d6">identifier</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// keywords</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  QVariantMap keywords;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="classQgsAbstractMetadataBase.html#a17bb3454b010126beec497b20e3154cc">QgsAbstractMetadataBase::KeywordMap</a> metadataKeywords = project-&gt;<a class="code" href="classQgsProject.html#a6823cda4af28073a1720b62d93922a9f">metadata</a>().<a class="code" href="classQgsAbstractMetadataBase.html#a92ee59f4ef876f422ca1190d399b9327">keywords</a>();</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">auto</span> it = metadataKeywords.constBegin(); it != metadataKeywords.constEnd(); ++it )</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    keywords.insert( it.key(), it.value() );</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;project_keywords&quot;</span> ), keywords, <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a905a0794fd61464f5c4a126d69c61e21">addFunction</a>( QStringLiteral( <span class="stringliteral">&quot;project_color&quot;</span> ), <span class="keyword">new</span> GetNamedProjectColor( project ) );</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;}</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#ae4dcfffde09d1aab67f4cdc79abeb021">  830</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#ae4dcfffde09d1aab67f4cdc79abeb021">QgsExpressionContextUtils::setProjectVariable</a>( <a class="code" href="classQgsProject.html">QgsProject</a> *project, <span class="keyword">const</span> QString &amp;name, <span class="keyword">const</span> QVariant &amp;value )</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">if</span> ( !project )</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  QVariantMap vars = project-&gt;<a class="code" href="classQgsProject.html#ae4353a5ffca610d828569cada9b0e0c5">customVariables</a>();</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  vars.insert( name, value );</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  project-&gt;<a class="code" href="classQgsProject.html#ae8713790c27279b75e6b8e35a3c442a8">setCustomVariables</a>( vars );</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;}</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a311388b59c0759920dda2420f1f8b8f5">  842</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#a311388b59c0759920dda2420f1f8b8f5">QgsExpressionContextUtils::setProjectVariables</a>( <a class="code" href="classQgsProject.html">QgsProject</a> *project, <span class="keyword">const</span> QVariantMap &amp;variables )</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;{</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">if</span> ( !project )</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  project-&gt;<a class="code" href="classQgsProject.html#ae8713790c27279b75e6b8e35a3c442a8">setCustomVariables</a>( variables );</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a538d3af82abc562b3a1c011c04df1eed">  850</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#a538d3af82abc562b3a1c011c04df1eed">QgsExpressionContextUtils::removeProjectVariable</a>( <a class="code" href="classQgsProject.html">QgsProject</a> *project, <span class="keyword">const</span> QString &amp;name )</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;{</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordflow">if</span> ( !project )</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  QVariantMap vars = project-&gt;<a class="code" href="classQgsProject.html#ae4353a5ffca610d828569cada9b0e0c5">customVariables</a>();</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">if</span> ( vars.remove( name ) )</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    project-&gt;<a class="code" href="classQgsProject.html#ae8713790c27279b75e6b8e35a3c442a8">setCustomVariables</a>( vars );</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#af1b61531d9512e4cdc8ca505ae07be89">  862</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#af1b61531d9512e4cdc8ca505ae07be89">QgsExpressionContextUtils::layerScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer )</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;{</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Layer&quot;</span> ) );</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">if</span> ( !layer )</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">//add variables defined in layer properties</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a> = layer-&gt;<a class="code" href="classQgsMapLayer.html#a1e78dec0541aaeff25feac9a2445ae29">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ) ).toStringList();</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  QStringList variableValues = layer-&gt;<a class="code" href="classQgsMapLayer.html#a1e78dec0541aaeff25feac9a2445ae29">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ) ).toStringList();</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keywordtype">int</span> varIndex = 0;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> QString &amp;variableName, variableNames )</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> ( varIndex &gt;= variableValues.length() )</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    QVariant varValue = variableValues.at( varIndex );</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    varIndex++;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">setVariable</a>( variableName, varValue, <span class="keyword">true</span> );</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layer_name&quot;</span> ), layer-&gt;<a class="code" href="classQgsMapLayer.html#a0594da1ee92c9fc9e15659fc39522f97">name</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layer_id&quot;</span> ), layer-&gt;<a class="code" href="classQgsMapLayer.html#a4357e72f2c4a36d71225c286e3ef95ab">id</a>(), <span class="keyword">true</span>, true ) );</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layer&quot;</span> ), QVariant::fromValue&lt;QgsWeakMapLayerPointer &gt;( <a class="code" href="qgsmaplayer_8h.html#a20864e6cf415152d2053e97b2c4db774">QgsWeakMapLayerPointer</a>( const_cast&lt;QgsMapLayer *&gt;( layer ) ) ), <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keyword">const</span> <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vLayer = qobject_cast&lt; <span class="keyword">const</span> <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> * &gt;( layer );</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">if</span> ( vLayer )</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a191fb8dcb07a4f6105b349067b6956eb">setFields</a>( vLayer-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>() );</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">//TODO - add functions. Possibilities include:</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">//is_selected</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">//field summary stats</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;}</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#ae204a266b5a9ae5475f568c264fc719c">  903</a></span>&#160;QList&lt;QgsExpressionContextScope *&gt; <a class="code" href="classQgsExpressionContextUtils.html#ae204a266b5a9ae5475f568c264fc719c">QgsExpressionContextUtils::globalProjectLayerScopes</a>( <span class="keyword">const</span> <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer )</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;{</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  QList&lt;QgsExpressionContextScope *&gt; <a class="code" href="classQgsExpressionContext.html#a7ca055c86c46bd187e81125337bcd17a">scopes</a>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  scopes &lt;&lt; globalScope();</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <a class="code" href="classQgsProject.html">QgsProject</a> *project = <a class="code" href="classQgsProject.html#a26df6e8516ac9625901108875681803b">QgsProject::instance</a>();  <span class="comment">// TODO: use project associated with layer</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keywordflow">if</span> ( project )</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    scopes &lt;&lt; projectScope( project );</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">if</span> ( layer )</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    scopes &lt;&lt; layerScope( layer );</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#a7ca055c86c46bd187e81125337bcd17a">scopes</a>;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;}</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a1fbb959d92c38898002f1ccf2ad307d7">  918</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#a1fbb959d92c38898002f1ccf2ad307d7">QgsExpressionContextUtils::setLayerVariable</a>( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer, <span class="keyword">const</span> QString &amp;name, <span class="keyword">const</span> QVariant &amp;value )</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;{</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">if</span> ( !layer )</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">//write variable to layer</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a> = layer-&gt;<a class="code" href="classQgsMapLayer.html#a1e78dec0541aaeff25feac9a2445ae29">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ) ).toStringList();</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  QStringList variableValues = layer-&gt;<a class="code" href="classQgsMapLayer.html#a1e78dec0541aaeff25feac9a2445ae29">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ) ).toStringList();</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  variableNames &lt;&lt; name;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  variableValues &lt;&lt; value.toString();</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  layer-&gt;<a class="code" href="classQgsMapLayer.html#a7bf94cfa08abc37b75cc53dc921bb15e">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ), variableNames );</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  layer-&gt;<a class="code" href="classQgsMapLayer.html#a7bf94cfa08abc37b75cc53dc921bb15e">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ), variableValues );</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;}</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a55848917d0e162a8d220e4a0eefcfca0">  934</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#a55848917d0e162a8d220e4a0eefcfca0">QgsExpressionContextUtils::setLayerVariables</a>( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer, <span class="keyword">const</span> QVariantMap &amp;variables )</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;{</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">if</span> ( !layer )</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  QStringList variableValues;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  QVariantMap::const_iterator it = variables.constBegin();</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="keywordflow">for</span> ( ; it != variables.constEnd(); ++it )</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    variableNames &lt;&lt; it.key();</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    variableValues &lt;&lt; it.value().toString();</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  layer-&gt;<a class="code" href="classQgsMapLayer.html#a7bf94cfa08abc37b75cc53dc921bb15e">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ), variableNames );</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  layer-&gt;<a class="code" href="classQgsMapLayer.html#a7bf94cfa08abc37b75cc53dc921bb15e">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ), variableValues );</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;}</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#ad97a6492b7f61a41dcbe399537415fc2">  953</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#ad97a6492b7f61a41dcbe399537415fc2">QgsExpressionContextUtils::mapSettingsScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings )</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;{</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="comment">// IMPORTANT: ANY CHANGES HERE ALSO NEED TO BE MADE TO QgsLayoutItemMap::createExpressionContext()</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="comment">// (rationale is described in QgsLayoutItemMap::createExpressionContext() )</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// and because people don&#39;t read that ^^, I&#39;m going to blast it all over this function</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Map Settings&quot;</span> ) );</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">//add known map settings context variables</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_id&quot;</span> ), <span class="stringliteral">&quot;canvas&quot;</span>, <span class="keyword">true</span> ) );</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_rotation&quot;</span> ), mapSettings.<a class="code" href="classQgsMapSettings.html#ad8588f8a609232d388442c38ff8b1317">rotation</a>(), true ) );</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_scale&quot;</span> ), mapSettings.<a class="code" href="classQgsMapSettings.html#a24e262c80b54fc44e6bdb90ca4b62020">scale</a>(), true ) );</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="comment">// IMPORTANT: ANY CHANGES HERE ALSO NEED TO BE MADE TO QgsLayoutItemMap::createExpressionContext()</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">// (rationale is described in QgsLayoutItemMap::createExpressionContext() )</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="classQgsGeometry.html">QgsGeometry</a> extent = <a class="code" href="classQgsGeometry.html#a1104cc793e403d30afc7376b72cff3cc">QgsGeometry::fromRect</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#aa8e91ef1d4612834c2165b7fd511e4bf">visibleExtent</a>() );</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_extent&quot;</span> ), QVariant::fromValue( extent ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_extent_width&quot;</span> ), mapSettings.<a class="code" href="classQgsMapSettings.html#aa8e91ef1d4612834c2165b7fd511e4bf">visibleExtent</a>().<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>(), true ) );</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_extent_height&quot;</span> ), mapSettings.<a class="code" href="classQgsMapSettings.html#aa8e91ef1d4612834c2165b7fd511e4bf">visibleExtent</a>().<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>(), true ) );</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">// IMPORTANT: ANY CHANGES HERE ALSO NEED TO BE MADE TO QgsLayoutItemMap::createExpressionContext()</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">// (rationale is described in QgsLayoutItemMap::createExpressionContext() )</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <a class="code" href="classQgsGeometry.html">QgsGeometry</a> centerPoint = <a class="code" href="classQgsGeometry.html#a81306181071ffa590d0553a7f37dc654">QgsGeometry::fromPointXY</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#aa8e91ef1d4612834c2165b7fd511e4bf">visibleExtent</a>().<a class="code" href="classQgsRectangle.html#a9b5148e60e6a0cc49cfc6c06bcc93f5d">center</a>() );</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_extent_center&quot;</span> ), QVariant::fromValue( centerPoint ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="comment">// IMPORTANT: ANY CHANGES HERE ALSO NEED TO BE MADE TO QgsLayoutItemMap::createExpressionContext()</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="comment">// (rationale is described in QgsLayoutItemMap::createExpressionContext() )</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_crs&quot;</span> ), mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>().<a class="code" href="classQgsCoordinateReferenceSystem.html#ab2dee1805d8e3b62448e4d106753b595">authid</a>(), true ) );</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_crs_definition&quot;</span> ), mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>().<a class="code" href="classQgsCoordinateReferenceSystem.html#a433853323df4837869a2a8c2ad7521ea">toProj4</a>(), true ) );</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_units&quot;</span> ), <a class="code" href="classQgsUnitTypes.html#a43808dc6ed58c191cc4373e7c8e506fb">QgsUnitTypes::toString</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#a8bd7bda6ca679aed92deaf4fc7d86793">mapUnits</a>() ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// IMPORTANT: ANY CHANGES HERE ALSO NEED TO BE MADE TO QgsLayoutItemMap::createExpressionContext()</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// (rationale is described in QgsLayoutItemMap::createExpressionContext() )</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  QVariantList layersIds;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  QVariantList layers;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="keyword">const</span> QList&lt;QgsMapLayer *&gt; layersInMap = mapSettings.<a class="code" href="classQgsMapSettings.html#ac44aac25ea00d124a7ba36dc270d0d8c">layers</a>();</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  layersIds.reserve( layersInMap.count() );</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  layers.reserve( layersInMap.count() );</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">for</span> ( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer : layersInMap )</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    layersIds &lt;&lt; layer-&gt;id();</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    layers &lt;&lt; QVariant::fromValue&lt;QgsWeakMapLayerPointer&gt;( <a class="code" href="qgsmaplayer_8h.html#a20864e6cf415152d2053e97b2c4db774">QgsWeakMapLayerPointer</a>( layer ) );</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// IMPORTANT: ANY CHANGES HERE ALSO NEED TO BE MADE TO QgsLayoutItemMap::createExpressionContext()</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// (rationale is described in QgsLayoutItemMap::createExpressionContext() )</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_layer_ids&quot;</span> ), layersIds, <span class="keyword">true</span> ) );</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;map_layers&quot;</span> ), layers, <span class="keyword">true</span> ) );</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="comment">// IMPORTANT: ANY CHANGES HERE ALSO NEED TO BE MADE TO QgsLayoutItemMap::createExpressionContext()</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// (rationale is described in QgsLayoutItemMap::createExpressionContext() )</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a905a0794fd61464f5c4a126d69c61e21">addFunction</a>( QStringLiteral( <span class="stringliteral">&quot;is_layer_visible&quot;</span> ), <span class="keyword">new</span> GetLayerVisibility( mapSettings.<a class="code" href="classQgsMapSettings.html#ac44aac25ea00d124a7ba36dc270d0d8c">layers</a>() ) );</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="comment">// IMPORTANT: ANY CHANGES HERE ALSO NEED TO BE MADE TO QgsLayoutItemMap::createExpressionContext()</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// (rationale is described in QgsLayoutItemMap::createExpressionContext() )</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;}</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#aa9bdc27de65d845f5e31e69ea4d936f8"> 1019</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#aa9bdc27de65d845f5e31e69ea4d936f8">QgsExpressionContextUtils::mapToolCaptureScope</a>( <span class="keyword">const</span> QList&lt;QgsPointLocator::Match&gt; &amp;matches )</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;{</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Map Tool Capture&quot;</span> ) );</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  QVariantList matchList;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="structQgsPointLocator_1_1Match.html">QgsPointLocator::Match</a> &amp;match : matches )</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    QVariantMap matchMap;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    matchMap.insert( QStringLiteral( <span class="stringliteral">&quot;valid&quot;</span> ), match.isValid() );</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    matchMap.insert( QStringLiteral( <span class="stringliteral">&quot;layer&quot;</span> ), QVariant::fromValue&lt;QgsWeakMapLayerPointer&gt;( <a class="code" href="qgsmaplayer_8h.html#a20864e6cf415152d2053e97b2c4db774">QgsWeakMapLayerPointer</a>( match.layer() ) ) );</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    matchMap.insert( QStringLiteral( <span class="stringliteral">&quot;feature_id&quot;</span> ), match.featureId() );</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    matchMap.insert( QStringLiteral( <span class="stringliteral">&quot;vertex_index&quot;</span> ), match.vertexIndex() );</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    matchMap.insert( QStringLiteral( <span class="stringliteral">&quot;distance&quot;</span> ), match.distance() );</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    matchList.append( matchMap );</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;snapping_results&quot;</span> ), matchList ) );</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;}</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a23cfe974933355eafa6b92cae9eaf525"> 1043</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#a23cfe974933355eafa6b92cae9eaf525">QgsExpressionContextUtils::updateSymbolScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsSymbol.html">QgsSymbol</a> *symbol, <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *symbolScope )</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;{</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">if</span> ( !symbolScope )</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  symbolScope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( <a class="code" href="classQgsExpressionContext.html#a7574f63fed04010e6bba4efb369865c5">QgsExpressionContext::EXPR_SYMBOL_COLOR</a>, symbol ? symbol-&gt;<a class="code" href="classQgsSymbol.html#ac9b6edde89e8765a52cc404eb3d4f760">color</a>() : QColor(), true ) );</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> = 0.0;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keyword">const</span> <a class="code" href="classQgsMarkerSymbol.html">QgsMarkerSymbol</a> *markerSymbol = <span class="keyword">dynamic_cast&lt;</span> <span class="keyword">const </span><a class="code" href="classQgsMarkerSymbol.html">QgsMarkerSymbol</a> * <span class="keyword">&gt;</span>( symbol );</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="keywordflow">if</span> ( markerSymbol )</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    angle = markerSymbol-&gt;<a class="code" href="classQgsMarkerSymbol.html#a6e300f6607b49282f727221ed2846d78">angle</a>();</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  symbolScope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( <a class="code" href="classQgsExpressionContext.html#aa3093e2813b44988493bd644d7f226b5">QgsExpressionContext::EXPR_SYMBOL_ANGLE</a>, angle, <span class="keyword">true</span> ) );</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keywordflow">return</span> symbolScope;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a340ede6d40ac582c1e3865d3bb465be4"> 1061</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#a340ede6d40ac582c1e3865d3bb465be4">QgsExpressionContextUtils::layoutScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsLayout.html">QgsLayout</a> *layout )</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;{</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  std::unique_ptr&lt; QgsExpressionContextScope &gt; <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>( <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Layout&quot;</span> ) ) );</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="keywordflow">if</span> ( !layout )</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">return</span> scope.release();</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">//add variables defined in layout properties</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a> = layout-&gt;<a class="code" href="classQgsLayout.html#a95b7b1eb1e1d0c293e586bc45742b8c8">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ) ).toStringList();</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  QStringList variableValues = layout-&gt;<a class="code" href="classQgsLayout.html#a95b7b1eb1e1d0c293e586bc45742b8c8">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ) ).toStringList();</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keywordtype">int</span> varIndex = 0;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> QString &amp;variableName, variableNames )</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span> ( varIndex &gt;= variableValues.length() )</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    QVariant varValue = variableValues.at( varIndex );</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    varIndex++;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    scope-&gt;setVariable( variableName, varValue );</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">//add known layout context variables</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keywordflow">if</span> ( <span class="keyword">const</span> <a class="code" href="classQgsMasterLayoutInterface.html">QgsMasterLayoutInterface</a> *l = dynamic_cast&lt; const QgsMasterLayoutInterface * &gt;( layout ) )</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_name&quot;</span> ), l-&gt;name(), true ) );</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_numpages&quot;</span> ), layout-&gt;<a class="code" href="classQgsLayout.html#a335b0864da1587dfb7f9f903d58c02d6">pageCollection</a>()-&gt;<a class="code" href="classQgsLayoutPageCollection.html#a862a2cc4ad2aebe9f20d4a0aa0cb7086">pageCount</a>(), true ) );</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordflow">if</span> ( layout-&gt;<a class="code" href="classQgsLayout.html#a335b0864da1587dfb7f9f903d58c02d6">pageCollection</a>()-&gt;<a class="code" href="classQgsLayoutPageCollection.html#a862a2cc4ad2aebe9f20d4a0aa0cb7086">pageCount</a>() &gt; 0 )</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// just take first page size</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    QSizeF s = layout-&gt;<a class="code" href="classQgsLayout.html#a335b0864da1587dfb7f9f903d58c02d6">pageCollection</a>()-&gt;<a class="code" href="classQgsLayoutPageCollection.html#aa7caa34a0756c8df9aba4b08d8e78fe7">page</a>( 0 )-&gt;<a class="code" href="classQgsLayoutItem.html#a226e90886e2c5d0474db36a3c5db6fa5">sizeWithUnits</a>().<a class="code" href="classQgsLayoutSize.html#afb753b7709c5bd638505ed88db3f5b6d">toQSizeF</a>();</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_pageheight&quot;</span> ), s.height(), true ) );</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_pagewidth&quot;</span> ), s.width(), true ) );</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_dpi&quot;</span> ), layout-&gt;<a class="code" href="classQgsLayout.html#a275bb7bb68287bcd28b61e30bf369d82">renderContext</a>().<a class="code" href="classQgsLayoutRenderContext.html#a9e48478f909c0e3ef25531f83bc118d5">dpi</a>(), true ) );</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  scope-&gt;addFunction( QStringLiteral( <span class="stringliteral">&quot;item_variables&quot;</span> ), <span class="keyword">new</span> GetLayoutItemVariables( layout ) );</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">if</span> ( layout-&gt;<a class="code" href="classQgsLayout.html#ad00cbf77a9f62bc18e939ce22395808f">reportContext</a>().<a class="code" href="classQgsLayoutReportContext.html#ac3e5f6b75c1f4d24f07c658b96375f9b">layer</a>() )</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    scope-&gt;setFields( layout-&gt;<a class="code" href="classQgsLayout.html#ad00cbf77a9f62bc18e939ce22395808f">reportContext</a>().<a class="code" href="classQgsLayoutReportContext.html#ac3e5f6b75c1f4d24f07c658b96375f9b">layer</a>()-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>() );</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_layerid&quot;</span> ), layout-&gt;<a class="code" href="classQgsLayout.html#ad00cbf77a9f62bc18e939ce22395808f">reportContext</a>().<a class="code" href="classQgsLayoutReportContext.html#ac3e5f6b75c1f4d24f07c658b96375f9b">layer</a>()-&gt;<a class="code" href="classQgsMapLayer.html#a4357e72f2c4a36d71225c286e3ef95ab">id</a>(), true ) );</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_layername&quot;</span> ), layout-&gt;<a class="code" href="classQgsLayout.html#ad00cbf77a9f62bc18e939ce22395808f">reportContext</a>().<a class="code" href="classQgsLayoutReportContext.html#ac3e5f6b75c1f4d24f07c658b96375f9b">layer</a>()-&gt;<a class="code" href="classQgsMapLayer.html#a0594da1ee92c9fc9e15659fc39522f97">name</a>(), true ) );</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  }</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordflow">if</span> ( layout-&gt;<a class="code" href="classQgsLayout.html#ad00cbf77a9f62bc18e939ce22395808f">reportContext</a>().<a class="code" href="classQgsLayoutReportContext.html#a375bad880816fecf7c3fc91206ee4089">feature</a>().<a class="code" href="classQgsFeature.html#ae534eb7d7a9facfe50f1253f92668cd3">isValid</a>() )</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <a class="code" href="classQgsFeature.html">QgsFeature</a> atlasFeature = layout-&gt;<a class="code" href="classQgsLayout.html#ad00cbf77a9f62bc18e939ce22395808f">reportContext</a>().<a class="code" href="classQgsLayoutReportContext.html#a375bad880816fecf7c3fc91206ee4089">feature</a>();</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    scope-&gt;setFeature( atlasFeature );</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_feature&quot;</span> ), QVariant::fromValue( atlasFeature ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_featureid&quot;</span> ), atlasFeature.<a class="code" href="classQgsFeature.html#a64e6b9dd1e5a66c960f985f5d885d7f6">id</a>(), true ) );</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_geometry&quot;</span> ), QVariant::fromValue( atlasFeature.<a class="code" href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">geometry</a>() ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keywordflow">return</span> scope.release();</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;}</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a9ec29c2a673c7fd37dabea6074051a91"> 1119</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#a9ec29c2a673c7fd37dabea6074051a91">QgsExpressionContextUtils::setLayoutVariable</a>( <a class="code" href="classQgsLayout.html">QgsLayout</a> *layout, <span class="keyword">const</span> QString &amp;name, <span class="keyword">const</span> QVariant &amp;value )</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;{</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">if</span> ( !layout )</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="comment">//write variable to layout</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a> = layout-&gt;<a class="code" href="classQgsLayout.html#a95b7b1eb1e1d0c293e586bc45742b8c8">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ) ).toStringList();</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  QStringList variableValues = layout-&gt;<a class="code" href="classQgsLayout.html#a95b7b1eb1e1d0c293e586bc45742b8c8">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ) ).toStringList();</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  variableNames &lt;&lt; name;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  variableValues &lt;&lt; value.toString();</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  layout-&gt;<a class="code" href="classQgsLayout.html#a123cda2092640f931e7951e1fe979d3c">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ), variableNames );</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  layout-&gt;<a class="code" href="classQgsLayout.html#a123cda2092640f931e7951e1fe979d3c">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ), variableValues );</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;}</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#accec9b32dd95126556d1f8cf5642a6e9"> 1135</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#accec9b32dd95126556d1f8cf5642a6e9">QgsExpressionContextUtils::setLayoutVariables</a>( <a class="code" href="classQgsLayout.html">QgsLayout</a> *layout, <span class="keyword">const</span> QVariantMap &amp;variables )</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;{</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">if</span> ( !layout )</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  QStringList variableValues;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  QVariantMap::const_iterator it = variables.constBegin();</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordflow">for</span> ( ; it != variables.constEnd(); ++it )</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    variableNames &lt;&lt; it.key();</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    variableValues &lt;&lt; it.value().toString();</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  layout-&gt;<a class="code" href="classQgsLayout.html#a123cda2092640f931e7951e1fe979d3c">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ), variableNames );</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  layout-&gt;<a class="code" href="classQgsLayout.html#a123cda2092640f931e7951e1fe979d3c">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ), variableValues );</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;}</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a66eebd07714f21ac3b21c229bac398f7"> 1154</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#a66eebd07714f21ac3b21c229bac398f7">QgsExpressionContextUtils::atlasScope</a>( <a class="code" href="classQgsLayoutAtlas.html">QgsLayoutAtlas</a> *atlas )</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;{</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Atlas&quot;</span> ) );</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordflow">if</span> ( !atlas )</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">//add some dummy atlas variables. This is done so that as in certain contexts we want to show</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="comment">//users that these variables are available even if they have no current value</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_pagename&quot;</span> ), QString(), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_feature&quot;</span> ), QVariant::fromValue( <a class="code" href="classQgsFeature.html">QgsFeature</a>() ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_featureid&quot;</span> ), 0, <span class="keyword">true</span> ) );</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_geometry&quot;</span> ), QVariant::fromValue( <a class="code" href="classQgsGeometry.html">QgsGeometry</a>() ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="comment">//add known atlas variables</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_totalfeatures&quot;</span> ), atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a70bc6904c4aa7354d315ee537806278e">count</a>(), true ) );</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_featurenumber&quot;</span> ), atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#af79288efc6dcad00a514aea857d5310d">currentFeatureNumber</a>() + 1, true ) );</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_filename&quot;</span> ), atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#aa5587f66edf8511d7b12fbbb4a80dda7">currentFilename</a>(), true ) );</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_pagename&quot;</span> ), atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a0830b03eda67d8f847e2fc03fbdd0f9b">nameForPage</a>( atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#af79288efc6dcad00a514aea857d5310d">currentFeatureNumber</a>() ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keywordflow">if</span> ( atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a881252364b06bc3a2eab9abe7337cb4c">enabled</a>() &amp;&amp; atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a1bdcecf29abdcf5e11613e3b0eb6566d">coverageLayer</a>() )</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  {</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a191fb8dcb07a4f6105b349067b6956eb">setFields</a>( atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a1bdcecf29abdcf5e11613e3b0eb6566d">coverageLayer</a>()-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>() );</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_layerid&quot;</span> ), atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a1bdcecf29abdcf5e11613e3b0eb6566d">coverageLayer</a>()-&gt;<a class="code" href="classQgsMapLayer.html#a4357e72f2c4a36d71225c286e3ef95ab">id</a>(), true ) );</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_layername&quot;</span> ), atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a1bdcecf29abdcf5e11613e3b0eb6566d">coverageLayer</a>()-&gt;<a class="code" href="classQgsMapLayer.html#a0594da1ee92c9fc9e15659fc39522f97">name</a>(), true ) );</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">if</span> ( atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a881252364b06bc3a2eab9abe7337cb4c">enabled</a>() )</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="classQgsFeature.html">QgsFeature</a> atlasFeature = atlas-&gt;<a class="code" href="classQgsLayoutAtlas.html#a76db768efceaae6bd45ae45106f30d64">layout</a>()-&gt;<a class="code" href="classQgsLayout.html#ad00cbf77a9f62bc18e939ce22395808f">reportContext</a>().<a class="code" href="classQgsLayoutReportContext.html#a375bad880816fecf7c3fc91206ee4089">feature</a>();</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a847b0556706686d28f6e922391e936e5">setFeature</a>( atlasFeature );</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_feature&quot;</span> ), QVariant::fromValue( atlasFeature ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_featureid&quot;</span> ), atlasFeature.<a class="code" href="classQgsFeature.html#a64e6b9dd1e5a66c960f985f5d885d7f6">id</a>(), true ) );</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;atlas_geometry&quot;</span> ), QVariant::fromValue( atlasFeature.<a class="code" href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">geometry</a>() ), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a04af195b7f916d8574245cb337bc524b"> 1193</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#a04af195b7f916d8574245cb337bc524b">QgsExpressionContextUtils::layoutItemScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsLayoutItem.html">QgsLayoutItem</a> *item )</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Layout Item&quot;</span> ) );</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">if</span> ( !item )</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">//add variables defined in layout item properties</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="keyword">const</span> QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a> = item-&gt;<a class="code" href="classQgsLayoutObject.html#a1f1d97a03aa0d6789c09b67e460b4257">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ) ).toStringList();</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keyword">const</span> QStringList variableValues = item-&gt;<a class="code" href="classQgsLayoutObject.html#a1f1d97a03aa0d6789c09b67e460b4257">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ) ).toStringList();</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="keywordtype">int</span> varIndex = 0;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> QString &amp;variableName : variableNames )</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  {</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> ( varIndex &gt;= variableValues.length() )</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    {</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    QVariant varValue = variableValues.at( varIndex );</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    varIndex++;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">setVariable</a>( variableName, varValue );</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  }</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">//add known layout item context variables</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;item_id&quot;</span> ), item-&gt;<a class="code" href="classQgsLayoutItem.html#ab6d4914bae7fdcff4ef1439136d79d76">id</a>(), true ) );</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;item_uuid&quot;</span> ), item-&gt;<a class="code" href="classQgsLayoutItem.html#aa9f3a3035eff578ef7323534ce2bcb36">uuid</a>(), true ) );</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_page&quot;</span> ), item-&gt;<a class="code" href="classQgsLayoutItem.html#a679632491133702c64934c5376e4df34">page</a>() + 1, true ) );</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span> ( item-&gt;<a class="code" href="classQgsLayoutObject.html#a5c2685de76a13b24f034dac8efc895eb">layout</a>() )</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  {</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsLayoutItemPage.html">QgsLayoutItemPage</a> *page = item-&gt;<a class="code" href="classQgsLayoutObject.html#a5c2685de76a13b24f034dac8efc895eb">layout</a>()-&gt;<a class="code" href="classQgsLayout.html#a335b0864da1587dfb7f9f903d58c02d6">pageCollection</a>()-&gt;<a class="code" href="classQgsLayoutPageCollection.html#aa7caa34a0756c8df9aba4b08d8e78fe7">page</a>( item-&gt;<a class="code" href="classQgsLayoutItem.html#a679632491133702c64934c5376e4df34">page</a>() );</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> ( page )</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="keyword">const</span> QSizeF s = page-&gt;<a class="code" href="classQgsLayoutItem.html#a226e90886e2c5d0474db36a3c5db6fa5">sizeWithUnits</a>().<a class="code" href="classQgsLayoutSize.html#afb753b7709c5bd638505ed88db3f5b6d">toQSizeF</a>();</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_pageheight&quot;</span> ), s.height(), true ) );</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_pagewidth&quot;</span> ), s.width(), true ) );</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    {</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_pageheight&quot;</span> ), QVariant(), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">addVariable</a>( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;layout_pagewidth&quot;</span> ), QVariant(), <span class="keyword">true</span> ) );</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    }</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;}</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#aa51f9bb99fab6ff86690ab5da396ae82"> 1240</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#aa51f9bb99fab6ff86690ab5da396ae82">QgsExpressionContextUtils::setLayoutItemVariable</a>( <a class="code" href="classQgsLayoutItem.html">QgsLayoutItem</a> *item, <span class="keyword">const</span> QString &amp;name, <span class="keyword">const</span> QVariant &amp;value )</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;{</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">if</span> ( !item )</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">//write variable to layout item</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a> = item-&gt;<a class="code" href="classQgsLayoutObject.html#a1f1d97a03aa0d6789c09b67e460b4257">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ) ).toStringList();</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  QStringList variableValues = item-&gt;<a class="code" href="classQgsLayoutObject.html#a1f1d97a03aa0d6789c09b67e460b4257">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ) ).toStringList();</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  variableNames &lt;&lt; name;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  variableValues &lt;&lt; value.toString();</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  item-&gt;<a class="code" href="classQgsLayoutObject.html#a5d3f15eb11a3715c3449027cea38bced">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ), variableNames );</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  item-&gt;<a class="code" href="classQgsLayoutObject.html#a5d3f15eb11a3715c3449027cea38bced">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ), variableValues );</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a6174fe816c7626cd0d13de4117d3259c"> 1256</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#a6174fe816c7626cd0d13de4117d3259c">QgsExpressionContextUtils::setLayoutItemVariables</a>( <a class="code" href="classQgsLayoutItem.html">QgsLayoutItem</a> *item, <span class="keyword">const</span> QVariantMap &amp;variables )</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;{</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">if</span> ( !item )</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  QStringList <a class="code" href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">variableNames</a>;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  QStringList variableValues;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  QVariantMap::const_iterator it = variables.constBegin();</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keywordflow">for</span> ( ; it != variables.constEnd(); ++it )</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    variableNames &lt;&lt; it.key();</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    variableValues &lt;&lt; it.value().toString();</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  item-&gt;<a class="code" href="classQgsLayoutObject.html#a5d3f15eb11a3715c3449027cea38bced">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableNames&quot;</span> ), variableNames );</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  item-&gt;<a class="code" href="classQgsLayoutObject.html#a5d3f15eb11a3715c3449027cea38bced">setCustomProperty</a>( QStringLiteral( <span class="stringliteral">&quot;variableValues&quot;</span> ), variableValues );</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;}</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a37b99228545c3c246c6247d90c54b2e9"> 1275</a></span>&#160;<a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> <a class="code" href="classQgsExpressionContextUtils.html#a37b99228545c3c246c6247d90c54b2e9">QgsExpressionContextUtils::createFeatureBasedContext</a>( <span class="keyword">const</span> <a class="code" href="classQgsFeature.html">QgsFeature</a> &amp;<a class="code" href="classQgsExpressionContext.html#a2b566d09b66e8ee79ebdfa8dc95e59d7">feature</a>, <span class="keyword">const</span> <a class="code" href="classQgsFields.html">QgsFields</a> &amp;<a class="code" href="classQgsExpressionContext.html#af94ae6fe63a30c389eb1de8ac5ee2014">fields</a> )</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;{</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a> = <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>();</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a847b0556706686d28f6e922391e936e5">setFeature</a>( feature );</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  scope-&gt;<a class="code" href="classQgsExpressionContextScope.html#a191fb8dcb07a4f6105b349067b6956eb">setFields</a>( fields );</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsExpressionContext.html#a3ed6b33dbaf8960bf0132ee40234e5c8">QgsExpressionContext</a>() &lt;&lt; <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a7d8522a7794ba4a960515ba97e33a158"> 1283</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#a7d8522a7794ba4a960515ba97e33a158">QgsExpressionContextUtils::processingAlgorithmScope</a>( <span class="keyword">const</span> <a class="code" href="classQgsProcessingAlgorithm.html">QgsProcessingAlgorithm</a> *<a class="code" href="porting__processing_8dox.html#a2363590aeaf7c1e254a233e7d840ae29">algorithm</a>, <span class="keyword">const</span> QVariantMap &amp;parameters, <a class="code" href="classQgsProcessingContext.html">QgsProcessingContext</a> &amp;context )</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;{</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="comment">// set aside for future use</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  Q_UNUSED( context );</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  std::unique_ptr&lt; QgsExpressionContextScope &gt; <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>( <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>( QObject::tr( <span class="stringliteral">&quot;Algorithm&quot;</span> ) ) );</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  scope-&gt;addFunction( QStringLiteral( <span class="stringliteral">&quot;parameter&quot;</span> ), <span class="keyword">new</span> GetProcessingParameterValue( parameters ) );</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordflow">if</span> ( !algorithm )</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">return</span> scope.release();</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">//add standard algorithm variables</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;algorithm_id&quot;</span> ), algorithm-&gt;<a class="code" href="classQgsProcessingAlgorithm.html#a5ca92c590bec71b303e062496dc13823">id</a>(), true ) );</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="keywordflow">return</span> scope.release();</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;}</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#a8291267b0a963725e733c9f1d7f2d176"> 1300</a></span>&#160;<a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a> *<a class="code" href="classQgsExpressionContextUtils.html#a8291267b0a963725e733c9f1d7f2d176">QgsExpressionContextUtils::notificationScope</a>( <span class="keyword">const</span> QString &amp;message )</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;{</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  std::unique_ptr&lt; QgsExpressionContextScope &gt; <a class="code" href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">scope</a>( <span class="keyword">new</span> <a class="code" href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a>() );</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  scope-&gt;addVariable( <a class="code" href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a>( QStringLiteral( <span class="stringliteral">&quot;notification_message&quot;</span> ), message, <span class="keyword">true</span> ) );</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordflow">return</span> scope.release();</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;}</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"><a class="line" href="classQgsExpressionContextUtils.html#ab1636f7b97d9fa9b106a8063d9b3bfd3"> 1307</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsExpressionContextUtils.html#ab1636f7b97d9fa9b106a8063d9b3bfd3">QgsExpressionContextUtils::registerContextFunctions</a>()</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;{</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <a class="code" href="classQgsExpression.html#a156907cc7f06ffa70198f0db51dc928b">QgsExpression::registerFunction</a>( <span class="keyword">new</span> GetNamedProjectColor( <span class="keyword">nullptr</span> ) );</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <a class="code" href="classQgsExpression.html#a156907cc7f06ffa70198f0db51dc928b">QgsExpression::registerFunction</a>( <span class="keyword">new</span> GetLayoutItemVariables( <span class="keyword">nullptr</span> ) );</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <a class="code" href="classQgsExpression.html#a156907cc7f06ffa70198f0db51dc928b">QgsExpression::registerFunction</a>( <span class="keyword">new</span> GetLayerVisibility( QList&lt;QgsMapLayer *&gt;() ) );</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <a class="code" href="classQgsExpression.html#a156907cc7f06ffa70198f0db51dc928b">QgsExpression::registerFunction</a>( <span class="keyword">new</span> GetProcessingParameterValue( QVariantMap() ) );</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <a class="code" href="classQgsExpression.html#a156907cc7f06ffa70198f0db51dc928b">QgsExpression::registerFunction</a>( <span class="keyword">new</span> GetCurrentFormFieldValue( ) );</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"><a class="line" href="classQgsScopedExpressionFunction.html#aa959787f4041762c1dd9fd018f15bb5b"> 1316</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsScopedExpressionFunction.html#aa959787f4041762c1dd9fd018f15bb5b">QgsScopedExpressionFunction::usesGeometry</a>( <span class="keyword">const</span> <a class="code" href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a> *node )<span class="keyword"> const</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  Q_UNUSED( node )</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordflow">return</span> mUsesGeometry;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"><a class="line" href="classQgsScopedExpressionFunction.html#a0cb1da28207af8c792ee22387dada1af"> 1322</a></span>&#160;QSet&lt;QString&gt; <a class="code" href="classQgsScopedExpressionFunction.html#a0cb1da28207af8c792ee22387dada1af">QgsScopedExpressionFunction::referencedColumns</a>( <span class="keyword">const</span> <a class="code" href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a> *node )<span class="keyword"> const</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  Q_UNUSED( node )</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="keywordflow">return</span> mReferencedColumns;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;}</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"><a class="line" href="classQgsScopedExpressionFunction.html#a7ad3bd625ded5491101d0409242a83c7"> 1328</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsScopedExpressionFunction.html#a7ad3bd625ded5491101d0409242a83c7">QgsScopedExpressionFunction::isStatic</a>( <span class="keyword">const</span> <a class="code" href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a> *node, <a class="code" href="classQgsExpression.html">QgsExpression</a> *parent, <span class="keyword">const</span> <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> *context )<span class="keyword"> const</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keywordflow">return</span> allParamsStatic( node, parent, context );</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;}</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">// GetLayerVisibility</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;QgsExpressionContextUtils::GetLayerVisibility::GetLayerVisibility( <span class="keyword">const</span> QList&lt;QgsMapLayer *&gt; &amp;layers )</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  : <a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a>( QStringLiteral( <span class="stringliteral">&quot;is_layer_visible&quot;</span> ), <a class="code" href="classQgsExpressionFunction.html#a06d7401e94e98cb20e2014f1ef0d009a">QgsExpressionFunction::ParameterList</a>() &lt;&lt; <a class="code" href="classQgsExpressionFunction_1_1Parameter.html">QgsExpressionFunction::Parameter</a>( QStringLiteral( <span class="stringliteral">&quot;id&quot;</span> ) ), QStringLiteral( <span class="stringliteral">&quot;General&quot;</span> ) )</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  , mLayers( _qgis_listRawToQPointer( layers ) )</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;{}</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;QVariant QgsExpressionContextUtils::GetLayerVisibility::func( <span class="keyword">const</span> QVariantList &amp;values, <span class="keyword">const</span> <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> *, <a class="code" href="classQgsExpression.html">QgsExpression</a> *parent, <span class="keyword">const</span> <a class="code" href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a> * )</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;{</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="keywordflow">if</span> ( mLayers.isEmpty() )</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer = QgsExpressionUtils::getMapLayer( values.at( 0 ), parent );</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordflow">if</span> ( layer )</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">return</span> mLayers.contains( layer );</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  }</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  }</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;}</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<a class="code" href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a> *QgsExpressionContextUtils::GetLayerVisibility::clone()<span class="keyword"> const</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> GetLayerVisibility( _qgis_listQPointerToRaw( mLayers ) );</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;}</div><div class="ttc" id="structQgsPointLocator_1_1Match_html"><div class="ttname"><a href="structQgsPointLocator_1_1Match.html">QgsPointLocator::Match</a></div><div class="ttdef"><b>Definition:</b> <a href="qgspointlocator_8h_source.html#l00130">qgspointlocator.h:130</a></div></div>
<div class="ttc" id="classQgsFeature_html_ae534eb7d7a9facfe50f1253f92668cd3"><div class="ttname"><a href="classQgsFeature.html#ae534eb7d7a9facfe50f1253f92668cd3">QgsFeature::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Returns the validity of this feature. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00183">qgsfeature.cpp:183</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a18a077e76b13a235bf3e0e73cb45da73"><div class="ttname"><a href="classQgsExpressionContextScope.html#a18a077e76b13a235bf3e0e73cb45da73">QgsExpressionContextScope::hasVariable</a></div><div class="ttdeci">bool hasVariable(const QString &amp;name) const</div><div class="ttdoc">Tests whether a variable with the specified name exists in the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00123">qgsexpressioncontext.cpp:123</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_adedbaf735924a5be1102251a47c0e0ad"><div class="ttname"><a href="classQgsExpressionContext.html#adedbaf735924a5be1102251a47c0e0ad">QgsExpressionContext::EXPR_ORIGINAL_VALUE</a></div><div class="ttdeci">static const QString EXPR_ORIGINAL_VALUE</div><div class="ttdoc">Inbuilt variable name for value original value variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00719">qgsexpressioncontext.h:719</a></div></div>
<div class="ttc" id="classQgsExpression_html"><div class="ttname"><a href="classQgsExpression.html">QgsExpression</a></div><div class="ttdoc">Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;). </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpression_8h_source.html#l00113">qgsexpression.h:113</a></div></div>
<div class="ttc" id="classQgsApplication_html_a70811c3ff8a601a945c2255847c76688"><div class="ttname"><a href="classQgsApplication.html#a70811c3ff8a601a945c2255847c76688">QgsApplication::locale</a></div><div class="ttdeci">static QString locale()</div><div class="ttdoc">Returns the QGIS locale. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01020">qgsapplication.cpp:1020</a></div></div>
<div class="ttc" id="classQgsFeature_html_a64e6b9dd1e5a66c960f985f5d885d7f6"><div class="ttname"><a href="classQgsFeature.html#a64e6b9dd1e5a66c960f985f5d885d7f6">QgsFeature::id</a></div><div class="ttdeci">QgsFeatureId id</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00064">qgsfeature.h:64</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a23cfe974933355eafa6b92cae9eaf525"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a23cfe974933355eafa6b92cae9eaf525">QgsExpressionContextUtils::updateSymbolScope</a></div><div class="ttdeci">static QgsExpressionContextScope * updateSymbolScope(const QgsSymbol *symbol, QgsExpressionContextScope *symbolScope=nullptr)</div><div class="ttdoc">Updates a symbol scope related to a QgsSymbol to an expression context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01043">qgsexpressioncontext.cpp:1043</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_aedee253501cfe351a8c105df46af9db9"><div class="ttname"><a href="classQgsExpressionContext.html#aedee253501cfe351a8c105df46af9db9">QgsExpressionContext::cachedValue</a></div><div class="ttdeci">QVariant cachedValue(const QString &amp;key) const</div><div class="ttdoc">Returns the matching cached value, if set. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00567">qgsexpressioncontext.cpp:567</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a20172dc1c42ca6fbdc55229707c933de"><div class="ttname"><a href="classQgsExpressionContextScope.html#a20172dc1c42ca6fbdc55229707c933de">QgsExpressionContextScope::description</a></div><div class="ttdeci">QString description(const QString &amp;name) const</div><div class="ttdoc">Returns the translated description for the variable with the specified name (if set). </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00193">qgsexpressioncontext.cpp:193</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a7d8522a7794ba4a960515ba97e33a158"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a7d8522a7794ba4a960515ba97e33a158">QgsExpressionContextUtils::processingAlgorithmScope</a></div><div class="ttdeci">static QgsExpressionContextScope * processingAlgorithmScope(const QgsProcessingAlgorithm *algorithm, const QVariantMap &amp;parameters, QgsProcessingContext &amp;context)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a processing algorithm...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01283">qgsexpressioncontext.cpp:1283</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_ae28b690c36097a1cf051e2c7f858a88b"><div class="ttname"><a href="classQgsExpressionContext.html#ae28b690c36097a1cf051e2c7f858a88b">QgsExpressionContext::EXPR_CLUSTER_COLOR</a></div><div class="ttdeci">static const QString EXPR_CLUSTER_COLOR</div><div class="ttdoc">Inbuilt variable name for cluster color variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00735">qgsexpressioncontext.h:735</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_aa51f9bb99fab6ff86690ab5da396ae82"><div class="ttname"><a href="classQgsExpressionContextUtils.html#aa51f9bb99fab6ff86690ab5da396ae82">QgsExpressionContextUtils::setLayoutItemVariable</a></div><div class="ttdeci">static void setLayoutItemVariable(QgsLayoutItem *item, const QString &amp;name, const QVariant &amp;value)</div><div class="ttdoc">Sets a layout item context variable, with the given name and value. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01240">qgsexpressioncontext.cpp:1240</a></div></div>
<div class="ttc" id="classQgsLayoutItem_html_a68fd60bc6b9e26d0a892c0602ccb6977"><div class="ttname"><a href="classQgsLayoutItem.html#a68fd60bc6b9e26d0a892c0602ccb6977">QgsLayoutItem::createExpressionContext</a></div><div class="ttdeci">QgsExpressionContext createExpressionContext() const override</div><div class="ttdoc">This method needs to be reimplemented in all classes which implement this interface and return an exp...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitem_8cpp_source.html#l01114">qgslayoutitem.cpp:1114</a></div></div>
<div class="ttc" id="structQgsExpressionContextScope_1_1StaticVariable_html"><div class="ttname"><a href="structQgsExpressionContextScope_1_1StaticVariable.html">QgsExpressionContextScope::StaticVariable</a></div><div class="ttdoc">Single variable definition for use within a QgsExpressionContextScope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00136">qgsexpressioncontext.h:136</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_ae05f83118513c147a754f90e906982ec"><div class="ttname"><a href="classQgsExpressionContextUtils.html#ae05f83118513c147a754f90e906982ec">QgsExpressionContextUtils::setGlobalVariable</a></div><div class="ttdeci">static void setGlobalVariable(const QString &amp;name, const QVariant &amp;value)</div><div class="ttdoc">Sets a global context variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00607">qgsexpressioncontext.cpp:607</a></div></div>
<div class="ttc" id="classQgsMapLayer_html"><div class="ttname"><a href="classQgsMapLayer.html">QgsMapLayer</a></div><div class="ttdoc">Base class for all map layer types. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8h_source.html#l00063">qgsmaplayer.h:63</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a150c133833cb77f7c0fab590d0f64cbb"><div class="ttname"><a href="classQgsExpressionContext.html#a150c133833cb77f7c0fab590d0f64cbb">QgsExpressionContext::setCachedValue</a></div><div class="ttdeci">void setCachedValue(const QString &amp;key, const QVariant &amp;value) const</div><div class="ttdoc">Sets a value to cache within the expression context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00557">qgsexpressioncontext.cpp:557</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a28c216e86fda75f2b945fcaccd03a248"><div class="ttname"><a href="classQgsExpressionContext.html#a28c216e86fda75f2b945fcaccd03a248">QgsExpressionContext::isHighlightedFunction</a></div><div class="ttdeci">bool isHighlightedFunction(const QString &amp;name) const</div><div class="ttdoc">Returns true if the specified function name is intended to be highlighted to the user. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00318">qgsexpressioncontext.cpp:318</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a6174fe816c7626cd0d13de4117d3259c"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a6174fe816c7626cd0d13de4117d3259c">QgsExpressionContextUtils::setLayoutItemVariables</a></div><div class="ttdeci">static void setLayoutItemVariables(QgsLayoutItem *item, const QVariantMap &amp;variables)</div><div class="ttdoc">Sets all layout item context variables for an item. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01256">qgsexpressioncontext.cpp:1256</a></div></div>
<div class="ttc" id="classQgis_html_a5f3df28965caa574493856e7fab01689"><div class="ttname"><a href="classQgis.html#a5f3df28965caa574493856e7fab01689">Qgis::QGIS_VERSION</a></div><div class="ttdeci">static const QString QGIS_VERSION</div><div class="ttdoc">Version string. </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00064">qgis.h:64</a></div></div>
<div class="ttc" id="qgsproject_8h_html"><div class="ttname"><a href="qgsproject_8h.html">qgsproject.h</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_ae978a7d9d4c727043ca1700f67a828f9"><div class="ttname"><a href="classQgsExpressionContext.html#ae978a7d9d4c727043ca1700f67a828f9">QgsExpressionContext::scope</a></div><div class="ttdeci">QgsExpressionContextScope * scope(int index)</div><div class="ttdoc">Returns the scope at the specified index within the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00354">qgsexpressioncontext.cpp:354</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a55848917d0e162a8d220e4a0eefcfca0"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a55848917d0e162a8d220e4a0eefcfca0">QgsExpressionContextUtils::setLayerVariables</a></div><div class="ttdeci">static void setLayerVariables(QgsMapLayer *layer, const QVariantMap &amp;variables)</div><div class="ttdoc">Sets all layer context variables. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00934">qgsexpressioncontext.cpp:934</a></div></div>
<div class="ttc" id="classQgsProcessingAlgorithm_html_a5ca92c590bec71b303e062496dc13823"><div class="ttname"><a href="classQgsProcessingAlgorithm.html#a5ca92c590bec71b303e062496dc13823">QgsProcessingAlgorithm::id</a></div><div class="ttdeci">QString id() const</div><div class="ttdoc">Returns the unique ID for the algorithm, which is a combination of the algorithm provider&amp;#39;s ID and th...</div><div class="ttdef"><b>Definition:</b> <a href="qgsprocessingalgorithm_8cpp_source.html#l00045">qgsprocessingalgorithm.cpp:45</a></div></div>
<div class="ttc" id="classQgsAbstractMetadataBase_html_a92ee59f4ef876f422ca1190d399b9327"><div class="ttname"><a href="classQgsAbstractMetadataBase.html#a92ee59f4ef876f422ca1190d399b9327">QgsAbstractMetadataBase::keywords</a></div><div class="ttdeci">QgsAbstractMetadataBase::KeywordMap keywords() const</div><div class="ttdoc">Returns the keywords map, which is a set of descriptive keywords associated with the resource...</div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractmetadatabase_8cpp_source.html#l00086">qgsabstractmetadatabase.cpp:86</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_aa3b1fb20c01c045ea8eeb0666d2d8e69"><div class="ttname"><a href="classQgsExpressionContext.html#aa3b1fb20c01c045ea8eeb0666d2d8e69">QgsExpressionContext::isReadOnly</a></div><div class="ttdeci">bool isReadOnly(const QString &amp;name) const</div><div class="ttdoc">Returns whether a variable is read only, and should not be modifiable by users. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00417">qgsexpressioncontext.cpp:417</a></div></div>
<div class="ttc" id="classQgsLayoutItem_html"><div class="ttname"><a href="classQgsLayoutItem.html">QgsLayoutItem</a></div><div class="ttdoc">Base class for graphical items within a QgsLayout. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitem_8h_source.html#l00111">qgslayoutitem.h:111</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a0558aa150d6d9ad4ebc40be54f88b051"><div class="ttname"><a href="classQgsExpressionContext.html#a0558aa150d6d9ad4ebc40be54f88b051">QgsExpressionContext::EXPR_GEOMETRY_POINT_COUNT</a></div><div class="ttdeci">static const QString EXPR_GEOMETRY_POINT_COUNT</div><div class="ttdoc">Inbuilt variable name for point count variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00729">qgsexpressioncontext.h:729</a></div></div>
<div class="ttc" id="classQgsUnitTypes_html_a43808dc6ed58c191cc4373e7c8e506fb"><div class="ttname"><a href="classQgsUnitTypes.html#a43808dc6ed58c191cc4373e7c8e506fb">QgsUnitTypes::toString</a></div><div class="ttdeci">static Q_INVOKABLE QString toString(QgsUnitTypes::DistanceUnit unit)</div><div class="ttdoc">Returns a translated string representing a distance unit. </div><div class="ttdef"><b>Definition:</b> <a href="qgsunittypes_8cpp_source.html#l00152">qgsunittypes.cpp:152</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a9ec29c2a673c7fd37dabea6074051a91"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a9ec29c2a673c7fd37dabea6074051a91">QgsExpressionContextUtils::setLayoutVariable</a></div><div class="ttdeci">static void setLayoutVariable(QgsLayout *layout, const QString &amp;name, const QVariant &amp;value)</div><div class="ttdoc">Sets a layout context variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01119">qgsexpressioncontext.cpp:1119</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a445ef1701fe18cb2943f0e18594453d0"><div class="ttname"><a href="classQgsExpressionContext.html#a445ef1701fe18cb2943f0e18594453d0">QgsExpressionContext::filteredVariableNames</a></div><div class="ttdeci">QStringList filteredVariableNames() const</div><div class="ttdoc">Returns a filtered list of variables names set by all scopes in the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00401">qgsexpressioncontext.cpp:401</a></div></div>
<div class="ttc" id="classQgsApplication_html_a131225075c57b2aca20557cad9ee0989"><div class="ttname"><a href="classQgsApplication.html#a131225075c57b2aca20557cad9ee0989">QgsApplication::setCustomVariables</a></div><div class="ttdeci">static void setCustomVariables(const QVariantMap &amp;customVariables)</div><div class="ttdoc">Custom expression variables for this application. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01492">qgsapplication.cpp:1492</a></div></div>
<div class="ttc" id="classQgsSymbol_html"><div class="ttname"><a href="classQgsSymbol.html">QgsSymbol</a></div><div class="ttdoc">Abstract base class for all rendered symbols. </div><div class="ttdef"><b>Definition:</b> <a href="qgssymbol_8h_source.html#l00061">qgssymbol.h:61</a></div></div>
<div class="ttc" id="qgsexpressionutils_8h_html"><div class="ttname"><a href="qgsexpressionutils_8h.html">qgsexpressionutils.h</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a385cabc7da06c7222938c35f6124a540"><div class="ttname"><a href="classQgsExpressionContext.html#a385cabc7da06c7222938c35f6124a540">QgsExpressionContext::operator=</a></div><div class="ttdeci">QgsExpressionContext &amp; operator=(const QgsExpressionContext &amp;other)</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00261">qgsexpressioncontext.cpp:261</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_ad8588f8a609232d388442c38ff8b1317"><div class="ttname"><a href="classQgsMapSettings.html#ad8588f8a609232d388442c38ff8b1317">QgsMapSettings::rotation</a></div><div class="ttdeci">double rotation() const</div><div class="ttdoc">Returns the rotation of the resulting map image, in degrees clockwise. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00090">qgsmapsettings.cpp:90</a></div></div>
<div class="ttc" id="qgslayout_8h_html"><div class="ttname"><a href="qgslayout_8h.html">qgslayout.h</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a01d17757b5282006feb3a6cc6b8e3c5f"><div class="ttname"><a href="classQgsExpressionContext.html#a01d17757b5282006feb3a6cc6b8e3c5f">QgsExpressionContext::hasFunction</a></div><div class="ttdeci">bool hasFunction(const QString &amp;name) const</div><div class="ttdoc">Checks whether a specified function is contained in the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00433">qgsexpressioncontext.cpp:433</a></div></div>
<div class="ttc" id="classQgsLayout_html_a95b7b1eb1e1d0c293e586bc45742b8c8"><div class="ttname"><a href="classQgsLayout.html#a95b7b1eb1e1d0c293e586bc45742b8c8">QgsLayout::customProperty</a></div><div class="ttdeci">QVariant customProperty(const QString &amp;key, const QVariant &amp;defaultValue=QVariant()) const</div><div class="ttdoc">Read a custom property from the layout. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00412">qgslayout.cpp:412</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a905a0794fd61464f5c4a126d69c61e21"><div class="ttname"><a href="classQgsExpressionContextScope.html#a905a0794fd61464f5c4a126d69c61e21">QgsExpressionContextScope::addFunction</a></div><div class="ttdeci">void addFunction(const QString &amp;name, QgsScopedExpressionFunction *function)</div><div class="ttdoc">Adds a function to the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00213">qgsexpressioncontext.cpp:213</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_ad6007da7679dc3b67e5b979b39566655"><div class="ttname"><a href="classQgsExpressionContextScope.html#ad6007da7679dc3b67e5b979b39566655">QgsExpressionContextScope::QgsExpressionContextScope</a></div><div class="ttdeci">QgsExpressionContextScope(const QString &amp;name=QString())</div><div class="ttdoc">Constructor for QgsExpressionContextScope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00056">qgsexpressioncontext.cpp:56</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a99a92e3956573acfc28f7199ba13948d"><div class="ttname"><a href="classQgsExpressionContext.html#a99a92e3956573acfc28f7199ba13948d">QgsExpressionContext::setFeature</a></div><div class="ttdeci">void setFeature(const QgsFeature &amp;feature)</div><div class="ttdoc">Convenience function for setting a feature for the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00504">qgsexpressioncontext.cpp:504</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a538d3af82abc562b3a1c011c04df1eed"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a538d3af82abc562b3a1c011c04df1eed">QgsExpressionContextUtils::removeProjectVariable</a></div><div class="ttdeci">static void removeProjectVariable(QgsProject *project, const QString &amp;name)</div><div class="ttdoc">Remove project context variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00850">qgsexpressioncontext.cpp:850</a></div></div>
<div class="ttc" id="qgslayoutatlas_8h_html"><div class="ttname"><a href="qgslayoutatlas_8h.html">qgslayoutatlas.h</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a5aaed2cbbb807fdecd5238f1273b1a4a"><div class="ttname"><a href="classQgsExpressionContext.html#a5aaed2cbbb807fdecd5238f1273b1a4a">QgsExpressionContext::activeScopeForVariable</a></div><div class="ttdeci">QgsExpressionContextScope * activeScopeForVariable(const QString &amp;name)</div><div class="ttdoc">Returns the currently active scope from the context for a specified variable name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00341">qgsexpressioncontext.cpp:341</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a37b99228545c3c246c6247d90c54b2e9"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a37b99228545c3c246c6247d90c54b2e9">QgsExpressionContextUtils::createFeatureBasedContext</a></div><div class="ttdeci">static QgsExpressionContext createFeatureBasedContext(const QgsFeature &amp;feature, const QgsFields &amp;fields)</div><div class="ttdoc">Helper function for creating an expression context which contains just a feature and fields collectio...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01275">qgsexpressioncontext.cpp:1275</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_af79f7dbeadc037cb98a4bab165449dd4"><div class="ttname"><a href="classQgsExpressionContextScope.html#af79f7dbeadc037cb98a4bab165449dd4">QgsExpressionContextScope::variableNames</a></div><div class="ttdeci">QStringList variableNames() const</div><div class="ttdoc">Returns a list of variable names contained within the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00133">qgsexpressioncontext.cpp:133</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_ac465a5001e0389802ae9e86ef2152050"><div class="ttname"><a href="classQgsExpressionContext.html#ac465a5001e0389802ae9e86ef2152050">QgsExpressionContext::hasCachedValue</a></div><div class="ttdeci">bool hasCachedValue(const QString &amp;key) const</div><div class="ttdoc">Returns true if the expression context contains a cached value with a matching key. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00562">qgsexpressioncontext.cpp:562</a></div></div>
<div class="ttc" id="classQgsLayoutItem_html_a226e90886e2c5d0474db36a3c5db6fa5"><div class="ttname"><a href="classQgsLayoutItem.html#a226e90886e2c5d0474db36a3c5db6fa5">QgsLayoutItem::sizeWithUnits</a></div><div class="ttdeci">QgsLayoutSize sizeWithUnits() const</div><div class="ttdoc">Returns the item&amp;#39;s current size, including units. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitem_8h_source.html#l00573">qgslayoutitem.h:573</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a7bf94cfa08abc37b75cc53dc921bb15e"><div class="ttname"><a href="classQgsMapLayer.html#a7bf94cfa08abc37b75cc53dc921bb15e">QgsMapLayer::setCustomProperty</a></div><div class="ttdeci">void setCustomProperty(const QString &amp;key, const QVariant &amp;value)</div><div class="ttdoc">Set a custom property for layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l01661">qgsmaplayer.cpp:1661</a></div></div>
<div class="ttc" id="classQgsLayoutObject_html_a5d3f15eb11a3715c3449027cea38bced"><div class="ttname"><a href="classQgsLayoutObject.html#a5d3f15eb11a3715c3449027cea38bced">QgsLayoutObject::setCustomProperty</a></div><div class="ttdeci">void setCustomProperty(const QString &amp;key, const QVariant &amp;value)</div><div class="ttdoc">Set a custom property for the object. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutobject_8cpp_source.html#l00113">qgslayoutobject.cpp:113</a></div></div>
<div class="ttc" id="classQgsLayoutObject_html_a1f1d97a03aa0d6789c09b67e460b4257"><div class="ttname"><a href="classQgsLayoutObject.html#a1f1d97a03aa0d6789c09b67e460b4257">QgsLayoutObject::customProperty</a></div><div class="ttdeci">QVariant customProperty(const QString &amp;key, const QVariant &amp;defaultValue=QVariant()) const</div><div class="ttdoc">Read a custom property from the object. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutobject_8cpp_source.html#l00118">qgslayoutobject.cpp:118</a></div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html_a433853323df4837869a2a8c2ad7521ea"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html#a433853323df4837869a2a8c2ad7521ea">QgsCoordinateReferenceSystem::toProj4</a></div><div class="ttdeci">QString toProj4() const</div><div class="ttdoc">Returns a Proj4 string representation of this CRS. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8cpp_source.html#l01022">qgscoordinatereferencesystem.cpp:1022</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a8a83d6fd5908ddfe60bf5155dfe54595"><div class="ttname"><a href="classQgsExpressionContextScope.html#a8a83d6fd5908ddfe60bf5155dfe54595">QgsExpressionContextScope::isReadOnly</a></div><div class="ttdeci">bool isReadOnly(const QString &amp;name) const</div><div class="ttdoc">Tests whether the specified variable is read only and should not be editable by users. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00183">qgsexpressioncontext.cpp:183</a></div></div>
<div class="ttc" id="qgsmaplayerlistutils_8h_html"><div class="ttname"><a href="qgsmaplayerlistutils_8h.html">qgsmaplayerlistutils.h</a></div></div>
<div class="ttc" id="classQgsProjectMetadata_html_a0e71b256274a88a342257927df34500d"><div class="ttname"><a href="classQgsProjectMetadata.html#a0e71b256274a88a342257927df34500d">QgsProjectMetadata::author</a></div><div class="ttdeci">QString author() const</div><div class="ttdoc">Returns the project author string. </div><div class="ttdef"><b>Definition:</b> <a href="qgsprojectmetadata_8cpp_source.html#l00070">qgsprojectmetadata.cpp:70</a></div></div>
<div class="ttc" id="classQgsFields_html"><div class="ttname"><a href="classQgsFields.html">QgsFields</a></div><div class="ttdoc">Container of fields for a vector layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfields_8h_source.html#l00042">qgsfields.h:42</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a8bbb345070dc112c10c187999ced4bec"><div class="ttname"><a href="classQgsExpressionContext.html#a8bbb345070dc112c10c187999ced4bec">QgsExpressionContext::hasVariable</a></div><div class="ttdeci">bool hasVariable(const QString &amp;name) const</div><div class="ttdoc">Check whether a variable is specified by any scope within the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00281">qgsexpressioncontext.cpp:281</a></div></div>
<div class="ttc" id="classQgsGeometry_html"><div class="ttname"><a href="classQgsGeometry.html">QgsGeometry</a></div><div class="ttdoc">A geometry is the spatial representation of a feature. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8h_source.html#l00106">qgsgeometry.h:106</a></div></div>
<div class="ttc" id="qgsexpressioncontext_8h_html"><div class="ttname"><a href="qgsexpressioncontext_8h.html">qgsexpressioncontext.h</a></div></div>
<div class="ttc" id="classQgsApplication_html_a38c75edfd32a897c4536dbdf07b511a5"><div class="ttname"><a href="classQgsApplication.html#a38c75edfd32a897c4536dbdf07b511a5">QgsApplication::customVariables</a></div><div class="ttdeci">static QVariantMap customVariables()</div><div class="ttdoc">Custom expression variables for this application. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01473">qgsapplication.cpp:1473</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a191fb8dcb07a4f6105b349067b6956eb"><div class="ttname"><a href="classQgsExpressionContextScope.html#a191fb8dcb07a4f6105b349067b6956eb">QgsExpressionContextScope::setFields</a></div><div class="ttdeci">void setFields(const QgsFields &amp;fields)</div><div class="ttdoc">Convenience function for setting a fields for the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00219">qgsexpressioncontext.cpp:219</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_af94ae6fe63a30c389eb1de8ac5ee2014"><div class="ttname"><a href="classQgsExpressionContext.html#af94ae6fe63a30c389eb1de8ac5ee2014">QgsExpressionContext::fields</a></div><div class="ttdeci">QgsFields fields() const</div><div class="ttdoc">Convenience function for retrieving the fields for the context, if set. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00543">qgsexpressioncontext.cpp:543</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_aa9bdc27de65d845f5e31e69ea4d936f8"><div class="ttname"><a href="classQgsExpressionContextUtils.html#aa9bdc27de65d845f5e31e69ea4d936f8">QgsExpressionContextUtils::mapToolCaptureScope</a></div><div class="ttdeci">static QgsExpressionContextScope * mapToolCaptureScope(const QList&lt; QgsPointLocator::Match &gt; &amp;matches)</div><div class="ttdoc">Sets the expression context variables which are available for expressions triggered by a map tool cap...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01019">qgsexpressioncontext.cpp:1019</a></div></div>
<div class="ttc" id="classQgsExpression_html_a3976fd1aaa7537bd091b46fab972149b"><div class="ttname"><a href="classQgsExpression.html#a3976fd1aaa7537bd091b46fab972149b">QgsExpression::variableHelpText</a></div><div class="ttdeci">static QString variableHelpText(const QString &amp;variableName)</div><div class="ttdoc">Returns the help text for a specified variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpression_8cpp_source.html#l00803">qgsexpression.cpp:803</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a9b0dc97b5f9e21fa11eb803a33dfa7d8"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a9b0dc97b5f9e21fa11eb803a33dfa7d8">QgsExpressionContextUtils::projectScope</a></div><div class="ttdeci">static QgsExpressionContextScope * projectScope(const QgsProject *project)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QGIS project. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00779">qgsexpressioncontext.cpp:779</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_ac44aac25ea00d124a7ba36dc270d0d8c"><div class="ttname"><a href="classQgsMapSettings.html#ac44aac25ea00d124a7ba36dc270d0d8c">QgsMapSettings::layers</a></div><div class="ttdeci">QList&lt; QgsMapLayer * &gt; layers() const</div><div class="ttdoc">Gets list of layers for map rendering The layers are stored in the reverse order of how they are rend...</div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00268">qgsmapsettings.cpp:268</a></div></div>
<div class="ttc" id="classQgsFeature_html"><div class="ttname"><a href="classQgsFeature.html">QgsFeature</a></div><div class="ttdoc">The feature class encapsulates a single feature including its id, geometry and a list of field/values...</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00055">qgsfeature.h:55</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_ad5638bcf59e4998f7adb057802237766"><div class="ttname"><a href="classQgsExpressionContextScope.html#ad5638bcf59e4998f7adb057802237766">QgsExpressionContextScope::operator=</a></div><div class="ttdeci">QgsExpressionContextScope &amp; operator=(const QgsExpressionContextScope &amp;other)</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00075">qgsexpressioncontext.cpp:75</a></div></div>
<div class="ttc" id="qgsexpression_8h_html"><div class="ttname"><a href="qgsexpression_8h.html">qgsexpression.h</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a8db004b232bcda2bedb2f792fcb3ea68"><div class="ttname"><a href="classQgsExpressionContext.html#a8db004b232bcda2bedb2f792fcb3ea68">QgsExpressionContext::takeScopes</a></div><div class="ttdeci">QList&lt; QgsExpressionContextScope * &gt; takeScopes()</div><div class="ttdoc">Returns all scopes from this context and remove them, leaving this context without any context...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00491">qgsexpressioncontext.cpp:491</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_aa0d383f2d71c0799c2de1d1a89933647"><div class="ttname"><a href="classQgsExpressionContextUtils.html#aa0d383f2d71c0799c2de1d1a89933647">QgsExpressionContextUtils::formScope</a></div><div class="ttdeci">static QgsExpressionContextScope * formScope(const QgsFeature &amp;formFeature=QgsFeature(), const QString &amp;formMode=QString())</div><div class="ttdoc">Creates a new scope which contains functions and variables from the current attribute form/table feat...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00769">qgsexpressioncontext.cpp:769</a></div></div>
<div class="ttc" id="classQgsScopedExpressionFunction_html_aa959787f4041762c1dd9fd018f15bb5b"><div class="ttname"><a href="classQgsScopedExpressionFunction.html#aa959787f4041762c1dd9fd018f15bb5b">QgsScopedExpressionFunction::usesGeometry</a></div><div class="ttdeci">bool usesGeometry(const QgsExpressionNodeFunction *node) const override</div><div class="ttdoc">Does this function use a geometry object. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01316">qgsexpressioncontext.cpp:1316</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_accec9b32dd95126556d1f8cf5642a6e9"><div class="ttname"><a href="classQgsExpressionContextUtils.html#accec9b32dd95126556d1f8cf5642a6e9">QgsExpressionContextUtils::setLayoutVariables</a></div><div class="ttdeci">static void setLayoutVariables(QgsLayout *layout, const QVariantMap &amp;variables)</div><div class="ttdoc">Sets all layout context variables. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01135">qgsexpressioncontext.cpp:1135</a></div></div>
<div class="ttc" id="qgsmapsettings_8h_html"><div class="ttname"><a href="qgsmapsettings_8h.html">qgsmapsettings.h</a></div></div>
<div class="ttc" id="qgsmaplayer_8h_html_a20864e6cf415152d2053e97b2c4db774"><div class="ttname"><a href="qgsmaplayer_8h.html#a20864e6cf415152d2053e97b2c4db774">QgsWeakMapLayerPointer</a></div><div class="ttdeci">QPointer&lt; QgsMapLayer &gt; QgsWeakMapLayerPointer</div><div class="ttdoc">Weak pointer for QgsMapLayer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8h_source.html#l01482">qgsmaplayer.h:1482</a></div></div>
<div class="ttc" id="classQgis_html_a599a850991eeb103d08d7954439df9d4"><div class="ttname"><a href="classQgis.html#a599a850991eeb103d08d7954439df9d4">Qgis::QGIS_VERSION_INT</a></div><div class="ttdeci">static const int QGIS_VERSION_INT</div><div class="ttdoc">Version number used for comparing versions using the &quot;Check QGIS Version&quot; function. </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00066">qgis.h:66</a></div></div>
<div class="ttc" id="classQgsProcessingAlgorithm_html"><div class="ttname"><a href="classQgsProcessingAlgorithm.html">QgsProcessingAlgorithm</a></div><div class="ttdoc">Abstract base class for processing algorithms. </div><div class="ttdef"><b>Definition:</b> <a href="qgsprocessingalgorithm_8h_source.html#l00050">qgsprocessingalgorithm.h:50</a></div></div>
<div class="ttc" id="classQgsExpressionFunction_html_a06d7401e94e98cb20e2014f1ef0d009a"><div class="ttname"><a href="classQgsExpressionFunction.html#a06d7401e94e98cb20e2014f1ef0d009a">QgsExpressionFunction::ParameterList</a></div><div class="ttdeci">QList&lt; QgsExpressionFunction::Parameter &gt; ParameterList</div><div class="ttdoc">List of parameters, used for function definition. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressionfunction_8h_source.html#l00104">qgsexpressionfunction.h:104</a></div></div>
<div class="ttc" id="classQgsLayout_html_a275bb7bb68287bcd28b61e30bf369d82"><div class="ttname"><a href="classQgsLayout.html#a275bb7bb68287bcd28b61e30bf369d82">QgsLayout::renderContext</a></div><div class="ttdeci">QgsLayoutRenderContext &amp; renderContext()</div><div class="ttdoc">Returns a reference to the layout&amp;#39;s render context, which stores information relating to the current ...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00356">qgslayout.cpp:356</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_aa8e91ef1d4612834c2165b7fd511e4bf"><div class="ttname"><a href="classQgsMapSettings.html#aa8e91ef1d4612834c2165b7fd511e4bf">QgsMapSettings::visibleExtent</a></div><div class="ttdeci">QgsRectangle visibleExtent() const</div><div class="ttdoc">Returns the actual extent derived from requested extent that takes takes output image size into accou...</div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00357">qgsmapsettings.cpp:357</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_ae805e766bee826d1345ac8e2b977eda1"><div class="ttname"><a href="classQgsExpressionContext.html#ae805e766bee826d1345ac8e2b977eda1">QgsExpressionContext::variable</a></div><div class="ttdeci">QVariant variable(const QString &amp;name) const</div><div class="ttdoc">Fetches a matching variable from the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00291">qgsexpressioncontext.cpp:291</a></div></div>
<div class="ttc" id="namespaceMathUtils_html_a54d06f819763561d0b251e1b1151dfc4"><div class="ttname"><a href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a></div><div class="ttdeci">double ANALYSIS_EXPORT angle(QgsPoint *p1, QgsPoint *p2, QgsPoint *p3, QgsPoint *p4)</div><div class="ttdoc">Calculates the angle between two segments (in 2 dimension, z-values are ignored) </div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00786">MathUtils.cpp:786</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_aac12f83e5634bf46709fd82c3791e3dd"><div class="ttname"><a href="classQgsExpressionContextScope.html#aac12f83e5634bf46709fd82c3791e3dd">QgsExpressionContextScope::addVariable</a></div><div class="ttdeci">void addVariable(const QgsExpressionContextScope::StaticVariable &amp;variable)</div><div class="ttdoc">Adds a variable into the context scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00113">qgsexpressioncontext.cpp:113</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_adad2e33ba2d05f9248b2d48d1979daba"><div class="ttname"><a href="classQgsExpressionContext.html#adad2e33ba2d05f9248b2d48d1979daba">QgsExpressionContext::operator&lt;&lt;</a></div><div class="ttdeci">QgsExpressionContext &amp; operator&lt;&lt;(QgsExpressionContextScope *scope)</div><div class="ttdoc">Appends a scope to the end of the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00498">qgsexpressioncontext.cpp:498</a></div></div>
<div class="ttc" id="classQgsMarkerSymbol_html"><div class="ttname"><a href="classQgsMarkerSymbol.html">QgsMarkerSymbol</a></div><div class="ttdef"><b>Definition:</b> <a href="qgssymbol_8h_source.html#l00730">qgssymbol.h:730</a></div></div>
<div class="ttc" id="classQgsApplication_html_af5d33acfc76e57bf925094878b9cc200"><div class="ttname"><a href="classQgsApplication.html#af5d33acfc76e57bf925094878b9cc200">QgsApplication::userFullName</a></div><div class="ttdeci">static QString userFullName()</div><div class="ttdoc">Returns the user&amp;#39;s operating system login account full display name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00966">qgsapplication.cpp:966</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_af3ee8eaf56340f2b72bb160b2534a04e"><div class="ttname"><a href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">QgsMapSettings::destinationCrs</a></div><div class="ttdeci">QgsCoordinateReferenceSystem destinationCrs() const</div><div class="ttdoc">returns CRS of destination coordinate reference system </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00304">qgsmapsettings.cpp:304</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a049e1539045a9dc2b62246bb4870b1e0"><div class="ttname"><a href="classQgsExpressionContext.html#a049e1539045a9dc2b62246bb4870b1e0">QgsExpressionContext::description</a></div><div class="ttdeci">QString description(const QString &amp;name) const</div><div class="ttdoc">Returns a translated description string for the variable with specified name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00427">qgsexpressioncontext.cpp:427</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_ad4410549290bbce6cf62e8415f96ec6c"><div class="ttname"><a href="classQgsExpressionContext.html#ad4410549290bbce6cf62e8415f96ec6c">QgsExpressionContext::~QgsExpressionContext</a></div><div class="ttdeci">~QgsExpressionContext()</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00275">qgsexpressioncontext.cpp:275</a></div></div>
<div class="ttc" id="qgsprocessingcontext_8h_html"><div class="ttname"><a href="qgsprocessingcontext_8h.html">qgsprocessingcontext.h</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_af7d4310259bd17e7e9857e6bb261351f"><div class="ttname"><a href="classQgsExpressionContext.html#af7d4310259bd17e7e9857e6bb261351f">QgsExpressionContext::hasFeature</a></div><div class="ttdeci">bool hasFeature() const</div><div class="ttdoc">Returns true if the context has a feature associated with it. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00512">qgsexpressioncontext.cpp:512</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a8bd7bda6ca679aed92deaf4fc7d86793"><div class="ttname"><a href="classQgsMapSettings.html#a8bd7bda6ca679aed92deaf4fc7d86793">QgsMapSettings::mapUnits</a></div><div class="ttdeci">QgsUnitTypes::DistanceUnit mapUnits() const</div><div class="ttdoc">Gets units of map&amp;#39;s geographical coordinates - used for scale calculation. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00346">qgsmapsettings.cpp:346</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html_a76db768efceaae6bd45ae45106f30d64"><div class="ttname"><a href="classQgsLayoutAtlas.html#a76db768efceaae6bd45ae45106f30d64">QgsLayoutAtlas::layout</a></div><div class="ttdeci">QgsLayout * layout() override</div><div class="ttdoc">Returns the layout associated with the iterator. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8cpp_source.html#l00043">qgslayoutatlas.cpp:43</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a19e07045196e0c52f0afd9b7465c0013"><div class="ttname"><a href="classQgsExpressionContext.html#a19e07045196e0c52f0afd9b7465c0013">QgsExpressionContext::setHighlightedFunctions</a></div><div class="ttdeci">void setHighlightedFunctions(const QStringList &amp;names)</div><div class="ttdoc">Sets the list of function names intended to be highlighted to the user. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00323">qgsexpressioncontext.cpp:323</a></div></div>
<div class="ttc" id="classQgsMapSettings_html"><div class="ttname"><a href="classQgsMapSettings.html">QgsMapSettings</a></div><div class="ttdoc">The QgsMapSettings class contains configuration for rendering of the map. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8h_source.html#l00060">qgsmapsettings.h:60</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_ad3945798feafefa137e9d2a4f029f504"><div class="ttname"><a href="classQgsExpressionContextScope.html#ad3945798feafefa137e9d2a4f029f504">QgsExpressionContextScope::setVariable</a></div><div class="ttdeci">void setVariable(const QString &amp;name, const QVariant &amp;value, bool isStatic=false)</div><div class="ttdoc">Convenience method for setting a variable in the context scope by name name and value. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00098">qgsexpressioncontext.cpp:98</a></div></div>
<div class="ttc" id="classQgsProject_html_aea9946353d9dbe54851991f476ed95ba"><div class="ttname"><a href="classQgsProject.html#aea9946353d9dbe54851991f476ed95ba">QgsProject::homePath</a></div><div class="ttdeci">QString homePath</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8h_source.html#l00094">qgsproject.h:94</a></div></div>
<div class="ttc" id="porting__processing_8dox_html_ac34f8cede000dff1f5b0b47d22fa9070"><div class="ttname"><a href="porting__processing_8dox.html#ac34f8cede000dff1f5b0b47d22fa9070">c</a></div><div class="ttdeci">As part of the API refactoring and improvements which landed in the Processing API was substantially reworked from the x version This was done in order to allow much of the underlying Processing framework to be ported into c</div><div class="ttdef"><b>Definition:</b> <a href="porting__processing_8dox_source.html#l00001">porting_processing.dox:1</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_af73d64fbafe3854f8fe3661022711583"><div class="ttname"><a href="classQgsExpressionContextScope.html#af73d64fbafe3854f8fe3661022711583">QgsExpressionContextScope::~QgsExpressionContextScope</a></div><div class="ttdeci">~QgsExpressionContextScope()</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00093">qgsexpressioncontext.cpp:93</a></div></div>
<div class="ttc" id="classQgsLayoutSize_html_afb753b7709c5bd638505ed88db3f5b6d"><div class="ttname"><a href="classQgsLayoutSize.html#afb753b7709c5bd638505ed88db3f5b6d">QgsLayoutSize::toQSizeF</a></div><div class="ttdeci">QSizeF toQSizeF() const</div><div class="ttdoc">Converts the layout size to a QSizeF. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutsize_8cpp_source.html#l00047">qgslayoutsize.cpp:47</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a04af195b7f916d8574245cb337bc524b"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a04af195b7f916d8574245cb337bc524b">QgsExpressionContextUtils::layoutItemScope</a></div><div class="ttdeci">static QgsExpressionContextScope * layoutItemScope(const QgsLayoutItem *item)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QgsLayoutItem. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01193">qgsexpressioncontext.cpp:1193</a></div></div>
<div class="ttc" id="classQgsScopedExpressionFunction_html_a7ad3bd625ded5491101d0409242a83c7"><div class="ttname"><a href="classQgsScopedExpressionFunction.html#a7ad3bd625ded5491101d0409242a83c7">QgsScopedExpressionFunction::isStatic</a></div><div class="ttdeci">bool isStatic(const QgsExpressionNodeFunction *node, QgsExpression *parent, const QgsExpressionContext *context) const override</div><div class="ttdoc">Will be called during prepare to determine if the function is static. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01328">qgsexpressioncontext.cpp:1328</a></div></div>
<div class="ttc" id="classQgsGeometry_html_a1104cc793e403d30afc7376b72cff3cc"><div class="ttname"><a href="classQgsGeometry.html#a1104cc793e403d30afc7376b72cff3cc">QgsGeometry::fromRect</a></div><div class="ttdeci">static QgsGeometry fromRect(const QgsRectangle &amp;rect)</div><div class="ttdoc">Creates a new geometry from a QgsRectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l00225">qgsgeometry.cpp:225</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a7a8f163527f722946d7252d1e626b852"><div class="ttname"><a href="classQgsExpressionContextScope.html#a7a8f163527f722946d7252d1e626b852">QgsExpressionContextScope::removeVariable</a></div><div class="ttdeci">bool removeVariable(const QString &amp;name)</div><div class="ttdoc">Removes a variable from the context scope, if found. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00118">qgsexpressioncontext.cpp:118</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a7969d8cb48b2d3ca8207f4350d45b67a"><div class="ttname"><a href="classQgsExpressionContext.html#a7969d8cb48b2d3ca8207f4350d45b67a">QgsExpressionContext::lastScope</a></div><div class="ttdeci">QgsExpressionContextScope * lastScope()</div><div class="ttdoc">Returns the last scope added to the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00362">qgsexpressioncontext.cpp:362</a></div></div>
<div class="ttc" id="classQgsLayoutReportContext_html_ac3e5f6b75c1f4d24f07c658b96375f9b"><div class="ttname"><a href="classQgsLayoutReportContext.html#ac3e5f6b75c1f4d24f07c658b96375f9b">QgsLayoutReportContext::layer</a></div><div class="ttdeci">QgsVectorLayer * layer() const</div><div class="ttdoc">Returns the vector layer associated with the layout&amp;#39;s context. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutreportcontext_8cpp_source.html#l00066">qgslayoutreportcontext.cpp:66</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a9ec485950cab154b786e98f2310d298d"><div class="ttname"><a href="classQgsExpressionContextScope.html#a9ec485950cab154b786e98f2310d298d">QgsExpressionContextScope::hasFunction</a></div><div class="ttdeci">bool hasFunction(const QString &amp;name) const</div><div class="ttdoc">Tests whether a function with the specified name exists in the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00198">qgsexpressioncontext.cpp:198</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_aa3093e2813b44988493bd644d7f226b5"><div class="ttname"><a href="classQgsExpressionContext.html#aa3093e2813b44988493bd644d7f226b5">QgsExpressionContext::EXPR_SYMBOL_ANGLE</a></div><div class="ttdeci">static const QString EXPR_SYMBOL_ANGLE</div><div class="ttdoc">Inbuilt variable name for symbol angle variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00723">qgsexpressioncontext.h:723</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_afba36ac63b06dd2659710f4f3cd58936"><div class="ttname"><a href="classQgsExpressionContextUtils.html#afba36ac63b06dd2659710f4f3cd58936">QgsExpressionContextUtils::globalScope</a></div><div class="ttdeci">static QgsExpressionContextScope * globalScope()</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to the global QGIS context...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00582">qgsexpressioncontext.cpp:582</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a4357e72f2c4a36d71225c286e3ef95ab"><div class="ttname"><a href="classQgsMapLayer.html#a4357e72f2c4a36d71225c286e3ef95ab">QgsMapLayer::id</a></div><div class="ttdeci">QString id() const</div><div class="ttdoc">Returns the layer&amp;#39;s unique ID, which is used to access this layer from QgsProject. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l00160">qgsmaplayer.cpp:160</a></div></div>
<div class="ttc" id="classQgsLayoutObject_html_a5c2685de76a13b24f034dac8efc895eb"><div class="ttname"><a href="classQgsLayoutObject.html#a5c2685de76a13b24f034dac8efc895eb">QgsLayoutObject::layout</a></div><div class="ttdeci">const QgsLayout * layout() const</div><div class="ttdoc">Returns the layout the object is attached to. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutobject_8cpp_source.html#l00103">qgslayoutobject.cpp:103</a></div></div>
<div class="ttc" id="classQgsLayoutPageCollection_html_aa7caa34a0756c8df9aba4b08d8e78fe7"><div class="ttname"><a href="classQgsLayoutPageCollection.html#aa7caa34a0756c8df9aba4b08d8e78fe7">QgsLayoutPageCollection::page</a></div><div class="ttdeci">QgsLayoutItemPage * page(int pageNumber)</div><div class="ttdoc">Returns a specific page (by pageNumber) from the collection. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutpagecollection_8cpp_source.html#l00445">qgslayoutpagecollection.cpp:445</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a3810719f044f4804c620be5bba5f270f"><div class="ttname"><a href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">QgsVectorLayer::fields</a></div><div class="ttdeci">QgsFields fields() const FINAL</div><div class="ttdoc">Returns the list of fields of this layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l02876">qgsvectorlayer.cpp:2876</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a979a5012ba60d53f49a14551ef9ff7e5"><div class="ttname"><a href="classQgsExpressionContext.html#a979a5012ba60d53f49a14551ef9ff7e5">QgsExpressionContext::scopeCount</a></div><div class="ttdeci">int scopeCount() const</div><div class="ttdoc">Returns the number of scopes contained in the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00468">qgsexpressioncontext.cpp:468</a></div></div>
<div class="ttc" id="qgsprocessingalgorithm_8h_html"><div class="ttname"><a href="qgsprocessingalgorithm_8h.html">qgsprocessingalgorithm.h</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a5a7a96f71dc630543e6373992fda4215"><div class="ttname"><a href="classQgsExpressionContext.html#a5a7a96f71dc630543e6373992fda4215">QgsExpressionContext::isHighlightedVariable</a></div><div class="ttdeci">bool isHighlightedVariable(const QString &amp;name) const</div><div class="ttdoc">Returns true if the specified variable name is intended to be highlighted to the user. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00308">qgsexpressioncontext.cpp:308</a></div></div>
<div class="ttc" id="classQgsLayout_html_a335b0864da1587dfb7f9f903d58c02d6"><div class="ttname"><a href="classQgsLayout.html#a335b0864da1587dfb7f9f903d58c02d6">QgsLayout::pageCollection</a></div><div class="ttdeci">QgsLayoutPageCollection * pageCollection()</div><div class="ttdoc">Returns a pointer to the layout&amp;#39;s page collection, which stores and manages page items in the layout...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00456">qgslayout.cpp:456</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a311388b59c0759920dda2420f1f8b8f5"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a311388b59c0759920dda2420f1f8b8f5">QgsExpressionContextUtils::setProjectVariables</a></div><div class="ttdeci">static void setProjectVariables(QgsProject *project, const QVariantMap &amp;variables)</div><div class="ttdoc">Sets all project context variables. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00842">qgsexpressioncontext.cpp:842</a></div></div>
<div class="ttc" id="classQgsProject_html_a6823cda4af28073a1720b62d93922a9f"><div class="ttname"><a href="classQgsProject.html#a6823cda4af28073a1720b62d93922a9f">QgsProject::metadata</a></div><div class="ttdeci">QgsProjectMetadata metadata</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8h_source.html#l00102">qgsproject.h:102</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a24e262c80b54fc44e6bdb90ca4b62020"><div class="ttname"><a href="classQgsMapSettings.html#a24e262c80b54fc44e6bdb90ca4b62020">QgsMapSettings::scale</a></div><div class="ttdeci">double scale() const</div><div class="ttdoc">Returns the calculated map scale. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00382">qgsmapsettings.cpp:382</a></div></div>
<div class="ttc" id="classQgsLayoutRenderContext_html_a9e48478f909c0e3ef25531f83bc118d5"><div class="ttname"><a href="classQgsLayoutRenderContext.html#a9e48478f909c0e3ef25531f83bc118d5">QgsLayoutRenderContext::dpi</a></div><div class="ttdeci">double dpi() const</div><div class="ttdoc">Returns the dpi for outputting the layout. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutrendercontext_8cpp_source.html#l00082">qgslayoutrendercontext.cpp:82</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a7f80945a6f9149707a29d16706b3bafd"><div class="ttname"><a href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">QgsRectangle::width</a></div><div class="ttdeci">double width() const</div><div class="ttdoc">Returns the width of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00201">qgsrectangle.h:201</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a8291267b0a963725e733c9f1d7f2d176"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a8291267b0a963725e733c9f1d7f2d176">QgsExpressionContextUtils::notificationScope</a></div><div class="ttdeci">static QgsExpressionContextScope * notificationScope(const QString &amp;message=QString())</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to provider notifications. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01300">qgsexpressioncontext.cpp:1300</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html"><div class="ttname"><a href="classQgsExpressionContext.html">QgsExpressionContext</a></div><div class="ttdoc">Expression contexts are used to encapsulate the parameters around which a QgsExpression should be eva...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00375">qgsexpressioncontext.h:375</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_add23d8e5e5df6e6cfe8d405feb654412"><div class="ttname"><a href="classQgsExpressionContextUtils.html#add23d8e5e5df6e6cfe8d405feb654412">QgsExpressionContextUtils::removeGlobalVariable</a></div><div class="ttdeci">static void removeGlobalVariable(const QString &amp;name)</div><div class="ttdoc">Remove a global context variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00617">qgsexpressioncontext.cpp:617</a></div></div>
<div class="ttc" id="classQgsProject_html_a9ca17432359f56b9e22378f3d8eeb606"><div class="ttname"><a href="classQgsProject.html#a9ca17432359f56b9e22378f3d8eeb606">QgsProject::crs</a></div><div class="ttdeci">QgsCoordinateReferenceSystem crs</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8h_source.html#l00095">qgsproject.h:95</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_abd76c81a6755f8eedf7f522aae90293d"><div class="ttname"><a href="classQgsExpressionContext.html#abd76c81a6755f8eedf7f522aae90293d">QgsExpressionContext::variablesToMap</a></div><div class="ttdeci">QVariantMap variablesToMap() const</div><div class="ttdoc">Returns a map of variable name to value representing all the expression variables contained by the co...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00297">qgsexpressioncontext.cpp:297</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html"><div class="ttname"><a href="classQgsLayoutAtlas.html">QgsLayoutAtlas</a></div><div class="ttdoc">Class used to render QgsLayout as an atlas, by iterating over the features from an associated vector ...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8h_source.html#l00040">qgslayoutatlas.h:40</a></div></div>
<div class="ttc" id="qgsapplication_8h_html"><div class="ttname"><a href="qgsapplication_8h.html">qgsapplication.h</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a72554b20e59c5aeb0f3245bf308a7f29"><div class="ttname"><a href="classQgsExpressionContextScope.html#a72554b20e59c5aeb0f3245bf308a7f29">QgsExpressionContextScope::variable</a></div><div class="ttdeci">QVariant variable(const QString &amp;name) const</div><div class="ttdoc">Retrieves a variable&amp;#39;s value from the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00128">qgsexpressioncontext.cpp:128</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a7574f63fed04010e6bba4efb369865c5"><div class="ttname"><a href="classQgsExpressionContext.html#a7574f63fed04010e6bba4efb369865c5">QgsExpressionContext::EXPR_SYMBOL_COLOR</a></div><div class="ttdeci">static const QString EXPR_SYMBOL_COLOR</div><div class="ttdoc">Inbuilt variable name for symbol color variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00721">qgsexpressioncontext.h:721</a></div></div>
<div class="ttc" id="classQgsProjectMetadata_html_af0c67e7519b82cab8b3795eb6ec048c3"><div class="ttname"><a href="classQgsProjectMetadata.html#af0c67e7519b82cab8b3795eb6ec048c3">QgsProjectMetadata::creationDateTime</a></div><div class="ttdeci">QDateTime creationDateTime() const</div><div class="ttdoc">Returns the project&amp;#39;s creation date/timestamp. </div><div class="ttdef"><b>Definition:</b> <a href="qgsprojectmetadata_8cpp_source.html#l00080">qgsprojectmetadata.cpp:80</a></div></div>
<div class="ttc" id="classQgsExpression_html_a156907cc7f06ffa70198f0db51dc928b"><div class="ttname"><a href="classQgsExpression.html#a156907cc7f06ffa70198f0db51dc928b">QgsExpression::registerFunction</a></div><div class="ttdeci">static bool registerFunction(QgsExpressionFunction *function, bool transferOwnership=false)</div><div class="ttdoc">Registers a function to the expression engine. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpression_8cpp_source.html#l00042">qgsexpression.cpp:42</a></div></div>
<div class="ttc" id="classQgsProject_html_ac3bfc93e4fd7ff07dbe6a21dab698561"><div class="ttname"><a href="classQgsProject.html#ac3bfc93e4fd7ff07dbe6a21dab698561">QgsProject::readListEntry</a></div><div class="ttdeci">QStringList readListEntry(const QString &amp;scope, const QString &amp;key, const QStringList &amp;def=QStringList(), bool *ok=nullptr) const</div><div class="ttdoc">Key value accessors. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l01978">qgsproject.cpp:1978</a></div></div>
<div class="ttc" id="classQgsProject_html"><div class="ttname"><a href="classQgsProject.html">QgsProject</a></div><div class="ttdoc">Reads and writes project states. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8h_source.html#l00089">qgsproject.h:89</a></div></div>
<div class="ttc" id="classQgsApplication_html_ad9ef42b0f6bf494e6132b06c11e7eca0"><div class="ttname"><a href="classQgsApplication.html#ad9ef42b0f6bf494e6132b06c11e7eca0">QgsApplication::setCustomVariable</a></div><div class="ttdeci">static void setCustomVariable(const QString &amp;name, const QVariant &amp;value)</div><div class="ttdoc">Set a single custom expression variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01507">qgsapplication.cpp:1507</a></div></div>
<div class="ttc" id="classQgsSymbol_html_ac9b6edde89e8765a52cc404eb3d4f760"><div class="ttname"><a href="classQgsSymbol.html#ac9b6edde89e8765a52cc404eb3d4f760">QgsSymbol::color</a></div><div class="ttdeci">QColor color() const</div><div class="ttdoc">Returns the symbol&amp;#39;s color. </div><div class="ttdef"><b>Definition:</b> <a href="qgssymbol_8cpp_source.html#l00459">qgssymbol.cpp:459</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html_aa5587f66edf8511d7b12fbbb4a80dda7"><div class="ttname"><a href="classQgsLayoutAtlas.html#aa5587f66edf8511d7b12fbbb4a80dda7">QgsLayoutAtlas::currentFilename</a></div><div class="ttdeci">QString currentFilename() const</div><div class="ttdoc">Returns the current feature filename. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8cpp_source.html#l00436">qgslayoutatlas.cpp:436</a></div></div>
<div class="ttc" id="classQgsLayoutItem_html_a679632491133702c64934c5376e4df34"><div class="ttname"><a href="classQgsLayoutItem.html#a679632491133702c64934c5376e4df34">QgsLayoutItem::page</a></div><div class="ttdeci">int page() const</div><div class="ttdoc">Returns the page the item is currently on, with the first page returning 0. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitem_8cpp_source.html#l00500">qgslayoutitem.cpp:500</a></div></div>
<div class="ttc" id="classQgsLayoutItem_html_ab6d4914bae7fdcff4ef1439136d79d76"><div class="ttname"><a href="classQgsLayoutItem.html#ab6d4914bae7fdcff4ef1439136d79d76">QgsLayoutItem::id</a></div><div class="ttdeci">QString id() const</div><div class="ttdoc">Returns the item&amp;#39;s ID name. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitem_8h_source.html#l00349">qgslayoutitem.h:349</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_ae204a266b5a9ae5475f568c264fc719c"><div class="ttname"><a href="classQgsExpressionContextUtils.html#ae204a266b5a9ae5475f568c264fc719c">QgsExpressionContextUtils::globalProjectLayerScopes</a></div><div class="ttdeci">static QList&lt; QgsExpressionContextScope * &gt; globalProjectLayerScopes(const QgsMapLayer *layer)</div><div class="ttdoc">Creates a list of three scopes: global, layer&amp;#39;s project and layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00903">qgsexpressioncontext.cpp:903</a></div></div>
<div class="ttc" id="qgslayoutreportcontext_8h_html"><div class="ttname"><a href="qgslayoutreportcontext_8h.html">qgslayoutreportcontext.h</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a71e8419d0d7162eeb0ab179cb56b92dc"><div class="ttname"><a href="classQgsExpressionContextScope.html#a71e8419d0d7162eeb0ab179cb56b92dc">QgsExpressionContextScope::function</a></div><div class="ttdeci">QgsExpressionFunction * function(const QString &amp;name) const</div><div class="ttdoc">Retrieves a function from the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00203">qgsexpressioncontext.cpp:203</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a42b0704e9b7abc58a75967f83f8237e3"><div class="ttname"><a href="classQgsExpressionContext.html#a42b0704e9b7abc58a75967f83f8237e3">QgsExpressionContext::EXPR_FIELDS</a></div><div class="ttdeci">static const QString EXPR_FIELDS</div><div class="ttdoc">Inbuilt variable name for fields storage. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00717">qgsexpressioncontext.h:717</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_ae471f014da87c2d93d32ffa980663b1f"><div class="ttname"><a href="classQgsExpressionContext.html#ae471f014da87c2d93d32ffa980663b1f">QgsExpressionContext::variableNames</a></div><div class="ttdeci">QStringList variableNames() const</div><div class="ttdoc">Returns a list of variables names set by all scopes in the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00391">qgsexpressioncontext.cpp:391</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html_a70bc6904c4aa7354d315ee537806278e"><div class="ttname"><a href="classQgsLayoutAtlas.html#a70bc6904c4aa7354d315ee537806278e">QgsLayoutAtlas::count</a></div><div class="ttdeci">int count() override</div><div class="ttdoc">Returns the number of features to iterate over. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8cpp_source.html#l00342">qgslayoutatlas.cpp:342</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html"><div class="ttname"><a href="classQgsExpressionContextScope.html">QgsExpressionContextScope</a></div><div class="ttdoc">Single scope for storing variables and functions for use within a QgsExpressionContext. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00129">qgsexpressioncontext.h:129</a></div></div>
<div class="ttc" id="classQgsExpressionNodeFunction_html"><div class="ttname"><a href="classQgsExpressionNodeFunction.html">QgsExpressionNodeFunction</a></div><div class="ttdoc">An expression node for expression functions. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressionnodeimpl_8h_source.html#l00265">qgsexpressionnodeimpl.h:265</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a847b0556706686d28f6e922391e936e5"><div class="ttname"><a href="classQgsExpressionContextScope.html#a847b0556706686d28f6e922391e936e5">QgsExpressionContextScope::setFeature</a></div><div class="ttdeci">void setFeature(const QgsFeature &amp;feature)</div><div class="ttdoc">Convenience function for setting a feature for the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00335">qgsexpressioncontext.h:335</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_ad1dd32e332c407d5b15637a56741953d"><div class="ttname"><a href="classQgsExpressionContextScope.html#ad1dd32e332c407d5b15637a56741953d">QgsExpressionContextScope::functionNames</a></div><div class="ttdeci">QStringList functionNames() const</div><div class="ttdoc">Retrieves a list of names of functions contained in the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00208">qgsexpressioncontext.cpp:208</a></div></div>
<div class="ttc" id="classQgsProject_html_ae8713790c27279b75e6b8e35a3c442a8"><div class="ttname"><a href="classQgsProject.html#ae8713790c27279b75e6b8e35a3c442a8">QgsProject::setCustomVariables</a></div><div class="ttdeci">void setCustomVariables(const QVariantMap &amp;customVariables)</div><div class="ttdoc">A map of custom project variables. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l01442">qgsproject.cpp:1442</a></div></div>
<div class="ttc" id="classQgsLayout_html"><div class="ttname"><a href="classQgsLayout.html">QgsLayout</a></div><div class="ttdoc">Base class for layouts, which can contain items such as maps, labels, scalebars, etc. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8h_source.html#l00049">qgslayout.h:49</a></div></div>
<div class="ttc" id="porting__processing_8dox_html_a2363590aeaf7c1e254a233e7d840ae29"><div class="ttname"><a href="porting__processing_8dox.html#a2363590aeaf7c1e254a233e7d840ae29">algorithm</a></div><div class="ttdeci">As part of the API refactoring and improvements which landed in the Processing API was substantially reworked from the x version This was done in order to allow much of the underlying Processing framework to be ported into allowing algorithms to be written in pure substantial changes are required in order to port existing x Processing algorithms for QGIS x The most significant changes are outlined not GeoAlgorithm For algorithms which operate on features one by consider subclassing the QgsProcessingFeatureBasedAlgorithm class This class allows much of the boilerplate code for looping over features from a vector layer to be bypassed and instead requires implementation of a processFeature method Ensure that your algorithm(or algorithm 's parent class) implements the new pure virtual createInstance(self) call</div></div>
<div class="ttc" id="classQgsExpressionContext_html_aba1a8ba2e07af5f1c67deb2e2f419a7f"><div class="ttname"><a href="classQgsExpressionContext.html#aba1a8ba2e07af5f1c67deb2e2f419a7f">QgsExpressionContext::setFields</a></div><div class="ttdeci">void setFields(const QgsFields &amp;fields)</div><div class="ttdoc">Convenience function for setting a fields for the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00535">qgsexpressioncontext.cpp:535</a></div></div>
<div class="ttc" id="classQgsProject_html_af33062a18269bbeca1c94ad9f330bd39"><div class="ttname"><a href="classQgsProject.html#af33062a18269bbeca1c94ad9f330bd39">QgsProject::projectStorage</a></div><div class="ttdeci">QgsProjectStorage * projectStorage() const</div><div class="ttdoc">Returns pointer to project storage implementation that handles read/write of the project file...</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l00562">qgsproject.cpp:562</a></div></div>
<div class="ttc" id="classQgsAbstractMetadataBase_html_a5045248e61ae9cecc71dcd6507f4f637"><div class="ttname"><a href="classQgsAbstractMetadataBase.html#a5045248e61ae9cecc71dcd6507f4f637">QgsAbstractMetadataBase::abstract</a></div><div class="ttdeci">QString abstract() const</div><div class="ttdoc">Returns a free-form description of the resource. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractmetadatabase_8cpp_source.html#l00061">qgsabstractmetadatabase.cpp:61</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a1fbb959d92c38898002f1ccf2ad307d7"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a1fbb959d92c38898002f1ccf2ad307d7">QgsExpressionContextUtils::setLayerVariable</a></div><div class="ttdeci">static void setLayerVariable(QgsMapLayer *layer, const QString &amp;name, const QVariant &amp;value)</div><div class="ttdoc">Sets a layer context variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00918">qgsexpressioncontext.cpp:918</a></div></div>
<div class="ttc" id="classQgsApplication_html_afb60e0f35dddcb8bbd6f36cd4b24b152"><div class="ttname"><a href="classQgsApplication.html#afb60e0f35dddcb8bbd6f36cd4b24b152">QgsApplication::userLoginName</a></div><div class="ttdeci">static QString userLoginName()</div><div class="ttdoc">Returns the user&amp;#39;s operating system login account name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00931">qgsapplication.cpp:931</a></div></div>
<div class="ttc" id="classQgsApplication_html_a18789733c033dabd7c8471a279e067d6"><div class="ttname"><a href="classQgsApplication.html#a18789733c033dabd7c8471a279e067d6">QgsApplication::osName</a></div><div class="ttdeci">static QString osName()</div><div class="ttdoc">Returns a string name of the operating system QGIS is running on. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01000">qgsapplication.cpp:1000</a></div></div>
<div class="ttc" id="classQgsLayoutPageCollection_html_a862a2cc4ad2aebe9f20d4a0aa0cb7086"><div class="ttname"><a href="classQgsLayoutPageCollection.html#a862a2cc4ad2aebe9f20d4a0aa0cb7086">QgsLayoutPageCollection::pageCount</a></div><div class="ttdeci">int pageCount() const</div><div class="ttdoc">Returns the number of pages in the collection. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutpagecollection_8cpp_source.html#l00440">qgslayoutpagecollection.cpp:440</a></div></div>
<div class="ttc" id="qgsgeometry_8h_html"><div class="ttname"><a href="qgsgeometry_8h.html">qgsgeometry.h</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html_af79288efc6dcad00a514aea857d5310d"><div class="ttname"><a href="classQgsLayoutAtlas.html#af79288efc6dcad00a514aea857d5310d">QgsLayoutAtlas::currentFeatureNumber</a></div><div class="ttdeci">int currentFeatureNumber() const</div><div class="ttdoc">Returns the current feature number, where a value of 0 corresponds to the first feature. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8h_source.html#l00253">qgslayoutatlas.h:253</a></div></div>
<div class="ttc" id="classQgsLayout_html_ad00cbf77a9f62bc18e939ce22395808f"><div class="ttname"><a href="classQgsLayout.html#ad00cbf77a9f62bc18e939ce22395808f">QgsLayout::reportContext</a></div><div class="ttdeci">QgsLayoutReportContext &amp; reportContext()</div><div class="ttdoc">Returns a reference to the layout&amp;#39;s report context, which stores information relating to the current ...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00366">qgslayout.cpp:366</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_ae4dcfffde09d1aab67f4cdc79abeb021"><div class="ttname"><a href="classQgsExpressionContextUtils.html#ae4dcfffde09d1aab67f4cdc79abeb021">QgsExpressionContextUtils::setProjectVariable</a></div><div class="ttdeci">static void setProjectVariable(QgsProject *project, const QString &amp;name, const QVariant &amp;value)</div><div class="ttdoc">Sets a project context variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00830">qgsexpressioncontext.cpp:830</a></div></div>
<div class="ttc" id="classQgsExpressionFunction_html"><div class="ttname"><a href="classQgsExpressionFunction.html">QgsExpressionFunction</a></div><div class="ttdoc">A abstract base class for defining QgsExpression functions. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressionfunction_8h_source.html#l00040">qgsexpressionfunction.h:40</a></div></div>
<div class="ttc" id="qgsfields_8h_html"><div class="ttname"><a href="qgsfields_8h.html">qgsfields.h</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_ab1636f7b97d9fa9b106a8063d9b3bfd3"><div class="ttname"><a href="classQgsExpressionContextUtils.html#ab1636f7b97d9fa9b106a8063d9b3bfd3">QgsExpressionContextUtils::registerContextFunctions</a></div><div class="ttdeci">static void registerContextFunctions()</div><div class="ttdoc">Registers all known core functions provided by QgsExpressionContextScope objects. ...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01307">qgsexpressioncontext.cpp:1307</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a66eebd07714f21ac3b21c229bac398f7"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a66eebd07714f21ac3b21c229bac398f7">QgsExpressionContextUtils::atlasScope</a></div><div class="ttdeci">static QgsExpressionContextScope * atlasScope(QgsLayoutAtlas *atlas)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QgsLayoutAtlas. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01154">qgsexpressioncontext.cpp:1154</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_ad97a6492b7f61a41dcbe399537415fc2"><div class="ttname"><a href="classQgsExpressionContextUtils.html#ad97a6492b7f61a41dcbe399537415fc2">QgsExpressionContextUtils::mapSettingsScope</a></div><div class="ttdeci">static QgsExpressionContextScope * mapSettingsScope(const QgsMapSettings &amp;mapSettings)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QgsMapSettings object...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00953">qgsexpressioncontext.cpp:953</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a0f7ab3ccd0220972d6aa57994fe61305"><div class="ttname"><a href="classQgsExpressionContext.html#a0f7ab3ccd0220972d6aa57994fe61305">QgsExpressionContext::functionNames</a></div><div class="ttdeci">QStringList functionNames() const</div><div class="ttdoc">Retrieves a list of function names contained in the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00443">qgsexpressioncontext.cpp:443</a></div></div>
<div class="ttc" id="classQgis_html_abdb7461299fb3d37204ca14f851996b0"><div class="ttname"><a href="classQgis.html#abdb7461299fb3d37204ca14f851996b0">Qgis::QGIS_RELEASE_NAME</a></div><div class="ttdeci">static const QString QGIS_RELEASE_NAME</div><div class="ttdoc">Release name. </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00068">qgis.h:68</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a3ed6b33dbaf8960bf0132ee40234e5c8"><div class="ttname"><a href="classQgsExpressionContext.html#a3ed6b33dbaf8960bf0132ee40234e5c8">QgsExpressionContext::QgsExpressionContext</a></div><div class="ttdeci">QgsExpressionContext()=default</div><div class="ttdoc">Constructor for QgsExpressionContext. </div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a340ede6d40ac582c1e3865d3bb465be4"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a340ede6d40ac582c1e3865d3bb465be4">QgsExpressionContextUtils::layoutScope</a></div><div class="ttdeci">static QgsExpressionContextScope * layoutScope(const QgsLayout *layout)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QgsLayout layout...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01061">qgsexpressioncontext.cpp:1061</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a195478aab248154e362251c410bde190"><div class="ttname"><a href="classQgsExpressionContext.html#a195478aab248154e362251c410bde190">QgsExpressionContext::clearCachedValues</a></div><div class="ttdeci">void clearCachedValues() const</div><div class="ttdoc">Clears all cached values from the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00572">qgsexpressioncontext.cpp:572</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a7f52d87dd7d7fa3148c7b46b22a4af2f"><div class="ttname"><a href="classQgsExpressionContext.html#a7f52d87dd7d7fa3148c7b46b22a4af2f">QgsExpressionContext::appendScope</a></div><div class="ttdeci">void appendScope(QgsExpressionContextScope *scope)</div><div class="ttdoc">Appends a scope to the end of the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00473">qgsexpressioncontext.cpp:473</a></div></div>
<div class="ttc" id="classQgsAbstractMetadataBase_html_a17bb3454b010126beec497b20e3154cc"><div class="ttname"><a href="classQgsAbstractMetadataBase.html#a17bb3454b010126beec497b20e3154cc">QgsAbstractMetadataBase::KeywordMap</a></div><div class="ttdeci">QMap&lt; QString, QStringList &gt; KeywordMap</div><div class="ttdoc">Map of vocabulary string to keyword list. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractmetadatabase_8h_source.html#l00075">qgsabstractmetadatabase.h:75</a></div></div>
<div class="ttc" id="classQgsProject_html_a26df6e8516ac9625901108875681803b"><div class="ttname"><a href="classQgsProject.html#a26df6e8516ac9625901108875681803b">QgsProject::instance</a></div><div class="ttdeci">static QgsProject * instance()</div><div class="ttdoc">Returns the QgsProject singleton instance. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l00411">qgsproject.cpp:411</a></div></div>
<div class="ttc" id="classQgsLayoutItem_html_aa9f3a3035eff578ef7323534ce2bcb36"><div class="ttname"><a href="classQgsLayoutItem.html#aa9f3a3035eff578ef7323534ce2bcb36">QgsLayoutItem::uuid</a></div><div class="ttdeci">virtual QString uuid() const</div><div class="ttdoc">Returns the item identification string. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitem_8h_source.html#l00335">qgslayoutitem.h:335</a></div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html">QgsCoordinateReferenceSystem</a></div><div class="ttdoc">This class represents a coordinate reference system (CRS). </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8h_source.html#l00189">qgscoordinatereferencesystem.h:189</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_ab6c05eb19a117dcddcdedbaab65bda79"><div class="ttname"><a href="classQgsExpressionContextScope.html#ab6c05eb19a117dcddcdedbaab65bda79">QgsExpressionContextScope::isStatic</a></div><div class="ttdeci">bool isStatic(const QString &amp;name) const</div><div class="ttdoc">Tests whether the variable with the specified name is static and can be cached. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00188">qgsexpressioncontext.cpp:188</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html_a0830b03eda67d8f847e2fc03fbdd0f9b"><div class="ttname"><a href="classQgsLayoutAtlas.html#a0830b03eda67d8f847e2fc03fbdd0f9b">QgsLayoutAtlas::nameForPage</a></div><div class="ttdeci">QString nameForPage(int page) const</div><div class="ttdoc">Returns the calculated name for a specified atlas page number. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8cpp_source.html#l00164">qgslayoutatlas.cpp:164</a></div></div>
<div class="ttc" id="classQgsApplication_html_a27aa7be25fdf3b447bf1f5343c78de54"><div class="ttname"><a href="classQgsApplication.html#a27aa7be25fdf3b447bf1f5343c78de54">QgsApplication::platform</a></div><div class="ttdeci">static QString platform()</div><div class="ttdoc">Returns the QGIS platform name, e.g., &quot;desktop&quot; or &quot;server&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01015">qgsapplication.cpp:1015</a></div></div>
<div class="ttc" id="qgssymbollayerutils_8h_html"><div class="ttname"><a href="qgssymbollayerutils_8h.html">qgssymbollayerutils.h</a></div></div>
<div class="ttc" id="qgsvectorlayer_8h_html"><div class="ttname"><a href="qgsvectorlayer_8h.html">qgsvectorlayer.h</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a0d2246beeb5f14f539fff912e820225f"><div class="ttname"><a href="classQgsExpressionContext.html#a0d2246beeb5f14f539fff912e820225f">QgsExpressionContext::EXPR_CLUSTER_SIZE</a></div><div class="ttdeci">static const QString EXPR_CLUSTER_SIZE</div><div class="ttdoc">Inbuilt variable name for cluster size variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00733">qgsexpressioncontext.h:733</a></div></div>
<div class="ttc" id="classQgsLayout_html_a123cda2092640f931e7951e1fe979d3c"><div class="ttname"><a href="classQgsLayout.html#a123cda2092640f931e7951e1fe979d3c">QgsLayout::setCustomProperty</a></div><div class="ttdeci">void setCustomProperty(const QString &amp;key, const QVariant &amp;value)</div><div class="ttdoc">Set a custom property for the layout. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00404">qgslayout.cpp:404</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html_a881252364b06bc3a2eab9abe7337cb4c"><div class="ttname"><a href="classQgsLayoutAtlas.html#a881252364b06bc3a2eab9abe7337cb4c">QgsLayoutAtlas::enabled</a></div><div class="ttdeci">bool enabled() const</div><div class="ttdoc">Returns whether the atlas generation is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8h_source.html#l00066">qgslayoutatlas.h:66</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_a905d6470a3a84fc1fd1c8a706b5db118"><div class="ttname"><a href="classQgsExpressionContextScope.html#a905d6470a3a84fc1fd1c8a706b5db118">QgsExpressionContextScope::hasFeature</a></div><div class="ttdeci">bool hasFeature() const</div><div class="ttdoc">Returns true if the scope has a feature associated with it. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00318">qgsexpressioncontext.h:318</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a2b566d09b66e8ee79ebdfa8dc95e59d7"><div class="ttname"><a href="classQgsExpressionContext.html#a2b566d09b66e8ee79ebdfa8dc95e59d7">QgsExpressionContext::feature</a></div><div class="ttdeci">QgsFeature feature() const</div><div class="ttdoc">Convenience function for retrieving the feature for the context, if set. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00522">qgsexpressioncontext.cpp:522</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a11cd85ed1e3276a53aea4d5d4cfc2899"><div class="ttname"><a href="classQgsExpressionContext.html#a11cd85ed1e3276a53aea4d5d4cfc2899">QgsExpressionContext::EXPR_GEOMETRY_POINT_NUM</a></div><div class="ttdeci">static const QString EXPR_GEOMETRY_POINT_NUM</div><div class="ttdoc">Inbuilt variable name for point number variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00731">qgsexpressioncontext.h:731</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html_a1bdcecf29abdcf5e11613e3b0eb6566d"><div class="ttname"><a href="classQgsLayoutAtlas.html#a1bdcecf29abdcf5e11613e3b0eb6566d">QgsLayoutAtlas::coverageLayer</a></div><div class="ttdeci">QgsVectorLayer * coverageLayer() const</div><div class="ttdoc">Returns the coverage layer used for the atlas features. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8h_source.html#l00115">qgslayoutatlas.h:115</a></div></div>
<div class="ttc" id="classQgsLayoutReportContext_html_a375bad880816fecf7c3fc91206ee4089"><div class="ttname"><a href="classQgsLayoutReportContext.html#a375bad880816fecf7c3fc91206ee4089">QgsLayoutReportContext::feature</a></div><div class="ttdeci">QgsFeature feature() const</div><div class="ttdoc">Returns the current feature for evaluating the layout. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutreportcontext_8h_source.html#l00062">qgslayoutreportcontext.h:62</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a9df671f33a16ac63398a5051ce51b641"><div class="ttname"><a href="classQgsExpressionContext.html#a9df671f33a16ac63398a5051ce51b641">QgsExpressionContext::setHighlightedVariables</a></div><div class="ttdeci">void setHighlightedVariables(const QStringList &amp;variableNames)</div><div class="ttdoc">Sets the list of variable names within the context intended to be highlighted to the user...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00313">qgsexpressioncontext.cpp:313</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a0594da1ee92c9fc9e15659fc39522f97"><div class="ttname"><a href="classQgsMapLayer.html#a0594da1ee92c9fc9e15659fc39522f97">QgsMapLayer::name</a></div><div class="ttdeci">QString name</div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8h_source.html#l00067">qgsmaplayer.h:67</a></div></div>
<div class="ttc" id="classQgsExpressionFunction_1_1Parameter_html"><div class="ttname"><a href="classQgsExpressionFunction_1_1Parameter.html">QgsExpressionFunction::Parameter</a></div><div class="ttdoc">Represents a single parameter passed to a function. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressionfunction_8h_source.html#l00054">qgsexpressionfunction.h:54</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a98d9ba9b48cf165fca04cdfcc214debc"><div class="ttname"><a href="classQgsExpressionContext.html#a98d9ba9b48cf165fca04cdfcc214debc">QgsExpressionContext::appendScopes</a></div><div class="ttdeci">void appendScopes(const QList&lt; QgsExpressionContextScope *&gt; &amp;scopes)</div><div class="ttdoc">Appends a list of scopes to the end of the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00478">qgsexpressioncontext.cpp:478</a></div></div>
<div class="ttc" id="classQgsFeature_html_abf0922d13bcf28c72770d8acdd75594e"><div class="ttname"><a href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">QgsFeature::geometry</a></div><div class="ttdeci">QgsGeometry geometry</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00067">qgsfeature.h:67</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a1e78dec0541aaeff25feac9a2445ae29"><div class="ttname"><a href="classQgsMapLayer.html#a1e78dec0541aaeff25feac9a2445ae29">QgsMapLayer::customProperty</a></div><div class="ttdeci">QVariant customProperty(const QString &amp;value, const QVariant &amp;defaultValue=QVariant()) const</div><div class="ttdoc">Read a custom property from layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l01671">qgsmaplayer.cpp:1671</a></div></div>
<div class="ttc" id="qgslayoutpagecollection_8h_html"><div class="ttname"><a href="qgslayoutpagecollection_8h.html">qgslayoutpagecollection.h</a></div></div>
<div class="ttc" id="classQgsProject_html_a1ed157bbcab69eecbcfc9a818257b4c5"><div class="ttname"><a href="classQgsProject.html#a1ed157bbcab69eecbcfc9a818257b4c5">QgsProject::title</a></div><div class="ttdeci">QString title() const</div><div class="ttdoc">Returns the project&amp;#39;s title. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l00431">qgsproject.cpp:431</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a9b5148e60e6a0cc49cfc6c06bcc93f5d"><div class="ttname"><a href="classQgsRectangle.html#a9b5148e60e6a0cc49cfc6c06bcc93f5d">QgsRectangle::center</a></div><div class="ttdeci">QgsPointXY center() const</div><div class="ttdoc">Returns the center point of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00229">qgsrectangle.h:229</a></div></div>
<div class="ttc" id="classQgsProject_html_ae4353a5ffca610d828569cada9b0e0c5"><div class="ttname"><a href="classQgsProject.html#ae4353a5ffca610d828569cada9b0e0c5">QgsProject::customVariables</a></div><div class="ttdeci">QVariantMap customVariables() const</div><div class="ttdoc">A map of custom project variables. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l01437">qgsproject.cpp:1437</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_aaa03878425629f11b709631eb63cc75c"><div class="ttname"><a href="classQgsExpressionContextScope.html#aaa03878425629f11b709631eb63cc75c">QgsExpressionContextScope::name</a></div><div class="ttdeci">QString name() const</div><div class="ttdoc">Returns the friendly display name of the context scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00189">qgsexpressioncontext.h:189</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a0573996d97031c58a4541a72710a88ec"><div class="ttname"><a href="classQgsExpressionContext.html#a0573996d97031c58a4541a72710a88ec">QgsExpressionContext::popScope</a></div><div class="ttdeci">QgsExpressionContextScope * popScope()</div><div class="ttdoc">Removes the last scope from the expression context and return it. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00483">qgsexpressioncontext.cpp:483</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_af1b61531d9512e4cdc8ca505ae07be89"><div class="ttname"><a href="classQgsExpressionContextUtils.html#af1b61531d9512e4cdc8ca505ae07be89">QgsExpressionContextUtils::layerScope</a></div><div class="ttdeci">static QgsExpressionContextScope * layerScope(const QgsMapLayer *layer)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QgsMapLayer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00862">qgsexpressioncontext.cpp:862</a></div></div>
<div class="ttc" id="classQgsProject_html_a7255107d96e9dc8e58c5f902d5bbc4b8"><div class="ttname"><a href="classQgsProject.html#a7255107d96e9dc8e58c5f902d5bbc4b8">QgsProject::baseName</a></div><div class="ttdeci">QString baseName() const</div><div class="ttdoc">Returns the base name of the project file without the path and without extension - derived from fileN...</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l00603">qgsproject.cpp:603</a></div></div>
<div class="ttc" id="classQgsMasterLayoutInterface_html"><div class="ttname"><a href="classQgsMasterLayoutInterface.html">QgsMasterLayoutInterface</a></div><div class="ttdoc">Interface for master layout type objects, such as print layouts and reports. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmasterlayoutinterface_8h_source.html#l00041">qgsmasterlayoutinterface.h:41</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a5d0e58040803fded280a64fac881545e"><div class="ttname"><a href="classQgsExpressionContext.html#a5d0e58040803fded280a64fac881545e">QgsExpressionContext::EXPR_GEOMETRY_PART_NUM</a></div><div class="ttdeci">static const QString EXPR_GEOMETRY_PART_NUM</div><div class="ttdoc">Inbuilt variable name for geometry part number variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00727">qgsexpressioncontext.h:727</a></div></div>
<div class="ttc" id="classQgsProject_html_aad84411bcdfa2eb506f90bfe7b636543"><div class="ttname"><a href="classQgsProject.html#aad84411bcdfa2eb506f90bfe7b636543">QgsProject::absoluteFilePath</a></div><div class="ttdeci">QString absoluteFilePath() const</div><div class="ttdoc">Returns full absolute path to the project file if the project is stored in a file system - derived fr...</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l00592">qgsproject.cpp:592</a></div></div>
<div class="ttc" id="structQgsExpressionContextScope_1_1StaticVariable_html_ab73d733059f28e401475678d7e86c474"><div class="ttname"><a href="structQgsExpressionContextScope_1_1StaticVariable.html#ab73d733059f28e401475678d7e86c474">QgsExpressionContextScope::StaticVariable::isStatic</a></div><div class="ttdeci">bool isStatic</div><div class="ttdoc">A static variable can be cached for the lifetime of a context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00165">qgsexpressioncontext.h:165</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html"><div class="ttname"><a href="classQgsVectorLayer.html">QgsVectorLayer</a></div><div class="ttdoc">Represents a vector layer which manages a vector based data sets. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8h_source.html#l00362">qgsvectorlayer.h:362</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a14c12c94299611d9548dca7c46248062"><div class="ttname"><a href="classQgsExpressionContext.html#a14c12c94299611d9548dca7c46248062">QgsExpressionContext::indexOfScope</a></div><div class="ttdeci">int indexOfScope(QgsExpressionContextScope *scope) const</div><div class="ttdoc">Returns the index of the specified scope if it exists within the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00370">qgsexpressioncontext.cpp:370</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a0061740aa2c9bbc88a2a3e3a68f082a3"><div class="ttname"><a href="classQgsExpressionContext.html#a0061740aa2c9bbc88a2a3e3a68f082a3">QgsExpressionContext::EXPR_GEOMETRY_PART_COUNT</a></div><div class="ttdeci">static const QString EXPR_GEOMETRY_PART_COUNT</div><div class="ttdoc">Inbuilt variable name for geometry part count variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00725">qgsexpressioncontext.h:725</a></div></div>
<div class="ttc" id="classQgsProcessingContext_html"><div class="ttname"><a href="classQgsProcessingContext.html">QgsProcessingContext</a></div><div class="ttdoc">Contains information about the context in which a processing algorithm is executed. </div><div class="ttdef"><b>Definition:</b> <a href="qgsprocessingcontext_8h_source.html#l00043">qgsprocessingcontext.h:43</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a375097584a8f28a3b5bdba58efeb93c6"><div class="ttname"><a href="classQgsExpressionContext.html#a375097584a8f28a3b5bdba58efeb93c6">QgsExpressionContext::setOriginalValueVariable</a></div><div class="ttdeci">void setOriginalValueVariable(const QVariant &amp;value)</div><div class="ttdoc">Sets the original value variable value for the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00548">qgsexpressioncontext.cpp:548</a></div></div>
<div class="ttc" id="classQgsExpressionContextScope_html_abfe4e7c94e08a8a5fbf6287cd02bf547"><div class="ttname"><a href="classQgsExpressionContextScope.html#abfe4e7c94e08a8a5fbf6287cd02bf547">QgsExpressionContextScope::filteredVariableNames</a></div><div class="ttdeci">QStringList filteredVariableNames() const</div><div class="ttdoc">Returns a filtered and sorted list of variable names contained within the scope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00166">qgsexpressioncontext.cpp:166</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a7ca055c86c46bd187e81125337bcd17a"><div class="ttname"><a href="classQgsExpressionContext.html#a7ca055c86c46bd187e81125337bcd17a">QgsExpressionContext::scopes</a></div><div class="ttdeci">QList&lt; QgsExpressionContextScope *&gt; scopes()</div><div class="ttdoc">Returns a list of scopes contained within the stack. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00505">qgsexpressioncontext.h:505</a></div></div>
<div class="ttc" id="classQgsProject_html_a93f3f2a1c4562922da48473311b9b79d"><div class="ttname"><a href="classQgsProject.html#a93f3f2a1c4562922da48473311b9b79d">QgsProject::fileName</a></div><div class="ttdeci">QString fileName</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8h_source.html#l00093">qgsproject.h:93</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a5afdc3d54b2d64e6052743362b97650a"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a5afdc3d54b2d64e6052743362b97650a">QgsExpressionContextUtils::setGlobalVariables</a></div><div class="ttdeci">static void setGlobalVariables(const QVariantMap &amp;variables)</div><div class="ttdoc">Sets all global context variables. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00612">qgsexpressioncontext.cpp:612</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_aab398db52faa0d1d2ef41c9e38fa78ca"><div class="ttname"><a href="classQgsExpressionContext.html#aab398db52faa0d1d2ef41c9e38fa78ca">QgsExpressionContext::function</a></div><div class="ttdeci">QgsExpressionFunction * function(const QString &amp;name) const</div><div class="ttdoc">Fetches a matching function from the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00455">qgsexpressioncontext.cpp:455</a></div></div>
<div class="ttc" id="classQgsScopedExpressionFunction_html"><div class="ttname"><a href="classQgsScopedExpressionFunction.html">QgsScopedExpressionFunction</a></div><div class="ttdoc">Expression function for use within a QgsExpressionContextScope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00055">qgsexpressioncontext.h:55</a></div></div>
<div class="ttc" id="classQgsMarkerSymbol_html_a6e300f6607b49282f727221ed2846d78"><div class="ttname"><a href="classQgsMarkerSymbol.html#a6e300f6607b49282f727221ed2846d78">QgsMarkerSymbol::angle</a></div><div class="ttdeci">double angle() const</div><div class="ttdoc">Returns the marker angle for the whole symbol. </div><div class="ttdef"><b>Definition:</b> <a href="qgssymbol_8cpp_source.html#l01188">qgssymbol.cpp:1188</a></div></div>
<div class="ttc" id="classQgsGeometry_html_a81306181071ffa590d0553a7f37dc654"><div class="ttname"><a href="classQgsGeometry.html#a81306181071ffa590d0553a7f37dc654">QgsGeometry::fromPointXY</a></div><div class="ttdeci">static QgsGeometry fromPointXY(const QgsPointXY &amp;point)</div><div class="ttdoc">Creates a new geometry from a QgsPointXY object. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l00160">qgsgeometry.cpp:160</a></div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html_ab2dee1805d8e3b62448e4d106753b595"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html#ab2dee1805d8e3b62448e4d106753b595">QgsCoordinateReferenceSystem::authid</a></div><div class="ttdeci">QString authid() const</div><div class="ttdoc">Returns the authority identifier for the CRS. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8cpp_source.html#l00981">qgscoordinatereferencesystem.cpp:981</a></div></div>
<div class="ttc" id="classQgsAbstractMetadataBase_html_ad2d572714f7bb0c269af5caa1dae15d6"><div class="ttname"><a href="classQgsAbstractMetadataBase.html#ad2d572714f7bb0c269af5caa1dae15d6">QgsAbstractMetadataBase::identifier</a></div><div class="ttdeci">QString identifier() const</div><div class="ttdoc">A reference, URI, URL or some other mechanism to identify the resource. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractmetadatabase_8cpp_source.html#l00021">qgsabstractmetadatabase.cpp:21</a></div></div>
<div class="ttc" id="structQgsExpressionContextScope_1_1StaticVariable_html_ab81ef51e91ebf5707cf19afdc88165b0"><div class="ttname"><a href="structQgsExpressionContextScope_1_1StaticVariable.html#ab81ef51e91ebf5707cf19afdc88165b0">QgsExpressionContextScope::StaticVariable::name</a></div><div class="ttdeci">QString name</div><div class="ttdoc">Variable name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00156">qgsexpressioncontext.h:156</a></div></div>
<div class="ttc" id="classQgsScopedExpressionFunction_html_a0cb1da28207af8c792ee22387dada1af"><div class="ttname"><a href="classQgsScopedExpressionFunction.html#a0cb1da28207af8c792ee22387dada1af">QgsScopedExpressionFunction::referencedColumns</a></div><div class="ttdeci">QSet&lt; QString &gt; referencedColumns(const QgsExpressionNodeFunction *node) const override</div><div class="ttdoc">Returns a set of field names which are required for this function. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l01322">qgsexpressioncontext.cpp:1322</a></div></div>
<div class="ttc" id="classQgsSymbolLayerUtils_html_a25a8a4362fbbc5a092dc3632b4802ae9"><div class="ttname"><a href="classQgsSymbolLayerUtils.html#a25a8a4362fbbc5a092dc3632b4802ae9">QgsSymbolLayerUtils::decodeColor</a></div><div class="ttdeci">static QColor decodeColor(const QString &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="qgssymbollayerutils_8cpp_source.html#l00053">qgssymbollayerutils.cpp:53</a></div></div>
<div class="ttc" id="classQgsRectangle_html_ad0a64f974edb994e38e3c418e48396d8"><div class="ttname"><a href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">QgsRectangle::height</a></div><div class="ttdeci">double height() const</div><div class="ttdoc">Returns the height of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00208">qgsrectangle.h:208</a></div></div>
<div class="ttc" id="classQgsLayoutItemPage_html"><div class="ttname"><a href="classQgsLayoutItemPage.html">QgsLayoutItemPage</a></div><div class="ttdoc">Item representing the paper in a layout. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitempage_8h_source.html#l00054">qgslayoutitempage.h:54</a></div></div>
<div class="ttc" id="qgslogger_8h_html"><div class="ttname"><a href="qgslogger_8h.html">qgslogger.h</a></div></div>
<div class="ttc" id="structQgsExpressionContextScope_1_1StaticVariable_html_ae681c2587f51b24f285be3fde68e46cd"><div class="ttname"><a href="structQgsExpressionContextScope_1_1StaticVariable.html#ae681c2587f51b24f285be3fde68e46cd">QgsExpressionContextScope::StaticVariable::value</a></div><div class="ttdeci">QVariant value</div><div class="ttdoc">Variable value. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00159">qgsexpressioncontext.h:159</a></div></div>
<div class="ttc" id="qgsexpressionfunction_8h_html"><div class="ttname"><a href="qgsexpressionfunction_8h.html">qgsexpressionfunction.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 22 2018 18:32:26 for QGIS API Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
