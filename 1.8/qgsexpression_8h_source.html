<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Quantum GIS API Documentation: src/core/qgsexpression.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Quantum GIS API Documentation
   &#160;<span id="projectnumber">1.8</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">src/core/qgsexpression.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qgsexpression_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">                               qgsexpression.h</span>
<a name="l00003"></a>00003 <span class="comment">                             -------------------</span>
<a name="l00004"></a>00004 <span class="comment">    begin                : August 2011</span>
<a name="l00005"></a>00005 <span class="comment">    copyright            : (C) 2011 Martin Dobias</span>
<a name="l00006"></a>00006 <span class="comment">    email                : wonder.sk at gmail dot com</span>
<a name="l00007"></a>00007 <span class="comment"> ***************************************************************************</span>
<a name="l00008"></a>00008 <span class="comment"> *                                                                         *</span>
<a name="l00009"></a>00009 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
<a name="l00010"></a>00010 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
<a name="l00011"></a>00011 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<a name="l00012"></a>00012 <span class="comment"> *   (at your option) any later version.                                   *</span>
<a name="l00013"></a>00013 <span class="comment"> *                                                                         *</span>
<a name="l00014"></a>00014 <span class="comment"> ***************************************************************************/</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#ifndef QGSEXPRESSION_H</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">#define QGSEXPRESSION_H</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;QStringList&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;QVariant&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;QList&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;QDomDocument&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="qgsfield_8h.html">qgsfield.h</a>&quot;</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="keyword">class </span><a class="code" href="classQgsDistanceArea.html" title="General purpose distance and area calculator.">QgsDistanceArea</a>;
<a name="l00027"></a>00027 <span class="keyword">class </span><a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>;
<a name="l00028"></a>00028 <span class="keyword">class </span>QDomElement;
<a name="l00029"></a>00029 
<a name="l00082"></a><a class="code" href="classQgsExpression.html">00082</a> <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>
<a name="l00083"></a>00083 {
<a name="l00084"></a>00084   <span class="keyword">public</span>:
<a name="l00085"></a>00085     <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>( <span class="keyword">const</span> QString&amp; expr );
<a name="l00086"></a>00086     ~<a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>();
<a name="l00087"></a>00087 
<a name="l00089"></a><a class="code" href="classQgsExpression.html#a81e6963c6083a622817b7df453ca44fc">00089</a>     <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression.html#a81e6963c6083a622817b7df453ca44fc" title="Returns true if an error occurred when parsing the input expression.">hasParserError</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !mParserErrorString.isNull(); }
<a name="l00091"></a><a class="code" href="classQgsExpression.html#a5c7c937d778db1cc1c829601f6e878a0">00091</a>     QString <a class="code" href="classQgsExpression.html#a5c7c937d778db1cc1c829601f6e878a0" title="Returns parser error.">parserErrorString</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mParserErrorString; }
<a name="l00092"></a>00092 
<a name="l00094"></a>00094     <span class="keywordtype">bool</span> prepare( <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00095"></a>00095 
<a name="l00097"></a>00097     QStringList referencedColumns();
<a name="l00099"></a>00099     <span class="keywordtype">bool</span> needsGeometry();
<a name="l00100"></a>00100 
<a name="l00101"></a>00101     <span class="comment">// evaluation</span>
<a name="l00102"></a>00102 
<a name="l00105"></a>00105     QVariant evaluate( <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f = NULL );
<a name="l00106"></a>00106 
<a name="l00109"></a>00109     QVariant evaluate( <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00110"></a>00110 
<a name="l00112"></a><a class="code" href="classQgsExpression.html#a82a80f9777e587047a2b3cb4a04b1435">00112</a>     <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression.html#a82a80f9777e587047a2b3cb4a04b1435" title="Returns true if an error occurred when evaluating last input.">hasEvalError</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !mEvalErrorString.isNull(); }
<a name="l00114"></a><a class="code" href="classQgsExpression.html#a5852a785d6a231a2ee380dc7a747e960">00114</a>     QString <a class="code" href="classQgsExpression.html#a5852a785d6a231a2ee380dc7a747e960" title="Returns evaluation error.">evalErrorString</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mEvalErrorString; }
<a name="l00116"></a><a class="code" href="classQgsExpression.html#a3ec34c45a27ddd208dee50bb99686aee">00116</a>     <span class="keywordtype">void</span> <a class="code" href="classQgsExpression.html#a3ec34c45a27ddd208dee50bb99686aee" title="Set evaluation error (used internally by evaluation functions)">setEvalErrorString</a>( QString str ) { mEvalErrorString = str; }
<a name="l00117"></a>00117 
<a name="l00119"></a><a class="code" href="classQgsExpression.html#ac8a544bca3e1eb6e0b165eb3e37e270a">00119</a>     <span class="keywordtype">void</span> <a class="code" href="classQgsExpression.html#ac8a544bca3e1eb6e0b165eb3e37e270a" title="Set the number for $rownum special column.">setCurrentRowNumber</a>( <span class="keywordtype">int</span> rowNumber ) { mRowNumber = rowNumber; }
<a name="l00121"></a><a class="code" href="classQgsExpression.html#a0fd2c5e0a8e082d8080112dd7170ea68">00121</a>     <span class="keywordtype">int</span> <a class="code" href="classQgsExpression.html#a0fd2c5e0a8e082d8080112dd7170ea68" title="Return the number used for $rownum special column.">currentRowNumber</a>() { <span class="keywordflow">return</span> mRowNumber; }
<a name="l00122"></a>00122 
<a name="l00124"></a>00124     QString dump() <span class="keyword">const</span>;
<a name="l00125"></a>00125 
<a name="l00128"></a><a class="code" href="classQgsExpression.html#aa12bd59c4460f57d2d7598bde076f56e">00128</a>     <a class="code" href="classQgsDistanceArea.html" title="General purpose distance and area calculator.">QgsDistanceArea</a>* <a class="code" href="classQgsExpression.html#aa12bd59c4460f57d2d7598bde076f56e" title="Return calculator used for distance and area calculations (used by internal functions)">geomCalculator</a>() { <span class="keywordflow">if</span> ( !mCalc ) initGeomCalculator(); <span class="keywordflow">return</span> mCalc; }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <span class="comment">//</span>
<a name="l00131"></a>00131 
<a name="l00132"></a><a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073">00132</a>     <span class="keyword">enum</span> <a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073">UnaryOperator</a>
<a name="l00133"></a>00133     {
<a name="l00134"></a><a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073a2efee32e4a87e98bed7c3bba5b098e6c">00134</a>       <a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073a2efee32e4a87e98bed7c3bba5b098e6c">uoNot</a>,
<a name="l00135"></a><a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073a0589d5eaf58e42453925f65906e957fd">00135</a>       <a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073a0589d5eaf58e42453925f65906e957fd">uoMinus</a>,
<a name="l00136"></a>00136     };
<a name="l00137"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261a">00137</a>     <span class="keyword">enum</span> <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261a">BinaryOperator</a>
<a name="l00138"></a>00138     {
<a name="l00139"></a>00139       <span class="comment">// logical</span>
<a name="l00140"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa76a48ac820474b70b6f8faa08f9fbeb8">00140</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa76a48ac820474b70b6f8faa08f9fbeb8">boOr</a>,
<a name="l00141"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa22faebaab32a746ab389bc9a8bf71cd3">00141</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa22faebaab32a746ab389bc9a8bf71cd3">boAnd</a>,
<a name="l00142"></a>00142 
<a name="l00143"></a>00143       <span class="comment">// comparison</span>
<a name="l00144"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aadcb265c1b60c488c8eeeaf6ba6848c6a">00144</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aadcb265c1b60c488c8eeeaf6ba6848c6a">boEQ</a>,  <span class="comment">// =</span>
<a name="l00145"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa6a03ee082ea1dd1fd501e2bce09bf0f8">00145</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa6a03ee082ea1dd1fd501e2bce09bf0f8">boNE</a>,  <span class="comment">// &lt;&gt;</span>
<a name="l00146"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa8d17d0c4976b738e99790f3b8753caa0">00146</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa8d17d0c4976b738e99790f3b8753caa0">boLE</a>,  <span class="comment">// &lt;=</span>
<a name="l00147"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa70b1d9e9b219fe55d294e3e408ab2d22">00147</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa70b1d9e9b219fe55d294e3e408ab2d22">boGE</a>,  <span class="comment">// &gt;=</span>
<a name="l00148"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa3a7c1f19680afdef89e4ba02962f473a">00148</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa3a7c1f19680afdef89e4ba02962f473a">boLT</a>,  <span class="comment">// &lt;</span>
<a name="l00149"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa1b68b909fd5ed7cb3cc9ca815ea48a83">00149</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa1b68b909fd5ed7cb3cc9ca815ea48a83">boGT</a>,  <span class="comment">// &gt;</span>
<a name="l00150"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa26113bd1006a383c640e585fb1486e78">00150</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa26113bd1006a383c640e585fb1486e78">boRegexp</a>,
<a name="l00151"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa8aa26ef80634b913f0827f48cb3f7c11">00151</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa8aa26ef80634b913f0827f48cb3f7c11">boLike</a>,
<a name="l00152"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa18640756b1998576a4d019215f7e15f2">00152</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa18640756b1998576a4d019215f7e15f2">boNotLike</a>,
<a name="l00153"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa934c2155a54606b78e6b510e8cb77614">00153</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa934c2155a54606b78e6b510e8cb77614">boILike</a>,
<a name="l00154"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa21c9dd2361d9a7dba2a2d8a76bd9d053">00154</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa21c9dd2361d9a7dba2a2d8a76bd9d053">boNotILike</a>,
<a name="l00155"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aaec5a3fc628fc5d8a330430a81d242743">00155</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aaec5a3fc628fc5d8a330430a81d242743">boIs</a>,
<a name="l00156"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aaabf111823af81070abdcfd67529ca74b">00156</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aaabf111823af81070abdcfd67529ca74b">boIsNot</a>,
<a name="l00157"></a>00157 
<a name="l00158"></a>00158       <span class="comment">// math</span>
<a name="l00159"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa6fab8d4081c4895f37e96cc41df911e4">00159</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa6fab8d4081c4895f37e96cc41df911e4">boPlus</a>,
<a name="l00160"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aac28bc81129fcdc61b61d5d15e54dfd51">00160</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aac28bc81129fcdc61b61d5d15e54dfd51">boMinus</a>,
<a name="l00161"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa4da616886b37fa56cb23135dfabdeda2">00161</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa4da616886b37fa56cb23135dfabdeda2">boMul</a>,
<a name="l00162"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa71e9704355bfc06d84d2406d9c361cc6">00162</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa71e9704355bfc06d84d2406d9c361cc6">boDiv</a>,
<a name="l00163"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa4ddd2b935e22147464918ad0f61112f7">00163</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa4ddd2b935e22147464918ad0f61112f7">boMod</a>,
<a name="l00164"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa72d81c3bbca07cedb6969e8885c5bc03">00164</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aa72d81c3bbca07cedb6969e8885c5bc03">boPow</a>,
<a name="l00165"></a>00165 
<a name="l00166"></a>00166       <span class="comment">// strings</span>
<a name="l00167"></a><a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aad16fd22b27282b0157f3eb8095d15949">00167</a>       <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261aad16fd22b27282b0157f3eb8095d15949">boConcat</a>,
<a name="l00168"></a>00168     };
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="classQgsExpression.html#a056130107ebe0f5afdf298b4a93c5ac2">00170</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* BinaryOperatorText[];
<a name="l00171"></a><a class="code" href="classQgsExpression.html#a768ab64f1c96dc9d0182d455327e8f30">00171</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* UnaryOperatorText[];
<a name="l00172"></a>00172 
<a name="l00173"></a><a class="code" href="classQgsExpression.html#a7dc850e17fb192ac52b06d9eca06f8cc">00173</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* BinaryOgcOperatorText[];
<a name="l00174"></a><a class="code" href="classQgsExpression.html#a5447fda15a53d27583a56290fdc28a4c">00174</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* UnaryOgcOperatorText[];
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="classQgsExpression.html#a94faf39c92b177711cbdd7de82e98be1">00176</a>     <span class="keyword">typedef</span> QVariant( *FcnEval )( <span class="keyword">const</span> QVariantList&amp; values, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f, <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent );
<a name="l00177"></a>00177 
<a name="l00178"></a><a class="code" href="structQgsExpression_1_1FunctionDef.html">00178</a>     <span class="keyword">struct </span><a class="code" href="structQgsExpression_1_1FunctionDef.html">FunctionDef</a>
<a name="l00179"></a>00179     {
<a name="l00180"></a><a class="code" href="structQgsExpression_1_1FunctionDef.html#a648587c3d0542768cb9a6072e0e45e78">00180</a>       <a class="code" href="structQgsExpression_1_1FunctionDef.html">FunctionDef</a>( QString fnname, <span class="keywordtype">int</span> params, FcnEval fcn, QString group, QString helpText = QString(), <span class="keywordtype">bool</span> usesGeometry = <span class="keyword">false</span> )
<a name="l00181"></a>00181           : mName( fnname ), mParams( params ), mFcn( fcn ), mUsesGeometry( usesGeometry ), mGroup( group ), mHelpText( helpText ) {}
<a name="l00183"></a><a class="code" href="structQgsExpression_1_1FunctionDef.html#ab51cecaeba8153755c1247d2cc46aa31">00183</a>       QString <a class="code" href="structQgsExpression_1_1FunctionDef.html#ab51cecaeba8153755c1247d2cc46aa31" title="The name of the function.">mName</a>;
<a name="l00185"></a><a class="code" href="structQgsExpression_1_1FunctionDef.html#ad47610e848dc3d9dd98a0480c7dea0a3">00185</a>       <span class="keywordtype">int</span> <a class="code" href="structQgsExpression_1_1FunctionDef.html#ad47610e848dc3d9dd98a0480c7dea0a3" title="The number of parameters this function takes.">mParams</a>;
<a name="l00187"></a><a class="code" href="structQgsExpression_1_1FunctionDef.html#a3c14a7e4440b63fd110d7f25035b7b18">00187</a>       FcnEval <a class="code" href="structQgsExpression_1_1FunctionDef.html#a3c14a7e4440b63fd110d7f25035b7b18" title="Pointer to fucntion.">mFcn</a>;
<a name="l00189"></a><a class="code" href="structQgsExpression_1_1FunctionDef.html#a30a1da6a8ce695f069af3ebdcae23480">00189</a>       <span class="keywordtype">bool</span> <a class="code" href="structQgsExpression_1_1FunctionDef.html#a30a1da6a8ce695f069af3ebdcae23480" title="Does this function use a geometry object.">mUsesGeometry</a>;
<a name="l00191"></a><a class="code" href="structQgsExpression_1_1FunctionDef.html#ab5e979bfa740fd476aab74380150820c">00191</a>       QString <a class="code" href="structQgsExpression_1_1FunctionDef.html#ab5e979bfa740fd476aab74380150820c" title="The group the function belongs to.">mGroup</a>;
<a name="l00193"></a><a class="code" href="structQgsExpression_1_1FunctionDef.html#ac201816adda3c9a781b5ee5b89cfb6c7">00193</a>       QString <a class="code" href="structQgsExpression_1_1FunctionDef.html#ac201816adda3c9a781b5ee5b89cfb6c7" title="The help text for the function.">mHelpText</a>;
<a name="l00194"></a>00194     };
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <span class="keyword">static</span> <span class="keyword">const</span> QList&lt;FunctionDef&gt; &amp;BuiltinFunctions();
<a name="l00197"></a><a class="code" href="classQgsExpression.html#ac6a8ea87928ae3bbef66accc19edb934">00197</a>     <span class="keyword">static</span> QList&lt;FunctionDef&gt; <a class="code" href="classQgsExpression.html#ac6a8ea87928ae3bbef66accc19edb934">gmBuiltinFunctions</a>;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     <span class="comment">// tells whether the identifier is a name of existing function</span>
<a name="l00200"></a>00200     <span class="keyword">static</span> <span class="keywordtype">bool</span> isFunctionName( QString name );
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     <span class="comment">// return index of the function in BuiltinFunctions array</span>
<a name="l00203"></a>00203     <span class="keyword">static</span> <span class="keywordtype">int</span> functionIndex( QString name );
<a name="l00204"></a>00204 
<a name="l00208"></a>00208     <span class="keyword">static</span> <span class="keywordtype">int</span> functionCount();
<a name="l00209"></a>00209 
<a name="l00211"></a><a class="code" href="classQgsExpression.html#a0730074fb8f641a81cc83e0d84e98812">00211</a>     <span class="keyword">static</span> QString <a class="code" href="classQgsExpression.html#a0730074fb8f641a81cc83e0d84e98812" title="return quoted column reference (in double quotes)">quotedColumnRef</a>( QString name ) { <span class="keywordflow">return</span> QString( <span class="stringliteral">&quot;\&quot;%1\&quot;&quot;</span> ).arg( name.replace( <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="stringliteral">&quot;\&quot;\&quot;&quot;</span> ) ); }
<a name="l00213"></a><a class="code" href="classQgsExpression.html#ac6a46b6a5f9d17ad38cb8a5bb2985ce8">00213</a>     <span class="keyword">static</span> QString <a class="code" href="classQgsExpression.html#ac6a46b6a5f9d17ad38cb8a5bb2985ce8" title="return quoted string (in single quotes)">quotedString</a>( QString text ) { <span class="keywordflow">return</span> QString( <span class="stringliteral">&quot;&#39;%1&#39;&quot;</span> ).arg( text.replace( <span class="stringliteral">&quot;&#39;&quot;</span>, <span class="stringliteral">&quot;&#39;&#39;&quot;</span> ) ); }
<a name="l00214"></a>00214 
<a name="l00216"></a>00216 
<a name="l00217"></a>00217     <span class="keyword">class </span>Visitor; <span class="comment">// visitor interface is defined below</span>
<a name="l00218"></a>00218 
<a name="l00219"></a><a class="code" href="classQgsExpression_1_1Node.html">00219</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1Node.html">Node</a>
<a name="l00220"></a>00220     {
<a name="l00221"></a>00221       <span class="keyword">public</span>:
<a name="l00222"></a><a class="code" href="classQgsExpression_1_1Node.html#aad54afb15affc64eb44b87a40ebda2eb">00222</a>         <span class="keyword">virtual</span> <a class="code" href="classQgsExpression_1_1Node.html#aad54afb15affc64eb44b87a40ebda2eb">~Node</a>() {}
<a name="l00223"></a>00223         <span class="comment">// abstract virtual eval function</span>
<a name="l00224"></a>00224         <span class="comment">// errors are reported to the parent</span>
<a name="l00225"></a>00225         <span class="keyword">virtual</span> QVariant eval( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f ) = 0;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227         <span class="comment">// abstract virtual preparation function</span>
<a name="l00228"></a>00228         <span class="comment">// errors are reported to the parent</span>
<a name="l00229"></a>00229         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepare( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields ) = 0;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span> = 0;
<a name="l00232"></a>00232 
<a name="l00233"></a><a class="code" href="classQgsExpression_1_1Node.html#a990fe68de4a381dbb183505ffecfd39e">00233</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1Node.html#a990fe68de4a381dbb183505ffecfd39e">toOgcFilter</a>( QDomDocument &amp;doc, QDomElement &amp;element )<span class="keyword"> const </span>{ Q_UNUSED( doc ); Q_UNUSED( element ); }
<a name="l00234"></a>00234         <span class="keyword">static</span> <a class="code" href="classQgsExpression_1_1Node.html">QgsExpression::Node</a>* createFromOgcFilter( QDomElement &amp;element, QString &amp;errorMessage );
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         <span class="keyword">virtual</span> QStringList referencedColumns() <span class="keyword">const</span> = 0;
<a name="l00237"></a>00237         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> needsGeometry() <span class="keyword">const</span> = 0;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239         <span class="comment">// support for visitor pattern</span>
<a name="l00240"></a>00240         <span class="keyword">virtual</span> <span class="keywordtype">void</span> accept( <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>&amp; v ) = 0;
<a name="l00241"></a>00241     };
<a name="l00242"></a>00242 
<a name="l00243"></a><a class="code" href="classQgsExpression_1_1NodeList.html">00243</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1NodeList.html">NodeList</a>
<a name="l00244"></a>00244     {
<a name="l00245"></a>00245       <span class="keyword">public</span>:
<a name="l00246"></a><a class="code" href="classQgsExpression_1_1NodeList.html#ae5245dcfa8aac5cf3c6bf89623403d6f">00246</a>         <a class="code" href="classQgsExpression_1_1NodeList.html#ae5245dcfa8aac5cf3c6bf89623403d6f">NodeList</a>() {}
<a name="l00247"></a><a class="code" href="classQgsExpression_1_1NodeList.html#a1c5d3836f86c958b13e36133c083e2e6">00247</a>         <span class="keyword">virtual</span> <a class="code" href="classQgsExpression_1_1NodeList.html#a1c5d3836f86c958b13e36133c083e2e6">~NodeList</a>() { <span class="keywordflow">foreach</span>( <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* n, mList ) <span class="keyword">delete</span> n; }
<a name="l00248"></a><a class="code" href="classQgsExpression_1_1NodeList.html#a8983a69126090d6814bdfd7dcd6b0e87">00248</a>         <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1NodeList.html#a8983a69126090d6814bdfd7dcd6b0e87">append</a>( <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* node ) { mList.append( node ); }
<a name="l00249"></a><a class="code" href="classQgsExpression_1_1NodeList.html#a015698ff86272f38e5eb3aebcc6b1420">00249</a>         <span class="keywordtype">int</span> <a class="code" href="classQgsExpression_1_1NodeList.html#a015698ff86272f38e5eb3aebcc6b1420">count</a>() { <span class="keywordflow">return</span> mList.count(); }
<a name="l00250"></a><a class="code" href="classQgsExpression_1_1NodeList.html#adfd564fb1c604f9bd0d963dc74d66e8e">00250</a>         QList&lt;Node*&gt; <a class="code" href="classQgsExpression_1_1NodeList.html#adfd564fb1c604f9bd0d963dc74d66e8e">list</a>() { <span class="keywordflow">return</span> mList; }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span>;
<a name="l00253"></a>00253         <span class="keyword">virtual</span> <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255       <span class="keyword">protected</span>:
<a name="l00256"></a><a class="code" href="classQgsExpression_1_1NodeList.html#a4b6f3ffc11268afab50ebf68cda831cc">00256</a>         QList&lt;Node*&gt; <a class="code" href="classQgsExpression_1_1NodeList.html#a4b6f3ffc11268afab50ebf68cda831cc">mList</a>;
<a name="l00257"></a>00257     };
<a name="l00258"></a>00258 
<a name="l00259"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html">00259</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html">NodeUnaryOperator</a> : <span class="keyword">public</span> <a class="code" href="classQgsExpression_1_1Node.html">Node</a>
<a name="l00260"></a>00260     {
<a name="l00261"></a>00261       <span class="keyword">public</span>:
<a name="l00262"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#a5b9b7f03921879a94fdcb192d0eabb1e">00262</a>         <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#a5b9b7f03921879a94fdcb192d0eabb1e">NodeUnaryOperator</a>( <a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073">UnaryOperator</a> op, <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* operand ) : mOp( op ), mOperand( operand ) {}
<a name="l00263"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#ac3f65ddaf860c9349b36a177d0687d5c">00263</a>         <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#ac3f65ddaf860c9349b36a177d0687d5c">~NodeUnaryOperator</a>() { <span class="keyword">delete</span> mOperand; }
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#a1f262e3e52942fc2df081db37220d45f">00265</a>         <a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073">UnaryOperator</a> <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#a1f262e3e52942fc2df081db37220d45f">op</a>() { <span class="keywordflow">return</span> mOp; }
<a name="l00266"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#a2f788eeabea32c664bdf93cbd893f75a">00266</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#a2f788eeabea32c664bdf93cbd893f75a">operand</a>() { <span class="keywordflow">return</span> mOperand; }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepare( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00269"></a>00269         <span class="keyword">virtual</span> QVariant eval( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f );
<a name="l00270"></a>00270         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span>;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272         <span class="keyword">virtual</span> <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00273"></a>00273         <span class="keyword">static</span> <a class="code" href="classQgsExpression_1_1Node.html">QgsExpression::Node</a>* createFromOgcFilter( QDomElement &amp;element, QString &amp;errorMessage );
<a name="l00274"></a>00274 
<a name="l00275"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#ad6ef2eaeb9070ba81af50c26f3d49146">00275</a>         <span class="keyword">virtual</span> QStringList <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#ad6ef2eaeb9070ba81af50c26f3d49146">referencedColumns</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mOperand-&gt;referencedColumns(); }
<a name="l00276"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#aaeb5ea5cde065b9604bd684e3f814b14">00276</a>         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#aaeb5ea5cde065b9604bd684e3f814b14">needsGeometry</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mOperand-&gt;needsGeometry(); }
<a name="l00277"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#a410c422eff46a18730d0bfc3a5b5bdfe">00277</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#a410c422eff46a18730d0bfc3a5b5bdfe">accept</a>( <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>&amp; v ) { v.<a class="code" href="classQgsExpression_1_1Visitor.html#ae6609a1d6fce000b4da94dd1e7895cf5">visit</a>( <span class="keyword">this</span> ); }
<a name="l00278"></a>00278 
<a name="l00279"></a>00279       <span class="keyword">protected</span>:
<a name="l00280"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#ac030741789082a2814ae5c236d18293a">00280</a>         <a class="code" href="classQgsExpression.html#ac0c6e28972f9c80484a9e49e5bae7073">UnaryOperator</a> <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#ac030741789082a2814ae5c236d18293a">mOp</a>;
<a name="l00281"></a><a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#ab6ef6db1ae30b7abaa1c9cff6b3972f1">00281</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html#ab6ef6db1ae30b7abaa1c9cff6b3972f1">mOperand</a>;
<a name="l00282"></a>00282     };
<a name="l00283"></a>00283 
<a name="l00284"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html">00284</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html">NodeBinaryOperator</a> : <span class="keyword">public</span> <a class="code" href="classQgsExpression_1_1Node.html">Node</a>
<a name="l00285"></a>00285     {
<a name="l00286"></a>00286       <span class="keyword">public</span>:
<a name="l00287"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a729077dd0d6368fa1d5895b299cd0207">00287</a>         <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a729077dd0d6368fa1d5895b299cd0207">NodeBinaryOperator</a>( <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261a">BinaryOperator</a> op, <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* opLeft, <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* opRight ) : mOp( op ), mOpLeft( opLeft ), mOpRight( opRight ) {}
<a name="l00288"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#af0ee371f12d1cd6c42ce97ed9c8caaee">00288</a>         <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#af0ee371f12d1cd6c42ce97ed9c8caaee">~NodeBinaryOperator</a>() { <span class="keyword">delete</span> mOpLeft; <span class="keyword">delete</span> mOpRight; }
<a name="l00289"></a>00289 
<a name="l00290"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#ade9b8fc57b9e75bcc34e3632e68d184d">00290</a>         <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261a">BinaryOperator</a> <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#ade9b8fc57b9e75bcc34e3632e68d184d">op</a>() { <span class="keywordflow">return</span> mOp; }
<a name="l00291"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a712b4b18154dfa41cedeaa75ec8bb0c2">00291</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a712b4b18154dfa41cedeaa75ec8bb0c2">opLeft</a>() { <span class="keywordflow">return</span> mOpLeft; }
<a name="l00292"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#ab5d9375f6406bfcc3a501d6ed7e9c85d">00292</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#ab5d9375f6406bfcc3a501d6ed7e9c85d">opRight</a>() { <span class="keywordflow">return</span> mOpRight; }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepare( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00295"></a>00295         <span class="keyword">virtual</span> QVariant eval( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f );
<a name="l00296"></a>00296         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span>;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298         <span class="keyword">virtual</span> <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00299"></a>00299         <span class="keyword">static</span> <a class="code" href="classQgsExpression_1_1Node.html">QgsExpression::Node</a>* createFromOgcFilter( QDomElement &amp;element, QString &amp;errorMessage );
<a name="l00300"></a>00300 
<a name="l00301"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a409d5f281b822d8cbbe61660e288fdfe">00301</a>         <span class="keyword">virtual</span> QStringList <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a409d5f281b822d8cbbe61660e288fdfe">referencedColumns</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mOpLeft-&gt;referencedColumns() + mOpRight-&gt;referencedColumns(); }
<a name="l00302"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a0804f7af560ae85e4f61eb156ce46685">00302</a>         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a0804f7af560ae85e4f61eb156ce46685">needsGeometry</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mOpLeft-&gt;needsGeometry() || mOpRight-&gt;needsGeometry(); }
<a name="l00303"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a1a04617793207c1dff2536835fab693e">00303</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a1a04617793207c1dff2536835fab693e">accept</a>( <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>&amp; v ) { v.<a class="code" href="classQgsExpression_1_1Visitor.html#ae6609a1d6fce000b4da94dd1e7895cf5">visit</a>( <span class="keyword">this</span> ); }
<a name="l00304"></a>00304 
<a name="l00305"></a>00305       <span class="keyword">protected</span>:
<a name="l00306"></a>00306         <span class="keywordtype">bool</span> compare( <span class="keywordtype">double</span> diff );
<a name="l00307"></a>00307         <span class="keywordtype">int</span> computeInt( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y );
<a name="l00308"></a>00308         <span class="keywordtype">double</span> computeDouble( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y );
<a name="l00309"></a>00309 
<a name="l00310"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a085738d72b229a8353a15b589dd5ad1b">00310</a>         <a class="code" href="classQgsExpression.html#ace7c0466d59e0e06ec1abbab5b3a261a">BinaryOperator</a> <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a085738d72b229a8353a15b589dd5ad1b">mOp</a>;
<a name="l00311"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#ac9d8d9fae409bb2ba57d720b7a9fd02d">00311</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#ac9d8d9fae409bb2ba57d720b7a9fd02d">mOpLeft</a>;
<a name="l00312"></a><a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a475c79e70b99f11f685b2c3a8ace57fd">00312</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html#a475c79e70b99f11f685b2c3a8ace57fd">mOpRight</a>;
<a name="l00313"></a>00313     };
<a name="l00314"></a>00314 
<a name="l00315"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html">00315</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1NodeInOperator.html">NodeInOperator</a> : <span class="keyword">public</span> <a class="code" href="classQgsExpression_1_1Node.html">Node</a>
<a name="l00316"></a>00316     {
<a name="l00317"></a>00317       <span class="keyword">public</span>:
<a name="l00318"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#aa5bf0410827a58c0c572f58eddf222f5">00318</a>         <a class="code" href="classQgsExpression_1_1NodeInOperator.html#aa5bf0410827a58c0c572f58eddf222f5">NodeInOperator</a>( <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* node, <a class="code" href="classQgsExpression_1_1NodeList.html">NodeList</a>* list, <span class="keywordtype">bool</span> notin = <span class="keyword">false</span> ) : mNode( node ), mList( list ), mNotIn( notin ) {}
<a name="l00319"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#a5371b42d17f989b6695f4e554106abb5">00319</a>         <span class="keyword">virtual</span> <a class="code" href="classQgsExpression_1_1NodeInOperator.html#a5371b42d17f989b6695f4e554106abb5">~NodeInOperator</a>() { <span class="keyword">delete</span> mNode; <span class="keyword">delete</span> mList; }
<a name="l00320"></a>00320 
<a name="l00321"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#afab10aae409b2be62db3493cf4e292c3">00321</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeInOperator.html#afab10aae409b2be62db3493cf4e292c3">node</a>() { <span class="keywordflow">return</span> mNode; }
<a name="l00322"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#a4454453075ea8a74a0441f77365e9825">00322</a>         <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression_1_1NodeInOperator.html#a4454453075ea8a74a0441f77365e9825">isNotIn</a>() { <span class="keywordflow">return</span> mNotIn; }
<a name="l00323"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#a6b81e7561bb35d0877dd5e6a381db1f1">00323</a>         <a class="code" href="classQgsExpression_1_1NodeList.html">NodeList</a>* <a class="code" href="classQgsExpression_1_1NodeInOperator.html#a6b81e7561bb35d0877dd5e6a381db1f1">list</a>() { <span class="keywordflow">return</span> mList; }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepare( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00326"></a>00326         <span class="keyword">virtual</span> QVariant eval( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f );
<a name="l00327"></a>00327         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span>;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329         <span class="keyword">virtual</span> <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00330"></a>00330 
<a name="l00331"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#a6d11d497e8a2452f5bd1f54fdfe64931">00331</a>         <span class="keyword">virtual</span> QStringList <a class="code" href="classQgsExpression_1_1NodeInOperator.html#a6d11d497e8a2452f5bd1f54fdfe64931">referencedColumns</a>()<span class="keyword"> const </span>{ QStringList lst( mNode-&gt;referencedColumns() ); <span class="keywordflow">foreach</span>( <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* n, mList-&gt;list() ) lst.append( n-&gt;<a class="code" href="classQgsExpression_1_1Node.html#a81e0df7c055ecf815647c86123603de4">referencedColumns</a>() ); <span class="keywordflow">return</span> lst; }
<a name="l00332"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#ad3d0865f3dfd576b63d769108035f167">00332</a>         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression_1_1NodeInOperator.html#ad3d0865f3dfd576b63d769108035f167">needsGeometry</a>()<span class="keyword"> const </span>{ <span class="keywordtype">bool</span> needs = <span class="keyword">false</span>; <span class="keywordflow">foreach</span>( <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* n, mList-&gt;list() ) needs |= n-&gt;<a class="code" href="classQgsExpression_1_1Node.html#ae90edfcd18b28bb5dbd9b28c33d8a733">needsGeometry</a>(); <span class="keywordflow">return</span> needs; }
<a name="l00333"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#a9e0d09ee44f6ec29d178529ed92c20fd">00333</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1NodeInOperator.html#a9e0d09ee44f6ec29d178529ed92c20fd">accept</a>( <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>&amp; v ) { v.<a class="code" href="classQgsExpression_1_1Visitor.html#ae6609a1d6fce000b4da94dd1e7895cf5">visit</a>( <span class="keyword">this</span> ); }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335       <span class="keyword">protected</span>:
<a name="l00336"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#a9a9ca46b8bc09da38371facd8995c38d">00336</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeInOperator.html#a9a9ca46b8bc09da38371facd8995c38d">mNode</a>;
<a name="l00337"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#a74a06d7ceeec991ca457a5dda7849276">00337</a>         <a class="code" href="classQgsExpression_1_1NodeList.html">NodeList</a>* <a class="code" href="classQgsExpression_1_1NodeInOperator.html#a74a06d7ceeec991ca457a5dda7849276">mList</a>;
<a name="l00338"></a><a class="code" href="classQgsExpression_1_1NodeInOperator.html#a0e2b25c2adb955335be8d751f97eaaaa">00338</a>         <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression_1_1NodeInOperator.html#a0e2b25c2adb955335be8d751f97eaaaa">mNotIn</a>;
<a name="l00339"></a>00339     };
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html">00341</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1NodeFunction.html">NodeFunction</a> : <span class="keyword">public</span> <a class="code" href="classQgsExpression_1_1Node.html">Node</a>
<a name="l00342"></a>00342     {
<a name="l00343"></a>00343       <span class="keyword">public</span>:
<a name="l00344"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#a7f559e5f48ea21b8aa823349c663fb66">00344</a>         <a class="code" href="classQgsExpression_1_1NodeFunction.html#a7f559e5f48ea21b8aa823349c663fb66">NodeFunction</a>( <span class="keywordtype">int</span> fnIndex, <a class="code" href="classQgsExpression_1_1NodeList.html">NodeList</a>* args ): mFnIndex( fnIndex ), mArgs( args ) {}
<a name="l00345"></a>00345         <span class="comment">//NodeFunction( QString name, NodeList* args ) : mName(name), mArgs(args) {}</span>
<a name="l00346"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#a1b59fb845a0dfe6a7dd21b4aaa39b5fe">00346</a>         <span class="keyword">virtual</span> <a class="code" href="classQgsExpression_1_1NodeFunction.html#a1b59fb845a0dfe6a7dd21b4aaa39b5fe">~NodeFunction</a>() { <span class="keyword">delete</span> mArgs; }
<a name="l00347"></a>00347 
<a name="l00348"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#a4c3bce26311ecc9288cfbdcb99e0b9b1">00348</a>         <span class="keywordtype">int</span> <a class="code" href="classQgsExpression_1_1NodeFunction.html#a4c3bce26311ecc9288cfbdcb99e0b9b1">fnIndex</a>() { <span class="keywordflow">return</span> mFnIndex; }
<a name="l00349"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#a7672f8ddf0724621b651faf94914fb48">00349</a>         <a class="code" href="classQgsExpression_1_1NodeList.html">NodeList</a>* <a class="code" href="classQgsExpression_1_1NodeFunction.html#a7672f8ddf0724621b651faf94914fb48">args</a>() { <span class="keywordflow">return</span> mArgs; }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepare( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00352"></a>00352         <span class="keyword">virtual</span> QVariant eval( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f );
<a name="l00353"></a>00353         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span>;
<a name="l00354"></a>00354 
<a name="l00355"></a>00355         <span class="keyword">virtual</span> <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00356"></a>00356         <span class="keyword">static</span> <a class="code" href="classQgsExpression_1_1Node.html">QgsExpression::Node</a>* createFromOgcFilter( QDomElement &amp;element, QString &amp;errorMessage );
<a name="l00357"></a>00357 
<a name="l00358"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#ac53d3599cb84804d232e31649b796ada">00358</a>         <span class="keyword">virtual</span> QStringList <a class="code" href="classQgsExpression_1_1NodeFunction.html#ac53d3599cb84804d232e31649b796ada">referencedColumns</a>()<span class="keyword"> const </span>{ QStringList lst; <span class="keywordflow">if</span> ( !mArgs ) <span class="keywordflow">return</span> lst; <span class="keywordflow">foreach</span>( <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* n, mArgs-&gt;list() ) lst.append( n-&gt;<a class="code" href="classQgsExpression_1_1Node.html#a81e0df7c055ecf815647c86123603de4">referencedColumns</a>() ); <span class="keywordflow">return</span> lst; }
<a name="l00359"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#a23dbdef9b1f5a216aaf804d4788f104a">00359</a>         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression_1_1NodeFunction.html#a23dbdef9b1f5a216aaf804d4788f104a">needsGeometry</a>()<span class="keyword"> const </span>{ <span class="keywordtype">bool</span> needs = BuiltinFunctions()[mFnIndex].mUsesGeometry; <span class="keywordflow">if</span> ( mArgs ) { <span class="keywordflow">foreach</span>( <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* n, mArgs-&gt;list() ) needs |= n-&gt;<a class="code" href="classQgsExpression_1_1Node.html#ae90edfcd18b28bb5dbd9b28c33d8a733">needsGeometry</a>(); } <span class="keywordflow">return</span> needs; }
<a name="l00360"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#a334e34d3fc8e2f9a7cb7f19e44e274e9">00360</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1NodeFunction.html#a334e34d3fc8e2f9a7cb7f19e44e274e9">accept</a>( <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>&amp; v ) { v.<a class="code" href="classQgsExpression_1_1Visitor.html#ae6609a1d6fce000b4da94dd1e7895cf5">visit</a>( <span class="keyword">this</span> ); }
<a name="l00361"></a>00361 
<a name="l00362"></a>00362       <span class="keyword">protected</span>:
<a name="l00363"></a>00363         <span class="comment">//QString mName;</span>
<a name="l00364"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#ae29837d4005c2b628969ec61296ffd04">00364</a>         <span class="keywordtype">int</span> <a class="code" href="classQgsExpression_1_1NodeFunction.html#ae29837d4005c2b628969ec61296ffd04">mFnIndex</a>;
<a name="l00365"></a><a class="code" href="classQgsExpression_1_1NodeFunction.html#a0f9cf207622bc98d86d3b454222f7195">00365</a>         <a class="code" href="classQgsExpression_1_1NodeList.html">NodeList</a>* <a class="code" href="classQgsExpression_1_1NodeFunction.html#a0f9cf207622bc98d86d3b454222f7195">mArgs</a>;
<a name="l00366"></a>00366     };
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="classQgsExpression_1_1NodeLiteral.html">00368</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1NodeLiteral.html">NodeLiteral</a> : <span class="keyword">public</span> <a class="code" href="classQgsExpression_1_1Node.html">Node</a>
<a name="l00369"></a>00369     {
<a name="l00370"></a>00370       <span class="keyword">public</span>:
<a name="l00371"></a><a class="code" href="classQgsExpression_1_1NodeLiteral.html#a57d14eefe9d90a3829ad960026f6f3f0">00371</a>         <a class="code" href="classQgsExpression_1_1NodeLiteral.html#a57d14eefe9d90a3829ad960026f6f3f0">NodeLiteral</a>( QVariant value ) : mValue( value ) {}
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="classQgsExpression_1_1NodeLiteral.html#ac5d5632e4222193ba670e81580885cf4">00373</a>         QVariant <a class="code" href="classQgsExpression_1_1NodeLiteral.html#ac5d5632e4222193ba670e81580885cf4">value</a>() { <span class="keywordflow">return</span> mValue; }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepare( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00376"></a>00376         <span class="keyword">virtual</span> QVariant eval( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f );
<a name="l00377"></a>00377         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span>;
<a name="l00378"></a>00378 
<a name="l00379"></a>00379         <span class="keyword">virtual</span> <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00380"></a>00380         <span class="keyword">static</span> <a class="code" href="classQgsExpression_1_1Node.html">QgsExpression::Node</a>* createFromOgcFilter( QDomElement &amp;element, QString &amp;errorMessage );
<a name="l00381"></a>00381 
<a name="l00382"></a><a class="code" href="classQgsExpression_1_1NodeLiteral.html#a58b86e70ce238454467060b1f71e5d81">00382</a>         <span class="keyword">virtual</span> QStringList <a class="code" href="classQgsExpression_1_1NodeLiteral.html#a58b86e70ce238454467060b1f71e5d81">referencedColumns</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> QStringList(); }
<a name="l00383"></a><a class="code" href="classQgsExpression_1_1NodeLiteral.html#a13e62c143968fb281c32ca0acdc1d1aa">00383</a>         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression_1_1NodeLiteral.html#a13e62c143968fb281c32ca0acdc1d1aa">needsGeometry</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00384"></a><a class="code" href="classQgsExpression_1_1NodeLiteral.html#a4afe261426d108610a361bbebf680167">00384</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1NodeLiteral.html#a4afe261426d108610a361bbebf680167">accept</a>( <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>&amp; v ) { v.<a class="code" href="classQgsExpression_1_1Visitor.html#ae6609a1d6fce000b4da94dd1e7895cf5">visit</a>( <span class="keyword">this</span> ); }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386       <span class="keyword">protected</span>:
<a name="l00387"></a><a class="code" href="classQgsExpression_1_1NodeLiteral.html#ab9300c89eaa4fd4b6ea988b8e8855a6c">00387</a>         QVariant <a class="code" href="classQgsExpression_1_1NodeLiteral.html#ab9300c89eaa4fd4b6ea988b8e8855a6c">mValue</a>;
<a name="l00388"></a>00388     };
<a name="l00389"></a>00389 
<a name="l00390"></a><a class="code" href="classQgsExpression_1_1NodeColumnRef.html">00390</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1NodeColumnRef.html">NodeColumnRef</a> : <span class="keyword">public</span> <a class="code" href="classQgsExpression_1_1Node.html">Node</a>
<a name="l00391"></a>00391     {
<a name="l00392"></a>00392       <span class="keyword">public</span>:
<a name="l00393"></a><a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ac2a969fc3686f88a8542eeceb6c0594c">00393</a>         <a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ac2a969fc3686f88a8542eeceb6c0594c">NodeColumnRef</a>( QString name ) : mName( name ), mIndex( -1 ) {}
<a name="l00394"></a>00394 
<a name="l00395"></a><a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ad092fa704f953dd656cf9af23e9dcce0">00395</a>         QString <a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ad092fa704f953dd656cf9af23e9dcce0">name</a>() { <span class="keywordflow">return</span> mName; }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepare( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00398"></a>00398         <span class="keyword">virtual</span> QVariant eval( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f );
<a name="l00399"></a>00399         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span>;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401         <span class="keyword">virtual</span> <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00402"></a>00402         <span class="keyword">static</span> <a class="code" href="classQgsExpression_1_1Node.html">QgsExpression::Node</a>* createFromOgcFilter( QDomElement &amp;element, QString &amp;errorMessage );
<a name="l00403"></a>00403 
<a name="l00404"></a><a class="code" href="classQgsExpression_1_1NodeColumnRef.html#a5afea70cca4550a3bd765da46107d70c">00404</a>         <span class="keyword">virtual</span> QStringList <a class="code" href="classQgsExpression_1_1NodeColumnRef.html#a5afea70cca4550a3bd765da46107d70c">referencedColumns</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> QStringList( mName ); }
<a name="l00405"></a><a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ace69831bbe5d4bd570de3d219feea51e">00405</a>         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ace69831bbe5d4bd570de3d219feea51e">needsGeometry</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00406"></a><a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ad8d02ecf0e34eac2af12c658477ee8a3">00406</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ad8d02ecf0e34eac2af12c658477ee8a3">accept</a>( <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>&amp; v ) { v.<a class="code" href="classQgsExpression_1_1Visitor.html#ae6609a1d6fce000b4da94dd1e7895cf5">visit</a>( <span class="keyword">this</span> ); }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408       <span class="keyword">protected</span>:
<a name="l00409"></a><a class="code" href="classQgsExpression_1_1NodeColumnRef.html#a12be3e4b11f2d934e7d8d2eec4bef11a">00409</a>         QString <a class="code" href="classQgsExpression_1_1NodeColumnRef.html#a12be3e4b11f2d934e7d8d2eec4bef11a">mName</a>;
<a name="l00410"></a><a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ae768ad37f0de04a085d06133460c3146">00410</a>         <span class="keywordtype">int</span> <a class="code" href="classQgsExpression_1_1NodeColumnRef.html#ae768ad37f0de04a085d06133460c3146">mIndex</a>;
<a name="l00411"></a>00411     };
<a name="l00412"></a>00412 
<a name="l00413"></a><a class="code" href="classQgsExpression_1_1WhenThen.html">00413</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1WhenThen.html">WhenThen</a>
<a name="l00414"></a>00414     {
<a name="l00415"></a>00415       <span class="keyword">public</span>:
<a name="l00416"></a><a class="code" href="classQgsExpression_1_1WhenThen.html#ac32c54e3f29e27b1b7dbe33bc7226c4c">00416</a>         <a class="code" href="classQgsExpression_1_1WhenThen.html#ac32c54e3f29e27b1b7dbe33bc7226c4c">WhenThen</a>( <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* whenExp, <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* thenExp ) : mWhenExp( whenExp ), mThenExp( thenExp ) {}
<a name="l00417"></a><a class="code" href="classQgsExpression_1_1WhenThen.html#a39858a16d8e36b81ce58e75d094cc387">00417</a>         <a class="code" href="classQgsExpression_1_1WhenThen.html#a39858a16d8e36b81ce58e75d094cc387">~WhenThen</a>() { <span class="keyword">delete</span> mWhenExp; <span class="keyword">delete</span> mThenExp; }
<a name="l00418"></a>00418 
<a name="l00419"></a>00419         <span class="comment">//protected:</span>
<a name="l00420"></a><a class="code" href="classQgsExpression_1_1WhenThen.html#aa1fb512f9d498005df0a16a4dde267cd">00420</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1WhenThen.html#aa1fb512f9d498005df0a16a4dde267cd">mWhenExp</a>;
<a name="l00421"></a><a class="code" href="classQgsExpression_1_1WhenThen.html#af4962337b07aeef1d04818ce1b81e025">00421</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1WhenThen.html#af4962337b07aeef1d04818ce1b81e025">mThenExp</a>;
<a name="l00422"></a>00422     };
<a name="l00423"></a><a class="code" href="classQgsExpression.html#a7360497f6cb59707908938ad0ed54945">00423</a>     <span class="keyword">typedef</span> QList&lt;WhenThen*&gt; <a class="code" href="classQgsExpression.html#a7360497f6cb59707908938ad0ed54945">WhenThenList</a>;
<a name="l00424"></a>00424 
<a name="l00425"></a><a class="code" href="classQgsExpression_1_1NodeCondition.html">00425</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1NodeCondition.html">NodeCondition</a> : <span class="keyword">public</span> <a class="code" href="classQgsExpression_1_1Node.html">Node</a>
<a name="l00426"></a>00426     {
<a name="l00427"></a>00427       <span class="keyword">public</span>:
<a name="l00428"></a><a class="code" href="classQgsExpression_1_1NodeCondition.html#a13beb5a7f247db1f17a91d64edbdde0a">00428</a>         <a class="code" href="classQgsExpression_1_1NodeCondition.html#a13beb5a7f247db1f17a91d64edbdde0a">NodeCondition</a>( <a class="code" href="classQgsExpression.html#a7360497f6cb59707908938ad0ed54945">WhenThenList</a>* conditions, <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* elseExp = NULL ) : mConditions( *conditions ), mElseExp( elseExp ) { <span class="keyword">delete</span> conditions; }
<a name="l00429"></a><a class="code" href="classQgsExpression_1_1NodeCondition.html#a6974b172dcfce53b9ac914a25aef6b8a">00429</a>         <a class="code" href="classQgsExpression_1_1NodeCondition.html#a6974b172dcfce53b9ac914a25aef6b8a">~NodeCondition</a>() { <span class="keyword">delete</span> mElseExp; <span class="keywordflow">foreach</span>( <a class="code" href="classQgsExpression_1_1WhenThen.html">WhenThen</a>* cond, mConditions ) <span class="keyword">delete</span> cond; }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431         <span class="keyword">virtual</span> QVariant eval( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <a class="code" href="classQgsFeature.html" title="The feature class encapsulates a single feature including its id, geometry and a list of field/values...">QgsFeature</a>* f );
<a name="l00432"></a>00432         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepare( <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* parent, <span class="keyword">const</span> <a class="code" href="qgsfield_8h.html#aacd5afec301c03ed9499abb2bad2554b">QgsFieldMap</a>&amp; fields );
<a name="l00433"></a>00433         <span class="keyword">virtual</span> QString dump() <span class="keyword">const</span>;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         <span class="keyword">virtual</span> <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00436"></a>00436 
<a name="l00437"></a>00437         <span class="keyword">virtual</span> QStringList referencedColumns() <span class="keyword">const</span>;
<a name="l00438"></a>00438         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> needsGeometry() <span class="keyword">const</span>;
<a name="l00439"></a><a class="code" href="classQgsExpression_1_1NodeCondition.html#a52ecfd44cca8d3afe927cae970564599">00439</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQgsExpression_1_1NodeCondition.html#a52ecfd44cca8d3afe927cae970564599">accept</a>( <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>&amp; v ) { v.<a class="code" href="classQgsExpression_1_1Visitor.html#ae6609a1d6fce000b4da94dd1e7895cf5">visit</a>( <span class="keyword">this</span> ); }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441       <span class="keyword">protected</span>:
<a name="l00442"></a><a class="code" href="classQgsExpression_1_1NodeCondition.html#a35f811e248c50b5e46f86fef19fb8189">00442</a>         <a class="code" href="classQgsExpression.html#a7360497f6cb59707908938ad0ed54945">WhenThenList</a> <a class="code" href="classQgsExpression_1_1NodeCondition.html#a35f811e248c50b5e46f86fef19fb8189">mConditions</a>;
<a name="l00443"></a><a class="code" href="classQgsExpression_1_1NodeCondition.html#ae0cbeee45e04d506f2c5a3c6d64b85f2">00443</a>         <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression_1_1NodeCondition.html#ae0cbeee45e04d506f2c5a3c6d64b85f2">mElseExp</a>;
<a name="l00444"></a>00444     };
<a name="l00445"></a>00445 
<a name="l00447"></a>00447 
<a name="l00450"></a><a class="code" href="classQgsExpression_1_1Visitor.html">00450</a>     <span class="keyword">class </span>CORE_EXPORT <a class="code" href="classQgsExpression_1_1Visitor.html" title="support for visitor pattern - algorithms dealing with the expressions may be implemented without modi...">Visitor</a>
<a name="l00451"></a>00451     {
<a name="l00452"></a>00452       <span class="keyword">public</span>:
<a name="l00453"></a><a class="code" href="classQgsExpression_1_1Visitor.html#a38cd27107e3c01f4059741eb4b159724">00453</a>         <span class="keyword">virtual</span> <a class="code" href="classQgsExpression_1_1Visitor.html#a38cd27107e3c01f4059741eb4b159724">~Visitor</a>() {}
<a name="l00454"></a>00454         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit( <a class="code" href="classQgsExpression_1_1NodeUnaryOperator.html">NodeUnaryOperator</a>* n ) = 0;
<a name="l00455"></a>00455         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit( <a class="code" href="classQgsExpression_1_1NodeBinaryOperator.html">NodeBinaryOperator</a>* n ) = 0;
<a name="l00456"></a>00456         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit( <a class="code" href="classQgsExpression_1_1NodeInOperator.html">NodeInOperator</a>* n ) = 0;
<a name="l00457"></a>00457         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit( <a class="code" href="classQgsExpression_1_1NodeFunction.html">NodeFunction</a>* n ) = 0;
<a name="l00458"></a>00458         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit( <a class="code" href="classQgsExpression_1_1NodeLiteral.html">NodeLiteral</a>* n ) = 0;
<a name="l00459"></a>00459         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit( <a class="code" href="classQgsExpression_1_1NodeColumnRef.html">NodeColumnRef</a>* n ) = 0;
<a name="l00460"></a>00460         <span class="keyword">virtual</span> <span class="keywordtype">void</span> visit( <a class="code" href="classQgsExpression_1_1NodeCondition.html">NodeCondition</a>* n ) = 0;
<a name="l00461"></a>00461     };
<a name="l00462"></a>00462 
<a name="l00464"></a>00464     <span class="keywordtype">void</span> acceptVisitor( Visitor&amp; v );
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <span class="comment">// convert from/to OGC Filter</span>
<a name="l00467"></a>00467     <span class="keywordtype">void</span> toOgcFilter( QDomDocument &amp;doc, QDomElement &amp;element ) <span class="keyword">const</span>;
<a name="l00468"></a>00468     <span class="keyword">static</span> <a class="code" href="classQgsExpression.html" title="Class for parsing and evaluation of expressions (formerly called &quot;search strings&quot;).">QgsExpression</a>* createFromOgcFilter( QDomElement &amp;element );
<a name="l00469"></a>00469 
<a name="l00470"></a>00470   <span class="keyword">protected</span>:
<a name="l00471"></a>00471     <span class="comment">// internally used to create an empty expression</span>
<a name="l00472"></a><a class="code" href="classQgsExpression.html#a883d6a2bff57f3a6a3e40659e6e19d98">00472</a>     <a class="code" href="classQgsExpression.html#a883d6a2bff57f3a6a3e40659e6e19d98">QgsExpression</a>() : mRootNode( NULL ), mRowNumber( 0 ), mCalc( NULL ) {}
<a name="l00473"></a>00473 
<a name="l00474"></a><a class="code" href="classQgsExpression.html#a5fc69aab5b55d776d3ca51d70608d07b">00474</a>     QString <a class="code" href="classQgsExpression.html#a5fc69aab5b55d776d3ca51d70608d07b">mExpression</a>;
<a name="l00475"></a><a class="code" href="classQgsExpression.html#a0991c254a9767a8de1c473550d7f2954">00475</a>     <a class="code" href="classQgsExpression_1_1Node.html">Node</a>* <a class="code" href="classQgsExpression.html#a0991c254a9767a8de1c473550d7f2954">mRootNode</a>;
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="classQgsExpression.html#af36fb5a54fb93231ca39cd88be339b2d">00477</a>     QString <a class="code" href="classQgsExpression.html#af36fb5a54fb93231ca39cd88be339b2d">mParserErrorString</a>;
<a name="l00478"></a><a class="code" href="classQgsExpression.html#a7dc26b6c0d30edeb057aeb2cfc172b1b">00478</a>     QString <a class="code" href="classQgsExpression.html#a7dc26b6c0d30edeb057aeb2cfc172b1b">mEvalErrorString</a>;
<a name="l00479"></a>00479 
<a name="l00480"></a><a class="code" href="classQgsExpression.html#a0f3785df271610e542a73818a71fd2ed">00480</a>     <span class="keywordtype">int</span> <a class="code" href="classQgsExpression.html#a0f3785df271610e542a73818a71fd2ed">mRowNumber</a>;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482     <span class="keywordtype">void</span> initGeomCalculator();
<a name="l00483"></a><a class="code" href="classQgsExpression.html#ae043e3deec1129dd2549c9e08dca62f3">00483</a>     <a class="code" href="classQgsDistanceArea.html" title="General purpose distance and area calculator.">QgsDistanceArea</a>* <a class="code" href="classQgsExpression.html#ae043e3deec1129dd2549c9e08dca62f3">mCalc</a>;
<a name="l00484"></a>00484 };
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 <span class="preprocessor">#endif // QGSEXPRESSION_H</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 19 2012 23:22:40 for Quantum GIS API Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
