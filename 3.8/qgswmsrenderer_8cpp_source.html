<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QGIS API Documentation: /tmp/buildd/qgis-3.8.0+99unstable/src/server/services/wms/qgswmsrenderer.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="api_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QGIS API Documentation
   &#160;<span id="projectnumber">3.8.0-Zanzibar (11aff65)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_075bb3ff235063c77951cd176d15a741.html">server</a></li><li class="navelem"><a class="el" href="dir_24d2a5f1f37a113a3072499fcdd340db.html">services</a></li><li class="navelem"><a class="el" href="dir_790cf2b6c26bae784e637ad3db39f915.html">wms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qgswmsrenderer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qgswmsrenderer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">                              qgswmsrenderer.cpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">                              -------------------</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  begin                : May 14, 2006</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  copyright            : (C) 2006 by Marco Hugentobler</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">                         (C) 2017 by David Marteau</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  email                : marco dot hugentobler at karto dot baug dot ethz dot ch</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">                         david dot marteau at 3liz dot com</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *   (at your option) any later version.                                   *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgswmsutils_8h.html">qgswmsutils.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsjsonutils_8h.html">qgsjsonutils.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgswmsrenderer_8h.html">qgswmsrenderer.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfilterrestorer_8h.html">qgsfilterrestorer.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsexception_8h.html">qgsexception.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfields_8h.html">qgsfields.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfieldformatter_8h.html">qgsfieldformatter.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfieldformatterregistry_8h.html">qgsfieldformatterregistry.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfeatureiterator_8h.html">qgsfeatureiterator.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsgeometry_8h.html">qgsgeometry.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmapserviceexception_8h.html">qgsmapserviceexception.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayertree_8h.html">qgslayertree.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayertreemodel_8h.html">qgslayertreemodel.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslegendrenderer_8h.html">qgslegendrenderer.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmaplayer_8h.html">qgsmaplayer.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmaplayerlegend_8h.html">qgsmaplayerlegend.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmaptopixel_8h.html">qgsmaptopixel.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsproject_8h.html">qgsproject.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrasteridentifyresult_8h.html">qgsrasteridentifyresult.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrasterlayer_8h.html">qgsrasterlayer.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrasterrenderer_8h.html">qgsrasterrenderer.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsscalecalculator_8h.html">qgsscalecalculator.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgscoordinatereferencesystem_8h.html">qgscoordinatereferencesystem.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsvectordataprovider_8h.html">qgsvectordataprovider.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsvectorlayer_8h.html">qgsvectorlayer.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmessagelog_8h.html">qgsmessagelog.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrenderer_8h.html">qgsrenderer.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfeature_8h.html">qgsfeature.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsaccesscontrol_8h.html">qgsaccesscontrol.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfeaturerequest_8h.html">qgsfeaturerequest.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmaprendererjobproxy_8h.html">qgsmaprendererjobproxy.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgswmsserviceexception_8h.html">qgswmsserviceexception.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsserverprojectutils_8h.html">qgsserverprojectutils.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmaplayerstylemanager_8h.html">qgsmaplayerstylemanager.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgswkbtypes_8h.html">qgswkbtypes.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsannotationmanager_8h.html">qgsannotationmanager.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsannotation_8h.html">qgsannotation.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsvectorlayerlabeling_8h.html">qgsvectorlayerlabeling.h</a>&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsvectorlayerfeaturecounter_8h.html">qgsvectorlayerfeaturecounter.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgspallabeling_8h.html">qgspallabeling.h</a>&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayerrestorer_8h.html">qgslayerrestorer.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsdxfexport_8h.html">qgsdxfexport.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgssymbollayerutils_8h.html">qgssymbollayerutils.h</a>&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsserverexception_8h.html">qgsserverexception.h</a>&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsexpressioncontextutils_8h.html">qgsexpressioncontextutils.h</a>&quot;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;QImage&gt;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;QPainter&gt;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &lt;QStringList&gt;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &lt;QTemporaryFile&gt;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &lt;QDir&gt;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &lt;QUrl&gt;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &lt;nlohmann/json.hpp&gt;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//for printing</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutatlas_8h.html">qgslayoutatlas.h</a>&quot;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutmanager_8h.html">qgslayoutmanager.h</a>&quot;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutexporter_8h.html">qgslayoutexporter.h</a>&quot;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutsize_8h.html">qgslayoutsize.h</a>&quot;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutrendercontext_8h.html">qgslayoutrendercontext.h</a>&quot;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutmeasurement_8h.html">qgslayoutmeasurement.h</a>&quot;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsprintlayout_8h.html">qgsprintlayout.h</a>&quot;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutpagecollection_8h.html">qgslayoutpagecollection.h</a>&quot;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutitempage_8h.html">qgslayoutitempage.h</a>&quot;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutitemlabel_8h.html">qgslayoutitemlabel.h</a>&quot;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutitemlegend_8h.html">qgslayoutitemlegend.h</a>&quot;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutitemmap_8h.html">qgslayoutitemmap.h</a>&quot;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutitemmapgrid_8h.html">qgslayoutitemmapgrid.h</a>&quot;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutframe_8h.html">qgslayoutframe.h</a>&quot;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslayoutitemhtml_8h.html">qgslayoutitemhtml.h</a>&quot;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfeaturefilterprovidergroup_8h.html">qgsfeaturefilterprovidergroup.h</a>&quot;</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsogcutils_8h.html">qgsogcutils.h</a>&quot;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsunittypes_8h.html">qgsunittypes.h</a>&quot;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceQgsWms.html">QgsWms</a></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;{</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#a2c644a29810847d596c21a729f465e1a">   97</a></span>&#160;  <a class="code" href="classQgsWms_1_1QgsRenderer.html#a2c644a29810847d596c21a729f465e1a">QgsRenderer::QgsRenderer</a>( <span class="keyword">const</span> <a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html">QgsWmsRenderContext</a> &amp;context )</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    : mContext( context )</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    mProject = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#ac205b0e92b81bbe7599e4af9a37b82d9">project</a>();</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    mWmsParameters = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a748c95fa29403490a47576caf90c0497">parameters</a>();</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a53a4718390bd45b2df4b9b21f8fede96">dump</a>();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#afdf1161be6c456a507dbfa3cab1fd044">  106</a></span>&#160;  <a class="code" href="classQgsWms_1_1QgsRenderer.html#afdf1161be6c456a507dbfa3cab1fd044">QgsRenderer::~QgsRenderer</a>()</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    removeTemporaryLayers();</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#acb99228370280f08d6e09219466d5843">  111</a></span>&#160;  QImage *<a class="code" href="classQgsWms_1_1QgsRenderer.html#acb99228370280f08d6e09219466d5843">QgsRenderer::getLegendGraphics</a>( <a class="code" href="classQgsLayerTreeModel.html">QgsLayerTreeModel</a> &amp;model )</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// get layers</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    std::unique_ptr&lt;QgsLayerRestorer&gt; restorer;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    restorer.reset( <span class="keyword">new</span> <a class="code" href="classQgsLayerRestorer.html">QgsLayerRestorer</a>( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a340790acd806026c606bd5e7be4cf42f">layers</a>() ) );</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// configure layers</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    QList&lt;QgsMapLayer *&gt; layers = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a5147cf4a578ac51798751b22361dc1b4">layersToRender</a>();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    configureLayers( layers );</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// init renderer</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="classQgsLegendSettings.html">QgsLegendSettings</a> settings = legendSettings();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="classQgsLegendRenderer.html">QgsLegendRenderer</a> renderer( &amp;model, settings );</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// create image</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    std::unique_ptr&lt;QImage&gt; image;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">const</span> qreal dpmm = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aa9862dccc9904146c578d5c82a902c3b">dotsPerMm</a>();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">const</span> QSizeF minSize = renderer.<a class="code" href="classQgsLegendRenderer.html#a0d35b6326078ed37eeca250acc5582e2">minimumSize</a>();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">const</span> QSize size( minSize.width() * dpmm, minSize.height() * dpmm );</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    image.reset( createImage( size ) );</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// configure painter</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    std::unique_ptr&lt;QPainter&gt; painter;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    painter.reset( <span class="keyword">new</span> QPainter( image.get() ) );</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    painter-&gt;setRenderHint( QPainter::Antialiasing, <span class="keyword">true</span> );</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    painter-&gt;scale( dpmm, dpmm );</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// rendering</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    renderer.<a class="code" href="classQgsLegendRenderer.html#a765ced66ea2e39c323620ec55abca219">drawLegend</a>( painter.get() );</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    painter-&gt;end();</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> image.release();</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#abf7d909d98236152aa6a2653021faca1">  145</a></span>&#160;  QImage *<a class="code" href="classQgsWms_1_1QgsRenderer.html#acb99228370280f08d6e09219466d5843">QgsRenderer::getLegendGraphics</a>( <a class="code" href="classQgsLayerTreeModelLegendNode.html">QgsLayerTreeModelLegendNode</a> &amp;nodeModel )</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// get layers</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    std::unique_ptr&lt;QgsLayerRestorer&gt; restorer;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    restorer.reset( <span class="keyword">new</span> <a class="code" href="classQgsLayerRestorer.html">QgsLayerRestorer</a>( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a340790acd806026c606bd5e7be4cf42f">layers</a>() ) );</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// configure layers</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    QList&lt;QgsMapLayer *&gt; layers = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a5147cf4a578ac51798751b22361dc1b4">layersToRender</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    configureLayers( layers );</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// create image</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">const</span> QSize size( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#aa0902198a531b5054c14a251fbd35110">widthAsInt</a>(), mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a7caef4b2aacf215b0f1103c9bc8eb111">heightAsInt</a>() );</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    std::unique_ptr&lt;QImage&gt; image( createImage( size ) );</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// configure painter</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">const</span> qreal dpmm = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aa9862dccc9904146c578d5c82a902c3b">dotsPerMm</a>();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    std::unique_ptr&lt;QPainter&gt; painter;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    painter.reset( <span class="keyword">new</span> QPainter( image.get() ) );</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    painter-&gt;setRenderHint( QPainter::Antialiasing, <span class="keyword">true</span> );</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    painter-&gt;scale( dpmm, dpmm );</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// rendering</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="classQgsLegendSettings.html">QgsLegendSettings</a> settings = legendSettings();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="structQgsLayerTreeModelLegendNode_1_1ItemContext.html">QgsLayerTreeModelLegendNode::ItemContext</a> ctx;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    ctx.<a class="code" href="structQgsLayerTreeModelLegendNode_1_1ItemContext.html#a0b281a181faff334e211b381016dad4c">painter</a> = painter.get();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    ctx.<a class="code" href="structQgsLayerTreeModelLegendNode_1_1ItemContext.html#ad92ab91e6dbb34759e3d7162ba0013b7">labelXOffset</a> = 0;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    ctx.<a class="code" href="structQgsLayerTreeModelLegendNode_1_1ItemContext.html#a364950d7ea7bbf7d0cb7e75ee8282ed5">point</a> = QPointF();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    nodeModel.<a class="code" href="classQgsLayerTreeModelLegendNode.html#ae1efad0cafcdab48554055fdcda8b637">drawSymbol</a>( settings, &amp;ctx, size.height() / dpmm );</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    painter-&gt;end();</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">return</span> image.release();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::runHitTest( <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings, <a class="code" href="classQgsWms_1_1QgsRenderer.html#a32ccd458c0cf1db10d38b9539513cc6e">HitTest</a> &amp;hitTest )<span class="keyword"> const</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="classQgsRenderContext.html">QgsRenderContext</a> context = <a class="code" href="classQgsRenderContext.html#ac326603e162b609b609fd4ccebf7ffe8">QgsRenderContext::fromMapSettings</a>( mapSettings );</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> QString &amp;<span class="keywordtype">id</span> : mapSettings.<a class="code" href="classQgsMapSettings.html#a40546626099555559e9fcb898c1cbfb5">layerIds</a>() )</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vl = qobject_cast&lt;<a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *&gt;( mProject-&gt;<a class="code" href="classQgsProject.html#a322fce15a4dd7505398ef9d24295f0c1">mapLayer</a>( <span class="keywordtype">id</span> ) );</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">if</span> ( !vl || !vl-&gt;<a class="code" href="classQgsVectorLayer.html#afd293fb4109344c0f1a4b9bba596f529">renderer</a>() )</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">if</span> ( vl-&gt;<a class="code" href="classQgsMapLayer.html#a8b1e61edeca056f552fe01438155dbde">hasScaleBasedVisibility</a>() &amp;&amp; vl-&gt;<a class="code" href="classQgsMapLayer.html#a151f2c4887551431c889b4dcbbc39f2b">isInScaleRange</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#a24e262c80b54fc44e6bdb90ca4b62020">scale</a>() ) )</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        hitTest[vl] = <a class="code" href="classQgsWms_1_1QgsRenderer.html#a77b474b7f97cfbbee0863a534cd7fb32">SymbolSet</a>(); <span class="comment">// no symbols -&gt; will not be shown</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <a class="code" href="classQgsCoordinateTransform.html">QgsCoordinateTransform</a> tr = mapSettings.<a class="code" href="classQgsMapSettings.html#a34fe24129dea8620ecf623a60ad7d343">layerTransform</a>( vl );</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      context.<a class="code" href="classQgsRenderContext.html#a14a1deaf94837029f23adb0423546bc4">setCoordinateTransform</a>( tr );</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      context.<a class="code" href="classQgsRenderContext.html#aa157a5da7d1ee90ecd3bde21941153fb">setExtent</a>( tr.<a class="code" href="classQgsCoordinateTransform.html#a8cc5d64f1438300f231ec9444edbbe67">transformBoundingBox</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>(), <a class="code" href="classQgsCoordinateTransform.html#a8bc24d9a900ec38443bb573eb77e66f5a86faf04e40154edd976b1240e2bdc9bd">QgsCoordinateTransform::ReverseTransform</a> ) );</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <a class="code" href="classQgsWms_1_1QgsRenderer.html#a77b474b7f97cfbbee0863a534cd7fb32">SymbolSet</a> &amp;usedSymbols = hitTest[vl];</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      runHitTestLayer( vl, usedSymbols, context );</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::runHitTestLayer( <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vl, <a class="code" href="classQgsWms_1_1QgsRenderer.html#a77b474b7f97cfbbee0863a534cd7fb32">SymbolSet</a> &amp;usedSymbols, <a class="code" href="classQgsRenderContext.html">QgsRenderContext</a> &amp;context )<span class="keyword"> const</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    std::unique_ptr&lt; QgsFeatureRenderer &gt; r( vl-&gt;<a class="code" href="classQgsVectorLayer.html#afd293fb4109344c0f1a4b9bba596f529">renderer</a>()-&gt;<a class="code" href="classQgsFeatureRenderer.html#a1dc475663007d2a26f8e4480fd51ba9b">clone</a>() );</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">bool</span> moreSymbolsPerFeature = r-&gt;capabilities() &amp; <a class="code" href="classQgsFeatureRenderer.html#aa33cca89be2cf805acfe309f491b7151a032dbbe9c457924a27f1f2ae4c6c6531">QgsFeatureRenderer::MoreSymbolsPerFeature</a>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    r-&gt;startRender( context, vl-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>() );</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="classQgsFeature.html">QgsFeature</a> f;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="classQgsFeatureRequest.html">QgsFeatureRequest</a> request( context.<a class="code" href="classQgsRenderContext.html#aea7e08e4ded5eb3196b90134a06460b0">extent</a>() );</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    request.<a class="code" href="classQgsFeatureRequest.html#a650612f14b4a10f5afa553d13a810927">setFlags</a>( <a class="code" href="classQgsFeatureRequest.html#aab0dc2dca2b882316c3bb3668dbf4667ad60a395ad4de36b56d511dcca27d4502">QgsFeatureRequest::ExactIntersect</a> );</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="classQgsFeatureIterator.html">QgsFeatureIterator</a> fi = vl-&gt;<a class="code" href="classQgsVectorLayer.html#a34d5f22eeef1ebb67dc757f6415a481e">getFeatures</a>( request );</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">while</span> ( fi.<a class="code" href="classQgsFeatureIterator.html#a0e06c74bda2fbddbd7f2de13363fac44">nextFeature</a>( f ) )</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      context.<a class="code" href="classQgsRenderContext.html#a42707c8a463905e7c64af78c921077ff">expressionContext</a>().<a class="code" href="classQgsExpressionContext.html#a99a92e3956573acfc28f7199ba13948d">setFeature</a>( f );</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">if</span> ( moreSymbolsPerFeature )</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">for</span> ( <a class="code" href="classQgsSymbol.html">QgsSymbol</a> *s : r-&gt;originalSymbolsForFeature( f, context ) )</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          usedSymbols.insert( <a class="code" href="classQgsSymbolLayerUtils.html#accf5697c3830de7ef4d31543b0db56b8">QgsSymbolLayerUtils::symbolProperties</a>( s ) );</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        usedSymbols.insert( <a class="code" href="classQgsSymbolLayerUtils.html#accf5697c3830de7ef4d31543b0db56b8">QgsSymbolLayerUtils::symbolProperties</a>( r-&gt;originalSymbolForFeature( f, context ) ) );</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    r-&gt;stopRender( context );</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#a4f1df47bb607a0b4f10e7eb7057df5f1">  226</a></span>&#160;  <a class="code" href="classQgsWms_1_1QgsRenderer.html#a32ccd458c0cf1db10d38b9539513cc6e">QgsRenderer::HitTest</a> <a class="code" href="classQgsWms_1_1QgsRenderer.html#a4f1df47bb607a0b4f10e7eb7057df5f1">QgsRenderer::symbols</a>()</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// check size</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> ( ! mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a695750e32e31ef5b07851a10f8ac2710">isValidWidthHeight</a>() )</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                    QStringLiteral( <span class="stringliteral">&quot;The requested map size is too large&quot;</span> ) );</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// init layer restorer before doing anything</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    std::unique_ptr&lt;QgsLayerRestorer&gt; restorer;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    restorer.reset( <span class="keyword">new</span> <a class="code" href="classQgsLayerRestorer.html">QgsLayerRestorer</a>( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a340790acd806026c606bd5e7be4cf42f">layers</a>() ) );</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// configure layers</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> mapSettings;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    QList&lt;QgsMapLayer *&gt; layers = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a5147cf4a578ac51798751b22361dc1b4">layersToRender</a>();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    configureLayers( layers, &amp;mapSettings );</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// create the output image and the painter</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    std::unique_ptr&lt;QPainter&gt; painter;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    std::unique_ptr&lt;QImage&gt; image( createImage( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a0979c94d37319114480c1f9274e653c2">mapSize</a>() ) );</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// configure map settings (background, DPI, ...)</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    configureMapSettings( image.get(), mapSettings );</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// add layers to map settings</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#a2bd2b940e1db7812d638da28caabd62a">setLayers</a>( layers );</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// run hit tests</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="classQgsWms_1_1QgsRenderer.html#a32ccd458c0cf1db10d38b9539513cc6e">HitTest</a> <a class="code" href="classQgsWms_1_1QgsRenderer.html#a4f1df47bb607a0b4f10e7eb7057df5f1">symbols</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    runHitTest( mapSettings, symbols );</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classQgsWms_1_1QgsRenderer.html#a4f1df47bb607a0b4f10e7eb7057df5f1">symbols</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#a411bcfe1b17eef2225cd5a6b1766934e">  261</a></span>&#160;  QByteArray <a class="code" href="classQgsWms_1_1QgsRenderer.html#a411bcfe1b17eef2225cd5a6b1766934e">QgsRenderer::getPrint</a>()</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// init layer restorer before doing anything</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    std::unique_ptr&lt;QgsLayerRestorer&gt; restorer;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    restorer.reset( <span class="keyword">new</span> <a class="code" href="classQgsLayerRestorer.html">QgsLayerRestorer</a>( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a340790acd806026c606bd5e7be4cf42f">layers</a>() ) );</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// GetPrint request needs a template parameter</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keyword">const</span> QString templateName = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a4770e652cb6bb5c8cddeb1cd0030cc3d">composerTemplate</a>();</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> ( templateName.isEmpty() )</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4af5737467adc19cc6b182b282da1ffba0">QgsServiceException::QGIS_MissingParameterValue</a>,</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                    <a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbab43d9d298ef476e909333951f05987bd">QgsWmsParameter::TEMPLATE</a> );</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// check template</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsLayoutManager.html">QgsLayoutManager</a> *lManager = mProject-&gt;<a class="code" href="classQgsProject.html#a914ca9e8fb91ac5ae7c5df0f9b7c51ff">layoutManager</a>();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="classQgsPrintLayout.html">QgsPrintLayout</a> *sourceLayout( dynamic_cast&lt;QgsPrintLayout *&gt;( lManager-&gt;<a class="code" href="classQgsLayoutManager.html#a851970d7142a7a71d6d5acde07fc732b">layoutByName</a>( templateName ) ) );</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> ( !sourceLayout )</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                    mWmsParameters[<a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbab43d9d298ef476e909333951f05987bd">QgsWmsParameter::TEMPLATE</a> ] );</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Check that layout has at least one page</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> ( sourceLayout-&gt;<a class="code" href="classQgsLayout.html#a335b0864da1587dfb7f9f903d58c02d6">pageCollection</a>()-&gt;<a class="code" href="classQgsLayoutPageCollection.html#a862a2cc4ad2aebe9f20d4a0aa0cb7086">pageCount</a>() &lt; 1 )</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                    QStringLiteral( <span class="stringliteral">&quot;The template has no pages&quot;</span> ) );</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    std::unique_ptr&lt;QgsPrintLayout&gt; layout( sourceLayout-&gt;<a class="code" href="classQgsPrintLayout.html#aa45efaafdd7a5c4055f4f5855242478e">clone</a>() );</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">//atlas print?</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="classQgsLayoutAtlas.html">QgsLayoutAtlas</a> *atlas = 0;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    QStringList atlasPk = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a8c727ee280cdd2baacca0a116ee0abdc">atlasPk</a>();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> ( !atlasPk.isEmpty() ) <span class="comment">//atlas print requested?</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      atlas = layout-&gt;atlas();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">if</span> ( !atlas || !atlas-&gt;enabled() )</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="comment">//error</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                      QStringLiteral( <span class="stringliteral">&quot;The template has no atlas enabled&quot;</span> ) );</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *cLayer = atlas-&gt;coverageLayer();</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> ( !cLayer )</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                      QStringLiteral( <span class="stringliteral">&quot;The atlas has no coverage layer&quot;</span> ) );</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordtype">int</span> maxAtlasFeatures = <a class="code" href="namespaceQgsServerProjectUtils.html#ae35b256b61b5c9c0917a49c98955734d">QgsServerProjectUtils::wmsMaxAtlasFeatures</a>( *mProject );</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">if</span> ( atlasPk.size() == 1 &amp;&amp; atlasPk.at( 0 ) == QStringLiteral( <span class="stringliteral">&quot;*&quot;</span> ) )</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        atlas-&gt;setFilterFeatures( <span class="keyword">false</span> );</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        atlas-&gt;updateFeatures();</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span> ( atlas-&gt;count() &gt; maxAtlasFeatures )</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                        QString( <span class="stringliteral">&quot;The project configuration allows printing maximum %1 atlas features at a time&quot;</span> ).arg( maxAtlasFeatures ) );</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <a class="code" href="qgsfield_8h.html#a00f27df80eac3fb534923fefaed2181d">QgsAttributeList</a> pkIndexes = cLayer-&gt;<a class="code" href="classQgsVectorLayer.html#ad9db4259be1140760780608413792098">primaryKeyAttributes</a>();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">if</span> ( pkIndexes.size() &lt; 1 )</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          <span class="keywordflow">throw</span> <a class="code" href="classQgsException.html">QgsException</a>( QStringLiteral( <span class="stringliteral">&quot;An error occurred during the Atlas print&quot;</span> ) );</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        QStringList pkAttributeNames;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; pkIndexes.size(); ++i )</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;          pkAttributeNames.append( cLayer-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>()[pkIndexes.at( i )].name() );</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordtype">int</span> nAtlasFeatures = atlasPk.size() / pkIndexes.size();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">if</span> ( nAtlasFeatures * pkIndexes.size() != atlasPk.size() ) <span class="comment">//Test is atlasPk.size() is a multiple of pkIndexes.size(). Bail out if not</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                        QStringLiteral( <span class="stringliteral">&quot;Wrong number of ATLAS_PK parameters&quot;</span> ) );</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="comment">//number of atlas features might be restricted</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">if</span> ( nAtlasFeatures &gt; maxAtlasFeatures )</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                        QString( <span class="stringliteral">&quot;%1 atlas features have been requestet, but the project configuration only allows printing %2 atlas features at a time&quot;</span> )</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                        .arg( nAtlasFeatures ).arg( maxAtlasFeatures ) );</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        QString filterString;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordtype">int</span> currentAtlasPk = 0;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; nAtlasFeatures; ++i )</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          <span class="keywordflow">if</span> ( i &gt; 0 )</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            filterString.append( <span class="stringliteral">&quot; OR &quot;</span> );</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;          filterString.append( <span class="stringliteral">&quot;( &quot;</span> );</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; pkIndexes.size(); ++j )</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">if</span> ( j &gt; 0 )</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;              filterString.append( <span class="stringliteral">&quot; AND &quot;</span> );</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            filterString.append( QString( <span class="stringliteral">&quot;\&quot;%1\&quot; = %2&quot;</span> ).arg( pkAttributeNames.at( j ) ).arg( atlasPk.at( currentAtlasPk ) ) );</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            ++currentAtlasPk;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          filterString.append( <span class="stringliteral">&quot; )&quot;</span> );</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        atlas-&gt;setFilterFeatures( <span class="keyword">true</span> );</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        QString errorString;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        atlas-&gt;setFilterExpression( filterString, errorString );</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> ( !errorString.isEmpty() )</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          <span class="keywordflow">throw</span> <a class="code" href="classQgsException.html">QgsException</a>( QStringLiteral( <span class="stringliteral">&quot;An error occurred during the Atlas print&quot;</span> ) );</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// configure layers</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> mapSettings;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    QList&lt;QgsMapLayer *&gt; layers = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a5147cf4a578ac51798751b22361dc1b4">layersToRender</a>();</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    configureLayers( layers, &amp;mapSettings );</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// configure map settings (background, DPI, ...)</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    std::unique_ptr&lt;QImage&gt; image( <span class="keyword">new</span> QImage() );</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    configureMapSettings( image.get(), mapSettings );</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// add layers to map settings</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#a2bd2b940e1db7812d638da28caabd62a">setLayers</a>( layers );</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// configure layout</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    configurePrintLayout( layout.get(), mapSettings, atlas );</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// Get the temporary output file</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805b">QgsWmsParameters::Format</a> format = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a841378caa6e40f148d8adeed6fe03a6d">format</a>();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keyword">const</span> QString extension = <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a1dad461c28ef757cd1a77ba3a77b42ff">QgsWmsParameters::formatAsString</a>( format ).toLower();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    QTemporaryFile tempOutputFile( QDir::tempPath() +  <span class="charliteral">&#39;/&#39;</span> + QStringLiteral( <span class="stringliteral">&quot;XXXXXX.%1&quot;</span> ).arg( extension ) );</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> ( !tempOutputFile.open() )</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsException.html">QgsException</a>( QStringLiteral( <span class="stringliteral">&quot;Could not open temporary file for the GetPrint request.&quot;</span> ) );</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    QString exportError;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> ( format == <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba4342cc828b64c56f42a4565b2d5140b9">QgsWmsParameters::SVG</a> )</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="comment">// Settings for the layout exporter</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <a class="code" href="structQgsLayoutExporter_1_1SvgExportSettings.html">QgsLayoutExporter::SvgExportSettings</a> exportSettings;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">if</span> ( !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af3e8c49a30638360c6c260e08d405309">dpi</a>().isEmpty() )</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordtype">bool</span> ok;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordtype">double</span> dpi( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af3e8c49a30638360c6c260e08d405309">dpi</a>().toDouble( &amp;ok ) );</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span> ( ok )</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;          exportSettings.<a class="code" href="structQgsLayoutExporter_1_1SvgExportSettings.html#a673ec3b56b97cf1d0aba9a01b4940766">dpi</a> = dpi;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="comment">// Draw selections</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      exportSettings.<a class="code" href="structQgsLayoutExporter_1_1SvgExportSettings.html#a8e9455105c0d53025bc0a1f041afe110">flags</a> |= <a class="code" href="classQgsLayoutRenderContext.html#aae823feceb47451b481ce3be51e37456a610ffdc4825896bc89df73a1794dcc3f">QgsLayoutRenderContext::FlagDrawSelection</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">if</span> ( atlas )</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment">//export first page of atlas</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        atlas-&gt;beginRender();</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">if</span> ( atlas-&gt;next() )</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          <a class="code" href="classQgsLayoutExporter.html">QgsLayoutExporter</a> atlasSvgExport( atlas-&gt;layout() );</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          atlasSvgExport.<a class="code" href="classQgsLayoutExporter.html#a06259d4d89f4ecfc996e07d5c0846203">exportToSvg</a>( tempOutputFile.fileName(), exportSettings );</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="classQgsLayoutExporter.html">QgsLayoutExporter</a> exporter( layout.get() );</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        exporter.<a class="code" href="classQgsLayoutExporter.html#a06259d4d89f4ecfc996e07d5c0846203">exportToSvg</a>( tempOutputFile.fileName(), exportSettings );</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( format == <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba6e2e8a53e24a204528aed6ea872c472e">QgsWmsParameters::PNG</a> || format == <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba5de193f910eede41c793241de3caa5c2">QgsWmsParameters::JPG</a> )</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="comment">// Settings for the layout exporter</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <a class="code" href="structQgsLayoutExporter_1_1ImageExportSettings.html">QgsLayoutExporter::ImageExportSettings</a> exportSettings;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="comment">// Get the dpi from input or use the default</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordtype">double</span> dpi( layout-&gt;renderContext().dpi( ) );</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">if</span> ( !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af3e8c49a30638360c6c260e08d405309">dpi</a>().isEmpty() )</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordtype">bool</span> ok;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordtype">double</span> _dpi = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af3e8c49a30638360c6c260e08d405309">dpi</a>().toDouble( &amp;ok );</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">if</span> ( ! ok )</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;          dpi = _dpi;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      exportSettings.<a class="code" href="structQgsLayoutExporter_1_1ImageExportSettings.html#ad36b13d44aae0e70ee161a5cfdc0c90d">dpi</a> = dpi;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="comment">// Draw selections</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      exportSettings.<a class="code" href="structQgsLayoutExporter_1_1ImageExportSettings.html#a6d5f6d12437f66492d977611ba3ab715">flags</a> |= <a class="code" href="classQgsLayoutRenderContext.html#aae823feceb47451b481ce3be51e37456a610ffdc4825896bc89df73a1794dcc3f">QgsLayoutRenderContext::FlagDrawSelection</a>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="comment">// Destination image size in px</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <a class="code" href="classQgsLayoutSize.html">QgsLayoutSize</a> layoutSize( layout-&gt;pageCollection()-&gt;page( 0 )-&gt;sizeWithUnits() );</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <a class="code" href="classQgsLayoutMeasurement.html">QgsLayoutMeasurement</a> width( layout-&gt;convertFromLayoutUnits( layoutSize.width(), QgsUnitTypes::LayoutUnit::LayoutMillimeters ) );</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <a class="code" href="classQgsLayoutMeasurement.html">QgsLayoutMeasurement</a> height( layout-&gt;convertFromLayoutUnits( layoutSize.height(), QgsUnitTypes::LayoutUnit::LayoutMillimeters ) );</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      exportSettings.<a class="code" href="structQgsLayoutExporter_1_1ImageExportSettings.html#a5610e405bb45ddff4c2b91d3f1ee1d50">imageSize</a> = QSize( static_cast&lt;int&gt;( width.length() * dpi / 25.4 ), static_cast&lt;int&gt;( height.<a class="code" href="classQgsLayoutMeasurement.html#abea68d971256eac7aacaeb2b1570f47b">length</a>() * dpi / 25.4 ) );</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">// Export first page only (unless it&#39;s a pdf, see below)</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      exportSettings.<a class="code" href="structQgsLayoutExporter_1_1ImageExportSettings.html#a4d00db439bf69dd3e2885ca1cc2c1492">pages</a>.append( 0 );</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">if</span> ( atlas )</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="comment">//only can give back one page in server rendering</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        atlas-&gt;beginRender();</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> ( atlas-&gt;next() )</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          <a class="code" href="classQgsLayoutExporter.html">QgsLayoutExporter</a> atlasPngExport( atlas-&gt;layout() );</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          atlasPngExport.<a class="code" href="classQgsLayoutExporter.html#a093075b4a054fd8155267ddd9ab0a211">exportToImage</a>( tempOutputFile.fileName(), exportSettings );</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="classQgsLayoutExporter.html">QgsLayoutExporter</a> exporter( layout.get() );</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        exporter.<a class="code" href="classQgsLayoutExporter.html#a093075b4a054fd8155267ddd9ab0a211">exportToImage</a>( tempOutputFile.fileName(), exportSettings );</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( format == <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba453ea312f6600d5c4285cd3c5e1f669d">QgsWmsParameters::PDF</a> )</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="comment">// Settings for the layout exporter</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <a class="code" href="structQgsLayoutExporter_1_1PdfExportSettings.html">QgsLayoutExporter::PdfExportSettings</a> exportSettings;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// TODO: handle size from input ?</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">if</span> ( !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af3e8c49a30638360c6c260e08d405309">dpi</a>().isEmpty() )</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordtype">bool</span> ok;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordtype">double</span> dpi( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af3e8c49a30638360c6c260e08d405309">dpi</a>().toDouble( &amp;ok ) );</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> ( ok )</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;          exportSettings.<a class="code" href="structQgsLayoutExporter_1_1PdfExportSettings.html#aa1b934b6dbc3af4bb268730f33498680">dpi</a> = dpi;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">// Draw selections</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      exportSettings.<a class="code" href="structQgsLayoutExporter_1_1PdfExportSettings.html#a8ef337cee21992b46b4c5db06d2e2f2a">flags</a> |= <a class="code" href="classQgsLayoutRenderContext.html#aae823feceb47451b481ce3be51e37456a610ffdc4825896bc89df73a1794dcc3f">QgsLayoutRenderContext::FlagDrawSelection</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="comment">// Print as raster</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      exportSettings.<a class="code" href="structQgsLayoutExporter_1_1PdfExportSettings.html#a437c1bbd1c1b980dc8f729ce1e84b18a">rasterizeWholeImage</a> = layout-&gt;customProperty( QStringLiteral( <span class="stringliteral">&quot;rasterize&quot;</span> ), <span class="keyword">false</span> ).toBool();</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="comment">// Export all pages</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <a class="code" href="classQgsLayoutExporter.html">QgsLayoutExporter</a> exporter( layout.get() );</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">if</span> ( atlas )</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        exporter.<a class="code" href="classQgsLayoutExporter.html#a0d5bdecfc7e15618c1d52b3184b53215">exportToPdf</a>( atlas, tempOutputFile.fileName(), exportSettings, exportError );</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        exporter.exportToPdf( tempOutputFile.fileName(), exportSettings );</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">else</span> <span class="comment">//unknown format</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4ad48cff839af29ebaa6603a565dd3f171">QgsServiceException::OGC_InvalidFormat</a>,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                    mWmsParameters[<a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbae53388a9d5ca1e2e97b7bc56a19f66f4">QgsWmsParameter::FORMAT</a>] );</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> ( atlas )</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      handlePrintErrors( atlas-&gt;layout() );</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      handlePrintErrors( layout.get() );</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">return</span> tempOutputFile.readAll();</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordtype">bool</span> QgsRenderer::configurePrintLayout( <a class="code" href="classQgsPrintLayout.html">QgsPrintLayout</a> *<a class="code" href="porting__processing_8dox.html#ac34f8cede000dff1f5b0b47d22fa9070">c</a>, <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings, <span class="keywordtype">bool</span> atlasPrint )</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    c-&gt;<a class="code" href="classQgsLayout.html#a275bb7bb68287bcd28b61e30bf369d82">renderContext</a>().<a class="code" href="classQgsLayoutRenderContext.html#a03fc483b86406833e652dcc6e1c4c96d">setSelectionColor</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#a9b380cb976d5ae18a5f18f85807a823d">selectionColor</a>() );</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">// Maps are configured first</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    QList&lt;QgsLayoutItemMap *&gt; maps;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    c-&gt;<a class="code" href="classQgsLayout.html#a10bd120a3eee0b381c1dab11a6fade78">layoutItems</a>&lt;<a class="code" href="classQgsLayoutItemMap.html">QgsLayoutItemMap</a>&gt;( maps );</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// Layout maps now use a string UUID as &quot;id&quot;, let&#39;s assume that the first map</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// has id 0 and so on ...</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">int</span> mapId = 0;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;map : qgis::as_const( maps ) )</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html">QgsWmsParametersComposerMap</a> cMapParams = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a32ef18a7d189116d90c34b56fa3a7007">composerMapParameters</a>( mapId );</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      mapId++;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">if</span> ( !atlasPrint || !map-&gt;atlasDriven() ) <span class="comment">//No need to extent, scal, rotation set with atlas feature</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="comment">//map extent is mandatory</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">if</span> ( !cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a80c5557245752eed835b467742f9d145">mHasExtent</a> )</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;          <span class="comment">//remove map from composition if not referenced by the request</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;          c-&gt;<a class="code" href="classQgsLayout.html#abc071f5106e1d6254189cf3fffc5e11f">removeLayoutItem</a>( map );</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">// Change CRS of map set to &quot;project CRS&quot; to match requested CRS</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="comment">// (if map has a valid preset crs then we keep this crs and don&#39;t use the</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="comment">// requested crs for this map item)</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">if</span> ( mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>().<a class="code" href="classQgsCoordinateReferenceSystem.html#a077267450cec872305c6690de5b5b09c">isValid</a>() &amp;&amp; !map-&gt;presetCrs().isValid() )</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;          map-&gt;setCrs( mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>() );</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="classQgsRectangle.html">QgsRectangle</a> r( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a5e10f5468b7f099a0fc274df9427b4a1">mExtent</a> );</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">if</span> ( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a29f3afc2232199b55d62f0c232055bd3">versionAsNumber</a>() &gt;= <a class="code" href="classQgsProjectVersion.html">QgsProjectVersion</a>( 1, 3, 0 ) &amp;&amp;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;             mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>().<a class="code" href="classQgsCoordinateReferenceSystem.html#aecc077365492da22796fe7c702616406">hasAxisInverted</a>() )</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;          r.<a class="code" href="classQgsRectangle.html#aef2567ca2b950376232f55539c4cf5cc">invert</a>();</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        map-&gt;setExtent( r );</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="comment">// scale</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">if</span> ( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#ab729c4f2116835c160bf1747225c13dc">mScale</a> &gt; 0 )</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          map-&gt;setScale( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#ab729c4f2116835c160bf1747225c13dc">mScale</a> );</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="comment">// rotation</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordflow">if</span> ( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#af98d2a59ef78f4c990e03ce40a68b687">mRotation</a> )</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          map-&gt;setMapRotation( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#af98d2a59ef78f4c990e03ce40a68b687">mRotation</a> );</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">if</span> ( !map-&gt;keepLayerSet() )</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">if</span> ( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a7e1aeb43cbd1215064aabd65ee1fc6b9">mLayers</a>.isEmpty() &amp;&amp; cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a2d2bad09978a32266e50cca3126caf9b">mExternalLayers</a>.isEmpty() )</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;          map-&gt;setLayers( mapSettings.<a class="code" href="classQgsMapSettings.html#ac44aac25ea00d124a7ba36dc270d0d8c">layers</a>() );</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;          QList&lt;QgsMapLayer *&gt; layerSet;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          <span class="keywordflow">for</span> ( <span class="keyword">auto</span> layer : cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a7e1aeb43cbd1215064aabd65ee1fc6b9">mLayers</a> )</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;          {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *mlayer = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a52291ec77f0c2a63043676727e4f2560">layer</a>( layer.mNickname );</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">if</span> ( ! mlayer )</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            setLayerStyle( mlayer, layer.mStyle );</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            layerSet &lt;&lt; mlayer;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;          }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;          layerSet &lt;&lt; externalLayers( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a2d2bad09978a32266e50cca3126caf9b">mExternalLayers</a> );</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;          layerSet &lt;&lt; highlightLayers( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#ad961759c6807c70a6847c16fc8a615b8">mHighlightLayers</a> );</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          std::reverse( layerSet.begin(), layerSet.end() );</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          map-&gt;setLayers( layerSet );</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        map-&gt;setKeepLayerSet( <span class="keyword">true</span> );</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="comment">//grid space x / y</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">if</span> ( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a38cb9f09509c6075b6218efb651b9aed">mGridX</a> &gt; 0 &amp;&amp; cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#ad48ca440176498a96249d3939e7909cd">mGridY</a> &gt; 0 )</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        map-&gt;grid()-&gt;setIntervalX( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a38cb9f09509c6075b6218efb651b9aed">mGridX</a> );</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        map-&gt;grid()-&gt;setIntervalY( cMapParams.<a class="code" href="structQgsWms_1_1QgsWmsParametersComposerMap.html#ad48ca440176498a96249d3939e7909cd">mGridY</a> );</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// Labels</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    QList&lt;QgsLayoutItemLabel *&gt; labels;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    c-&gt;<a class="code" href="classQgsLayout.html#a10bd120a3eee0b381c1dab11a6fade78">layoutItems</a>&lt;<a class="code" href="classQgsLayoutItemLabel.html">QgsLayoutItemLabel</a>&gt;( labels );</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;label : qgis::as_const( labels ) )</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keyword">const</span> QString labelId = label-&gt;<a class="code" href="classQgsLayoutItem.html#ab6d4914bae7fdcff4ef1439136d79d76">id</a>();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keyword">const</span> QString labelParam = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#aaf8473f8fc3bf62aa55b0d0331897be8">layoutParameter</a>( labelId, ok );</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">if</span> ( !ok )</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">if</span> ( labelParam.isEmpty() )</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="comment">//remove exported labels referenced in the request</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="comment">//but with empty string</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        c-&gt;removeItem( label );</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keyword">delete</span> label;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      label-&gt;setText( labelParam );</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// HTMLs</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    QList&lt;QgsLayoutItemHtml *&gt; htmls;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    c-&gt;<a class="code" href="classQgsLayout.html#ae2476c31a796dcbd08e999338a2e62b9">layoutObjects</a>&lt;<a class="code" href="classQgsLayoutItemHtml.html">QgsLayoutItemHtml</a>&gt;( htmls );</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;html : qgis::as_const( htmls ) )</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="keywordflow">if</span> ( html-&gt;frameCount() == 0 )</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="classQgsLayoutFrame.html">QgsLayoutFrame</a> *htmlFrame = html-&gt;frame( 0 );</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keyword">const</span> QString htmlId = htmlFrame-&gt;<a class="code" href="classQgsLayoutItem.html#ab6d4914bae7fdcff4ef1439136d79d76">id</a>();</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keyword">const</span> QString url = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#aaf8473f8fc3bf62aa55b0d0331897be8">layoutParameter</a>( htmlId, ok );</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">if</span> ( !ok )</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        html-&gt;update();</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="comment">//remove exported Htmls referenced in the request</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="comment">//but with empty string</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">if</span> ( url.isEmpty() )</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        c-&gt;<a class="code" href="classQgsLayout.html#a10ec1871a7fc8085be884f3b841ffb0c">removeMultiFrame</a>( html );</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keyword">delete</span> html;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      QUrl newUrl( url );</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      html-&gt;setUrl( newUrl );</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      html-&gt;update();</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">// legends</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    QList&lt;QgsLayoutItemLegend *&gt; legends;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    c-&gt;<a class="code" href="classQgsLayout.html#a10bd120a3eee0b381c1dab11a6fade78">layoutItems</a>&lt;<a class="code" href="classQgsLayoutItemLegend.html">QgsLayoutItemLegend</a>&gt;( legends );</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;legend : qgis::as_const( legends ) )</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keywordflow">if</span> ( legend-&gt;autoUpdateModel() )</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="comment">// the legend has an auto-update model</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment">// we will update it with map&#39;s layers</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keyword">const</span> <a class="code" href="classQgsLayoutItemMap.html">QgsLayoutItemMap</a> *map = legend-&gt;linkedMap();</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">if</span> ( !map )</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        legend-&gt;setAutoUpdateModel( <span class="keyword">false</span> );</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="comment">// get model and layer tree root of the legend</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="classQgsLegendModel.html">QgsLegendModel</a> *model = legend-&gt;model();</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        QStringList layerSet;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keyword">const</span> QList&lt;QgsMapLayer *&gt; layerList( map-&gt;<a class="code" href="classQgsLayoutItemMap.html#ad79d8d56572e594b41ae72b3c794c486">layers</a>() );</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;layer : layerList )</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;          layerSet &lt;&lt; layer-&gt;id();</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="comment">//setLayerIdsToLegendModel( model, layerSet, map-&gt;scale() );</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="comment">// get model and layer tree root of the legend</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <a class="code" href="classQgsLayerTree.html">QgsLayerTree</a> *root = model-&gt;<a class="code" href="classQgsLayerTreeModel.html#a884e38dfb1a075809b64f45081d38f17">rootGroup</a>();</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="comment">// get layerIds find in the layer tree root</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keyword">const</span> QStringList layerIds = root-&gt;<a class="code" href="classQgsLayerTreeGroup.html#a527b55b8befc7c9a8c6a0c439cd16a8a">findLayerIds</a>();</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="comment">// find the layer in the layer tree</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="comment">// remove it if the layer id is not in map layerIds</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;layerId : layerIds )</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;          <a class="code" href="classQgsLayerTreeLayer.html">QgsLayerTreeLayer</a> *nodeLayer = root-&gt;<a class="code" href="classQgsLayerTreeGroup.html#ab1d23a4fa30202929c97cfe00c326e03">findLayer</a>( layerId );</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;          <span class="keywordflow">if</span> ( !nodeLayer )</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;          {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;          }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;          <span class="keywordflow">if</span> ( !layerSet.contains( layerId ) )</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            qobject_cast&lt;<a class="code" href="classQgsLayerTreeGroup.html">QgsLayerTreeGroup</a> *&gt;( nodeLayer-&gt;<a class="code" href="classQgsLayerTreeNode.html#aa29249808413d2442f212193be6a2327">parent</a>() )-&gt;removeChildNode( nodeLayer );</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;          }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;          {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer = nodeLayer-&gt;<a class="code" href="classQgsLayerTreeLayer.html#ac7c463e2587b85cb6ca6f1de4b25d18a">layer</a>();</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keywordflow">if</span> ( !layer-&gt;<a class="code" href="classQgsMapLayer.html#a151f2c4887551431c889b4dcbbc39f2b">isInScaleRange</a>( map-&gt;<a class="code" href="classQgsLayoutItemMap.html#ab6b169a68e56327a49e96ada5023ea10">scale</a>() ) )</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;              qobject_cast&lt;<a class="code" href="classQgsLayerTreeGroup.html">QgsLayerTreeGroup</a> *&gt;( nodeLayer-&gt;<a class="code" href="classQgsLayerTreeNode.html#aa29249808413d2442f212193be6a2327">parent</a>() )-&gt;removeChildNode( nodeLayer );</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;          }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        root-&gt;<a class="code" href="classQgsLayerTreeGroup.html#ad41c812a5c92a9cc6c3d347d4abcb6a4">removeChildrenGroupWithoutLayers</a>();</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#af8cb6980633651b865bf88fc4f95c3aa">  736</a></span>&#160;  QImage *<a class="code" href="classQgsWms_1_1QgsRenderer.html#af8cb6980633651b865bf88fc4f95c3aa">QgsRenderer::getMap</a>()</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// check size</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span> ( ! mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a695750e32e31ef5b07851a10f8ac2710">isValidWidthHeight</a>() )</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                                    QStringLiteral( <span class="stringliteral">&quot;The requested map size is too large&quot;</span> ) );</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// init layer restorer before doing anything</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    std::unique_ptr&lt;QgsLayerRestorer&gt; restorer;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    restorer.reset( <span class="keyword">new</span> <a class="code" href="classQgsLayerRestorer.html">QgsLayerRestorer</a>( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a340790acd806026c606bd5e7be4cf42f">layers</a>() ) );</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">// configure layers</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    QList&lt;QgsMapLayer *&gt; layers = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a5147cf4a578ac51798751b22361dc1b4">layersToRender</a>();</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> mapSettings;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    configureLayers( layers, &amp;mapSettings );</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// create the output image and the painter</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    std::unique_ptr&lt;QPainter&gt; painter;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    std::unique_ptr&lt;QImage&gt; image( createImage( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a0979c94d37319114480c1f9274e653c2">mapSize</a>() ) );</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">// configure map settings (background, DPI, ...)</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    configureMapSettings( image.get(), mapSettings );</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">// add layers to map settings</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#a2bd2b940e1db7812d638da28caabd62a">setLayers</a>( layers );</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// rendering step for layers</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    painter.reset( layersRendering( mapSettings, *image ) );</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="comment">// rendering step for annotations</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    annotationsRendering( painter.get() );</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// painting is terminated</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    painter-&gt;end();</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">// scale output image if necessary (required by WMS spec)</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    QImage *scaledImage = scaleImage( image.get() );</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span> ( scaledImage )</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      image.reset( scaledImage );</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">// return</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span> image.release();</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#ab438f9cbc0318da88a6ade60916cdf61">  783</a></span>&#160;  <a class="code" href="classQgsDxfExport.html">QgsDxfExport</a> <a class="code" href="classQgsWms_1_1QgsRenderer.html#ab438f9cbc0318da88a6ade60916cdf61">QgsRenderer::getDxf</a>()</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// init layer restorer before doing anything</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    std::unique_ptr&lt;QgsLayerRestorer&gt; restorer;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    restorer.reset( <span class="keyword">new</span> <a class="code" href="classQgsLayerRestorer.html">QgsLayerRestorer</a>( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a340790acd806026c606bd5e7be4cf42f">layers</a>() ) );</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="comment">// configure layers</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    QList&lt;QgsMapLayer *&gt; layers = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a5147cf4a578ac51798751b22361dc1b4">layersToRender</a>();</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    configureLayers( layers );</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// get dxf layers</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keyword">const</span> QStringList attributes = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ac3d9c616bf2564cf62a56b593fc2446d">dxfLayerAttributes</a>();</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    QList&lt; QgsDxfExport::DxfLayer &gt; dxfLayers;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordtype">int</span> layerIdx = -1;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">for</span> ( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer : layers )</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      layerIdx++;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">if</span> ( layer-&gt;type() != <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca3e3c0ae67b31a76ef20bfaf18438f95f">QgsMapLayerType::VectorLayer</a> )</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">// cast for dxf layers</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vlayer = <span class="keyword">static_cast&lt;</span><a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *<span class="keyword">&gt;</span>( layer );</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="comment">// get the layer attribute used in dxf</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordtype">int</span> layerAttribute = -1;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keywordflow">if</span> ( attributes.size() &gt; layerIdx )</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        layerAttribute = vlayer-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>().<a class="code" href="classQgsFields.html#a4d243eff35b31845588ebdce08322b44">indexFromName</a>( attributes[ layerIdx ] );</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      dxfLayers.append( <a class="code" href="structQgsDxfExport_1_1DxfLayer.html">QgsDxfExport::DxfLayer</a>( vlayer, layerAttribute ) );</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    }</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="comment">// add layers to dxf</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="classQgsDxfExport.html">QgsDxfExport</a> dxf;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    dxf.<a class="code" href="classQgsDxfExport.html#ab950354bb2c980dc8dff828a7b30f52b">setExtent</a>( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a33de3a8f632b288457833b84eb3cf5d5">bboxAsRectangle</a>() );</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    dxf.<a class="code" href="classQgsDxfExport.html#a700780127af97a8dd53e4dba25405bbf">addLayers</a>( dxfLayers );</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    dxf.<a class="code" href="classQgsDxfExport.html#aff36f6e706b2061f5b1c28a02733f2b1">setLayerTitleAsName</a>( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#aafe3c2a31dfa4b01ad7c7a48cc9f1851">dxfUseLayerTitleAsName</a>() );</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    dxf.<a class="code" href="classQgsDxfExport.html#a19d61e74baeeb51bb258213e2947f4da">setSymbologyExport</a>( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a9a0ad7717c01628e5c7b9c9dcd319547">dxfMode</a>() );</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> ( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a148a526506fe9bbc6cfc0e9c08d1b327">dxfFormatOptions</a>().contains( QgsWmsParameters::DxfFormatOption::SCALE ) )</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      dxf.<a class="code" href="classQgsDxfExport.html#a80c70c3805a5176767a91b4e6bbffa60">setSymbologyScale</a>( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a07233499d2c4a14c7c1ccbaa6a88a02b">dxfScale</a>() );</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">return</span> dxf;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> infoPointToMapCoordinates( <span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> *infoPoint, <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings )</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="comment">//check if i, j are in the pixel range of the image</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">if</span> ( i &lt; 0 || i &gt; mapSettings.<a class="code" href="classQgsMapSettings.html#a73da4f11859995fe92a7e28d2a64530c">outputSize</a>().width() )</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <a class="code" href="classQgsWms_1_1QgsWmsParameter.html">QgsWmsParameter</a> param( <a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba330ab96a38c98ed9985204e521f31b52">QgsWmsParameter::I</a> );</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      param.<a class="code" href="classQgsServerParameterDefinition.html#a2e1dbe1f7644a9cc48ca8cf281a30d27">mValue</a> = i;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a983c52f95c97c6493b699f2da831efea">QgsServiceException::OGC_InvalidPoint</a>,</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                                    param );</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> ( j &lt; 0 || j &gt; mapSettings.<a class="code" href="classQgsMapSettings.html#a73da4f11859995fe92a7e28d2a64530c">outputSize</a>().height() )</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <a class="code" href="classQgsWms_1_1QgsWmsParameter.html">QgsWmsParameter</a> param( <a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba43621e997f287aeb5d306c2686101b07">QgsWmsParameter::J</a> );</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      param.<a class="code" href="classQgsServerParameterDefinition.html#a2e1dbe1f7644a9cc48ca8cf281a30d27">mValue</a> = j;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a983c52f95c97c6493b699f2da831efea">QgsServiceException::OGC_InvalidPoint</a>,</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                                    param );</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordtype">double</span> xRes = mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>().<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / mapSettings.<a class="code" href="classQgsMapSettings.html#a73da4f11859995fe92a7e28d2a64530c">outputSize</a>().width();</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordtype">double</span> yRes = mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>().<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() / mapSettings.<a class="code" href="classQgsMapSettings.html#a73da4f11859995fe92a7e28d2a64530c">outputSize</a>().height();</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    infoPoint-&gt;<a class="code" href="classQgsPointXY.html#acc02289a06924ed7aaeb59f8406e3514">setX</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>().<a class="code" href="classQgsRectangle.html#a3186f5474a5fa3ced21e8204d339c301">xMinimum</a>() + i * xRes + xRes / 2.0 );</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    infoPoint-&gt;<a class="code" href="classQgsPointXY.html#a30cab144736825771b8d79366058fcc7">setY</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>().<a class="code" href="classQgsRectangle.html#a87a5cf3ee2fe6494c04a9e88876cc54e">yMaximum</a>() - j * yRes - yRes / 2.0 );</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="classQgsWms_1_1QgsRenderer.html#ac80259b0d4a872b318d475f5e343337c">  855</a></span>&#160;  QByteArray <a class="code" href="classQgsWms_1_1QgsRenderer.html#ac80259b0d4a872b318d475f5e343337c">QgsRenderer::getFeatureInfo</a>( <span class="keyword">const</span> QString &amp;version )</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// Verifying Mandatory parameters</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">// The QUERY_LAYERS parameter is Mandatory</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">if</span> ( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#afadedc95ba4f880134211d94f110a893">queryLayersNickname</a>().isEmpty() )</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4af5737467adc19cc6b182b282da1ffba0">QgsServiceException::QGIS_MissingParameterValue</a>,</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                                    mWmsParameters[<a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba7153196e3c07752ed7dbcf8b162d224f">QgsWmsParameter::QUERY_LAYERS</a>] );</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">// The I/J parameters are Mandatory if they are not replaced by X/Y or FILTER or FILTER_GEOM</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> ijDefined = !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a5e2acc01fde2929febb8ff1064fd8571">i</a>().isEmpty() &amp;&amp; !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a79ba2a28bc869a0c5e435f8e3f1596ac">j</a>().isEmpty();</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> xyDefined = !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a119d56587a60d0ecb4890de4af2b9c09">x</a>().isEmpty() &amp;&amp; !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a48aa2482057ce35f097976d804906e1a">y</a>().isEmpty();</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> filtersDefined = !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af0666baa93ea6330ae81ae5d840314a2">filters</a>().isEmpty();</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> filterGeomDefined = !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a4664080317260681ed15259f0690a0e0">filterGeom</a>().isEmpty();</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span> ( !ijDefined &amp;&amp; !xyDefined &amp;&amp; !filtersDefined &amp;&amp; !filterGeomDefined )</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <a class="code" href="classQgsWms_1_1QgsWmsParameter.html">QgsWmsParameter</a> parameter = mWmsParameters[<a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba330ab96a38c98ed9985204e521f31b52">QgsWmsParameter::I</a>];</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="keywordflow">if</span> ( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a79ba2a28bc869a0c5e435f8e3f1596ac">j</a>().isEmpty() )</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        parameter = mWmsParameters[<a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba43621e997f287aeb5d306c2686101b07">QgsWmsParameter::J</a>];</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4af5737467adc19cc6b182b282da1ffba0">QgsServiceException::QGIS_MissingParameterValue</a>, parameter );</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805b">QgsWmsParameters::Format</a> infoFormat = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a47ce6590bbe09a858ff279ef6b990ce3">infoFormat</a>();</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> ( infoFormat == QgsWmsParameters::Format::NONE )</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4ad48cff839af29ebaa6603a565dd3f171">QgsServiceException::OGC_InvalidFormat</a>,</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                                    mWmsParameters[<a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbaa55b4728efd409910c2f2b59a9dce672">QgsWmsParameter::INFO_FORMAT</a>] );</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// create the mapSettings and the output image</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    std::unique_ptr&lt;QImage&gt; outputImage( createImage( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a0979c94d37319114480c1f9274e653c2">mapSize</a>() ) );</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">// init layer restorer before doing anything</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    std::unique_ptr&lt;QgsLayerRestorer&gt; restorer;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    restorer.reset( <span class="keyword">new</span> <a class="code" href="classQgsLayerRestorer.html">QgsLayerRestorer</a>( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a340790acd806026c606bd5e7be4cf42f">layers</a>() ) );</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="comment">// The CRS parameter is considered as mandatory in configureMapSettings</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="comment">// but in the case of filter parameter, CRS parameter has not to be mandatory</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordtype">bool</span> mandatoryCrsParam = <span class="keyword">true</span>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span> ( filtersDefined &amp;&amp; !ijDefined &amp;&amp; !xyDefined &amp;&amp; mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ad05e4d241308c269bbcc113c90f8cdd0">crs</a>().isEmpty() )</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      mandatoryCrsParam = <span class="keyword">false</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// configure map settings (background, DPI, ...)</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> mapSettings;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    configureMapSettings( outputImage.get(), mapSettings, mandatoryCrsParam );</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="comment">// compute scale denominator</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <a class="code" href="classQgsScaleCalculator.html">QgsScaleCalculator</a> scaleCalc( ( outputImage-&gt;logicalDpiX() + outputImage-&gt;logicalDpiY() ) / 2, mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>().<a class="code" href="classQgsCoordinateReferenceSystem.html#a79949e22a654073dcc4f8d1810f07c5f">mapUnits</a>() );</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> scaleDenominator = scaleCalc.<a class="code" href="classQgsScaleCalculator.html#a3cd9d1e9df5366246075954c47ebac07">calculate</a>( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a33de3a8f632b288457833b84eb3cf5d5">bboxAsRectangle</a>(), outputImage-&gt;<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() );</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="comment">// configure layers</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html">QgsWmsRenderContext</a> context = mContext;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    context.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a81b1b40fe9114ae027af56bc1442fda9">setScaleDenominator</a>( scaleDenominator );</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    QList&lt;QgsMapLayer *&gt; layers = context.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a5147cf4a578ac51798751b22361dc1b4">layersToRender</a>();</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    configureLayers( layers, &amp;mapSettings );</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">// add layers to map settings</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#a2bd2b940e1db7812d638da28caabd62a">setLayers</a>( layers );</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    QDomDocument result = featureInfoDocument( layers, mapSettings, outputImage.get(), version );</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    QByteArray ba;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">if</span> ( infoFormat == QgsWmsParameters::Format::TEXT )</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      ba = convertFeatureInfoToText( result );</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( infoFormat == QgsWmsParameters::Format::HTML )</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      ba = convertFeatureInfoToHtml( result );</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( infoFormat == QgsWmsParameters::Format::JSON )</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      ba = convertFeatureInfoToJson( layers, result );</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      ba = result.toByteArray();</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">return</span> ba;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  QImage *QgsRenderer::createImage( <span class="keyword">const</span> QSize &amp;size )<span class="keyword"> const</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    std::unique_ptr&lt;QImage&gt; image;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">// use alpha channel only if necessary because it slows down performance</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805b">QgsWmsParameters::Format</a> format = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a841378caa6e40f148d8adeed6fe03a6d">format</a>();</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordtype">bool</span> transparent = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a0b96d590a4255ba9811e537bae206d06">transparentAsBool</a>();</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">if</span> ( transparent &amp;&amp; format != <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba5de193f910eede41c793241de3caa5c2">QgsWmsParameters::JPG</a> )</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    {</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      image = qgis::make_unique&lt;QImage&gt;( size, QImage::Format_ARGB32_Premultiplied );</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      image-&gt;fill( 0 );</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      image = qgis::make_unique&lt;QImage&gt;( size, QImage::Format_RGB32 );</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      image-&gt;fill( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a83703773695ab49cee84b30f398abd05">backgroundColorAsColor</a>() );</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="comment">// Check that image was correctly created</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> ( image-&gt;isNull() )</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsException.html">QgsException</a>( QStringLiteral( <span class="stringliteral">&quot;createImage: image could not be created, check for out of memory conditions&quot;</span> ) );</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keyword">const</span> qreal dpm = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aa9862dccc9904146c578d5c82a902c3b">dotsPerMm</a>() * 1000.0;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    image-&gt;setDotsPerMeterX( dpm );</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    image-&gt;setDotsPerMeterY( dpm );</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">return</span> image.release();</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::configureMapSettings( <span class="keyword">const</span> QPaintDevice *paintDevice, <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings, <span class="keywordtype">bool</span> mandatoryCrsParam )<span class="keyword"> const</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span> ( !paintDevice )</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsException.html">QgsException</a>( QStringLiteral( <span class="stringliteral">&quot;configureMapSettings: no paint device&quot;</span> ) );</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#ae41d3e17953076f4bc3a4329535f4e37">setOutputSize</a>( QSize( paintDevice-&gt;width(), paintDevice-&gt;height() ) );</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#a61ec445a6c8c48cbfd27c012b204dc06">setOutputDpi</a>( paintDevice-&gt;logicalDpiX() );</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">//map extent</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="classQgsRectangle.html">QgsRectangle</a> mapExtent = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a33de3a8f632b288457833b84eb3cf5d5">bboxAsRectangle</a>();</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> ( !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a7bc80ab21bd7e83b5107423e883fcc26">bbox</a>().isEmpty() &amp;&amp; mapExtent.<a class="code" href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">isEmpty</a>() )</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                                    mWmsParameters[<a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbaeaa4334594890290309fc68a384e6685">QgsWmsParameter::BBOX</a>] );</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    QString <a class="code" href="qgswfsgetfeature_8cpp.html#a7ad000982146f8b67e673cdc80a26bec">crs</a> = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ad05e4d241308c269bbcc113c90f8cdd0">crs</a>();</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> ( crs.compare( <span class="stringliteral">&quot;CRS:84&quot;</span>, Qt::CaseInsensitive ) == 0 )</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      crs = QString( <span class="stringliteral">&quot;EPSG:4326&quot;</span> );</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      mapExtent.<a class="code" href="classQgsRectangle.html#aef2567ca2b950376232f55539c4cf5cc">invert</a>();</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( crs.isEmpty() &amp;&amp; !mandatoryCrsParam )</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    {</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      crs = QString( <span class="stringliteral">&quot;EPSG:4326&quot;</span> );</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="classQgsCoordinateReferenceSystem.html">QgsCoordinateReferenceSystem</a> outputCRS;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="comment">//wms spec says that CRS parameter is mandatory.</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    outputCRS = <a class="code" href="classQgsCoordinateReferenceSystem.html#a0213a21ebf445a417db751b1e5da7afe">QgsCoordinateReferenceSystem::fromOgcWmsCrs</a>( crs );</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">if</span> ( !outputCRS.<a class="code" href="classQgsCoordinateReferenceSystem.html#a077267450cec872305c6690de5b5b09c">isValid</a>() )</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4">QgsServiceException::ExceptionCode</a> code;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <a class="code" href="classQgsWms_1_1QgsWmsParameter.html">QgsWmsParameter</a> parameter;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">if</span> ( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a29f3afc2232199b55d62f0c232055bd3">versionAsNumber</a>() &gt;= <a class="code" href="classQgsProjectVersion.html">QgsProjectVersion</a>( 1, 3, 0 ) )</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      {</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        code = <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a1798a8b65c9b610c637911cfc1601b31">QgsServiceException::OGC_InvalidCRS</a>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        parameter = mWmsParameters[ <a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbad83c3ded9743edd9c119c52ce0886bfe">QgsWmsParameter::CRS</a> ];</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        code = <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4af91cf4a628ccf1d726d4ec4e3b7371d5">QgsServiceException::OGC_InvalidSRS</a>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        parameter = mWmsParameters[ <a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbab257dc9133b0ae10f9139ad03a5a9064">QgsWmsParameter::SRS</a> ];</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      }</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( code, parameter );</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">//then set destinationCrs</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#af94f602a07aebe58130dff48ff03ab7e">setDestinationCrs</a>( outputCRS );</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="comment">// Change x- and y- of BBOX for WMS 1.3.0 if axis inverted</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">if</span> ( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a29f3afc2232199b55d62f0c232055bd3">versionAsNumber</a>() &gt;= <a class="code" href="classQgsProjectVersion.html">QgsProjectVersion</a>( 1, 3, 0 ) &amp;&amp; outputCRS.<a class="code" href="classQgsCoordinateReferenceSystem.html#aecc077365492da22796fe7c702616406">hasAxisInverted</a>() )</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      mapExtent.<a class="code" href="classQgsRectangle.html#aef2567ca2b950376232f55539c4cf5cc">invert</a>();</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    }</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#a800e955c228a5850ae968fe1461a2951">setExtent</a>( mapExtent );</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="comment">/* Define the background color</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">     * Transparent or colored</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805b">QgsWmsParameters::Format</a> format = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a841378caa6e40f148d8adeed6fe03a6d">format</a>();</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordtype">bool</span> transparent = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a0b96d590a4255ba9811e537bae206d06">transparentAsBool</a>();</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    QColor backgroundColor = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a83703773695ab49cee84b30f398abd05">backgroundColorAsColor</a>();</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="comment">//set background color</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> ( transparent &amp;&amp; format != <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba5de193f910eede41c793241de3caa5c2">QgsWmsParameters::JPG</a> )</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      mapSettings.<a class="code" href="classQgsMapSettings.html#aeee4d7cba827a833373a092681f556d8">setBackgroundColor</a>( QColor( 0, 0, 0, 0 ) );</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( backgroundColor.isValid() )</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      mapSettings.<a class="code" href="classQgsMapSettings.html#aeee4d7cba827a833373a092681f556d8">setBackgroundColor</a>( backgroundColor );</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="comment">// add context from project (global variables, ...)</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> context = mProject-&gt;<a class="code" href="classQgsProject.html#a59670bc2011fbf2b2296e2169dbcb0ed">createExpressionContext</a>();</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    context &lt;&lt; <a class="code" href="classQgsExpressionContextUtils.html#ad97a6492b7f61a41dcbe399537415fc2">QgsExpressionContextUtils::mapSettingsScope</a>( mapSettings );</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#a8978462764820b292eb260635764c305">setExpressionContext</a>( context );</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="comment">// add labeling engine settings</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#aab8be674f02573b225990d9c17e1ac79">setLabelingEngineSettings</a>( mProject-&gt;<a class="code" href="classQgsProject.html#acbbef3e8385b56322828621c02ec9cd4">labelingEngineSettings</a>() );</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">// enable rendering optimization</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#ae02c2ce003e3cd8e6fe10a837363ff19">setFlag</a>( <a class="code" href="classQgsMapSettings.html#a4185f13de667ef7a3ea0f109bb4b42fea282380b939b3f192255e6ab991fc4ac5">QgsMapSettings::UseRenderingOptimization</a> );</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">// set selection color</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordtype">int</span> myRed = mProject-&gt;<a class="code" href="classQgsProject.html#a1801847d0eccf25996c6f8d0fee26b64">readNumEntry</a>( <span class="stringliteral">&quot;Gui&quot;</span>, <span class="stringliteral">&quot;/SelectionColorRedPart&quot;</span>, 255 );</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordtype">int</span> myGreen = mProject-&gt;<a class="code" href="classQgsProject.html#a1801847d0eccf25996c6f8d0fee26b64">readNumEntry</a>( <span class="stringliteral">&quot;Gui&quot;</span>, <span class="stringliteral">&quot;/SelectionColorGreenPart&quot;</span>, 255 );</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordtype">int</span> myBlue = mProject-&gt;<a class="code" href="classQgsProject.html#a1801847d0eccf25996c6f8d0fee26b64">readNumEntry</a>( <span class="stringliteral">&quot;Gui&quot;</span>, <span class="stringliteral">&quot;/SelectionColorBluePart&quot;</span>, 0 );</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordtype">int</span> myAlpha = mProject-&gt;<a class="code" href="classQgsProject.html#a1801847d0eccf25996c6f8d0fee26b64">readNumEntry</a>( <span class="stringliteral">&quot;Gui&quot;</span>, <span class="stringliteral">&quot;/SelectionColorAlphaPart&quot;</span>, 255 );</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    mapSettings.<a class="code" href="classQgsMapSettings.html#a1c3432e5fe5da77a4b93ed599f218adc">setSelectionColor</a>( QColor( myRed, myGreen, myBlue, myAlpha ) );</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  }</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  QDomDocument QgsRenderer::featureInfoDocument( QList&lt;QgsMapLayer *&gt; &amp;layers, <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings,</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="keyword">const</span> QImage *outputImage, <span class="keyword">const</span> QString &amp;version )<span class="keyword"> const</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keyword">const</span> QStringList queryLayers = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a8645eb35ce3053a6dc1bc20cee33ebd1">flattenedQueryLayers</a>( );</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordtype">bool</span> ijDefined = ( !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a5e2acc01fde2929febb8ff1064fd8571">i</a>().isEmpty() &amp;&amp; !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a79ba2a28bc869a0c5e435f8e3f1596ac">j</a>().isEmpty() );</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordtype">bool</span> xyDefined = ( !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a119d56587a60d0ecb4890de4af2b9c09">x</a>().isEmpty() &amp;&amp; !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a48aa2482057ce35f097976d804906e1a">y</a>().isEmpty() );</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordtype">bool</span> filtersDefined = !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af0666baa93ea6330ae81ae5d840314a2">filters</a>().isEmpty();</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordtype">bool</span> filterGeomDefined = !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a4664080317260681ed15259f0690a0e0">filterGeom</a>().isEmpty();</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordtype">int</span> featureCount = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ad4b51584ddb6f35e277dfac195b085dd">featureCountAsInt</a>();</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">if</span> ( featureCount &lt; 1 )</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      featureCount = 1;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordtype">int</span> i = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a92766dbf18643e91bdd301d25a490c6e">iAsInt</a>();</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordtype">int</span> j = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#af4e02049b2e28427b19e690ed4998d31">jAsInt</a>();</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> ( xyDefined &amp;&amp; !ijDefined )</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      i = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a7ad90c53ef9e1642ad535204cd1710a9">xAsInt</a>();</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      j = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ad4d25b953941207de862156c76f6d2c8">yAsInt</a>();</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordtype">int</span> width = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#aa0902198a531b5054c14a251fbd35110">widthAsInt</a>();</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordtype">int</span> height = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a7caef4b2aacf215b0f1103c9bc8eb111">heightAsInt</a>();</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">if</span> ( ( i != -1 &amp;&amp; j != -1 &amp;&amp; width != 0 &amp;&amp; height != 0 ) &amp;&amp; ( width != outputImage-&gt;width() || height != outputImage-&gt;height() ) )</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    {</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      i *= ( outputImage-&gt;width() / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( width ) );</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      j *= ( outputImage-&gt;height() / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( height ) );</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    }</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="comment">// init search variables</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    std::unique_ptr&lt;QgsRectangle&gt; featuresRect;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    std::unique_ptr&lt;QgsGeometry&gt; filterGeom;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    std::unique_ptr&lt;QgsPointXY&gt; infoPoint;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span> ( i != -1 &amp;&amp; j != -1 )</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      infoPoint.reset( <span class="keyword">new</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a>() );</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      infoPointToMapCoordinates( i, j, infoPoint.get(), mapSettings );</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( filtersDefined )</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      featuresRect.reset( <span class="keyword">new</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a>() );</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( filterGeomDefined )</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      filterGeom.reset( <span class="keyword">new</span> <a class="code" href="classQgsGeometry.html">QgsGeometry</a>( <a class="code" href="classQgsGeometry.html#a736b669b7ae22b13848562970707d180">QgsGeometry::fromWkt</a>( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a4664080317260681ed15259f0690a0e0">filterGeom</a>() ) ) );</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    QDomDocument result;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    QDomElement getFeatureInfoElement;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805b">QgsWmsParameters::Format</a> infoFormat = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a47ce6590bbe09a858ff279ef6b990ce3">infoFormat</a>();</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">if</span> ( infoFormat == QgsWmsParameters::Format::GML )</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      getFeatureInfoElement = result.createElement( QStringLiteral( <span class="stringliteral">&quot;wfs:FeatureCollection&quot;</span> ) );</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xmlns:wfs&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://www.opengis.net/wfs&quot;</span> ) );</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xmlns:ogc&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://www.opengis.net/ogc&quot;</span> ) );</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xmlns:gml&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://www.opengis.net/gml&quot;</span> ) );</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xmlns:ows&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://www.opengis.net/ows&quot;</span> ) );</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xmlns:xlink&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://www.w3.org/1999/xlink&quot;</span> ) );</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xmlns:qgs&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://qgis.org/gml&quot;</span> ) );</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xmlns:xsi&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> ) );</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xsi:schemaLocation&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd http://qgis.org/gml&quot;</span> ) );</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      QString featureInfoElemName = <a class="code" href="namespaceQgsServerProjectUtils.html#ad7bf0dd78303511e659e235936ec58cf">QgsServerProjectUtils::wmsFeatureInfoDocumentElement</a>( *mProject );</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">if</span> ( featureInfoElemName.isEmpty() )</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        featureInfoElemName = QStringLiteral( <span class="stringliteral">&quot;GetFeatureInfoResponse&quot;</span> );</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      }</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      QString featureInfoElemNs = <a class="code" href="namespaceQgsServerProjectUtils.html#a40af446b6e1404a33101c3f326fc55cc">QgsServerProjectUtils::wmsFeatureInfoDocumentElementNs</a>( *mProject );</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <span class="keywordflow">if</span> ( featureInfoElemNs.isEmpty() )</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        getFeatureInfoElement = result.createElement( featureInfoElemName );</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        getFeatureInfoElement = result.createElementNS( featureInfoElemNs, featureInfoElemName );</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      }</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <span class="comment">//feature info schema</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      QString featureInfoSchema = <a class="code" href="namespaceQgsServerProjectUtils.html#a111131950438e1c30d49be0c14884178">QgsServerProjectUtils::wmsFeatureInfoSchema</a>( *mProject );</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">if</span> ( !featureInfoSchema.isEmpty() )</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      {</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xmlns:xsi&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> ) );</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        getFeatureInfoElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;xsi:schemaLocation&quot;</span> ), featureInfoSchema );</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    }</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    result.appendChild( getFeatureInfoElement );</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="comment">//Render context is needed to determine feature visibility for vector layers</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <a class="code" href="classQgsRenderContext.html">QgsRenderContext</a> renderContext = <a class="code" href="classQgsRenderContext.html#ac326603e162b609b609fd4ccebf7ffe8">QgsRenderContext::fromMapSettings</a>( mapSettings );</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordtype">bool</span> sia2045 = <a class="code" href="namespaceQgsServerProjectUtils.html#a172fc4b41ef3642cf0014a2cecd6fb0b">QgsServerProjectUtils::wmsInfoFormatSia2045</a>( *mProject );</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="comment">//layers can have assigned a different name for GetCapabilities</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    QHash&lt;QString, QString&gt; layerAliasMap = <a class="code" href="namespaceQgsServerProjectUtils.html#a878264865968e7d77dc834bc1f3f7a7a">QgsServerProjectUtils::wmsFeatureInfoLayerAliasMap</a>( *mProject );</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> QString &amp;queryLayer : queryLayers )</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    {</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordtype">bool</span> validLayer = <span class="keyword">false</span>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordtype">bool</span> queryableLayer = <span class="keyword">true</span>;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <span class="keywordflow">for</span> ( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer : layers )</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">if</span> ( queryLayer == mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a98ab15ea8c19ce681651e29a0024aa3e">layerNickname</a>( *layer ) )</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;          validLayer = <span class="keyword">true</span>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;          queryableLayer = layer-&gt;flags().testFlag( <a class="code" href="classQgsMapLayer.html#aaf3488afc0e3919ed9bdf6902f90d53ba63489984a286cdc4dbf64319651c4fdd">QgsMapLayer::Identifiable</a> );</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;          <span class="keywordflow">if</span> ( !queryableLayer )</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;          {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;          }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;          QDomElement layerElement;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;          <span class="keywordflow">if</span> ( infoFormat == QgsWmsParameters::Format::GML )</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;          {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            layerElement = getFeatureInfoElement;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;          }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;          {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            layerElement = result.createElement( QStringLiteral( <span class="stringliteral">&quot;Layer&quot;</span> ) );</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            QString layerName = queryLayer;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            <span class="comment">//check if the layer is given a different name for GetFeatureInfo output</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            QHash&lt;QString, QString&gt;::const_iterator layerAliasIt = layerAliasMap.constFind( layerName );</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <span class="keywordflow">if</span> ( layerAliasIt != layerAliasMap.constEnd() )</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;              layerName = layerAliasIt.value();</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            }</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            layerElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ), layerName );</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            getFeatureInfoElement.appendChild( layerElement );</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="keywordflow">if</span> ( sia2045 ) <span class="comment">//the name might not be unique after alias replacement</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            {</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;              layerElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;id&quot;</span> ), layer-&gt;id() );</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            }</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;          }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;          <span class="keywordflow">if</span> ( layer-&gt;type() == <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca3e3c0ae67b31a76ef20bfaf18438f95f">QgsMapLayerType::VectorLayer</a> )</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;          {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vectorLayer = qobject_cast&lt;<a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *&gt;( layer );</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            <span class="keywordflow">if</span> ( vectorLayer )</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            {</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;              ( void )featureInfoFromVectorLayer( vectorLayer, infoPoint.get(), featureCount, result, layerElement, mapSettings, renderContext, version, featuresRect.get(), filterGeom.get() );</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;          }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;          {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <a class="code" href="classQgsRasterLayer.html">QgsRasterLayer</a> *rasterLayer = qobject_cast&lt;<a class="code" href="classQgsRasterLayer.html">QgsRasterLayer</a> *&gt;( layer );</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            <span class="keywordflow">if</span> ( !rasterLayer )</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            {</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            }</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            <span class="keywordflow">if</span> ( !infoPoint )</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            }</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            <a class="code" href="classQgsPointXY.html">QgsPointXY</a> layerInfoPoint = mapSettings.<a class="code" href="classQgsMapSettings.html#aeab946f60b7a5644ccc62495a6717206">mapToLayerCoordinates</a>( layer, *( infoPoint.get() ) );</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="keywordflow">if</span> ( !rasterLayer-&gt;<a class="code" href="classQgsMapLayer.html#a1a6526a54c172262b5882f8a08571aee">extent</a>().<a class="code" href="classQgsRectangle.html#a12889d757ef465b9cc9804bbba564ad8">contains</a>( layerInfoPoint ) )</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            {</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            <span class="keywordflow">if</span> ( infoFormat == QgsWmsParameters::Format::GML )</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;              layerElement = result.createElement( QStringLiteral( <span class="stringliteral">&quot;gml:featureMember&quot;</span> )<span class="comment">/*wfs:FeatureMember*/</span> );</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;              getFeatureInfoElement.appendChild( layerElement );</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            ( void )featureInfoFromRasterLayer( rasterLayer, mapSettings, &amp;layerInfoPoint, result, layerElement, version );</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;          }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      }</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">if</span> ( !validLayer &amp;&amp; !mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#abdc85bfeb7b8990eb22d6d2cb8843a3a">isValidLayer</a>( queryLayer ) &amp;&amp; !mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a273418a57a61baec5c528f97e0d57ad3">isValidGroup</a>( queryLayer ) )</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <a class="code" href="classQgsWms_1_1QgsWmsParameter.html">QgsWmsParameter</a> param( <a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba16d6769e75d6f6efa303baa3628109af">QgsWmsParameter::LAYER</a> );</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        param.<a class="code" href="classQgsServerParameterDefinition.html#a2e1dbe1f7644a9cc48ca8cf281a30d27">mValue</a> = queryLayer;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a936d56ef1834d4641bdc61f6c43ec044">QgsServiceException::OGC_LayerNotDefined</a>,</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                      param );</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( validLayer &amp;&amp; !queryableLayer ) || ( !validLayer &amp;&amp; mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a273418a57a61baec5c528f97e0d57ad3">isValidGroup</a>( queryLayer ) ) )</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <a class="code" href="classQgsWms_1_1QgsWmsParameter.html">QgsWmsParameter</a> param( <a class="code" href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba16d6769e75d6f6efa303baa3628109af">QgsWmsParameter::LAYER</a> );</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        param.<a class="code" href="classQgsServerParameterDefinition.html#a2e1dbe1f7644a9cc48ca8cf281a30d27">mValue</a> = queryLayer;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="comment">// Check if this layer belongs to a group and the group has any queryable layers</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="keywordtype">bool</span> hasGroupAndQueryable { <span class="keyword">false</span> };</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <span class="keywordflow">if</span> ( ! mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a748c95fa29403490a47576caf90c0497">parameters</a>().<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#afadedc95ba4f880134211d94f110a893">queryLayersNickname</a>().contains( queryLayer ) )</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;          <span class="comment">// Find which group this layer belongs to</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> &amp;constNicks { mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a748c95fa29403490a47576caf90c0497">parameters</a>().<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#afadedc95ba4f880134211d94f110a893">queryLayersNickname</a>() };</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;          <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;ql : constNicks )</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;          {</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            <span class="keywordflow">if</span> ( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a901caf41a4820e6e601fe34df3a4ff9b">layerGroups</a>().contains( ql ) )</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;              <span class="keyword">const</span> <span class="keyword">auto</span> &amp;constLayers { mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a901caf41a4820e6e601fe34df3a4ff9b">layerGroups</a>()[ql] };</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;              <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;ml : constLayers )</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;              {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                <span class="keywordflow">if</span> ( ( ! ml-&gt;shortName().isEmpty() &amp;&amp;  ml-&gt;shortName() == queryLayer ) || ( ml-&gt;name() == queryLayer ) )</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                  param.<a class="code" href="classQgsServerParameterDefinition.html#a2e1dbe1f7644a9cc48ca8cf281a30d27">mValue</a> = ql;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                }</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                <span class="keywordflow">if</span> ( ml-&gt;flags().testFlag( <a class="code" href="classQgsMapLayer.html#aaf3488afc0e3919ed9bdf6902f90d53ba63489984a286cdc4dbf64319651c4fdd">QgsMapLayer::Identifiable</a> ) )</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                  hasGroupAndQueryable = <span class="keyword">true</span>;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;              }</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;          }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        }</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="comment">// Only throw if it&#39;s not a group or the group has no queryable children</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="keywordflow">if</span> ( ! hasGroupAndQueryable )</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;          <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4aeffb3776ee51777c91cf22539d19238f">QgsServiceException::OGC_LayerNotQueryable</a>,</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                                        param );</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      }</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> ( featuresRect )</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    {</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="keywordflow">if</span> ( infoFormat == QgsWmsParameters::Format::GML )</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        QDomElement bBoxElem = result.createElement( QStringLiteral( <span class="stringliteral">&quot;gml:boundedBy&quot;</span> ) );</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        QDomElement boxElem;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordtype">int</span> gmlVersion = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#abb96b3ba9f9f7cb36d82b65cdea01ff4">infoFormatVersion</a>();</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="keywordflow">if</span> ( gmlVersion &lt; 3 )</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;          boxElem = <a class="code" href="classQgsOgcUtils.html#af15c7a61f72fc95c815f7fa4a86caa0b">QgsOgcUtils::rectangleToGMLBox</a>( featuresRect.get(), result, 8 );</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;          boxElem = <a class="code" href="classQgsOgcUtils.html#ad31a34fd7e1013e2b6913fd6b5459c8d">QgsOgcUtils::rectangleToGMLEnvelope</a>( featuresRect.get(), result, 8 );</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <a class="code" href="classQgsCoordinateReferenceSystem.html">QgsCoordinateReferenceSystem</a> <a class="code" href="qgswfsgetfeature_8cpp.html#a7ad000982146f8b67e673cdc80a26bec">crs</a> = mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>();</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">if</span> ( crs.isValid() )</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;          boxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;srsName&quot;</span> ), crs.authid() );</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        bBoxElem.appendChild( boxElem );</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        getFeatureInfoElement.insertBefore( bBoxElem, QDomNode() ); <span class="comment">//insert as first child</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      }</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        QDomElement bBoxElem = result.createElement( QStringLiteral( <span class="stringliteral">&quot;BoundingBox&quot;</span> ) );</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;CRS&quot;</span> ), mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>().<a class="code" href="classQgsCoordinateReferenceSystem.html#ab2dee1805d8e3b62448e4d106753b595">authid</a>() );</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;minx&quot;</span> ), <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( featuresRect-&gt;xMinimum(), 8 ) );</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;maxx&quot;</span> ), <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( featuresRect-&gt;xMaximum(), 8 ) );</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;miny&quot;</span> ), <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( featuresRect-&gt;yMinimum(), 8 ) );</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;maxy&quot;</span> ), <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( featuresRect-&gt;yMaximum(), 8 ) );</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        getFeatureInfoElement.insertBefore( bBoxElem, QDomNode() ); <span class="comment">//insert as first child</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      }</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    }</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">if</span> ( sia2045 &amp;&amp; infoFormat == QgsWmsParameters::Format::XML )</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      convertFeatureInfoToSia2045( result );</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  }</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordtype">bool</span> QgsRenderer::featureInfoFromVectorLayer( <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *layer,</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> *infoPoint,</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="keywordtype">int</span> nFeatures,</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      QDomDocument &amp;infoDocument,</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      QDomElement &amp;layerElement,</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings,</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="classQgsRenderContext.html">QgsRenderContext</a> &amp;renderContext,</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keyword">const</span> QString &amp;version,</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <a class="code" href="classQgsRectangle.html">QgsRectangle</a> *featureBBox,</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <a class="code" href="classQgsGeometry.html">QgsGeometry</a> *filterGeom )<span class="keyword"> const</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="keywordflow">if</span> ( !layer )</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    }</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <a class="code" href="classQgsFeatureRequest.html">QgsFeatureRequest</a> fReq;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="comment">// Transform filter geometry to layer CRS</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    std::unique_ptr&lt;QgsGeometry&gt; layerFilterGeom;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> ( filterGeom )</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      layerFilterGeom.reset( <span class="keyword">new</span> <a class="code" href="classQgsGeometry.html">QgsGeometry</a>( *filterGeom ) );</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      layerFilterGeom-&gt;transform( <a class="code" href="classQgsCoordinateTransform.html">QgsCoordinateTransform</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>(), layer-&gt;<a class="code" href="classQgsMapLayer.html#a3619f5329809ff09bf0cc88b05dd6168">crs</a>(), fReq.<a class="code" href="classQgsFeatureRequest.html#ab9fe0275aa8684f752725ed8872226be">transformContext</a>() ) );</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    }</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="comment">//we need a selection rect (0.01 of map width)</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <a class="code" href="classQgsRectangle.html">QgsRectangle</a> mapRect = mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>();</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="classQgsRectangle.html">QgsRectangle</a> layerRect = mapSettings.<a class="code" href="classQgsMapSettings.html#aeab946f60b7a5644ccc62495a6717206">mapToLayerCoordinates</a>( layer, mapRect );</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="classQgsRectangle.html">QgsRectangle</a> searchRect;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="comment">//info point could be 0 in case there is only an attribute filter</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">if</span> ( infoPoint )</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    {</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      searchRect = featureInfoSearchRect( layer, mapSettings, renderContext, *infoPoint );</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    }</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( layerFilterGeom )</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    {</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      searchRect = layerFilterGeom-&gt;boundingBox();</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a7bc80ab21bd7e83b5107423e883fcc26">bbox</a>().isEmpty() )</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      searchRect = layerRect;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    }</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="comment">//do a select with searchRect and go through all the features</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <a class="code" href="classQgsFeature.html">QgsFeature</a> feature;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <a class="code" href="classQgsAttributes.html">QgsAttributes</a> featureAttributes;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordtype">int</span> featureCounter = 0;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    layer-&gt;<a class="code" href="classQgsVectorLayer.html#a2a3b5542fc9714a405f68b0afca4a963">updateFields</a>();</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsFields.html">QgsFields</a> fields = layer-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>();</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordtype">bool</span> addWktGeometry = ( <a class="code" href="namespaceQgsServerProjectUtils.html#a8ed7f6237fc3256071bdb1741fc725a2">QgsServerProjectUtils::wmsFeatureInfoAddWktGeometry</a>( *mProject ) &amp;&amp; mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a34092f249d4c75487468d655afff4ea9">withGeometry</a>() );</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordtype">bool</span> segmentizeWktGeometry = <a class="code" href="namespaceQgsServerProjectUtils.html#a4d3ad02d2653d4b4fd366bcf366ff33f">QgsServerProjectUtils::wmsFeatureInfoSegmentizeWktGeometry</a>( *mProject );</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keyword">const</span> QSet&lt;QString&gt; &amp;excludedAttributes = layer-&gt;<a class="code" href="classQgsVectorLayer.html#af77acee1c9414724e0ed68b056ea7581">excludeAttributesWms</a>();</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keywordtype">bool</span> hasGeometry = addWktGeometry || featureBBox || layerFilterGeom;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    fReq.<a class="code" href="classQgsFeatureRequest.html#a650612f14b4a10f5afa553d13a810927">setFlags</a>( ( ( hasGeometry ) ? <a class="code" href="classQgsFeatureRequest.html#aab0dc2dca2b882316c3bb3668dbf4667a504746b6d86b14d7835d00c3dfb0ad87">QgsFeatureRequest::NoFlags</a> : <a class="code" href="classQgsFeatureRequest.html#aab0dc2dca2b882316c3bb3668dbf4667af5584cc22947cb704cb5c89a9c2e066d">QgsFeatureRequest::NoGeometry</a> ) | <a class="code" href="classQgsFeatureRequest.html#aab0dc2dca2b882316c3bb3668dbf4667ad60a395ad4de36b56d511dcca27d4502">QgsFeatureRequest::ExactIntersect</a> );</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">if</span> ( ! searchRect.<a class="code" href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">isEmpty</a>() )</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    {</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      fReq.<a class="code" href="classQgsFeatureRequest.html#aff23c6b25cb0b69d472eeae8ba38647f">setFilterRect</a>( searchRect );</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    }</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    {</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      fReq.<a class="code" href="classQgsFeatureRequest.html#a650612f14b4a10f5afa553d13a810927">setFlags</a>( fReq.<a class="code" href="classQgsFeatureRequest.html#aecdd3e90a49cc111b88960ada7691b16">flags</a>() &amp; ~<a class="code" href="classQgsFeatureRequest.html"> QgsFeatureRequest</a>::ExactIntersect );</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> ( layerFilterGeom )</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      fReq.<a class="code" href="classQgsFeatureRequest.html#aa7c168ddbcaaaa88eafb92340880e773">setFilterExpression</a>( QString( <span class="stringliteral">&quot;intersects( $geometry, geom_from_wkt(&#39;%1&#39;) )&quot;</span> ).arg( layerFilterGeom-&gt;asWkt() ) );</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="preprocessor">#ifdef HAVE_SERVER_PYTHON_PLUGINS</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    mContext.accessControl()-&gt;filterFeatures( layer, fReq );</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    QStringList attributes;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="classQgsField.html">QgsField</a> &amp;field : fields )</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      attributes.append( field.name() );</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    }</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    attributes = mContext.accessControl()-&gt;layerAttributes( layer, attributes );</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    fReq.<a class="code" href="classQgsFeatureRequest.html#a85f831f339a9882822d5d5cf19b29fdf">setSubsetOfAttributes</a>( attributes, layer-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>() );</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="classQgsFeatureIterator.html">QgsFeatureIterator</a> fit = layer-&gt;<a class="code" href="classQgsVectorLayer.html#a34d5f22eeef1ebb67dc757f6415a481e">getFeatures</a>( fReq );</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    std::unique_ptr&lt; QgsFeatureRenderer &gt; r2( layer-&gt;<a class="code" href="classQgsVectorLayer.html#afd293fb4109344c0f1a4b9bba596f529">renderer</a>() ? layer-&gt;<a class="code" href="classQgsVectorLayer.html#afd293fb4109344c0f1a4b9bba596f529">renderer</a>()-&gt;<a class="code" href="classQgsFeatureRenderer.html#a1dc475663007d2a26f8e4480fd51ba9b">clone</a>() : nullptr );</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">if</span> ( r2 )</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    {</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      r2-&gt;startRender( renderContext, layer-&gt;<a class="code" href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">fields</a>() );</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    }</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordtype">bool</span> featureBBoxInitialized = <span class="keyword">false</span>;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">while</span> ( fit.<a class="code" href="classQgsFeatureIterator.html#a0e06c74bda2fbddbd7f2de13363fac44">nextFeature</a>( feature ) )</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsVectorLayer.html#a02e164842da83a62157f05518a47eea6">wkbType</a>() == <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a4d5a4986629f537e7494bbb96892b807">QgsWkbTypes::NoGeometry</a> &amp;&amp; ! searchRect.<a class="code" href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">isEmpty</a>() )</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      }</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      ++featureCounter;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">if</span> ( featureCounter &gt; nFeatures )</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      }</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      renderContext.<a class="code" href="classQgsRenderContext.html#a42707c8a463905e7c64af78c921077ff">expressionContext</a>().<a class="code" href="classQgsExpressionContext.html#a99a92e3956573acfc28f7199ba13948d">setFeature</a>( feature );</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsVectorLayer.html#a02e164842da83a62157f05518a47eea6">wkbType</a>() != <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a4d5a4986629f537e7494bbb96892b807">QgsWkbTypes::NoGeometry</a> &amp;&amp; ! searchRect.<a class="code" href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">isEmpty</a>() )</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="keywordflow">if</span> ( !r2 )</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        }</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="comment">//check if feature is rendered at all</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordtype">bool</span> render = r2-&gt;willRenderFeature( feature, renderContext );</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <span class="keywordflow">if</span> ( !render )</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        }</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <a class="code" href="classQgsRectangle.html">QgsRectangle</a> box;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsVectorLayer.html#a02e164842da83a62157f05518a47eea6">wkbType</a>() != <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a4d5a4986629f537e7494bbb96892b807">QgsWkbTypes::NoGeometry</a> &amp;&amp; hasGeometry )</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      {</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        box = mapSettings.<a class="code" href="classQgsMapSettings.html#a3760f8ae782f149de89ad1cd035f2680">layerExtentToOutputExtent</a>( layer, feature.<a class="code" href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">geometry</a>().<a class="code" href="classQgsGeometry.html#adfc04c94b51cdeb55942b699fdd4d564">boundingBox</a>() );</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="keywordflow">if</span> ( featureBBox ) <span class="comment">//extend feature info bounding box if requested</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;          <span class="keywordflow">if</span> ( !featureBBoxInitialized &amp;&amp; featureBBox-&gt;<a class="code" href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">isEmpty</a>() )</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;          {</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            *featureBBox = box;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            featureBBoxInitialized = <span class="keyword">true</span>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;          }</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;          {</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            featureBBox-&gt;<a class="code" href="classQgsRectangle.html#ab8a73ddc15774addc822550266f886c9">combineExtentWith</a>( box );</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;          }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        }</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      }</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      <a class="code" href="classQgsCoordinateReferenceSystem.html">QgsCoordinateReferenceSystem</a> <a class="code" href="qgswfsgetfeature_8cpp.html#a64f06b5c5ff2705cb7507ad5817560c0">outputCrs</a> = layer-&gt;<a class="code" href="classQgsMapLayer.html#a3619f5329809ff09bf0cc88b05dd6168">crs</a>();</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsMapLayer.html#a3619f5329809ff09bf0cc88b05dd6168">crs</a>() != mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>() )</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        outputCrs = mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>();</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      <span class="keywordflow">if</span> ( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a47ce6590bbe09a858ff279ef6b990ce3">infoFormat</a>() == QgsWmsParameters::Format::GML )</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      {</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="qgswfsgetfeature_8cpp.html#af4b23433112c7c162bd2bc1825c7847e">withGeom</a> = layer-&gt;<a class="code" href="classQgsVectorLayer.html#a02e164842da83a62157f05518a47eea6">wkbType</a>() != <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a4d5a4986629f537e7494bbb96892b807">QgsWkbTypes::NoGeometry</a> &amp;&amp; addWktGeometry;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="keywordtype">int</span> gmlVersion = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#abb96b3ba9f9f7cb36d82b65cdea01ff4">infoFormatVersion</a>();</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        QString <a class="code" href="qgswfsgetfeature_8cpp.html#a91798216200b925186e1bf0e7fcb201b">typeName</a> = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a98ab15ea8c19ce681651e29a0024aa3e">layerNickname</a>( *layer );</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        QDomElement elem = createFeatureGML(</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                             &amp;feature, layer, infoDocument, outputCrs, mapSettings, typeName, withGeom, gmlVersion</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;#ifdef HAVE_SERVER_PYTHON_PLUGINS</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                             , &amp;attributes</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;#endif</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                           );</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        QDomElement featureMemberElem = infoDocument.createElement( QStringLiteral( <span class="stringliteral">&quot;gml:featureMember&quot;</span> )<span class="comment">/*wfs:FeatureMember*/</span> );</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        featureMemberElem.appendChild( elem );</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        layerElement.appendChild( featureMemberElem );</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      }</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        QDomElement featureElement = infoDocument.createElement( QStringLiteral( <span class="stringliteral">&quot;Feature&quot;</span> ) );</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        featureElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;id&quot;</span> ), <a class="code" href="qgsfeatureid_8h.html#a6870a72b2bd3966b1e3327a1758cfa03">FID_TO_STRING</a>( feature.<a class="code" href="classQgsFeature.html#a64e6b9dd1e5a66c960f985f5d885d7f6">id</a>() ) );</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        layerElement.appendChild( featureElement );</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <span class="comment">//read all attribute values from the feature</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        featureAttributes = feature.<a class="code" href="classQgsFeature.html#a0c49a035fc3aa0ca232450394f689029">attributes</a>();</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; featureAttributes.count(); ++i )</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        {</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;          <span class="comment">//skip attribute if it is explicitly excluded from WMS publication</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;          <span class="keywordflow">if</span> ( excludedAttributes.contains( fields.at( i ).name() ) )</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;          {</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;          }</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="preprocessor">#ifdef HAVE_SERVER_PYTHON_PLUGINS</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;          <span class="comment">//skip attribute if it is excluded by access control</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;          <span class="keywordflow">if</span> ( !attributes.contains( fields.at( i ).name() ) )</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;          {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;          }</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;          <span class="comment">//replace attribute name if there is an attribute alias?</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;          QString attributeName = layer-&gt;<a class="code" href="classQgsVectorLayer.html#a02c75181a6898b349c39d94f5ce9600d">attributeDisplayName</a>( i );</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;          QDomElement attributeElement = infoDocument.createElement( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;          attributeElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ), attributeName );</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;          <span class="keyword">const</span> <a class="code" href="classQgsEditorWidgetSetup.html">QgsEditorWidgetSetup</a> setup = layer-&gt;<a class="code" href="classQgsVectorLayer.html#a9c47cf78b8c863a19fbf62ac37489793">editorWidgetSetup</a>( i );</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;          attributeElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ),</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                                         <a class="code" href="classQgsExpression.html#a5d51cbf8b96a2b4d2ce115171e5522fd">QgsExpression::replaceExpressionText</a>(</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                                           replaceValueMapAndRelation(</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                                             layer, i,</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                                             featureAttributes[i] ),</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                                           &amp;renderContext.<a class="code" href="classQgsRenderContext.html#a42707c8a463905e7c64af78c921077ff">expressionContext</a>() )</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                                       );</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;          featureElement.appendChild( attributeElement );</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="comment">//add maptip attribute based on html/expression (in case there is no maptip attribute)</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        QString mapTip = layer-&gt;<a class="code" href="classQgsVectorLayer.html#a36a064daae9df4c5e23f825f2fce0456">mapTipTemplate</a>();</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordflow">if</span> ( !mapTip.isEmpty() &amp;&amp; mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a5887702048ca791a912ee47776bd7f26">withMapTip</a>() )</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;          QDomElement maptipElem = infoDocument.createElement( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;          maptipElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;maptip&quot;</span> ) );</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;          maptipElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ),  <a class="code" href="classQgsExpression.html#a5d51cbf8b96a2b4d2ce115171e5522fd">QgsExpression::replaceExpressionText</a>( mapTip, &amp;renderContext.<a class="code" href="classQgsRenderContext.html#a42707c8a463905e7c64af78c921077ff">expressionContext</a>() ) );</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;          featureElement.appendChild( maptipElem );</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        }</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <span class="comment">//append feature bounding box to feature info xml</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsVectorLayer.html#a02e164842da83a62157f05518a47eea6">wkbType</a>() != <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a4d5a4986629f537e7494bbb96892b807">QgsWkbTypes::NoGeometry</a> &amp;&amp; hasGeometry )</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        {</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;          QDomElement bBoxElem = infoDocument.createElement( QStringLiteral( <span class="stringliteral">&quot;BoundingBox&quot;</span> ) );</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;          bBoxElem.setAttribute( version == QLatin1String( <span class="stringliteral">&quot;1.1.1&quot;</span> ) ? <span class="stringliteral">&quot;SRS&quot;</span> : <span class="stringliteral">&quot;CRS&quot;</span>, outputCrs.<a class="code" href="classQgsCoordinateReferenceSystem.html#ab2dee1805d8e3b62448e4d106753b595">authid</a>() );</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;          bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;minx&quot;</span> ), <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( box.<a class="code" href="classQgsRectangle.html#a3186f5474a5fa3ced21e8204d339c301">xMinimum</a>(), mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() ) );</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;          bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;maxx&quot;</span> ), <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( box.<a class="code" href="classQgsRectangle.html#a7fe11d0cd4fb7146dca5516c3eb03347">xMaximum</a>(), mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() ) );</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;          bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;miny&quot;</span> ), <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( box.<a class="code" href="classQgsRectangle.html#a601966d81267b649960ec2d409208350">yMinimum</a>(), mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() ) );</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;          bBoxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;maxy&quot;</span> ), <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( box.<a class="code" href="classQgsRectangle.html#a87a5cf3ee2fe6494c04a9e88876cc54e">yMaximum</a>(), mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() ) );</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;          featureElement.appendChild( bBoxElem );</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        <span class="comment">//also append the wkt geometry as an attribute</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsVectorLayer.html#a02e164842da83a62157f05518a47eea6">wkbType</a>() != <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a4d5a4986629f537e7494bbb96892b807">QgsWkbTypes::NoGeometry</a> &amp;&amp; addWktGeometry &amp;&amp; hasGeometry )</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        {</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;          <a class="code" href="classQgsGeometry.html">QgsGeometry</a> geom = feature.<a class="code" href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">geometry</a>();</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;          <span class="keywordflow">if</span> ( !geom.<a class="code" href="classQgsGeometry.html#afec44447afcd6be7f87cde707bce1152">isNull</a>() )</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;          {</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsMapLayer.html#a3619f5329809ff09bf0cc88b05dd6168">crs</a>() != <a class="code" href="qgswfsgetfeature_8cpp.html#a64f06b5c5ff2705cb7507ad5817560c0">outputCrs</a> )</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            {</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;              <a class="code" href="classQgsCoordinateTransform.html">QgsCoordinateTransform</a> transform = mapSettings.<a class="code" href="classQgsMapSettings.html#a34fe24129dea8620ecf623a60ad7d343">layerTransform</a>( layer );</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;              <span class="keywordflow">if</span> ( transform.<a class="code" href="classQgsCoordinateTransform.html#aa3b31ab89bfcac52eb7d850680de686a">isValid</a>() )</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                geom.<a class="code" href="classQgsGeometry.html#ac69d7afedd56552c9bad65afa6d1618f">transform</a>( transform );</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            }</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            <span class="keywordflow">if</span> ( segmentizeWktGeometry )</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            {</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;              <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> *abstractGeom = geom.<a class="code" href="classQgsGeometry.html#a6d80b6a9b799d6be0a3dd1d4f932db1b">constGet</a>();</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;              <span class="keywordflow">if</span> ( abstractGeom )</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;              {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="classQgsWkbTypes.html#a4378d2578dfa3bf8242cbaa1e84fea9d">QgsWkbTypes::isCurvedType</a>( abstractGeom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a8b8706728c90bc5c0e9c3ea3925b4453">wkbType</a>() ) )</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                {</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                  <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> *segmentizedGeom = abstractGeom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a2074dabaf33c1ba3a4407aff45b75a59">segmentize</a>();</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                  geom.<a class="code" href="classQgsGeometry.html#aa9309455d08598378f06fa758e64cd3e">set</a>( segmentizedGeom );</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                }</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;              }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;            }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            QDomElement geometryElement = infoDocument.createElement( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            geometryElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;geometry&quot;</span> ) );</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            geometryElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ), geom.<a class="code" href="classQgsGeometry.html#af049bb336e5fc77145be4b4eab9bdbba">asWkt</a>( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() ) );</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            geometryElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;type&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;derived&quot;</span> ) );</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            featureElement.appendChild( geometryElement );</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;          }</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        }</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      }</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">if</span> ( r2 )</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    {</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      r2-&gt;stopRender( renderContext );</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    }</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  }</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="keywordtype">bool</span> QgsRenderer::featureInfoFromRasterLayer( <a class="code" href="classQgsRasterLayer.html">QgsRasterLayer</a> *layer,</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings,</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> *infoPoint,</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      QDomDocument &amp;infoDocument,</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      QDomElement &amp;layerElement,</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keyword">const</span> QString &amp;version )<span class="keyword"> const</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    Q_UNUSED( version )</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">if</span> ( !infoPoint || !layer || !layer-&gt;<a class="code" href="classQgsRasterLayer.html#aa94300f244b4585b7545287c97c21cad">dataProvider</a>() )</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    }</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( QStringLiteral( <span class="stringliteral">&quot;infoPoint: %1 %2&quot;</span> ).arg( infoPoint-&gt;<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() ).arg( infoPoint-&gt;<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() ) );</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">if</span> ( !( layer-&gt;<a class="code" href="classQgsRasterLayer.html#aa94300f244b4585b7545287c97c21cad">dataProvider</a>()-&gt;<a class="code" href="classQgsRasterInterface.html#adb432fe846c0ca47321636f606128b99">capabilities</a>() &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a3289d821c3ce98cc0152d083c040ab2e">QgsRasterDataProvider::IdentifyValue</a> ) )</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    {</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <a class="code" href="classQgsRasterIdentifyResult.html">QgsRasterIdentifyResult</a> identifyResult;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="comment">// use context extent, width height (comes with request) to use WCS cache</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="comment">// We can only use context if raster is not reprojected, otherwise it is difficult</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="comment">// to guess correct source resolution</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsRasterLayer.html#aa94300f244b4585b7545287c97c21cad">dataProvider</a>()-&gt;<a class="code" href="classQgsDataProvider.html#a390a2d77b871763209396167d5558d18">crs</a>() != mapSettings.<a class="code" href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">destinationCrs</a>() )</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      identifyResult = layer-&gt;<a class="code" href="classQgsRasterLayer.html#aa94300f244b4585b7545287c97c21cad">dataProvider</a>()-&gt;<a class="code" href="classQgsRasterDataProvider.html#a5b033a4ab93593c8378af8005ed52ccd">identify</a>( *infoPoint, <a class="code" href="classQgsRaster.html#a17a81534803b9b5ee1e5cd91aab628c6abddd4a3ccc84c95df83e7bfdd8dbf9fe">QgsRaster::IdentifyFormatValue</a> );</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    {</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      identifyResult = layer-&gt;<a class="code" href="classQgsRasterLayer.html#aa94300f244b4585b7545287c97c21cad">dataProvider</a>()-&gt;<a class="code" href="classQgsRasterDataProvider.html#a5b033a4ab93593c8378af8005ed52ccd">identify</a>( *infoPoint, <a class="code" href="classQgsRaster.html#a17a81534803b9b5ee1e5cd91aab628c6abddd4a3ccc84c95df83e7bfdd8dbf9fe">QgsRaster::IdentifyFormatValue</a>, mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>(), mapSettings.<a class="code" href="classQgsMapSettings.html#a73da4f11859995fe92a7e28d2a64530c">outputSize</a>().width(), mapSettings.<a class="code" href="classQgsMapSettings.html#a73da4f11859995fe92a7e28d2a64530c">outputSize</a>().height() );</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">if</span> ( !identifyResult.<a class="code" href="classQgsRasterIdentifyResult.html#a5d9daec616f3440b0a47f651fd9fde02">isValid</a>() )</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    QMap&lt;int, QVariant&gt; attributes = identifyResult.<a class="code" href="classQgsRasterIdentifyResult.html#a879fda07adfa01bd8bd647d6fb73c8b6">results</a>();</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">if</span> ( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a47ce6590bbe09a858ff279ef6b990ce3">infoFormat</a>() == QgsWmsParameters::Format::GML )</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <a class="code" href="classQgsFeature.html">QgsFeature</a> feature;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <a class="code" href="classQgsFields.html">QgsFields</a> fields;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      feature.<a class="code" href="classQgsFeature.html#a4d705310b40a69d0b4aefe9515229455">initAttributes</a>( attributes.count() );</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <span class="keywordtype">int</span> index = 0;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="keywordflow">for</span> ( <span class="keyword">auto</span> it = attributes.constBegin(); it != attributes.constEnd(); ++it )</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      {</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        fields.<a class="code" href="classQgsFields.html#a3b0f9a92ff8cdbcdea3935f2d81ea5a0">append</a>( <a class="code" href="classQgsField.html">QgsField</a>( layer-&gt;<a class="code" href="classQgsRasterLayer.html#aa760dd6ec4dcb758d0f8c8084aa716d0">bandName</a>( it.key() ), QVariant::Double ) );</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        feature.<a class="code" href="classQgsFeature.html#a0075d1f9c830d62c8fda6b843c307dd8">setAttribute</a>( index++, QString::number( it.value().toDouble() ) );</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      }</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      feature.<a class="code" href="classQgsFeature.html#a96232e13ae05c90e553e400f24b4c5b2">setFields</a>( fields );</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <a class="code" href="classQgsCoordinateReferenceSystem.html">QgsCoordinateReferenceSystem</a> layerCrs = layer-&gt;<a class="code" href="classQgsMapLayer.html#a3619f5329809ff09bf0cc88b05dd6168">crs</a>();</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      <span class="keywordtype">int</span> gmlVersion = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#abb96b3ba9f9f7cb36d82b65cdea01ff4">infoFormatVersion</a>();</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      QString <a class="code" href="qgswfsgetfeature_8cpp.html#a91798216200b925186e1bf0e7fcb201b">typeName</a> = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a98ab15ea8c19ce681651e29a0024aa3e">layerNickname</a>( *layer );</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      QDomElement elem = createFeatureGML(</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                           &amp;feature, <span class="keyword">nullptr</span>, infoDocument, layerCrs, mapSettings, typeName, <span class="keyword">false</span>, gmlVersion, <span class="keyword">nullptr</span> );</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      layerElement.appendChild( elem );</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    }</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    {</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="keywordflow">for</span> ( <span class="keyword">auto</span> it = attributes.constBegin(); it != attributes.constEnd(); ++it )</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      {</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        QDomElement attributeElement = infoDocument.createElement( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        attributeElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ), layer-&gt;<a class="code" href="classQgsRasterLayer.html#aa760dd6ec4dcb758d0f8c8084aa716d0">bandName</a>( it.key() ) );</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        attributeElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ), QString::number( it.value().toDouble() ) );</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        layerElement.appendChild( attributeElement );</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;      }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    }</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  }</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="keywordtype">bool</span> QgsRenderer::testFilterStringSafety( <span class="keyword">const</span> QString &amp;filter )<span class="keyword"> const</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="comment">//; too dangerous for sql injections</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">if</span> ( filter.contains( QLatin1String( <span class="stringliteral">&quot;;&quot;</span> ) ) )</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    }</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    QStringList tokens = filter.split( <span class="charliteral">&#39; &#39;</span>, QString::SkipEmptyParts );</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    groupStringList( tokens, QStringLiteral( <span class="stringliteral">&quot;&#39;&quot;</span> ) );</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    groupStringList( tokens, QStringLiteral( <span class="stringliteral">&quot;\&quot;&quot;</span> ) );</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> tokenIt = tokens.constBegin() ; tokenIt != tokens.constEnd(); ++tokenIt )</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    {</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      <span class="comment">//whitelist of allowed characters and keywords</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <span class="keywordflow">if</span> ( tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;,&quot;</span> ) ) == 0</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;(&quot;</span> ) ) == 0</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;)&quot;</span> ) ) == 0</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;=&quot;</span> ) ) == 0</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;!=&quot;</span> ) ) == 0</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;&lt;&quot;</span> ) ) == 0</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;&lt;=&quot;</span> ) ) == 0</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;&gt;&quot;</span> ) ) == 0</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;&gt;=&quot;</span> ) ) == 0</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;%&quot;</span> ) ) == 0</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;AND&quot;</span> ), Qt::CaseInsensitive ) == 0</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;OR&quot;</span> ), Qt::CaseInsensitive ) == 0</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;IN&quot;</span> ), Qt::CaseInsensitive ) == 0</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;LIKE&quot;</span> ), Qt::CaseInsensitive ) == 0</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;ILIKE&quot;</span> ), Qt::CaseInsensitive ) == 0</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;DMETAPHONE&quot;</span> ), Qt::CaseInsensitive ) == 0</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;           || tokenIt-&gt;compare( QLatin1String( <span class="stringliteral">&quot;SOUNDEX&quot;</span> ), Qt::CaseInsensitive ) == 0 )</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      {</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      }</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <span class="comment">//numbers are OK</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="keywordtype">bool</span> isNumeric;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      tokenIt-&gt;toDouble( &amp;isNumeric );</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="keywordflow">if</span> ( isNumeric )</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      {</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      }</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      <span class="comment">//numeric strings need to be quoted once either with single or with double quotes</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="comment">//empty strings are OK</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="keywordflow">if</span> ( *tokenIt == QLatin1String( <span class="stringliteral">&quot;&#39;&#39;&quot;</span> ) )</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      {</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      }</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="comment">//single quote</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      <span class="keywordflow">if</span> ( tokenIt-&gt;size() &gt; 2</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;           &amp;&amp; ( *tokenIt )[0] == QChar( <span class="charliteral">&#39;\&#39;&#39;</span> )</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;           &amp;&amp; ( *tokenIt )[tokenIt-&gt;size() - 1] == QChar( <span class="charliteral">&#39;\&#39;&#39;</span> )</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;           &amp;&amp; ( *tokenIt )[1] != QChar( <span class="charliteral">&#39;\&#39;&#39;</span> )</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;           &amp;&amp; ( *tokenIt )[tokenIt-&gt;size() - 2] != QChar( <span class="charliteral">&#39;\&#39;&#39;</span> ) )</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      {</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      }</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      <span class="comment">//double quote</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="keywordflow">if</span> ( tokenIt-&gt;size() &gt; 2</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;           &amp;&amp; ( *tokenIt )[0] == QChar( <span class="charliteral">&#39;&quot;&#39;</span> )</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;           &amp;&amp; ( *tokenIt )[tokenIt-&gt;size() - 1] == QChar( <span class="charliteral">&#39;&quot;&#39;</span> )</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;           &amp;&amp; ( *tokenIt )[1] != QChar( <span class="charliteral">&#39;&quot;&#39;</span> )</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;           &amp;&amp; ( *tokenIt )[tokenIt-&gt;size() - 2] != QChar( <span class="charliteral">&#39;&quot;&#39;</span> ) )</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      {</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  }</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::groupStringList( QStringList &amp;list, <span class="keyword">const</span> QString &amp;groupString )</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  {</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="comment">//group contents within single quotes together</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keywordtype">bool</span> groupActive = <span class="keyword">false</span>;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordtype">int</span> startGroup = -1;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    QString concatString;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; list.size(); ++i )</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    {</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      QString &amp;str = list[i];</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <span class="keywordflow">if</span> ( str.startsWith( groupString ) )</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        startGroup = i;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        groupActive = <span class="keyword">true</span>;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        concatString.clear();</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keywordflow">if</span> ( groupActive )</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        <span class="keywordflow">if</span> ( i != startGroup )</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        {</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;          concatString.append( <span class="stringliteral">&quot; &quot;</span> );</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        }</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        concatString.append( str );</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      }</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">if</span> ( str.endsWith( groupString ) )</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      {</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordtype">int</span> endGroup = i;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        groupActive = <span class="keyword">false</span>;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="keywordflow">if</span> ( startGroup != -1 )</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        {</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;          list[startGroup] = concatString;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;          <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = startGroup + 1; j &lt;= endGroup; ++j )</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;          {</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            list.removeAt( startGroup + 1 );</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            --i;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;          }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        }</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        concatString.clear();</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        startGroup = -1;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      }</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  }</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::convertFeatureInfoToSia2045( QDomDocument &amp;doc )<span class="keyword"> const</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    QDomDocument SIAInfoDoc;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    QDomElement infoDocElement = doc.documentElement();</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    QDomElement SIAInfoDocElement = SIAInfoDoc.importNode( infoDocElement, <span class="keyword">false</span> ).toElement();</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    SIAInfoDoc.appendChild( SIAInfoDocElement );</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    QString currentAttributeName;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    QString currentAttributeValue;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    QDomElement currentAttributeElem;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    QString currentLayerName;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    QDomElement currentLayerElem;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    QDomNodeList layerNodeList = infoDocElement.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Layer&quot;</span> ) );</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; layerNodeList.size(); ++i )</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    {</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      currentLayerElem = layerNodeList.at( i ).toElement();</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      currentLayerName = currentLayerElem.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) );</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      QDomElement currentFeatureElem;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      QDomNodeList featureList = currentLayerElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Feature&quot;</span> ) );</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <span class="keywordflow">if</span> ( featureList.isEmpty() )</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="comment">//raster?</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        QDomNodeList attributeList = currentLayerElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        QDomElement rasterLayerElem;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <span class="keywordflow">if</span> ( !attributeList.isEmpty() )</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        {</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;          rasterLayerElem = SIAInfoDoc.createElement( currentLayerName );</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        }</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; attributeList.size(); ++j )</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        {</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;          currentAttributeElem = attributeList.at( j ).toElement();</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;          currentAttributeName = currentAttributeElem.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) );</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;          currentAttributeValue = currentAttributeElem.attribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) );</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;          QDomElement outAttributeElem = SIAInfoDoc.createElement( currentAttributeName );</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;          QDomText outAttributeText = SIAInfoDoc.createTextNode( currentAttributeValue );</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;          outAttributeElem.appendChild( outAttributeText );</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;          rasterLayerElem.appendChild( outAttributeElem );</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        }</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        <span class="keywordflow">if</span> ( !attributeList.isEmpty() )</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        {</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;          SIAInfoDocElement.appendChild( rasterLayerElem );</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      }</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <span class="keywordflow">else</span> <span class="comment">//vector</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      {</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="comment">//property attributes</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        QSet&lt;QString&gt; layerPropertyAttributes;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        QString currentLayerId = currentLayerElem.attribute( QStringLiteral( <span class="stringliteral">&quot;id&quot;</span> ) );</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="keywordflow">if</span> ( !currentLayerId.isEmpty() )</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;          <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *currentLayer = mProject-&gt;<a class="code" href="classQgsProject.html#a322fce15a4dd7505398ef9d24295f0c1">mapLayer</a>( currentLayerId );</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;          <span class="keywordflow">if</span> ( currentLayer )</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;          {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            QString WMSPropertyAttributesString = currentLayer-&gt;<a class="code" href="classQgsMapLayer.html#a1e78dec0541aaeff25feac9a2445ae29">customProperty</a>( QStringLiteral( <span class="stringliteral">&quot;WMSPropertyAttributes&quot;</span> ) ).toString();</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            <span class="keywordflow">if</span> ( !WMSPropertyAttributesString.isEmpty() )</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            {</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;              QStringList propertyList = WMSPropertyAttributesString.split( QStringLiteral( <span class="stringliteral">&quot;//&quot;</span> ) );</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;              <span class="keywordflow">for</span> ( <span class="keyword">auto</span> propertyIt = propertyList.constBegin() ; propertyIt != propertyList.constEnd(); ++propertyIt )</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;              {</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                layerPropertyAttributes.insert( *propertyIt );</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;              }</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            }</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;          }</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        }</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        QDomElement propertyRefChild; <span class="comment">//child to insert the next property after (or</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; featureList.size(); ++j )</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        {</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;          QDomElement SIAFeatureElem = SIAInfoDoc.createElement( currentLayerName );</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;          currentFeatureElem = featureList.at( j ).toElement();</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;          QDomNodeList attributeList = currentFeatureElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;          <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k = 0; k &lt; attributeList.size(); ++k )</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;          {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            currentAttributeElem = attributeList.at( k ).toElement();</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            currentAttributeName = currentAttributeElem.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) );</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            currentAttributeValue = currentAttributeElem.attribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) );</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            <span class="keywordflow">if</span> ( layerPropertyAttributes.contains( currentAttributeName ) )</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;              QDomElement propertyElem = SIAInfoDoc.createElement( QStringLiteral( <span class="stringliteral">&quot;property&quot;</span> ) );</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;              QDomElement identifierElem = SIAInfoDoc.createElement( QStringLiteral( <span class="stringliteral">&quot;identifier&quot;</span> ) );</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;              QDomText identifierText = SIAInfoDoc.createTextNode( currentAttributeName );</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;              identifierElem.appendChild( identifierText );</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;              QDomElement valueElem = SIAInfoDoc.createElement( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) );</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;              QDomText valueText = SIAInfoDoc.createTextNode( currentAttributeValue );</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;              valueElem.appendChild( valueText );</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;              propertyElem.appendChild( identifierElem );</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;              propertyElem.appendChild( valueElem );</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;              <span class="keywordflow">if</span> ( propertyRefChild.isNull() )</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;              {</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                SIAFeatureElem.insertBefore( propertyElem, QDomNode() );</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                propertyRefChild = propertyElem;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;              }</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;              {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                SIAFeatureElem.insertAfter( propertyElem, propertyRefChild );</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;              }</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            }</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            {</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;              QDomElement SIAAttributeElem = SIAInfoDoc.createElement( currentAttributeName );</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;              QDomText SIAAttributeText = SIAInfoDoc.createTextNode( currentAttributeValue );</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;              SIAAttributeElem.appendChild( SIAAttributeText );</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;              SIAFeatureElem.appendChild( SIAAttributeElem );</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;            }</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;          }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;          SIAInfoDocElement.appendChild( SIAFeatureElem );</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;        }</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    doc = SIAInfoDoc;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  QByteArray QgsRenderer::convertFeatureInfoToHtml( <span class="keyword">const</span> QDomDocument &amp;doc )<span class="keyword"> const</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    QString featureInfoString;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="comment">//the HTML head</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    featureInfoString.append( <span class="stringliteral">&quot;&lt;HEAD&gt;\n&quot;</span> );</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    featureInfoString.append( <span class="stringliteral">&quot;&lt;TITLE&gt; GetFeatureInfo results &lt;/TITLE&gt;\n&quot;</span> );</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    featureInfoString.append( <span class="stringliteral">&quot;&lt;META http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html;charset=utf-8\&quot;/&gt;\n&quot;</span> );</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    featureInfoString.append( <span class="stringliteral">&quot;&lt;/HEAD&gt;\n&quot;</span> );</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="comment">//start the html body</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    featureInfoString.append( <span class="stringliteral">&quot;&lt;BODY&gt;\n&quot;</span> );</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    QDomNodeList layerList = doc.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Layer&quot;</span> ) );</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="comment">//layer loop</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; layerList.size(); ++i )</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    {</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      QDomElement layerElem = layerList.at( i ).toElement();</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      featureInfoString.append( <span class="stringliteral">&quot;&lt;TABLE border=1 width=100%&gt;\n&quot;</span> );</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      featureInfoString.append( <span class="stringliteral">&quot;&lt;TR&gt;&lt;TH width=25%&gt;Layer&lt;/TH&gt;&lt;TD&gt;&quot;</span> + layerElem.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) ) + <span class="stringliteral">&quot;&lt;/TD&gt;&lt;/TR&gt;\n&quot;</span> );</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      featureInfoString.append( <span class="stringliteral">&quot;&lt;/BR&gt;&quot;</span> );</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="comment">//feature loop (for vector layers)</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      QDomNodeList featureNodeList = layerElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Feature&quot;</span> ) );</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      QDomElement currentFeatureElement;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      <span class="keywordflow">if</span> ( !featureNodeList.isEmpty() ) <span class="comment">//vector layer</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      {</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; featureNodeList.size(); ++j )</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;          QDomElement featureElement = featureNodeList.at( j ).toElement();</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;          featureInfoString.append( <span class="stringliteral">&quot;&lt;TABLE border=1 width=100%&gt;\n&quot;</span> );</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;          featureInfoString.append( <span class="stringliteral">&quot;&lt;TR&gt;&lt;TH&gt;Feature&lt;/TH&gt;&lt;TD&gt;&quot;</span> + featureElement.attribute( QStringLiteral( <span class="stringliteral">&quot;id&quot;</span> ) ) +</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                                    <span class="stringliteral">&quot;&lt;/TD&gt;&lt;/TR&gt;\n&quot;</span> );</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;          <span class="comment">//attribute loop</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;          QDomNodeList attributeNodeList = featureElement.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;          <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k = 0; k &lt; attributeNodeList.size(); ++k )</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;          {</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            QDomElement attributeElement = attributeNodeList.at( k ).toElement();</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            featureInfoString.append( <span class="stringliteral">&quot;&lt;TR&gt;&lt;TH&gt;&quot;</span> + attributeElement.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) ) +</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                                      <span class="stringliteral">&quot;&lt;/TH&gt;&lt;TD&gt;&quot;</span> + attributeElement.attribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) ) + <span class="stringliteral">&quot;&lt;/TD&gt;&lt;/TR&gt;\n&quot;</span> );</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;          }</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;          featureInfoString.append( <span class="stringliteral">&quot;&lt;/TABLE&gt;\n&lt;/BR&gt;\n&quot;</span> );</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      }</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      <span class="keywordflow">else</span> <span class="comment">//raster layer</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        QDomNodeList attributeNodeList = layerElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; attributeNodeList.size(); ++j )</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        {</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;          QDomElement attributeElement = attributeNodeList.at( j ).toElement();</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;          featureInfoString.append( <span class="stringliteral">&quot;&lt;TR&gt;&lt;TH&gt;&quot;</span> + attributeElement.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) ) +</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                                    <span class="stringliteral">&quot;&lt;/TH&gt;&lt;TD&gt;&quot;</span> + attributeElement.attribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) ) + <span class="stringliteral">&quot;&lt;/TD&gt;&lt;/TR&gt;\n&quot;</span> );</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        }</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      }</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      featureInfoString.append( <span class="stringliteral">&quot;&lt;/TABLE&gt;\n&lt;BR&gt;&lt;/BR&gt;\n&quot;</span> );</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    }</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="comment">//start the html body</span></div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    featureInfoString.append( <span class="stringliteral">&quot;&lt;/BODY&gt;\n&quot;</span> );</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="keywordflow">return</span> featureInfoString.toUtf8();</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  }</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  QByteArray QgsRenderer::convertFeatureInfoToText( <span class="keyword">const</span> QDomDocument &amp;doc )<span class="keyword"> const</span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    QString featureInfoString;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="comment">//the Text head</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    featureInfoString.append( <span class="stringliteral">&quot;GetFeatureInfo results\n&quot;</span> );</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    featureInfoString.append( <span class="stringliteral">&quot;\n&quot;</span> );</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    QDomNodeList layerList = doc.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Layer&quot;</span> ) );</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="comment">//layer loop</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; layerList.size(); ++i )</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    {</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      QDomElement layerElem = layerList.at( i ).toElement();</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      featureInfoString.append( <span class="stringliteral">&quot;Layer &#39;&quot;</span> + layerElem.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) ) + <span class="stringliteral">&quot;&#39;\n&quot;</span> );</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <span class="comment">//feature loop (for vector layers)</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      QDomNodeList featureNodeList = layerElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Feature&quot;</span> ) );</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      QDomElement currentFeatureElement;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      <span class="keywordflow">if</span> ( !featureNodeList.isEmpty() ) <span class="comment">//vector layer</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;      {</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; featureNodeList.size(); ++j )</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;          QDomElement featureElement = featureNodeList.at( j ).toElement();</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;          featureInfoString.append( <span class="stringliteral">&quot;Feature &quot;</span> + featureElement.attribute( QStringLiteral( <span class="stringliteral">&quot;id&quot;</span> ) ) + <span class="stringliteral">&quot;\n&quot;</span> );</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;          <span class="comment">//attribute loop</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;          QDomNodeList attributeNodeList = featureElement.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;          <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k = 0; k &lt; attributeNodeList.size(); ++k )</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;          {</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            QDomElement attributeElement = attributeNodeList.at( k ).toElement();</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            featureInfoString.append( attributeElement.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) ) + <span class="stringliteral">&quot; = &#39;&quot;</span> +</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                                      attributeElement.attribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) ) + <span class="stringliteral">&quot;&#39;\n&quot;</span> );</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;          }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        }</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      }</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      <span class="keywordflow">else</span> <span class="comment">//raster layer</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      {</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;        QDomNodeList attributeNodeList = layerElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; attributeNodeList.size(); ++j )</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        {</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;          QDomElement attributeElement = attributeNodeList.at( j ).toElement();</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;          featureInfoString.append( attributeElement.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) ) + <span class="stringliteral">&quot; = &#39;&quot;</span> +</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                                    attributeElement.attribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) ) + <span class="stringliteral">&quot;&#39;\n&quot;</span> );</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        }</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      }</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      featureInfoString.append( <span class="stringliteral">&quot;\n&quot;</span> );</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keywordflow">return</span> featureInfoString.toUtf8();</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  }</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  QByteArray QgsRenderer::convertFeatureInfoToJson( <span class="keyword">const</span> QList&lt;QgsMapLayer *&gt; &amp;layers, <span class="keyword">const</span> QDomDocument &amp;doc )<span class="keyword"> const</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <a class="code" href="qgsjsonutils_8h.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a> <a class="code" href="qgsjsonutils_8h.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    {</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      { <span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;FeatureCollection&quot;</span> },</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      { <span class="stringliteral">&quot;features&quot;</span>, json::array() },</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    };</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> withGeometry = ( <a class="code" href="namespaceQgsServerProjectUtils.html#a8ed7f6237fc3256071bdb1741fc725a2">QgsServerProjectUtils::wmsFeatureInfoAddWktGeometry</a>( *mProject ) &amp;&amp; mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a34092f249d4c75487468d655afff4ea9">withGeometry</a>() );</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <span class="keyword">const</span> QDomNodeList layerList = doc.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Layer&quot;</span> ) );</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; layerList.size(); ++i )</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    {</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <span class="keyword">const</span> QDomElement layerElem = layerList.at( i ).toElement();</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <span class="keyword">const</span> QString layerName = layerElem.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) );</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <span class="keywordflow">for</span> ( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *l : layers )</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      {</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        <span class="keywordflow">if</span> ( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a98ab15ea8c19ce681651e29a0024aa3e">layerNickname</a>( *l ).compare( layerName ) == 0 )</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        {</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;          layer = l;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        }</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      }</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="keywordflow">if</span> ( !layer )</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsMapLayer.html#a39b7d2e4d53085906458e42e8bb0a359">type</a>() == <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca3e3c0ae67b31a76ef20bfaf18438f95f">QgsMapLayerType::VectorLayer</a> )</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;      {</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vl = qobject_cast&lt;<a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *&gt;( layer );</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <span class="comment">// search features to export</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="qgsfeature_8h.html#ae0f922f3469155bc17dfc96729f1c1cc">QgsFeatureList</a> features;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <a class="code" href="qgsfield_8h.html#a00f27df80eac3fb534923fefaed2181d">QgsAttributeList</a> attributes;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="keyword">const</span> QDomNodeList featuresNode = layerElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Feature&quot;</span> ) );</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="keywordflow">if</span> ( featuresNode.isEmpty() )</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; featuresNode.size(); ++j )</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        {</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;          <span class="keyword">const</span> QDomElement featureNode = featuresNode.at( j ).toElement();</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;          <span class="keyword">const</span> <a class="code" href="qgsfeatureid_8h.html#a857d022277fb1026d921b0ec9bdb7ce5">QgsFeatureId</a> fid = featureNode.attribute( QStringLiteral( <span class="stringliteral">&quot;id&quot;</span> ) ).toLongLong();</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;          <a class="code" href="classQgsFeature.html">QgsFeature</a> feature = <a class="code" href="classQgsFeature.html">QgsFeature</a>( vl-&gt;<a class="code" href="classQgsVectorLayer.html#aa4886de4c49b0656cc0f47025fe2631b">getFeature</a>( fid ) );</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;          QString wkt;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;          <span class="keywordflow">if</span> ( withGeometry )</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;          {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            <span class="keyword">const</span> QDomNodeList attrs = featureNode.elementsByTagName( <span class="stringliteral">&quot;Attribute&quot;</span> );</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k = 0; k &lt; attrs.count(); k++ )</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;              <span class="keyword">const</span> QDomElement elm = attrs.at( k ).toElement();</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;              <span class="keywordflow">if</span> ( elm.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) ).compare( <span class="stringliteral">&quot;geometry&quot;</span> ) == 0 )</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;              {</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                wkt = elm.<a class="code" href="classQgsFeature.html#ae5957f3cf812dc7c077ee7f906745ac7">attribute</a>( <span class="stringliteral">&quot;value&quot;</span> );</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;              }</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;            }</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            <span class="keywordflow">if</span> ( ! wkt.isEmpty() )</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;            {</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;              <span class="comment">// CRS in WMS parameters may be different from the layer</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;              feature.<a class="code" href="classQgsFeature.html#ae6c4c7a5c40d420c95285ce072c24307">setGeometry</a>( <a class="code" href="classQgsGeometry.html#a736b669b7ae22b13848562970707d180">QgsGeometry::fromWkt</a>( wkt ) );</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            }</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;          }</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;          features &lt;&lt; feature;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;          <span class="comment">// search attributes to export (one time only)</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;          <span class="keywordflow">if</span> ( !attributes.isEmpty() )</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;          <span class="keyword">const</span> QDomNodeList attributesNode = featureNode.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;          <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k = 0; k &lt; attributesNode.size(); ++k )</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;          {</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            <span class="keyword">const</span> QDomElement attributeElement = attributesNode.at( k ).toElement();</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            <span class="keyword">const</span> QString fieldName = attributeElement.<a class="code" href="classQgsFeature.html#ae5957f3cf812dc7c077ee7f906745ac7">attribute</a>( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) );</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            attributes &lt;&lt; feature.fieldNameIndex( fieldName );</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;          }</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        }</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        <span class="comment">// export</span></div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        <a class="code" href="classQgsJsonExporter.html">QgsJsonExporter</a> exporter( vl );</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        exporter.<a class="code" href="classQgsJsonExporter.html#a7670c88a5fd2fe5ca5f23a146f97ffca">setAttributeDisplayName</a>( <span class="keyword">true</span> );</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        exporter.<a class="code" href="classQgsJsonExporter.html#a24a02c2bb3c6f8fbf6d8fd8f6db71b7f">setAttributes</a>( attributes );</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        exporter.<a class="code" href="classQgsJsonExporter.html#a0afbd3703c66e72a83182b6a95a4f9d6">setIncludeGeometry</a>( withGeometry );</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;feature : qgis::as_const( features ) )</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        {</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;          <span class="keyword">const</span> QString <span class="keywordtype">id</span> = QStringLiteral( <span class="stringliteral">&quot;%1.%2&quot;</span> ).arg( layer-&gt;<a class="code" href="classQgsMapLayer.html#a0594da1ee92c9fc9e15659fc39522f97">name</a>(), <a class="code" href="classQgsJsonUtils.html#a46e34523127b644a7c462080f4e83d6c">QgsJsonUtils::encodeValue</a>( feature.id() ) );</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;          <a class="code" href="qgsjsonutils_8h.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a>[<span class="stringliteral">&quot;features&quot;</span>].push_back( exporter.<a class="code" href="classQgsJsonExporter.html#a18fcac91beca93f1ac82dd23b167f013">exportFeatureToJsonObject</a>( feature, QVariantMap(), <span class="keywordtype">id</span> ) );</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        }</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      }</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <span class="keywordflow">else</span> <span class="comment">// raster layer</span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      {</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <span class="keyword">auto</span> properties = json::object();</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        <span class="keyword">const</span> QDomNodeList attributesNode = layerElem.elementsByTagName( QStringLiteral( <span class="stringliteral">&quot;Attribute&quot;</span> ) );</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; attributesNode.size(); ++j )</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;          <span class="keyword">const</span> QDomElement attrElmt = attributesNode.at( j ).toElement();</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;          <span class="keyword">const</span> QString name = attrElmt.attribute( QStringLiteral( <span class="stringliteral">&quot;name&quot;</span> ) );</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;          <span class="keyword">const</span> QString value = attrElmt.attribute( QStringLiteral( <span class="stringliteral">&quot;value&quot;</span> ) );</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;          properties[name.toStdString()] = value.toStdString();</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        }</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <a class="code" href="qgsjsonutils_8h.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a>[<span class="stringliteral">&quot;features&quot;</span>].push_back(</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        {</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;          {<span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;Feature&quot;</span> },</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;          {<span class="stringliteral">&quot;id&quot;</span>, layer-&gt;<a class="code" href="classQgsMapLayer.html#a0594da1ee92c9fc9e15659fc39522f97">name</a>().toStdString() },</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;          {<span class="stringliteral">&quot;properties&quot;</span>, properties }</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        } );</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      }</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="preprocessor">#ifdef QGISDEBUG</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <span class="comment">// This is only useful to generate human readable reference files for tests</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">return</span> QByteArray::fromStdString( <a class="code" href="qgsjsonutils_8h.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a>.dump( 2 ) );</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <span class="keywordflow">return</span> QByteArray::fromStdString( <a class="code" href="qgsjsonutils_8h.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a>.dump() );</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  }</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  QDomElement QgsRenderer::createFeatureGML(</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <a class="code" href="classQgsFeature.html">QgsFeature</a> *feat,</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *layer,</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    QDomDocument &amp;doc,</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <a class="code" href="classQgsCoordinateReferenceSystem.html">QgsCoordinateReferenceSystem</a> &amp;<a class="code" href="qgswfsgetfeature_8cpp.html#a7ad000982146f8b67e673cdc80a26bec">crs</a>,</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings,</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="keyword">const</span> QString &amp;<a class="code" href="qgswfsgetfeature_8cpp.html#a91798216200b925186e1bf0e7fcb201b">typeName</a>,</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="qgswfsgetfeature_8cpp.html#af4b23433112c7c162bd2bc1825c7847e">withGeom</a>,</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    <span class="keywordtype">int</span> version,</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    QStringList *attributes )<span class="keyword"> const</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="comment">//qgs:%TYPENAME%</span></div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    QDomElement typeNameElement = doc.createElement( <span class="stringliteral">&quot;qgs:&quot;</span> + typeName <span class="comment">/*qgs:%TYPENAME%*/</span> );</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    typeNameElement.setAttribute( QStringLiteral( <span class="stringliteral">&quot;fid&quot;</span> ), typeName + <span class="stringliteral">&quot;.&quot;</span> + QString::number( feat-&gt;<a class="code" href="classQgsFeature.html#a64e6b9dd1e5a66c960f985f5d885d7f6">id</a>() ) );</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <a class="code" href="classQgsCoordinateTransform.html">QgsCoordinateTransform</a> transform;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">if</span> ( layer &amp;&amp; layer-&gt;<a class="code" href="classQgsMapLayer.html#a3619f5329809ff09bf0cc88b05dd6168">crs</a>() != <a class="code" href="qgswfsgetfeature_8cpp.html#a7ad000982146f8b67e673cdc80a26bec">crs</a> )</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    {</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      transform = mapSettings.<a class="code" href="classQgsMapSettings.html#a34fe24129dea8620ecf623a60ad7d343">layerTransform</a>( layer );</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    }</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <a class="code" href="classQgsGeometry.html">QgsGeometry</a> geom = feat-&gt;<a class="code" href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">geometry</a>();</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <a class="code" href="classQgsExpressionContext.html">QgsExpressionContext</a> expressionContext;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    expressionContext &lt;&lt; <a class="code" href="classQgsExpressionContextUtils.html#afba36ac63b06dd2659710f4f3cd58936">QgsExpressionContextUtils::globalScope</a>()</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                      &lt;&lt; <a class="code" href="classQgsExpressionContextUtils.html#a9b0dc97b5f9e21fa11eb803a33dfa7d8">QgsExpressionContextUtils::projectScope</a>( mProject );</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keywordflow">if</span> ( layer )</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      expressionContext &lt;&lt; <a class="code" href="classQgsExpressionContextUtils.html#af1b61531d9512e4cdc8ca505ae07be89">QgsExpressionContextUtils::layerScope</a>( layer );</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    expressionContext.<a class="code" href="classQgsExpressionContext.html#a99a92e3956573acfc28f7199ba13948d">setFeature</a>( *feat );</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="comment">// always add bounding box info if feature contains geometry</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="keywordflow">if</span> ( !geom.<a class="code" href="classQgsGeometry.html#afec44447afcd6be7f87cde707bce1152">isNull</a>() &amp;&amp; geom.<a class="code" href="classQgsGeometry.html#a89a0aad67d4bab51852ab9308fd854f9">type</a>() != <a class="code" href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca18226cfb487dc768c4b74d00c1939ea0">QgsWkbTypes::UnknownGeometry</a> &amp;&amp; geom.<a class="code" href="classQgsGeometry.html#a89a0aad67d4bab51852ab9308fd854f9">type</a>() != <a class="code" href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca9255eddb0bbb4b5393dc3023a8afa748">QgsWkbTypes::NullGeometry</a> )</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    {</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      <a class="code" href="classQgsRectangle.html">QgsRectangle</a> box = feat-&gt;<a class="code" href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">geometry</a>().<a class="code" href="classQgsGeometry.html#adfc04c94b51cdeb55942b699fdd4d564">boundingBox</a>();</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;      <span class="keywordflow">if</span> ( transform.<a class="code" href="classQgsCoordinateTransform.html#aa3b31ab89bfcac52eb7d850680de686a">isValid</a>() )</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;      {</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        <span class="keywordflow">try</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        {</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;          <a class="code" href="classQgsRectangle.html">QgsRectangle</a> transformedBox = transform.<a class="code" href="classQgsCoordinateTransform.html#a8cc5d64f1438300f231ec9444edbbe67">transformBoundingBox</a>( box );</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;          box = transformedBox;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        }</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        <span class="keywordflow">catch</span> ( <a class="code" href="classQgsCsException.html">QgsCsException</a> &amp;e )</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        {</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;          <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( QStringLiteral( <span class="stringliteral">&quot;Transform error caught: %1&quot;</span> ).arg( e.<a class="code" href="classQgsException.html#aae00b1a7dfb1f6b6f9e399365715a2b4">what</a>() ) );</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        }</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      }</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      QDomElement bbElem = doc.createElement( QStringLiteral( <span class="stringliteral">&quot;gml:boundedBy&quot;</span> ) );</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      QDomElement boxElem;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="keywordflow">if</span> ( version &lt; 3 )</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        boxElem = <a class="code" href="classQgsOgcUtils.html#af15c7a61f72fc95c815f7fa4a86caa0b">QgsOgcUtils::rectangleToGMLBox</a>( &amp;box, doc, mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() );</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        boxElem = <a class="code" href="classQgsOgcUtils.html#ad31a34fd7e1013e2b6913fd6b5459c8d">QgsOgcUtils::rectangleToGMLEnvelope</a>( &amp;box, doc, mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() );</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      }</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      <span class="keywordflow">if</span> ( crs.<a class="code" href="classQgsCoordinateReferenceSystem.html#a077267450cec872305c6690de5b5b09c">isValid</a>() )</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        boxElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;srsName&quot;</span> ), crs.<a class="code" href="classQgsCoordinateReferenceSystem.html#ab2dee1805d8e3b62448e4d106753b595">authid</a>() );</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      }</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      bbElem.appendChild( boxElem );</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      typeNameElement.appendChild( bbElem );</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    }</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordflow">if</span> ( withGeom &amp;&amp; !geom.<a class="code" href="classQgsGeometry.html#afec44447afcd6be7f87cde707bce1152">isNull</a>() )</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    {</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;      <span class="comment">//add geometry column (as gml)</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="keywordflow">if</span> ( transform.<a class="code" href="classQgsCoordinateTransform.html#aa3b31ab89bfcac52eb7d850680de686a">isValid</a>() )</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        geom.<a class="code" href="classQgsGeometry.html#ac69d7afedd56552c9bad65afa6d1618f">transform</a>( transform );</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      }</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      QDomElement geomElem = doc.createElement( QStringLiteral( <span class="stringliteral">&quot;qgs:geometry&quot;</span> ) );</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      QDomElement gmlElem;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <span class="keywordflow">if</span> ( version &lt; 3 )</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      {</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        gmlElem = <a class="code" href="classQgsOgcUtils.html#aa921c6532cb08b1ad99d711ba0b9e677">QgsOgcUtils::geometryToGML</a>( geom, doc, mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() );</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      {</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        gmlElem = <a class="code" href="classQgsOgcUtils.html#aa921c6532cb08b1ad99d711ba0b9e677">QgsOgcUtils::geometryToGML</a>( geom, doc, QStringLiteral( <span class="stringliteral">&quot;GML3&quot;</span> ), mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">precision</a>() );</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      }</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <span class="keywordflow">if</span> ( !gmlElem.isNull() )</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      {</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        <span class="keywordflow">if</span> ( crs.<a class="code" href="classQgsCoordinateReferenceSystem.html#a077267450cec872305c6690de5b5b09c">isValid</a>() )</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        {</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;          gmlElem.setAttribute( QStringLiteral( <span class="stringliteral">&quot;srsName&quot;</span> ), crs.<a class="code" href="classQgsCoordinateReferenceSystem.html#ab2dee1805d8e3b62448e4d106753b595">authid</a>() );</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        }</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        geomElem.appendChild( gmlElem );</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        typeNameElement.appendChild( geomElem );</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    }</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="comment">//read all allowed attribute values from the feature</span></div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <a class="code" href="classQgsAttributes.html">QgsAttributes</a> featureAttributes = feat-&gt;<a class="code" href="classQgsFeature.html#a0c49a035fc3aa0ca232450394f689029">attributes</a>();</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <a class="code" href="classQgsFields.html">QgsFields</a> fields = feat-&gt;<a class="code" href="classQgsFeature.html#a331068f619fa9a4b85dee464a6b0f8dd">fields</a>();</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; fields.<a class="code" href="classQgsFields.html#a747fd764be826bc9696597b3b79d1fbe">count</a>(); ++i )</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    {</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;      QString attributeName = fields.<a class="code" href="classQgsFields.html#ad0fde19705fd2bf82a061ca13e5cf737">at</a>( i ).<a class="code" href="classQgsField.html#a229582bef81181459456085d7e5c7720">name</a>();</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <span class="comment">//skip attribute if it is explicitly excluded from WMS publication</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="keywordflow">if</span> ( layer &amp;&amp; layer-&gt;<a class="code" href="classQgsVectorLayer.html#af77acee1c9414724e0ed68b056ea7581">excludeAttributesWms</a>().contains( attributeName ) )</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      {</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      }</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <span class="comment">//skip attribute if it is excluded by access control</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <span class="keywordflow">if</span> ( attributes &amp;&amp; !attributes-&gt;contains( attributeName ) )</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      {</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      }</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      QDomElement fieldElem = doc.createElement( <span class="stringliteral">&quot;qgs:&quot;</span> + attributeName.replace( <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;_&#39;</span> ) );</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      QString fieldTextString = featureAttributes.at( i ).toString();</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <span class="keywordflow">if</span> ( layer )</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      {</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        fieldTextString = <a class="code" href="classQgsExpression.html#a5d51cbf8b96a2b4d2ce115171e5522fd">QgsExpression::replaceExpressionText</a>( replaceValueMapAndRelation( layer, i, fieldTextString ), &amp;expressionContext );</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      }</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      QDomText fieldText = doc.createTextNode( fieldTextString );</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      fieldElem.appendChild( fieldText );</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      typeNameElement.appendChild( fieldElem );</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    }</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="comment">//add maptip attribute based on html/expression (in case there is no maptip attribute)</span></div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">if</span> ( layer )</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    {</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      QString mapTip = layer-&gt;<a class="code" href="classQgsVectorLayer.html#a36a064daae9df4c5e23f825f2fce0456">mapTipTemplate</a>();</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      <span class="keywordflow">if</span> ( !mapTip.isEmpty() &amp;&amp; mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a5887702048ca791a912ee47776bd7f26">withMapTip</a>() )</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      {</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        QString fieldTextString = <a class="code" href="classQgsExpression.html#a5d51cbf8b96a2b4d2ce115171e5522fd">QgsExpression::replaceExpressionText</a>( mapTip, &amp;expressionContext );</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        QDomElement fieldElem = doc.createElement( QStringLiteral( <span class="stringliteral">&quot;qgs:maptip&quot;</span> ) );</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        QDomText maptipText = doc.createTextNode( fieldTextString );</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        fieldElem.appendChild( maptipText );</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        typeNameElement.appendChild( fieldElem );</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      }</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="keywordflow">return</span> typeNameElement;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  }</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  QString QgsRenderer::replaceValueMapAndRelation( <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vl, <span class="keywordtype">int</span> idx, <span class="keyword">const</span> QVariant &amp;attributeVal )</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  {</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsEditorWidgetSetup.html">QgsEditorWidgetSetup</a> setup = vl-&gt;<a class="code" href="classQgsVectorLayer.html#a9c47cf78b8c863a19fbf62ac37489793">editorWidgetSetup</a>( idx );</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <a class="code" href="classQgsFieldFormatter.html">QgsFieldFormatter</a> *fieldFormatter = <a class="code" href="classQgsApplication.html#ab610cd57510e03bb3c7a4abdd4525673">QgsApplication::fieldFormatterRegistry</a>()-&gt;<a class="code" href="classQgsFieldFormatterRegistry.html#afb0912d40c920756c58b5121ddccde09">fieldFormatter</a>( setup.<a class="code" href="classQgsEditorWidgetSetup.html#a2ee7059c72600fba45f255a377fc5359">type</a>() );</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    QString value( fieldFormatter-&gt;<a class="code" href="classQgsFieldFormatter.html#ac9dc40b958c0da8b443e0f48856061a2">representValue</a>( vl, idx, setup.<a class="code" href="classQgsEditorWidgetSetup.html#a41bea2baf17e264ed8405ff4fc61b7f1">config</a>(), QVariant(), attributeVal ) );</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="keywordflow">if</span> ( setup.<a class="code" href="classQgsEditorWidgetSetup.html#a41bea2baf17e264ed8405ff4fc61b7f1">config</a>().value( QStringLiteral( <span class="stringliteral">&quot;AllowMulti&quot;</span> ) ).toBool() &amp;&amp; value.startsWith( QLatin1String( <span class="stringliteral">&quot;{&quot;</span> ) ) &amp;&amp; value.endsWith( QLatin1String( <span class="stringliteral">&quot;}&quot;</span> ) ) )</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    {</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      value = value.mid( 1, value.size() - 2 );</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    }</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">return</span> value;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  }</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;  <a class="code" href="classQgsRectangle.html">QgsRectangle</a> QgsRenderer::featureInfoSearchRect( <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *ml, <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings, <span class="keyword">const</span> <a class="code" href="classQgsRenderContext.html">QgsRenderContext</a> &amp;rct, <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;infoPoint )<span class="keyword"> const</span></div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">if</span> ( !ml )</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    {</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a>();</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    }</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordtype">double</span> mapUnitTolerance = 0.0;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">if</span> ( ml-&gt;<a class="code" href="classQgsVectorLayer.html#a1abf8f48544b7ce41a7ff91832de00be">geometryType</a>() == <a class="code" href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca83e149905446b55bd3c4438a586d9abd">QgsWkbTypes::PolygonGeometry</a> )</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    {</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      <span class="keywordflow">if</span> ( ! mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a58c037558ae76bb5eb91628026cb7dd0">polygonTolerance</a>().isEmpty()</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;           &amp;&amp; mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a99eb38a3f60048c737ec755b2d3cf6d6">polygonToleranceAsInt</a>() &gt; 0 )</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      {</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        mapUnitTolerance = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a99eb38a3f60048c737ec755b2d3cf6d6">polygonToleranceAsInt</a>() * rct.<a class="code" href="classQgsRenderContext.html#a431d875fd7f8f8f82818cb8605b3c2f5">mapToPixel</a>().<a class="code" href="classQgsMapToPixel.html#a4ca6884ad7af7c01d1fe60dc01a0875e">mapUnitsPerPixel</a>();</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      }</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      {</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        mapUnitTolerance = mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>().<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / 400.0;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      }</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    }</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ml-&gt;<a class="code" href="classQgsVectorLayer.html#a1abf8f48544b7ce41a7ff91832de00be">geometryType</a>() == <a class="code" href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca832c909332693470bd25b59e273a04a5">QgsWkbTypes::LineGeometry</a> )</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    {</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <span class="keywordflow">if</span> ( ! mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a6b7b7f6a7310996e521c7674fad5e542">lineTolerance</a>().isEmpty()</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;           &amp;&amp; mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a6996d422e75accaa270273d7790d2ffa">lineToleranceAsInt</a>() &gt; 0 )</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      {</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        mapUnitTolerance = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a6996d422e75accaa270273d7790d2ffa">lineToleranceAsInt</a>() * rct.<a class="code" href="classQgsRenderContext.html#a431d875fd7f8f8f82818cb8605b3c2f5">mapToPixel</a>().<a class="code" href="classQgsMapToPixel.html#a4ca6884ad7af7c01d1fe60dc01a0875e">mapUnitsPerPixel</a>();</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      }</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      {</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        mapUnitTolerance = mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>().<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / 200.0;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      }</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    }</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordflow">else</span> <span class="comment">//points</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    {</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      <span class="keywordflow">if</span> ( ! mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a458915771c654267452de22ad54f1cf2">pointTolerance</a>().isEmpty()</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;           &amp;&amp; mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a555f77ce77aa4a16c48ef7a27fd26585">pointToleranceAsInt</a>() &gt; 0 )</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      {</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        mapUnitTolerance = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a555f77ce77aa4a16c48ef7a27fd26585">pointToleranceAsInt</a>() * rct.<a class="code" href="classQgsRenderContext.html#a431d875fd7f8f8f82818cb8605b3c2f5">mapToPixel</a>().<a class="code" href="classQgsMapToPixel.html#a4ca6884ad7af7c01d1fe60dc01a0875e">mapUnitsPerPixel</a>();</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      }</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;      {</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        mapUnitTolerance = mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>().<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / 100.0;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      }</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    }</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <a class="code" href="classQgsRectangle.html">QgsRectangle</a> mapRectangle( infoPoint.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() - mapUnitTolerance, infoPoint.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() - mapUnitTolerance,</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                               infoPoint.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() + mapUnitTolerance, infoPoint.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() + mapUnitTolerance );</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="keywordflow">return</span> ( mapSettings.<a class="code" href="classQgsMapSettings.html#aeab946f60b7a5644ccc62495a6717206">mapToLayerCoordinates</a>( ml, mapRectangle ) );</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  }</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  QList&lt;QgsMapLayer *&gt; QgsRenderer::highlightLayers( QList&lt;QgsWmsParametersHighlightLayer&gt; params )</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  {</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    QList&lt;QgsMapLayer *&gt; highlightLayers;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="comment">// try to create highlight layer for each geometry</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    QString crs = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ad05e4d241308c269bbcc113c90f8cdd0">crs</a>();</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="structQgsWms_1_1QgsWmsParametersHighlightLayer.html">QgsWmsParametersHighlightLayer</a> &amp;param : params )</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    {</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      <span class="comment">// create sld document from symbology</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      QDomDocument sldDoc;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      <span class="keywordflow">if</span> ( !sldDoc.setContent( param.mSld, <span class="keyword">true</span> ) )</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      {</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;      }</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;      <span class="comment">// create renderer from sld document</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      QString errorMsg;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      std::unique_ptr&lt;QgsFeatureRenderer&gt; renderer;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      QDomElement el = sldDoc.documentElement();</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      renderer.reset( <a class="code" href="classQgsFeatureRenderer.html#a86927ac5c7b347c9cf62e8fa9464e8af">QgsFeatureRenderer::loadSld</a>( el, param.mGeom.type(), errorMsg ) );</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <span class="keywordflow">if</span> ( !renderer )</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;      {</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( errorMsg, <span class="stringliteral">&quot;Server&quot;</span>, <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      }</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <span class="comment">// build url for vector layer</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keyword">const</span> QString typeName = <a class="code" href="classQgsWkbTypes.html#a821be8716d32d6dd6a7b75bd4080b73c">QgsWkbTypes::displayString</a>( param.mGeom.wkbType() );</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      QString url = typeName + <span class="stringliteral">&quot;?crs=&quot;</span> + <a class="code" href="qgswfsgetfeature_8cpp.html#a7ad000982146f8b67e673cdc80a26bec">crs</a>;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      <span class="keywordflow">if</span> ( ! param.mLabel.isEmpty() )</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      {</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        url += <span class="stringliteral">&quot;&amp;field=label:string&quot;</span>;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      }</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      <span class="comment">// create vector layer</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      <span class="keyword">const</span> <a class="code" href="structQgsVectorLayer_1_1LayerOptions.html">QgsVectorLayer::LayerOptions</a> options { <a class="code" href="classQgsProject.html#a26df6e8516ac9625901108875681803b">QgsProject::instance</a>()-&gt;<a class="code" href="classQgsProject.html#a83c873d44d3229ff6c52886d309e1280">transformContext</a>() };</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      std::unique_ptr&lt;QgsVectorLayer&gt; layer = qgis::make_unique&lt;QgsVectorLayer&gt;( url, param.mName, QLatin1Literal( <span class="stringliteral">&quot;memory&quot;</span> ), options );</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      <span class="keywordflow">if</span> ( !layer-&gt;isValid() )</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      {</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      }</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      <span class="comment">// create feature with label if necessary</span></div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      <a class="code" href="classQgsFeature.html">QgsFeature</a> fet( layer-&gt;fields() );</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      <span class="keywordflow">if</span> ( ! param.mLabel.isEmpty() )</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        fet.<a class="code" href="classQgsFeature.html#a0075d1f9c830d62c8fda6b843c307dd8">setAttribute</a>( 0, param.mLabel );</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <span class="comment">// init labeling engine</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        <a class="code" href="classQgsPalLayerSettings.html">QgsPalLayerSettings</a> palSettings;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        palSettings.<a class="code" href="classQgsPalLayerSettings.html#ac57b3ecf3c052e33c947ed8713e4b48c">fieldName</a> = <span class="stringliteral">&quot;label&quot;</span>; <span class="comment">// defined in url</span></div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        palSettings.<a class="code" href="classQgsPalLayerSettings.html#a67fba9e271265dddf0e9bb3a28c9e7de">priority</a> = 10; <span class="comment">// always drawn</span></div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        palSettings.<a class="code" href="classQgsPalLayerSettings.html#a1a82e718bbc6eb59324c2af3d0f7f1d7">displayAll</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        <a class="code" href="classQgsPalLayerSettings.html#a5d449d8e9cb89e5d453c6e33fe1c66cc">QgsPalLayerSettings::Placement</a> placement = <a class="code" href="classQgsPalLayerSettings.html#a5d449d8e9cb89e5d453c6e33fe1c66cca1f573db8056342bdd9ac382bcf14adf9">QgsPalLayerSettings::AroundPoint</a>;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        <span class="keywordflow">switch</span> ( param.mGeom.type() )</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        {</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca2407075c945a7eadf4289316a8d0a79b">QgsWkbTypes::PointGeometry</a>:</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;          {</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;            placement = <a class="code" href="classQgsPalLayerSettings.html#a5d449d8e9cb89e5d453c6e33fe1c66cca1f573db8056342bdd9ac382bcf14adf9">QgsPalLayerSettings::AroundPoint</a>;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            palSettings.<a class="code" href="classQgsPalLayerSettings.html#ab0c2d6ce60da3873726f544c7d9ea47a">dist</a> = 2; <span class="comment">// in mm</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;            palSettings.<a class="code" href="classQgsPalLayerSettings.html#abeb4d081fd4eb7debb30dfcdd5be8d58">placementFlags</a> = 0;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;          }</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca83e149905446b55bd3c4438a586d9abd">QgsWkbTypes::PolygonGeometry</a>:</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;          {</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;            <a class="code" href="classQgsGeometry.html">QgsGeometry</a> point = param.mGeom.<a class="code" href="classQgsGeometry.html#a3975e1ac16832371854703dfe699d5f2">pointOnSurface</a>();</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            <a class="code" href="classQgsPointXY.html">QgsPointXY</a> pt = point.<a class="code" href="classQgsGeometry.html#a77bddd38cd041a4e2988fa8e014c060f">asPoint</a>();</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;            placement = <a class="code" href="classQgsPalLayerSettings.html#a5d449d8e9cb89e5d453c6e33fe1c66cca1f573db8056342bdd9ac382bcf14adf9">QgsPalLayerSettings::AroundPoint</a>;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;            <a class="code" href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9a">QgsPalLayerSettings::Property</a> pX = <a class="code" href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9aa28e1e8cdf1179aace5f18d58e87053d3">QgsPalLayerSettings::PositionX</a>;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;            QVariant x( pt.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() );</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;            palSettings.<a class="code" href="classQgsPalLayerSettings.html#a2f17ebe5d3a46f807074e0c5954bd66c">dataDefinedProperties</a>().<a class="code" href="classQgsPropertyCollection.html#a6197a3265529fc2093594933fcbfbd4e">setProperty</a>( pX, x );</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            <a class="code" href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9a">QgsPalLayerSettings::Property</a> pY = <a class="code" href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9aa1259502d5cc3dd3c06d4f93a74cb8d93">QgsPalLayerSettings::PositionY</a>;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            QVariant y( pt.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() );</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            palSettings.<a class="code" href="classQgsPalLayerSettings.html#a2f17ebe5d3a46f807074e0c5954bd66c">dataDefinedProperties</a>().<a class="code" href="classQgsPropertyCollection.html#a6197a3265529fc2093594933fcbfbd4e">setProperty</a>( pY, y );</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;            <a class="code" href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9a">QgsPalLayerSettings::Property</a> pHali = <a class="code" href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9aa3ad1ca33ed0d27133f4dea2c6b8a47cd">QgsPalLayerSettings::Hali</a>;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;            QVariant hali( <span class="stringliteral">&quot;Center&quot;</span> );</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;            palSettings.<a class="code" href="classQgsPalLayerSettings.html#a2f17ebe5d3a46f807074e0c5954bd66c">dataDefinedProperties</a>().<a class="code" href="classQgsPropertyCollection.html#a6197a3265529fc2093594933fcbfbd4e">setProperty</a>( pHali, hali );</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            <a class="code" href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9a">QgsPalLayerSettings::Property</a> pVali = <a class="code" href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9aafc00c9b621833b0c92ac3cd03611a842">QgsPalLayerSettings::Vali</a>;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;            QVariant vali( <span class="stringliteral">&quot;Half&quot;</span> );</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;            palSettings.<a class="code" href="classQgsPalLayerSettings.html#a2f17ebe5d3a46f807074e0c5954bd66c">dataDefinedProperties</a>().<a class="code" href="classQgsPropertyCollection.html#a6197a3265529fc2093594933fcbfbd4e">setProperty</a>( pVali, vali );</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;          }</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;          <span class="keywordflow">default</span>:</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;          {</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;            placement = <a class="code" href="classQgsPalLayerSettings.html#a5d449d8e9cb89e5d453c6e33fe1c66cca4f3d6d88545bf3e32ed488e4a082f471">QgsPalLayerSettings::Line</a>;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;            palSettings.<a class="code" href="classQgsPalLayerSettings.html#ab0c2d6ce60da3873726f544c7d9ea47a">dist</a> = 2;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;            palSettings.<a class="code" href="classQgsPalLayerSettings.html#abeb4d081fd4eb7debb30dfcdd5be8d58">placementFlags</a> = 10;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;          }</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;        }</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        palSettings.<a class="code" href="classQgsPalLayerSettings.html#ade0e96125f5d912953b168a736d2e09b">placement</a> = placement;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <a class="code" href="classQgsTextFormat.html">QgsTextFormat</a> textFormat;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        <a class="code" href="classQgsTextBufferSettings.html">QgsTextBufferSettings</a> bufferSettings;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        <span class="keywordflow">if</span> ( param.mColor.isValid() )</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        {</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;          textFormat.<a class="code" href="classQgsTextFormat.html#a083355ffc5f4f46c98d2ac8aebeecf6a">setColor</a>( param.mColor );</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        }</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keywordflow">if</span> ( param.mSize &gt; 0 )</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        {</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;          textFormat.<a class="code" href="classQgsTextFormat.html#a0975c3e674363a46934ee4c70020b4c9">setSize</a>( param.mSize );</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        }</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <span class="comment">// no weight property in PAL settings or QgsTextFormat</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <span class="comment">/* if ( param.fontWeight &gt; 0 )</span></div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<span class="comment">        {</span></div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="comment">        } */</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        <span class="keywordflow">if</span> ( ! param.mFont.isEmpty() )</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        {</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;          textFormat.<a class="code" href="classQgsTextFormat.html#a29eb0b1d8d6f4fc6279880411aad0d07">setFont</a>( param.mFont );</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        }</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <span class="keywordflow">if</span> ( param.mBufferColor.isValid() )</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        {</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;          bufferSettings.<a class="code" href="classQgsTextBufferSettings.html#a4338a2349425772539faf6c4c691c435">setColor</a>( param.mBufferColor );</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        }</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        <span class="keywordflow">if</span> ( param.mBufferSize &gt; 0 )</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        {</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;          bufferSettings.<a class="code" href="classQgsTextBufferSettings.html#a9c8dc7f774440867c55a3ad1d0bb07af">setEnabled</a>( <span class="keyword">true</span> );</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;          bufferSettings.<a class="code" href="classQgsTextBufferSettings.html#af3af07065bd0b5cbf72fd1f5ba2d8e10">setSize</a>( param.mBufferSize );</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        }</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        textFormat.<a class="code" href="classQgsTextFormat.html#aa3f1e5f1c056b5e77ab72d8f13b7bbbe">setBuffer</a>( bufferSettings );</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        palSettings.<a class="code" href="classQgsPalLayerSettings.html#a0e316117df7c7a29d635d9970f8711f1">setFormat</a>( textFormat );</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        <a class="code" href="classQgsVectorLayerSimpleLabeling.html">QgsVectorLayerSimpleLabeling</a> *simpleLabeling = <span class="keyword">new</span> <a class="code" href="classQgsVectorLayerSimpleLabeling.html">QgsVectorLayerSimpleLabeling</a>( palSettings );</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        layer-&gt;setLabeling( simpleLabeling );</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        layer-&gt;setLabelsEnabled( <span class="keyword">true</span> );</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;      }</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      fet.setGeometry( param.mGeom );</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      <span class="comment">// add feature to layer and set the SLD renderer</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      layer-&gt;dataProvider()-&gt;addFeatures( <a class="code" href="qgsfeature_8h.html#ae0f922f3469155bc17dfc96729f1c1cc">QgsFeatureList</a>() &lt;&lt; fet );</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      layer-&gt;setRenderer( renderer.release() );</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="comment">// keep the vector as an highlight layer</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      <span class="keywordflow">if</span> ( layer-&gt;isValid() )</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      {</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;        highlightLayers.append( layer.release() );</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      }</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    }</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    mTemporaryLayers.append( highlightLayers );</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="keywordflow">return</span> highlightLayers;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  }</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  QList&lt;QgsMapLayer *&gt; QgsRenderer::externalLayers( <span class="keyword">const</span> QList&lt;QgsWmsParametersExternalLayer&gt; &amp;params )</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  {</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    QList&lt;QgsMapLayer *&gt; layers;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="structQgsWms_1_1QgsWmsParametersExternalLayer.html">QgsWmsParametersExternalLayer</a> &amp;param : params )</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    {</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;      std::unique_ptr&lt;QgsMapLayer&gt; layer = qgis::make_unique&lt; QgsRasterLayer &gt;( param.mUri, param.mName, QStringLiteral( <span class="stringliteral">&quot;wms&quot;</span> ) );</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      <span class="keywordflow">if</span> ( layer-&gt;isValid() )</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;      {</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        <span class="comment">// to delete later</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        mTemporaryLayers.append( layer.release() );</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        layers &lt;&lt; mTemporaryLayers.last();</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      }</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    }</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="keywordflow">return</span> layers;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  }</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::removeTemporaryLayers()</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  {</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    qDeleteAll( mTemporaryLayers );</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    mTemporaryLayers.clear();</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  }</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  QPainter *QgsRenderer::layersRendering( <span class="keyword">const</span> <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings, QImage &amp;image )<span class="keyword"> const</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    QPainter *painter = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <a class="code" href="classQgsFeatureFilterProviderGroup.html">QgsFeatureFilterProviderGroup</a> filters;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    filters.<a class="code" href="classQgsFeatureFilterProviderGroup.html#a531bf1fee97af50f28eddba21ac69242">addProvider</a>( &amp;mFeatureFilter );</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;<span class="preprocessor">#ifdef HAVE_SERVER_PYTHON_PLUGINS</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    mContext.accessControl()-&gt;resolveFilterFeatures( mapSettings.<a class="code" href="classQgsMapSettings.html#ac44aac25ea00d124a7ba36dc270d0d8c">layers</a>() );</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    filters.<a class="code" href="classQgsFeatureFilterProviderGroup.html#a531bf1fee97af50f28eddba21ac69242">addProvider</a>( mContext.accessControl() );</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <a class="code" href="classQgsWms_1_1QgsMapRendererJobProxy.html">QgsMapRendererJobProxy</a> renderJob( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a617ec25cc1bf4827379639b6d05ca47b">settings</a>().<a class="code" href="classQgsServerSettings.html#ac0ba0c7407515786658dbe032c6bd874">parallelRendering</a>(), mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a617ec25cc1bf4827379639b6d05ca47b">settings</a>().<a class="code" href="classQgsServerSettings.html#a2ff8dfd45f6789560553fb9400ce496f">maxThreads</a>(), &amp;filters );</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    renderJob.<a class="code" href="classQgsWms_1_1QgsMapRendererJobProxy.html#abadfc1e0485db62492bff04b9991f335">render</a>( mapSettings, &amp;image );</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    painter = renderJob.takePainter();</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <span class="keywordflow">if</span> ( !renderJob.errors().isEmpty() )</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    {</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      QString layerWMSName;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      QString firstErrorLayerId = renderJob.errors().at( 0 ).layerID;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *errorLayer = mProject-&gt;<a class="code" href="classQgsProject.html#a322fce15a4dd7505398ef9d24295f0c1">mapLayer</a>( firstErrorLayerId );</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      <span class="keywordflow">if</span> ( errorLayer )</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      {</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        layerWMSName = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a98ab15ea8c19ce681651e29a0024aa3e">layerNickname</a>( *errorLayer );</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      }</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsException.html">QgsException</a>( QStringLiteral( <span class="stringliteral">&quot;Map rendering error in layer &#39;%1&#39;&quot;</span> ).arg( layerWMSName ) );</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    }</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="keywordflow">return</span> painter;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  }</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::setLayerOpacity( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer, <span class="keywordtype">int</span> opacity )<span class="keyword"> const</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <span class="keywordflow">if</span> ( opacity &gt;= 0 &amp;&amp; opacity &lt;= 255 )</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    {</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      <span class="keywordflow">switch</span> ( layer-&gt;<a class="code" href="classQgsMapLayer.html#a39b7d2e4d53085906458e42e8bb0a359">type</a>() )</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      {</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca3e3c0ae67b31a76ef20bfaf18438f95f">QgsMapLayerType::VectorLayer</a>:</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        {</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;          <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vl = qobject_cast&lt;<a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *&gt;( layer );</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;          vl-&gt;<a class="code" href="classQgsVectorLayer.html#a5fb4b2d29452da3c59db401fe43aa9fe">setOpacity</a>( opacity / 255. );</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;        }</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca4bd4dfc6131d926f44355ecd5a6da56e">QgsMapLayerType::RasterLayer</a>:</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        {</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;          <a class="code" href="classQgsRasterLayer.html">QgsRasterLayer</a> *rl = qobject_cast&lt;<a class="code" href="classQgsRasterLayer.html">QgsRasterLayer</a> *&gt;( layer );</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;          <a class="code" href="classQgsRasterRenderer.html">QgsRasterRenderer</a> *rasterRenderer = rl-&gt;<a class="code" href="classQgsRasterLayer.html#aef705cbeb9b8e9e1756d93146323abb5">renderer</a>();</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;          rasterRenderer-&gt;<a class="code" href="classQgsRasterRenderer.html#aa4645c9fcb14b2af1544af370aca23da">setOpacity</a>( opacity / 255. );</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        }</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca2701fe7242d9c931cd8d13fc48cdbc9b">QgsMapLayerType::MeshLayer</a>:</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30cac2649d14d3e8745d4cd8a76053d7d18d">QgsMapLayerType::PluginLayer</a>:</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      }</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  }</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::setLayerFilter( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer, <span class="keyword">const</span> QList&lt;QgsWmsParametersFilter&gt; &amp;filters )</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  {</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsMapLayer.html#a39b7d2e4d53085906458e42e8bb0a359">type</a>() == <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca3e3c0ae67b31a76ef20bfaf18438f95f">QgsMapLayerType::VectorLayer</a> )</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    {</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;      <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *filteredLayer = qobject_cast&lt;<a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *&gt;( layer );</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;      <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="structQgsWms_1_1QgsWmsParametersFilter.html">QgsWmsParametersFilter</a> &amp;filter : filters )</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        <span class="keywordflow">if</span> ( filter.mType == <a class="code" href="structQgsWms_1_1QgsWmsParametersFilter.html#a4fc4fc44d110d192517823f2415de2f3a7eb8e9d83eac5473443bc2d7c54abdc1">QgsWmsParametersFilter::OGC_FE</a> )</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        {</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;          <span class="comment">// OGC filter</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;          QDomDocument filterXml;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;          QString errorMsg;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;          <span class="keywordflow">if</span> ( !filterXml.setContent( filter.mFilter, <span class="keyword">true</span>, &amp;errorMsg ) )</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;          {</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsServiceException::QGIS_InvalidParameterValue</a>,</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                                          QStringLiteral( <span class="stringliteral">&quot;Filter string rejected. Error message: %1. The XML string was: %2&quot;</span> ).arg( errorMsg, filter.mFilter ) );</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;          }</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;          QDomElement filterElem = filterXml.firstChildElement();</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;          std::unique_ptr&lt;QgsExpression&gt; expression( <a class="code" href="classQgsOgcUtils.html#adc3636e57cc6a8958167de25c7570a84">QgsOgcUtils::expressionFromOgcFilter</a>( filterElem, filter.mVersion, filteredLayer ) );</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;          <span class="keywordflow">if</span> ( expression )</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;          {</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;            mFeatureFilter.<a class="code" href="classQgsFeatureFilter.html#a0a3f52d76c20af72c719eef4592b68e8">setFilter</a>( filteredLayer, *expression );</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;          }</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        }</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( filter.mType == <a class="code" href="structQgsWms_1_1QgsWmsParametersFilter.html#a4fc4fc44d110d192517823f2415de2f3a7dbff13c646a1ba4cc2b5c106c548e2c">QgsWmsParametersFilter::SQL</a> )</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        {</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;          <span class="comment">// QGIS (SQL) filter</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;          <span class="keywordflow">if</span> ( !testFilterStringSafety( filter.mFilter ) )</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;          {</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsSecurityException.html">QgsSecurityException</a>( QStringLiteral( <span class="stringliteral">&quot;The filter string %1&quot;</span></div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                                        <span class="stringliteral">&quot; has been rejected because of security reasons.&quot;</span></div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;                                        <span class="stringliteral">&quot; Note: Text strings have to be enclosed in single or double quotes.&quot;</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                                        <span class="stringliteral">&quot; A space between each word / special character is mandatory.&quot;</span></div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                                        <span class="stringliteral">&quot; Allowed Keywords and special characters are &quot;</span></div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                                        <span class="stringliteral">&quot; AND,OR,IN,&lt;,&gt;=,&gt;,&gt;=,!=,&#39;,&#39;,(,),DMETAPHONE,SOUNDEX.&quot;</span></div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                                        <span class="stringliteral">&quot; Not allowed are semicolons in the filter expression.&quot;</span> ).arg(</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;                                          filter.mFilter ) );</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;          }</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;          QString newSubsetString = filter.mFilter;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;          <span class="keywordflow">if</span> ( !filteredLayer-&gt;<a class="code" href="classQgsVectorLayer.html#a82752c93ea29f4789e2973ef2090b9e7">subsetString</a>().isEmpty() )</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;          {</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;            newSubsetString.prepend( <span class="stringliteral">&quot;) AND (&quot;</span> );</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;            newSubsetString.append( <span class="stringliteral">&quot;)&quot;</span> );</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;            newSubsetString.prepend( filteredLayer-&gt;<a class="code" href="classQgsVectorLayer.html#a82752c93ea29f4789e2973ef2090b9e7">subsetString</a>() );</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;            newSubsetString.prepend( <span class="stringliteral">&quot;(&quot;</span> );</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;          }</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;          filteredLayer-&gt;<a class="code" href="classQgsVectorLayer.html#aba0ee124dcf2d037f3af53d99866c01c">setSubsetString</a>( newSubsetString );</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        }</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      }</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    }</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  }</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::setLayerSelection( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer, <span class="keyword">const</span> QStringList &amp;fids )<span class="keyword"> const</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classQgsMapLayer.html#a39b7d2e4d53085906458e42e8bb0a359">type</a>() == <a class="code" href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca3e3c0ae67b31a76ef20bfaf18438f95f">QgsMapLayerType::VectorLayer</a> )</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    {</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <a class="code" href="qgsfeatureid_8h.html#a443917048a2ef75006fdeba30f1549f3">QgsFeatureIds</a> selectedIds;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      <span class="keywordflow">for</span> ( <span class="keyword">const</span> QString &amp;<span class="keywordtype">id</span> : fids )</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;      {</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;        selectedIds.insert( <a class="code" href="qgsfeatureid_8h.html#a7489d935d2115a6dc09867363f1c3e63">STRING_TO_FID</a>( <span class="keywordtype">id</span> ) );</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      }</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;      <a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *vl = qobject_cast&lt;<a class="code" href="classQgsVectorLayer.html">QgsVectorLayer</a> *&gt;( layer );</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      vl-&gt;<a class="code" href="classQgsVectorLayer.html#a450a58921855552f4a6710c995d5d87b">selectByIds</a>( selectedIds );</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    }</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  }</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::setLayerAccessControlFilter( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer )<span class="keyword"> const</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="preprocessor">#ifdef HAVE_SERVER_PYTHON_PLUGINS</span></div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <a class="code" href="classQgsOWSServerFilterRestorer.html#a47f3afe817b6aee575aa5f3643d43f24">QgsOWSServerFilterRestorer::applyAccessControlLayerFilters</a>( mContext.accessControl(), layer );</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    Q_UNUSED( layer )</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;  }</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::updateExtent( <span class="keyword">const</span> <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer, <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> &amp;mapSettings )<span class="keyword"> const</span></div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <a class="code" href="classQgsRectangle.html">QgsRectangle</a> layerExtent = mapSettings.<a class="code" href="classQgsMapSettings.html#a0739b0932966de5fa6060e4a437d3a0e">layerToMapCoordinates</a>( layer, layer-&gt;<a class="code" href="classQgsMapLayer.html#a1a6526a54c172262b5882f8a08571aee">extent</a>() );</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <a class="code" href="classQgsRectangle.html">QgsRectangle</a> mapExtent = mapSettings.<a class="code" href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">extent</a>();</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <span class="keywordflow">if</span> ( !layerExtent.<a class="code" href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">isEmpty</a>() )</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    {</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;      mapExtent.<a class="code" href="classQgsRectangle.html#ab8a73ddc15774addc822550266f886c9">combineExtentWith</a>( layerExtent );</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      mapSettings.<a class="code" href="classQgsMapSettings.html#a800e955c228a5850ae968fe1461a2951">setExtent</a>( mapExtent );</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    }</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  }</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::annotationsRendering( QPainter *painter )<span class="keyword"> const</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsAnnotationManager.html">QgsAnnotationManager</a> *annotationManager = mProject-&gt;<a class="code" href="classQgsProject.html#a7488b66a620c80d2891e686d8229770d">annotationManager</a>();</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <span class="keyword">const</span> QList&lt; QgsAnnotation * &gt; annotations = annotationManager-&gt;<a class="code" href="classQgsAnnotationManager.html#a079587ad547db7362e1cdb6059fb0a02">annotations</a>();</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <a class="code" href="classQgsRenderContext.html">QgsRenderContext</a> renderContext = <a class="code" href="classQgsRenderContext.html#acb1f00872cd78053f355cfe39208af32">QgsRenderContext::fromQPainter</a>( painter );</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordflow">for</span> ( <a class="code" href="classQgsAnnotation.html">QgsAnnotation</a> *annotation : annotations )</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    {</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;      <span class="keywordflow">if</span> ( !annotation || !annotation-&gt;isVisible() )</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;      annotation-&gt;render( renderContext );</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    }</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  }</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  QImage *QgsRenderer::scaleImage( <span class="keyword">const</span> QImage *image )<span class="keyword"> const</span></div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <span class="comment">// Test if width / height ratio of image is the same as the ratio of</span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <span class="comment">// WIDTH / HEIGHT parameters. If not, the image has to be scaled (required</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <span class="comment">// by WMS spec)</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    QImage *scaledImage = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> width = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#aa0902198a531b5054c14a251fbd35110">widthAsInt</a>();</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> height = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a7caef4b2aacf215b0f1103c9bc8eb111">heightAsInt</a>();</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="keywordflow">if</span> ( width != image-&gt;width() || height != image-&gt;height() )</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    {</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      scaledImage = <span class="keyword">new</span> QImage( image-&gt;scaled( width, height, Qt::IgnoreAspectRatio, Qt::SmoothTransformation ) );</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    }</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="keywordflow">return</span> scaledImage;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  }</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::handlePrintErrors( <span class="keyword">const</span> <a class="code" href="classQgsLayout.html">QgsLayout</a> *layout )<span class="keyword"> const</span></div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="keywordflow">if</span> ( !layout )</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    {</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    }</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    QList&lt; QgsLayoutItemMap * &gt; mapList;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    layout-&gt;<a class="code" href="classQgsLayout.html#a10bd120a3eee0b381c1dab11a6fade78">layoutItems</a>( mapList );</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    QList&lt; QgsLayoutItemMap * &gt;::const_iterator mapIt = mapList.constBegin();</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    <span class="keywordflow">for</span> ( ; mapIt != mapList.constEnd(); ++mapIt )</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <span class="keywordflow">if</span> ( !( *mapIt )-&gt;renderingErrors().isEmpty() )</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;      {</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        <span class="keyword">const</span> <a class="code" href="structQgsMapRendererJob_1_1Error.html">QgsMapRendererJob::Error</a> e = ( *mapIt )-&gt;renderingErrors().at( 0 );</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classQgsException.html">QgsException</a>( QStringLiteral( <span class="stringliteral">&quot;Rendering error : &#39;%1&#39; in layer %2&quot;</span> ).arg( e.<a class="code" href="structQgsMapRendererJob_1_1Error.html#a47caa6a3d819aa5b522dac03ab5405fd">message</a> ).arg( e.<a class="code" href="structQgsMapRendererJob_1_1Error.html#a932adf008a5ee09ecae0ec145586012e">layerID</a> ) );</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;      }</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    }</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  }</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::configureLayers( QList&lt;QgsMapLayer *&gt; &amp;layers, <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> *settings )</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;  {</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> useSld = !mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a748c95fa29403490a47576caf90c0497">parameters</a>().<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#aa0cfa9d5c9c110815698a054b8ff2472">sldBody</a>().isEmpty();</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> layer : layers )</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    {</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;      <span class="keyword">const</span> <a class="code" href="structQgsWms_1_1QgsWmsParametersLayer.html">QgsWmsParametersLayer</a> param = mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a748c95fa29403490a47576caf90c0497">parameters</a>( *layer );</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      <span class="keywordflow">if</span> ( param.<a class="code" href="structQgsWms_1_1QgsWmsParametersLayer.html#a99fa0cdbbedbffb18a264d50f87fc27c">mNickname</a>.isEmpty() )</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;      {</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      }</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      <span class="keywordflow">if</span> ( useSld )</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      {</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        setLayerSld( layer, mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#abb7c4503320c2e7c0caaf6c5653bc76b">sld</a>( *layer ) );</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      }</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      {</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        setLayerStyle( layer, mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a84903d316c24b3de07073a6777b73965">style</a>( *layer ) );</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;      }</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;      <span class="keywordflow">if</span> ( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aafd7caafcc3edff7a0ce0d9fec50f11b">testFlag</a>( <a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa19fa9e68e8cde245de3312dcce5d5066">QgsWmsRenderContext::UseOpacity</a> ) )</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;      {</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        setLayerOpacity( layer, param.<a class="code" href="structQgsWms_1_1QgsWmsParametersLayer.html#ae6f3ea29dc3e22b48f8cf7ce8c50e18b">mOpacity</a> );</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;      }</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;      <span class="keywordflow">if</span> ( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aafd7caafcc3edff7a0ce0d9fec50f11b">testFlag</a>( <a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa04ca5667f8d4c05024fe2b6eb9dd19a5">QgsWmsRenderContext::UseFilter</a> ) )</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      {</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        setLayerFilter( layer, param.<a class="code" href="structQgsWms_1_1QgsWmsParametersLayer.html#a92b04b515c2184b9ccdb2e94065289c6">mFilter</a> );</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;      }</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;      <span class="keywordflow">if</span> ( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aafd7caafcc3edff7a0ce0d9fec50f11b">testFlag</a>( <a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa5b26b2c30b32c7ac0a892e6907586d58">QgsWmsRenderContext::UseSelection</a> ) )</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;        setLayerSelection( layer, param.<a class="code" href="structQgsWms_1_1QgsWmsParametersLayer.html#a0294dbbed7d43559e8d9831961d1e0a4">mSelection</a> );</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;      }</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      <span class="keywordflow">if</span> ( settings &amp;&amp; mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a5ac4d9940272bff871854e839df43733">updateExtent</a>() )</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      {</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        updateExtent( layer, *settings );</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;      }</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      <span class="keywordflow">if</span> ( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aafd7caafcc3edff7a0ce0d9fec50f11b">testFlag</a>( <a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202faec2f2c6ceb1cecf81bb84cc4b57b9bc0">QgsWmsRenderContext::SetAccessControl</a> ) )</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;      {</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;        setLayerAccessControlFilter( layer );</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;      }</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    }</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <span class="keywordflow">if</span> ( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aafd7caafcc3edff7a0ce0d9fec50f11b">testFlag</a>( <a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa4ab574abf2f98dcbf0293289ac92afce">QgsWmsRenderContext::AddHighlightLayers</a> ) )</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    {</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;      layers = highlightLayers( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a9080df5fcb87eb5ca6792329c5d29d5c">highlightLayersParameters</a>() ) &lt;&lt; layers;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    }</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="keywordflow">if</span> ( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aafd7caafcc3edff7a0ce0d9fec50f11b">testFlag</a>( <a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa83fb1469310fe09b3d30ce86c597ea30">QgsWmsRenderContext::AddExternalLayers</a> ) )</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    {</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      layers = externalLayers( mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#ab98bf25965876af468ae6c14576f63d2">externalLayersParameters</a>() ) &lt;&lt; layers;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    }</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  }</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::setLayerStyle( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer, <span class="keyword">const</span> QString &amp;style )<span class="keyword"> const</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <span class="keywordflow">if</span> ( style.isEmpty() )</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    {</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    }</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    <span class="keywordtype">bool</span> rc = layer-&gt;<a class="code" href="classQgsMapLayer.html#ac7ce04c009ac81926b63af4c98bd5c72">styleManager</a>()-&gt;<a class="code" href="classQgsMapLayerStyleManager.html#a33f9452854c20bca39789ea711c6020b">setCurrentStyle</a>( style );</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <span class="keywordflow">if</span> ( ! rc )</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    {</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="classQgsWms_1_1QgsBadRequestException.html">QgsBadRequestException</a>( <a class="code" href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4aadc219cee4bc10ffb4e7374fb6f45ab1">QgsServiceException::OGC_StyleNotDefined</a>,</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;                                    QStringLiteral( <span class="stringliteral">&quot;Style &#39;%1&#39; does not exist for layer &#39;%2&#39;&quot;</span> ).arg( style, layer-&gt;<a class="code" href="classQgsMapLayer.html#a0594da1ee92c9fc9e15659fc39522f97">name</a>() ) );</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    }</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  }</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;  <span class="keywordtype">void</span> QgsRenderer::setLayerSld( <a class="code" href="classQgsMapLayer.html">QgsMapLayer</a> *layer, <span class="keyword">const</span> QDomElement &amp;sld )<span class="keyword"> const</span></div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    QString err;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    layer-&gt;<a class="code" href="classQgsMapLayer.html#ab7fcb070c317b3cb4853f11ea8ce3afd">readSld</a>( sld, err );</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    layer-&gt;<a class="code" href="classQgsMapLayer.html#a7bf94cfa08abc37b75cc53dc921bb15e">setCustomProperty</a>( <span class="stringliteral">&quot;readSLD&quot;</span>, <span class="keyword">true</span> );</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  }</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <a class="code" href="classQgsLegendSettings.html">QgsLegendSettings</a> QgsRenderer::legendSettings()<span class="keyword"> const</span></div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;<span class="keyword">  </span>{</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <span class="comment">// getting scale from bbox or default size</span></div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <a class="code" href="classQgsLegendSettings.html">QgsLegendSettings</a> settings = mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#abdbf55882269ff9ff8d55c1cf62699f6">legendSettings</a>();</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    <span class="keywordflow">if</span> ( !mWmsParameters.<a class="code" href="classQgsWms_1_1QgsWmsParameters.html#a7bc80ab21bd7e83b5107423e883fcc26">bbox</a>().isEmpty() )</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    {</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      <a class="code" href="classQgsMapSettings.html">QgsMapSettings</a> mapSettings;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      std::unique_ptr&lt;QImage&gt; tmp( createImage( mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#a0979c94d37319114480c1f9274e653c2">mapSize</a>( <span class="keyword">false</span> ) ) );</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;      configureMapSettings( tmp.get(), mapSettings );</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;      settings.<a class="code" href="classQgsLegendSettings.html#a2e7e7528a80d1a0e0d059aebbbf68c8b">setMapScale</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#a24e262c80b54fc44e6bdb90ca4b62020">scale</a>() );</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;      settings.<a class="code" href="classQgsLegendSettings.html#a4c2a694a58487196952744657c94b92a">setMapUnitsPerPixel</a>( mapSettings.<a class="code" href="classQgsMapSettings.html#a6ac140b933184ef6740e5aeaac89e25c">mapUnitsPerPixel</a>() );</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    }</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    {</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> defaultMapUnitsPerPixel = <a class="code" href="namespaceQgsServerProjectUtils.html#aa391fe2e196ffe2a2483ea77a428bbf9">QgsServerProjectUtils::wmsDefaultMapUnitsPerMm</a>( *mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#ac205b0e92b81bbe7599e4af9a37b82d9">project</a>() ) / mContext.<a class="code" href="classQgsWms_1_1QgsWmsRenderContext.html#aa9862dccc9904146c578d5c82a902c3b">dotsPerMm</a>();</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;      settings.<a class="code" href="classQgsLegendSettings.html#a4c2a694a58487196952744657c94b92a">setMapUnitsPerPixel</a>( defaultMapUnitsPerPixel );</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    }</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <span class="keywordflow">return</span> settings;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  }</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;} <span class="comment">// namespace QgsWms</span></div><div class="ttc" id="classQgsPropertyCollection_html_a6197a3265529fc2093594933fcbfbd4e"><div class="ttname"><a href="classQgsPropertyCollection.html#a6197a3265529fc2093594933fcbfbd4e">QgsPropertyCollection::setProperty</a></div><div class="ttdeci">void setProperty(int key, const QgsProperty &amp;property)</div><div class="ttdoc">Adds a property to the collection and takes ownership of it. </div><div class="ttdef"><b>Definition:</b> <a href="qgspropertycollection_8cpp_source.html#l00165">qgspropertycollection.cpp:165</a></div></div>
<div class="ttc" id="qgsmapserviceexception_8h_html"><div class="ttname"><a href="qgsmapserviceexception_8h.html">qgsmapserviceexception.h</a></div></div>
<div class="ttc" id="classQgsPrintLayout_html_aa45efaafdd7a5c4055f4f5855242478e"><div class="ttname"><a href="classQgsPrintLayout.html#aa45efaafdd7a5c4055f4f5855242478e">QgsPrintLayout::clone</a></div><div class="ttdeci">QgsPrintLayout * clone() const override</div><div class="ttdoc">Creates a clone of the layout. </div><div class="ttdef"><b>Definition:</b> <a href="qgsprintlayout_8cpp_source.html#l00028">qgsprintlayout.cpp:28</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a9080df5fcb87eb5ca6792329c5d29d5c"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a9080df5fcb87eb5ca6792329c5d29d5c">QgsWms::QgsWmsParameters::highlightLayersParameters</a></div><div class="ttdeci">QList&lt; QgsWmsParametersHighlightLayer &gt; highlightLayersParameters() const</div><div class="ttdoc">Returns parameters for each highlight layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01532">qgswmsparameters.cpp:1532</a></div></div>
<div class="ttc" id="qgsfieldformatterregistry_8h_html"><div class="ttname"><a href="qgsfieldformatterregistry_8h.html">qgsfieldformatterregistry.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_ac80259b0d4a872b318d475f5e343337c"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#ac80259b0d4a872b318d475f5e343337c">QgsWms::QgsRenderer::getFeatureInfo</a></div><div class="ttdeci">QByteArray getFeatureInfo(const QString &amp;version=&quot;1.3.0&quot;)</div><div class="ttdoc">Creates an xml document that describes the result of the getFeatureInfo request. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8cpp_source.html#l00855">qgswmsrenderer.cpp:855</a></div></div>
<div class="ttc" id="qgslayoutitemhtml_8h_html"><div class="ttname"><a href="qgslayoutitemhtml_8h.html">qgslayoutitemhtml.h</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a2a3b5542fc9714a405f68b0afca4a963"><div class="ttname"><a href="classQgsVectorLayer.html#a2a3b5542fc9714a405f68b0afca4a963">QgsVectorLayer::updateFields</a></div><div class="ttdeci">void updateFields()</div><div class="ttdoc">Will regenerate the fields property of this layer by obtaining all fields from the dataProvider...</div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l03351">qgsvectorlayer.cpp:3351</a></div></div>
<div class="ttc" id="classQgsLayerTreeGroup_html"><div class="ttname"><a href="classQgsLayerTreeGroup.html">QgsLayerTreeGroup</a></div><div class="ttdoc">Layer tree group node serves as a container for layers and further groups. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreegroup_8h_source.html#l00034">qgslayertreegroup.h:34</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersLayer_html_ae6f3ea29dc3e22b48f8cf7ce8c50e18b"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersLayer.html#ae6f3ea29dc3e22b48f8cf7ce8c50e18b">QgsWms::QgsWmsParametersLayer::mOpacity</a></div><div class="ttdeci">int mOpacity</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00052">qgswmsparameters.h:52</a></div></div>
<div class="ttc" id="classQgsFeature_html_a64e6b9dd1e5a66c960f985f5d885d7f6"><div class="ttname"><a href="classQgsFeature.html#a64e6b9dd1e5a66c960f985f5d885d7f6">QgsFeature::id</a></div><div class="ttdeci">QgsFeatureId id</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00064">qgsfeature.h:64</a></div></div>
<div class="ttc" id="qgslayoutsize_8h_html"><div class="ttname"><a href="qgslayoutsize_8h.html">qgslayoutsize.h</a></div></div>
<div class="ttc" id="classQgsFeatureIterator_html"><div class="ttname"><a href="classQgsFeatureIterator.html">QgsFeatureIterator</a></div><div class="ttdoc">Wrapper for iterator of features from vector data provider or vector layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeatureiterator_8h_source.html#l00263">qgsfeatureiterator.h:263</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_aa9862dccc9904146c578d5c82a902c3b"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#aa9862dccc9904146c578d5c82a902c3b">QgsWms::QgsWmsRenderContext::dotsPerMm</a></div><div class="ttdeci">qreal dotsPerMm() const</div><div class="ttdoc">Returns default dots per mm according to the current configuration. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00147">qgswmsrendercontext.cpp:147</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a12889d757ef465b9cc9804bbba564ad8"><div class="ttname"><a href="classQgsRectangle.html#a12889d757ef465b9cc9804bbba564ad8">QgsRectangle::contains</a></div><div class="ttdeci">bool contains(const QgsRectangle &amp;rect) const</div><div class="ttdoc">Returns true when rectangle contains other rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00342">qgsrectangle.h:342</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a96d6c6c92a24a831a42694d6b74a8e04">QgsWms::QgsServiceException::QGIS_InvalidParameterValue</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00062">qgswmsserviceexception.h:62</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_af94f602a07aebe58130dff48ff03ab7e"><div class="ttname"><a href="classQgsMapSettings.html#af94f602a07aebe58130dff48ff03ab7e">QgsMapSettings::setDestinationCrs</a></div><div class="ttdeci">void setDestinationCrs(const QgsCoordinateReferenceSystem &amp;crs)</div><div class="ttdoc">sets destination coordinate reference system </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00296">qgsmapsettings.cpp:296</a></div></div>
<div class="ttc" id="classQgsLayerTreeGroup_html_ad41c812a5c92a9cc6c3d347d4abcb6a4"><div class="ttname"><a href="classQgsLayerTreeGroup.html#ad41c812a5c92a9cc6c3d347d4abcb6a4">QgsLayerTreeGroup::removeChildrenGroupWithoutLayers</a></div><div class="ttdeci">void removeChildrenGroupWithoutLayers()</div><div class="ttdoc">Remove all child group nodes without layers. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreegroup_8cpp_source.html#l00173">qgslayertreegroup.cpp:173</a></div></div>
<div class="ttc" id="classQgsFeatureRenderer_html_aa33cca89be2cf805acfe309f491b7151a032dbbe9c457924a27f1f2ae4c6c6531"><div class="ttname"><a href="classQgsFeatureRenderer.html#aa33cca89be2cf805acfe309f491b7151a032dbbe9c457924a27f1f2ae4c6c6531">QgsFeatureRenderer::MoreSymbolsPerFeature</a></div><div class="ttdoc">May use more than one symbol to render a feature: symbolsForFeature() will return them...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrenderer_8h_source.html#l00243">qgsrenderer.h:243</a></div></div>
<div class="ttc" id="classQgsRectangle_html"><div class="ttname"><a href="classQgsRectangle.html">QgsRectangle</a></div><div class="ttdoc">A rectangle specified with double values. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00041">qgsrectangle.h:41</a></div></div>
<div class="ttc" id="classQgsMapLayer_html"><div class="ttname"><a href="classQgsMapLayer.html">QgsMapLayer</a></div><div class="ttdoc">Base class for all map layer types. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8h_source.html#l00078">qgsmaplayer.h:78</a></div></div>
<div class="ttc" id="group__core_html_ggafbd92a77d43d50b374d3d022ec71d30ca2701fe7242d9c931cd8d13fc48cdbc9b"><div class="ttname"><a href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca2701fe7242d9c931cd8d13fc48cdbc9b">QgsMapLayerType::MeshLayer</a></div><div class="ttdoc">Added in 3.2. </div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a53a4718390bd45b2df4b9b21f8fede96"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a53a4718390bd45b2df4b9b21f8fede96">QgsWms::QgsWmsParameters::dump</a></div><div class="ttdeci">void dump() const</div><div class="ttdoc">Dumps parameters. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00616">qgswmsparameters.cpp:616</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html">QgsWms::QgsWmsParametersComposerMap</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00078">qgswmsparameters.h:78</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a800e955c228a5850ae968fe1461a2951"><div class="ttname"><a href="classQgsMapSettings.html#a800e955c228a5850ae968fe1461a2951">QgsMapSettings::setExtent</a></div><div class="ttdeci">void setExtent(const QgsRectangle &amp;rect, bool magnified=true)</div><div class="ttdoc">Set coordinates of the rectangle which should be rendered. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00078">qgsmapsettings.cpp:78</a></div></div>
<div class="ttc" id="group__core_html_ggafbd92a77d43d50b374d3d022ec71d30ca3e3c0ae67b31a76ef20bfaf18438f95f"><div class="ttname"><a href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca3e3c0ae67b31a76ef20bfaf18438f95f">QgsMapLayerType::VectorLayer</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a5147cf4a578ac51798751b22361dc1b4"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a5147cf4a578ac51798751b22361dc1b4">QgsWms::QgsWmsRenderContext::layersToRender</a></div><div class="ttdeci">QList&lt; QgsMapLayer * &gt; layersToRender() const</div><div class="ttdoc">Returns a list of all layers to actually render according to the current configuration. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00199">qgswmsrendercontext.cpp:199</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_afdf1161be6c456a507dbfa3cab1fd044"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#afdf1161be6c456a507dbfa3cab1fd044">QgsWms::QgsRenderer::~QgsRenderer</a></div><div class="ttdeci">~QgsRenderer()</div><div class="ttdoc">Destructor for QgsRenderer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8cpp_source.html#l00106">qgswmsrenderer.cpp:106</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_a4f1df47bb607a0b4f10e7eb7057df5f1"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#a4f1df47bb607a0b4f10e7eb7057df5f1">QgsWms::QgsRenderer::symbols</a></div><div class="ttdeci">HitTest symbols()</div><div class="ttdoc">Returns the hit test according to the current context. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8cpp_source.html#l00226">qgswmsrenderer.cpp:226</a></div></div>
<div class="ttc" id="classQgsLegendModel_html"><div class="ttname"><a href="classQgsLegendModel.html">QgsLegendModel</a></div><div class="ttdoc">Item model implementation based on layer tree model for layout legend. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitemlegend_8h_source.html#l00041">qgslayoutitemlegend.h:41</a></div></div>
<div class="ttc" id="qgsproject_8h_html"><div class="ttname"><a href="qgsproject_8h.html">qgsproject.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dbaeaa4334594890290309fc68a384e6685"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbaeaa4334594890290309fc68a384e6685">QgsWms::QgsWmsParameter::BBOX</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00112">qgswmsparameters.h:112</a></div></div>
<div class="ttc" id="qgsfeatureid_8h_html_a443917048a2ef75006fdeba30f1549f3"><div class="ttname"><a href="qgsfeatureid_8h.html#a443917048a2ef75006fdeba30f1549f3">QgsFeatureIds</a></div><div class="ttdeci">QSet&lt; QgsFeatureId &gt; QgsFeatureIds</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeatureid_8h_source.html#l00034">qgsfeatureid.h:34</a></div></div>
<div class="ttc" id="classQgsEditorWidgetSetup_html_a41bea2baf17e264ed8405ff4fc61b7f1"><div class="ttname"><a href="classQgsEditorWidgetSetup.html#a41bea2baf17e264ed8405ff4fc61b7f1">QgsEditorWidgetSetup::config</a></div><div class="ttdeci">QVariantMap config() const</div><div class="ttdef"><b>Definition:</b> <a href="qgseditorwidgetsetup_8h_source.html#l00051">qgseditorwidgetsetup.h:51</a></div></div>
<div class="ttc" id="qgsfeature_8h_html"><div class="ttname"><a href="qgsfeature_8h.html">qgsfeature.h</a></div></div>
<div class="ttc" id="classQgsApplication_html_ab610cd57510e03bb3c7a4abdd4525673"><div class="ttname"><a href="classQgsApplication.html#ab610cd57510e03bb3c7a4abdd4525673">QgsApplication::fieldFormatterRegistry</a></div><div class="ttdeci">static QgsFieldFormatterRegistry * fieldFormatterRegistry()</div><div class="ttdoc">Gets the registry of available field formatters. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01915">qgsapplication.cpp:1915</a></div></div>
<div class="ttc" id="classQgsLayoutManager_html_a851970d7142a7a71d6d5acde07fc732b"><div class="ttname"><a href="classQgsLayoutManager.html#a851970d7142a7a71d6d5acde07fc732b">QgsLayoutManager::layoutByName</a></div><div class="ttdeci">QgsMasterLayoutInterface * layoutByName(const QString &amp;name) const</div><div class="ttdoc">Returns the layout with a matching name, or nullptr if no matching layouts were found. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutmanager_8cpp_source.html#l00122">qgslayoutmanager.cpp:122</a></div></div>
<div class="ttc" id="classQgsJsonExporter_html_a18fcac91beca93f1ac82dd23b167f013"><div class="ttname"><a href="classQgsJsonExporter.html#a18fcac91beca93f1ac82dd23b167f013">QgsJsonExporter::exportFeatureToJsonObject</a></div><div class="ttdeci">json exportFeatureToJsonObject(const QgsFeature &amp;feature, const QVariantMap &amp;extraProperties=QVariantMap(), const QVariant &amp;id=QVariant()) const</div><div class="ttdoc">Returns a QJsonObject representation of a feature. </div><div class="ttdef"><b>Definition:</b> <a href="qgsjsonutils_8cpp_source.html#l00078">qgsjsonutils.cpp:78</a></div></div>
<div class="ttc" id="qgslayoutitemmapgrid_8h_html"><div class="ttname"><a href="qgslayoutitemmapgrid_8h.html">qgslayoutitemmapgrid.h</a></div></div>
<div class="ttc" id="qgsmaplayerstylemanager_8h_html"><div class="ttname"><a href="qgsmaplayerstylemanager_8h.html">qgsmaplayerstylemanager.h</a></div></div>
<div class="ttc" id="classQgsScaleCalculator_html_a3cd9d1e9df5366246075954c47ebac07"><div class="ttname"><a href="classQgsScaleCalculator.html#a3cd9d1e9df5366246075954c47ebac07">QgsScaleCalculator::calculate</a></div><div class="ttdeci">double calculate(const QgsRectangle &amp;mapExtent, double canvasWidth)</div><div class="ttdoc">Calculate the scale denominator. </div><div class="ttdef"><b>Definition:</b> <a href="qgsscalecalculator_8cpp_source.html#l00050">qgsscalecalculator.cpp:50</a></div></div>
<div class="ttc" id="qgsrasterlayer_8h_html"><div class="ttname"><a href="qgsrasterlayer_8h.html">qgsrasterlayer.h</a></div></div>
<div class="ttc" id="classQgsJsonExporter_html_a7670c88a5fd2fe5ca5f23a146f97ffca"><div class="ttname"><a href="classQgsJsonExporter.html#a7670c88a5fd2fe5ca5f23a146f97ffca">QgsJsonExporter::setAttributeDisplayName</a></div><div class="ttdeci">void setAttributeDisplayName(bool displayName)</div><div class="ttdoc">Sets whether to print original names of attributes or aliases if defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgsjsonutils_8h_source.html#l00117">qgsjsonutils.h:117</a></div></div>
<div class="ttc" id="classQgsLayout_html_ae2476c31a796dcbd08e999338a2e62b9"><div class="ttname"><a href="classQgsLayout.html#ae2476c31a796dcbd08e999338a2e62b9">QgsLayout::layoutObjects</a></div><div class="ttdeci">void layoutObjects(QList&lt; T *&gt; &amp;objectList) const</div><div class="ttdoc">Returns a list of layout objects (items and multiframes) of a specific type. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8h_source.html#l00140">qgslayout.h:140</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a39b7d2e4d53085906458e42e8bb0a359"><div class="ttname"><a href="classQgsMapLayer.html#a39b7d2e4d53085906458e42e8bb0a359">QgsMapLayer::type</a></div><div class="ttdeci">QgsMapLayerType type() const</div><div class="ttdoc">Returns the type of the layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l00127">qgsmaplayer.cpp:127</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a5e2acc01fde2929febb8ff1064fd8571"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a5e2acc01fde2929febb8ff1064fd8571">QgsWms::QgsWmsParameters::i</a></div><div class="ttdeci">QString i() const</div><div class="ttdoc">Returns I parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00862">qgswmsparameters.cpp:862</a></div></div>
<div class="ttc" id="classQgsFeature_html_a96232e13ae05c90e553e400f24b4c5b2"><div class="ttname"><a href="classQgsFeature.html#a96232e13ae05c90e553e400f24b4c5b2">QgsFeature::setFields</a></div><div class="ttdeci">void setFields(const QgsFields &amp;fields, bool initAttributes=false)</div><div class="ttdoc">Assign a field map with the feature to allow attribute access by attribute name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00162">qgsfeature.cpp:162</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_aecdd3e90a49cc111b88960ada7691b16"><div class="ttname"><a href="classQgsFeatureRequest.html#aecdd3e90a49cc111b88960ada7691b16">QgsFeatureRequest::flags</a></div><div class="ttdeci">const Flags &amp; flags() const</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8h_source.html#l00500">qgsfeaturerequest.h:500</a></div></div>
<div class="ttc" id="classQgsField_html_a229582bef81181459456085d7e5c7720"><div class="ttname"><a href="classQgsField.html#a229582bef81181459456085d7e5c7720">QgsField::name</a></div><div class="ttdeci">QString name</div><div class="ttdef"><b>Definition:</b> <a href="qgsfield_8h_source.html#l00058">qgsfield.h:58</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a340790acd806026c606bd5e7be4cf42f"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a340790acd806026c606bd5e7be4cf42f">QgsWms::QgsWmsRenderContext::layers</a></div><div class="ttdeci">QList&lt; QgsMapLayer * &gt; layers() const</div><div class="ttdoc">Returns a list of all layers read from the project. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00204">qgswmsrendercontext.cpp:204</a></div></div>
<div class="ttc" id="qgswkbtypes_8h_html"><div class="ttname"><a href="qgswkbtypes_8h.html">qgswkbtypes.h</a></div></div>
<div class="ttc" id="classQgsAnnotationManager_html"><div class="ttname"><a href="classQgsAnnotationManager.html">QgsAnnotationManager</a></div><div class="ttdoc">Manages storage of a set of QgsAnnotation annotation objects. </div><div class="ttdef"><b>Definition:</b> <a href="qgsannotationmanager_8h_source.html#l00044">qgsannotationmanager.h:44</a></div></div>
<div class="ttc" id="classQgsSymbol_html"><div class="ttname"><a href="classQgsSymbol.html">QgsSymbol</a></div><div class="ttdoc">Abstract base class for all rendered symbols. </div><div class="ttdef"><b>Definition:</b> <a href="qgssymbol_8h_source.html#l00061">qgssymbol.h:61</a></div></div>
<div class="ttc" id="classQgsGeometry_html_ac69d7afedd56552c9bad65afa6d1618f"><div class="ttname"><a href="classQgsGeometry.html#ac69d7afedd56552c9bad65afa6d1618f">QgsGeometry::transform</a></div><div class="ttdeci">OperationResult transform(const QgsCoordinateTransform &amp;ct, QgsCoordinateTransform::TransformDirection direction=QgsCoordinateTransform::ForwardTransform, bool transformZ=false) SIP_THROW(QgsCsException)</div><div class="ttdoc">Transforms this geometry as described by the coordinate transform ct. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l02600">qgsgeometry.cpp:2600</a></div></div>
<div class="ttc" id="qgsvectorlayerlabeling_8h_html"><div class="ttname"><a href="qgsvectorlayerlabeling_8h.html">qgsvectorlayerlabeling.h</a></div></div>
<div class="ttc" id="qgslayoutitemlegend_8h_html"><div class="ttname"><a href="qgslayoutitemlegend_8h.html">qgslayoutitemlegend.h</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a8978462764820b292eb260635764c305"><div class="ttname"><a href="classQgsMapSettings.html#a8978462764820b292eb260635764c305">QgsMapSettings::setExpressionContext</a></div><div class="ttdeci">void setExpressionContext(const QgsExpressionContext &amp;context)</div><div class="ttdoc">Sets the expression context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8h_source.html#l00338">qgsmapsettings.h:338</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ad4b51584ddb6f35e277dfac195b085dd"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ad4b51584ddb6f35e277dfac195b085dd">QgsWms::QgsWmsParameters::featureCountAsInt</a></div><div class="ttdeci">int featureCountAsInt() const</div><div class="ttdoc">Returns FEATURE_COUNT as an integer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00962">qgswmsparameters.cpp:962</a></div></div>
<div class="ttc" id="classQgsLayerTreeModelLegendNode_html_ae1efad0cafcdab48554055fdcda8b637"><div class="ttname"><a href="classQgsLayerTreeModelLegendNode.html#ae1efad0cafcdab48554055fdcda8b637">QgsLayerTreeModelLegendNode::drawSymbol</a></div><div class="ttdeci">virtual QSizeF drawSymbol(const QgsLegendSettings &amp;settings, ItemContext *ctx, double itemHeight) const</div><div class="ttdoc">Draws symbol on the left side of the item. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreemodellegendnode_8cpp_source.html#l00080">qgslayertreemodellegendnode.cpp:80</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_aab0dc2dca2b882316c3bb3668dbf4667ad60a395ad4de36b56d511dcca27d4502"><div class="ttname"><a href="classQgsFeatureRequest.html#aab0dc2dca2b882316c3bb3668dbf4667ad60a395ad4de36b56d511dcca27d4502">QgsFeatureRequest::ExactIntersect</a></div><div class="ttdoc">Use exact geometry intersection (slower) instead of bounding boxes. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8h_source.html#l00080">qgsfeaturerequest.h:80</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_af77acee1c9414724e0ed68b056ea7581"><div class="ttname"><a href="classQgsVectorLayer.html#af77acee1c9414724e0ed68b056ea7581">QgsVectorLayer::excludeAttributesWms</a></div><div class="ttdeci">QSet&lt; QString &gt; excludeAttributesWms() const</div><div class="ttdoc">A set of attributes that are not advertised in WMS requests with QGIS server. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8h_source.html#l01604">qgsvectorlayer.h:1604</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a748c95fa29403490a47576caf90c0497"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a748c95fa29403490a47576caf90c0497">QgsWms::QgsWmsRenderContext::parameters</a></div><div class="ttdeci">QgsWmsParameters parameters() const</div><div class="ttdoc">Returns WMS parameters. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00066">qgswmsrendercontext.cpp:66</a></div></div>
<div class="ttc" id="qgsscalecalculator_8h_html"><div class="ttname"><a href="qgsscalecalculator_8h.html">qgsscalecalculator.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_afc62189976b903500393f9c803ce202fa5b26b2c30b32c7ac0a892e6907586d58"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa5b26b2c30b32c7ac0a892e6907586d58">QgsWms::QgsWmsRenderContext::UseSelection</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8h_source.html#l00043">qgswmsrendercontext.h:43</a></div></div>
<div class="ttc" id="qgsmaprendererjobproxy_8h_html"><div class="ttname"><a href="qgsmaprendererjobproxy_8h.html">qgsmaprendererjobproxy.h</a></div></div>
<div class="ttc" id="classQgsLayoutItemLabel_html"><div class="ttname"><a href="classQgsLayoutItemLabel.html">QgsLayoutItemLabel</a></div><div class="ttdoc">A layout item subclass for text labels. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitemlabel_8h_source.html#l00034">qgslayoutitemlabel.h:34</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a40546626099555559e9fcb898c1cbfb5"><div class="ttname"><a href="classQgsMapSettings.html#a40546626099555559e9fcb898c1cbfb5">QgsMapSettings::layerIds</a></div><div class="ttdeci">QStringList layerIds() const</div><div class="ttdoc">Gets list of layer IDs for map rendering The layers are stored in the reverse order of how they are r...</div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00262">qgsmapsettings.cpp:262</a></div></div>
<div class="ttc" id="classQgsRenderContext_html_a14a1deaf94837029f23adb0423546bc4"><div class="ttname"><a href="classQgsRenderContext.html#a14a1deaf94837029f23adb0423546bc4">QgsRenderContext::setCoordinateTransform</a></div><div class="ttdeci">void setCoordinateTransform(const QgsCoordinateTransform &amp;t)</div><div class="ttdoc">Sets the current coordinate transform for the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrendercontext_8cpp_source.html#l00217">qgsrendercontext.cpp:217</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_af0666baa93ea6330ae81ae5d840314a2"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#af0666baa93ea6330ae81ae5d840314a2">QgsWms::QgsWmsParameters::filters</a></div><div class="ttdeci">QStringList filters() const</div><div class="ttdoc">Returns the list of filters found in FILTER parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01324">qgswmsparameters.cpp:1324</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_aa391fe2e196ffe2a2483ea77a428bbf9"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#aa391fe2e196ffe2a2483ea77a428bbf9">QgsServerProjectUtils::wmsDefaultMapUnitsPerMm</a></div><div class="ttdeci">SERVER_EXPORT double wmsDefaultMapUnitsPerMm(const QgsProject &amp;project)</div><div class="ttdoc">Returns the default number of map units per millimeters in case of the scale is not given...</div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00119">qgsserverprojectutils.cpp:119</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a33de3a8f632b288457833b84eb3cf5d5"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a33de3a8f632b288457833b84eb3cf5d5">QgsWms::QgsWmsParameters::bboxAsRectangle</a></div><div class="ttdeci">QgsRectangle bboxAsRectangle() const</div><div class="ttdoc">Returns BBOX as a rectangle if defined and valid. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00695">qgswmsparameters.cpp:695</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a79ba2a28bc869a0c5e435f8e3f1596ac"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a79ba2a28bc869a0c5e435f8e3f1596ac">QgsWms::QgsWmsParameters::j</a></div><div class="ttdeci">QString j() const</div><div class="ttdoc">Returns J parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00867">qgswmsparameters.cpp:867</a></div></div>
<div class="ttc" id="classQgsLayoutExporter_html_a093075b4a054fd8155267ddd9ab0a211"><div class="ttname"><a href="classQgsLayoutExporter.html#a093075b4a054fd8155267ddd9ab0a211">QgsLayoutExporter::exportToImage</a></div><div class="ttdeci">ExportResult exportToImage(const QString &amp;filePath, const QgsLayoutExporter::ImageExportSettings &amp;settings)</div><div class="ttdoc">Exports the layout to the filePath, using the specified export settings. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8cpp_source.html#l00327">qgslayoutexporter.cpp:327</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsMapRendererJobProxy_html_abadfc1e0485db62492bff04b9991f335"><div class="ttname"><a href="classQgsWms_1_1QgsMapRendererJobProxy.html#abadfc1e0485db62492bff04b9991f335">QgsWms::QgsMapRendererJobProxy::render</a></div><div class="ttdeci">void render(const QgsMapSettings &amp;mapSettings, QImage *image)</div><div class="ttdoc">Sequential or parallel map rendering. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaprendererjobproxy_8cpp_source.html#l00051">qgsmaprendererjobproxy.cpp:51</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a02e164842da83a62157f05518a47eea6"><div class="ttname"><a href="classQgsVectorLayer.html#a02e164842da83a62157f05518a47eea6">QgsVectorLayer::wkbType</a></div><div class="ttdeci">QgsWkbTypes::Type wkbType() const FINAL</div><div class="ttdoc">Returns the WKBType or WKBUnknown in case of error. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l00604">qgsvectorlayer.cpp:604</a></div></div>
<div class="ttc" id="structQgsVectorLayer_1_1LayerOptions_html"><div class="ttname"><a href="structQgsVectorLayer_1_1LayerOptions.html">QgsVectorLayer::LayerOptions</a></div><div class="ttdoc">Setting options for loading vector layers. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8h_source.html#l00398">qgsvectorlayer.h:398</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_a7e1aeb43cbd1215064aabd65ee1fc6b9"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a7e1aeb43cbd1215064aabd65ee1fc6b9">QgsWms::QgsWmsParametersComposerMap::mLayers</a></div><div class="ttdeci">QList&lt; QgsWmsParametersLayer &gt; mLayers</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00087">qgswmsparameters.h:87</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html_a99a92e3956573acfc28f7199ba13948d"><div class="ttname"><a href="classQgsExpressionContext.html#a99a92e3956573acfc28f7199ba13948d">QgsExpressionContext::setFeature</a></div><div class="ttdeci">void setFeature(const QgsFeature &amp;feature)</div><div class="ttdoc">Convenience function for setting a feature for the context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8cpp_source.html#l00523">qgsexpressioncontext.cpp:523</a></div></div>
<div class="ttc" id="qgslayoutrendercontext_8h_html"><div class="ttname"><a href="qgslayoutrendercontext_8h.html">qgslayoutrendercontext.h</a></div></div>
<div class="ttc" id="classQgsRasterLayer_html"><div class="ttname"><a href="classQgsRasterLayer.html">QgsRasterLayer</a></div><div class="ttdoc">This class provides qgis with the ability to render raster datasets onto the mapcanvas. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterlayer_8h_source.html#l00138">qgsrasterlayer.h:138</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dbab43d9d298ef476e909333951f05987bd"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbab43d9d298ef476e909333951f05987bd">QgsWms::QgsWmsParameter::TEMPLATE</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00169">qgswmsparameters.h:169</a></div></div>
<div class="ttc" id="qgslayoutatlas_8h_html"><div class="ttname"><a href="qgslayoutatlas_8h.html">qgslayoutatlas.h</a></div></div>
<div class="ttc" id="qgsfeature_8h_html_ae0f922f3469155bc17dfc96729f1c1cc"><div class="ttname"><a href="qgsfeature_8h.html#ae0f922f3469155bc17dfc96729f1c1cc">QgsFeatureList</a></div><div class="ttdeci">QList&lt; QgsFeature &gt; QgsFeatureList</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00571">qgsfeature.h:571</a></div></div>
<div class="ttc" id="classQgsJsonExporter_html_a0afbd3703c66e72a83182b6a95a4f9d6"><div class="ttname"><a href="classQgsJsonExporter.html#a0afbd3703c66e72a83182b6a95a4f9d6">QgsJsonExporter::setIncludeGeometry</a></div><div class="ttdeci">void setIncludeGeometry(bool includeGeometry)</div><div class="ttdoc">Sets whether to include geometry in the JSON exports. </div><div class="ttdef"><b>Definition:</b> <a href="qgsjsonutils_8h_source.html#l00076">qgsjsonutils.h:76</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_afc62189976b903500393f9c803ce202fa83fb1469310fe09b3d30ce86c597ea30"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa83fb1469310fe09b3d30ce86c597ea30">QgsWms::QgsWmsRenderContext::AddExternalLayers</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8h_source.html#l00049">qgswmsrendercontext.h:49</a></div></div>
<div class="ttc" id="classQgsPointXY_html_a9e9cb74ed22e845f91d5d7a5e8e3fa08"><div class="ttname"><a href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">QgsPointXY::y</a></div><div class="ttdeci">double y</div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00048">qgspointxy.h:48</a></div></div>
<div class="ttc" id="qgsfeaturefilterprovidergroup_8h_html"><div class="ttname"><a href="qgsfeaturefilterprovidergroup_8h.html">qgsfeaturefilterprovidergroup.h</a></div></div>
<div class="ttc" id="classQgsTextBufferSettings_html_af3af07065bd0b5cbf72fd1f5ba2d8e10"><div class="ttname"><a href="classQgsTextBufferSettings.html#af3af07065bd0b5cbf72fd1f5ba2d8e10">QgsTextBufferSettings::setSize</a></div><div class="ttdeci">void setSize(double size)</div><div class="ttdoc">Sets the size of the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8cpp_source.html#l00102">qgstextrenderer.cpp:102</a></div></div>
<div class="ttc" id="classQgsPointXY_html"><div class="ttname"><a href="classQgsPointXY.html">QgsPointXY</a></div><div class="ttdoc">A class to represent a 2D point. </div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00043">qgspointxy.h:43</a></div></div>
<div class="ttc" id="qgsmaptopixel_8h_html"><div class="ttname"><a href="qgsmaptopixel_8h.html">qgsmaptopixel.h</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_aa4886de4c49b0656cc0f47025fe2631b"><div class="ttname"><a href="classQgsVectorLayer.html#aa4886de4c49b0656cc0f47025fe2631b">QgsVectorLayer::getFeature</a></div><div class="ttdeci">QgsFeature getFeature(QgsFeatureId fid) const</div><div class="ttdoc">Queries the layer for the feature with the given id. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8h_source.html#l01087">qgsvectorlayer.h:1087</a></div></div>
<div class="ttc" id="classQgsLegendRenderer_html_a765ced66ea2e39c323620ec55abca219"><div class="ttname"><a href="classQgsLegendRenderer.html#a765ced66ea2e39c323620ec55abca219">QgsLegendRenderer::drawLegend</a></div><div class="ttdeci">void drawLegend(QPainter *painter)</div><div class="ttdoc">Draws the legend with given painter. </div><div class="ttdef"><b>Definition:</b> <a href="qgslegendrenderer_8cpp_source.html#l00044">qgslegendrenderer.cpp:44</a></div></div>
<div class="ttc" id="classQgsTextFormat_html_a29eb0b1d8d6f4fc6279880411aad0d07"><div class="ttname"><a href="classQgsTextFormat.html#a29eb0b1d8d6f4fc6279880411aad0d07">QgsTextFormat::setFont</a></div><div class="ttdeci">void setFont(const QFont &amp;font)</div><div class="ttdoc">Sets the font used for rendering text. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8cpp_source.html#l01281">qgstextrenderer.cpp:1281</a></div></div>
<div class="ttc" id="classQgsProject_html_a59670bc2011fbf2b2296e2169dbcb0ed"><div class="ttname"><a href="classQgsProject.html#a59670bc2011fbf2b2296e2169dbcb0ed">QgsProject::createExpressionContext</a></div><div class="ttdeci">QgsExpressionContext createExpressionContext() const override</div><div class="ttdoc">This method needs to be reimplemented in all classes which implement this interface and return an exp...</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l01566">qgsproject.cpp:1566</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a7bf94cfa08abc37b75cc53dc921bb15e"><div class="ttname"><a href="classQgsMapLayer.html#a7bf94cfa08abc37b75cc53dc921bb15e">QgsMapLayer::setCustomProperty</a></div><div class="ttdeci">void setCustomProperty(const QString &amp;key, const QVariant &amp;value)</div><div class="ttdoc">Set a custom property for layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l01685">qgsmaplayer.cpp:1685</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_ad7bf0dd78303511e659e235936ec58cf"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#ad7bf0dd78303511e659e235936ec58cf">QgsServerProjectUtils::wmsFeatureInfoDocumentElement</a></div><div class="ttdeci">SERVER_EXPORT QString wmsFeatureInfoDocumentElement(const QgsProject &amp;project)</div><div class="ttdoc">Returns the document element name for XML GetFeatureInfo request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00153">qgsserverprojectutils.cpp:153</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_a411bcfe1b17eef2225cd5a6b1766934e"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#a411bcfe1b17eef2225cd5a6b1766934e">QgsWms::QgsRenderer::getPrint</a></div><div class="ttdeci">QByteArray getPrint()</div><div class="ttdoc">Returns printed page as binary. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8cpp_source.html#l00261">qgswmsrenderer.cpp:261</a></div></div>
<div class="ttc" id="qgsrasteridentifyresult_8h_html"><div class="ttname"><a href="qgsrasteridentifyresult_8h.html">qgsrasteridentifyresult.h</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html"><div class="ttname"><a href="classQgsPalLayerSettings.html">QgsPalLayerSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00192">qgspallabeling.h:192</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_abdbf55882269ff9ff8d55c1cf62699f6"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#abdbf55882269ff9ff8d55c1cf62699f6">QgsWms::QgsWmsParameters::legendSettings</a></div><div class="ttdeci">QgsLegendSettings legendSettings() const</div><div class="ttdoc">Returns legend settings. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01200">qgswmsparameters.cpp:1200</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a61ec445a6c8c48cbfd27c012b204dc06"><div class="ttname"><a href="classQgsMapSettings.html#a61ec445a6c8c48cbfd27c012b204dc06">QgsMapSettings::setOutputDpi</a></div><div class="ttdeci">void setOutputDpi(double dpi)</div><div class="ttdoc">Sets DPI used for conversion between real world units (e.g. mm) and pixels. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00254">qgsmapsettings.cpp:254</a></div></div>
<div class="ttc" id="qgsfeatureid_8h_html_a857d022277fb1026d921b0ec9bdb7ce5"><div class="ttname"><a href="qgsfeatureid_8h.html#a857d022277fb1026d921b0ec9bdb7ce5">QgsFeatureId</a></div><div class="ttdeci">qint64 QgsFeatureId</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeatureid_8h_source.html#l00025">qgsfeatureid.h:25</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_a85f831f339a9882822d5d5cf19b29fdf"><div class="ttname"><a href="classQgsFeatureRequest.html#a85f831f339a9882822d5d5cf19b29fdf">QgsFeatureRequest::setSubsetOfAttributes</a></div><div class="ttdeci">QgsFeatureRequest &amp; setSubsetOfAttributes(const QgsAttributeList &amp;attrs)</div><div class="ttdoc">Set a subset of attributes that will be fetched. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8cpp_source.html#l00186">qgsfeaturerequest.cpp:186</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_aa0cfa9d5c9c110815698a054b8ff2472"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#aa0cfa9d5c9c110815698a054b8ff2472">QgsWms::QgsWmsParameters::sldBody</a></div><div class="ttdeci">QString sldBody() const</div><div class="ttdoc">Returns SLD_body if defined or an empty string. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01319">qgswmsparameters.cpp:1319</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a9a0ad7717c01628e5c7b9c9dcd319547"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a9a0ad7717c01628e5c7b9c9dcd319547">QgsWms::QgsWmsParameters::dxfMode</a></div><div class="ttdeci">QgsDxfExport::SymbologyExport dxfMode() const</div><div class="ttdoc">Returns the DXF MODE parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01941">qgswmsparameters.cpp:1941</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ad4d25b953941207de862156c76f6d2c8"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ad4d25b953941207de862156c76f6d2c8">QgsWms::QgsWmsParameters::yAsInt</a></div><div class="ttdeci">int yAsInt() const</div><div class="ttdoc">Returns Y parameter as an int or its default value if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00897">qgswmsparameters.cpp:897</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a1abf8f48544b7ce41a7ff91832de00be"><div class="ttname"><a href="classQgsVectorLayer.html#a1abf8f48544b7ce41a7ff91832de00be">QgsVectorLayer::geometryType</a></div><div class="ttdeci">QgsWkbTypes::GeometryType geometryType() const</div><div class="ttdoc">Returns point, line or polygon. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l00599">qgsvectorlayer.cpp:599</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a60e72c2f73cb07fdbcdbc2d5068b5d9ca9255eddb0bbb4b5393dc3023a8afa748"><div class="ttname"><a href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca9255eddb0bbb4b5393dc3023a8afa748">QgsWkbTypes::NullGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00145">qgswkbtypes.h:145</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a7d8c0bc9cdbb0e4159a8071205790f9aa28e1e8cdf1179aace5f18d58e87053d3"><div class="ttname"><a href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9aa28e1e8cdf1179aace5f18d58e87053d3">QgsPalLayerSettings::PositionX</a></div><div class="ttdoc">X-coordinate data defined label position. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00414">qgspallabeling.h:414</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_ab729c4f2116835c160bf1747225c13dc"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#ab729c4f2116835c160bf1747225c13dc">QgsWms::QgsWmsParametersComposerMap::mScale</a></div><div class="ttdeci">float mScale</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00083">qgswmsparameters.h:83</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a151f2c4887551431c889b4dcbbc39f2b"><div class="ttname"><a href="classQgsMapLayer.html#a151f2c4887551431c889b4dcbbc39f2b">QgsMapLayer::isInScaleRange</a></div><div class="ttdeci">bool isInScaleRange(double scale) const</div><div class="ttdoc">Tests whether the layer should be visible at the specified scale. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l00656">qgsmaplayer.cpp:656</a></div></div>
<div class="ttc" id="classQgsFields_html"><div class="ttname"><a href="classQgsFields.html">QgsFields</a></div><div class="ttdoc">Container of fields for a vector layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfields_8h_source.html#l00042">qgsfields.h:42</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_aafe3c2a31dfa4b01ad7c7a48cc9f1851"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#aafe3c2a31dfa4b01ad7c7a48cc9f1851">QgsWms::QgsWmsParameters::dxfUseLayerTitleAsName</a></div><div class="ttdeci">bool dxfUseLayerTitleAsName() const</div><div class="ttdoc">Returns the DXF USE_TITLE_AS_LAYERNAME parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01915">qgswmsparameters.cpp:1915</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_a878264865968e7d77dc834bc1f3f7a7a"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#a878264865968e7d77dc834bc1f3f7a7a">QgsServerProjectUtils::wmsFeatureInfoLayerAliasMap</a></div><div class="ttdeci">SERVER_EXPORT QHash&lt; QString, QString &gt; wmsFeatureInfoLayerAliasMap(const QgsProject &amp;project)</div><div class="ttdoc">Returns the mapping between layer name and wms layer name for GetFeatureInfo request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00168">qgsserverprojectutils.cpp:168</a></div></div>
<div class="ttc" id="classQgsGeometry_html"><div class="ttname"><a href="classQgsGeometry.html">QgsGeometry</a></div><div class="ttdoc">A geometry is the spatial representation of a feature. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8h_source.html#l00111">qgsgeometry.h:111</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a450a58921855552f4a6710c995d5d87b"><div class="ttname"><a href="classQgsVectorLayer.html#a450a58921855552f4a6710c995d5d87b">QgsVectorLayer::selectByIds</a></div><div class="ttdeci">void selectByIds(const QgsFeatureIds &amp;ids, SelectBehavior behavior=SetSelection)</div><div class="ttdoc">Selects matching features using a list of feature IDs. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l00480">qgsvectorlayer.cpp:480</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_a172fc4b41ef3642cf0014a2cecd6fb0b"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#a172fc4b41ef3642cf0014a2cecd6fb0b">QgsServerProjectUtils::wmsInfoFormatSia2045</a></div><div class="ttdeci">SERVER_EXPORT bool wmsInfoFormatSia2045(const QgsProject &amp;project)</div><div class="ttdoc">Returns if the info format is SIA20145. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00124">qgsserverprojectutils.cpp:124</a></div></div>
<div class="ttc" id="classQgsFeature_html_a0075d1f9c830d62c8fda6b843c307dd8"><div class="ttname"><a href="classQgsFeature.html#a0075d1f9c830d62c8fda6b843c307dd8">QgsFeature::setAttribute</a></div><div class="ttdeci">bool setAttribute(int field, const QVariant &amp;attr)</div><div class="ttdoc">Set an attribute&amp;#39;s value by field index. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00211">qgsfeature.cpp:211</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a5ac4d9940272bff871854e839df43733"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a5ac4d9940272bff871854e839df43733">QgsWms::QgsWmsRenderContext::updateExtent</a></div><div class="ttdeci">bool updateExtent() const</div><div class="ttdoc">Returns true if the extent has to be updated before the rendering, false otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00231">qgswmsrendercontext.cpp:231</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ae44996056abda846261e89d4266a805b"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805b">QgsWms::QgsWmsParameters::Format</a></div><div class="ttdeci">Format</div><div class="ttdoc">Output format for the response. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00329">qgswmsparameters.h:329</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_aa0902198a531b5054c14a251fbd35110"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#aa0902198a531b5054c14a251fbd35110">QgsWms::QgsWmsParameters::widthAsInt</a></div><div class="ttdeci">int widthAsInt() const</div><div class="ttdoc">Returns WIDTH parameter as an int or its default value if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00715">qgswmsparameters.cpp:715</a></div></div>
<div class="ttc" id="qgsunittypes_8h_html"><div class="ttname"><a href="qgsunittypes_8h.html">qgsunittypes.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_afc62189976b903500393f9c803ce202fa4ab574abf2f98dcbf0293289ac92afce"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa4ab574abf2f98dcbf0293289ac92afce">QgsWms::QgsWmsRenderContext::AddHighlightLayers</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8h_source.html#l00044">qgswmsrendercontext.h:44</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_ab438f9cbc0318da88a6ade60916cdf61"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#ab438f9cbc0318da88a6ade60916cdf61">QgsWms::QgsRenderer::getDxf</a></div><div class="ttdeci">QgsDxfExport getDxf()</div><div class="ttdoc">Returns the map as DXF data. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8cpp_source.html#l00783">qgswmsrenderer.cpp:783</a></div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html_a79949e22a654073dcc4f8d1810f07c5f"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html#a79949e22a654073dcc4f8d1810f07c5f">QgsCoordinateReferenceSystem::mapUnits</a></div><div class="ttdeci">QgsUnitTypes::DistanceUnit mapUnits</div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8h_source.html#l00202">qgscoordinatereferencesystem.h:202</a></div></div>
<div class="ttc" id="classQgsOgcUtils_html_af15c7a61f72fc95c815f7fa4a86caa0b"><div class="ttname"><a href="classQgsOgcUtils.html#af15c7a61f72fc95c815f7fa4a86caa0b">QgsOgcUtils::rectangleToGMLBox</a></div><div class="ttdeci">static QDomElement rectangleToGMLBox(QgsRectangle *box, QDomDocument &amp;doc, int precision=17)</div><div class="ttdoc">Exports the rectangle to GML2 Box. </div><div class="ttdef"><b>Definition:</b> <a href="qgsogcutils_8cpp_source.html#l01046">qgsogcutils.cpp:1046</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a901caf41a4820e6e601fe34df3a4ff9b"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a901caf41a4820e6e601fe34df3a4ff9b">QgsWms::QgsWmsRenderContext::layerGroups</a></div><div class="ttdeci">QMap&lt; QString, QList&lt; QgsMapLayer * &gt; &gt; layerGroups() const</div><div class="ttdoc">Returns a map having layer group names as keys and a list of layers as values. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00536">qgswmsrendercontext.cpp:536</a></div></div>
<div class="ttc" id="classQgsDxfExport_html_a19d61e74baeeb51bb258213e2947f4da"><div class="ttname"><a href="classQgsDxfExport.html#a19d61e74baeeb51bb258213e2947f4da">QgsDxfExport::setSymbologyExport</a></div><div class="ttdeci">void setSymbologyExport(QgsDxfExport::SymbologyExport e)</div><div class="ttdoc">Set symbology export mode. </div><div class="ttdef"><b>Definition:</b> <a href="qgsdxfexport_8h_source.html#l00180">qgsdxfexport.h:180</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_afc62189976b903500393f9c803ce202fa19fa9e68e8cde245de3312dcce5d5066"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa19fa9e68e8cde245de3312dcce5d5066">QgsWms::QgsWmsRenderContext::UseOpacity</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8h_source.html#l00041">qgswmsrendercontext.h:41</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersLayer_html"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersLayer.html">QgsWms::QgsWmsParametersLayer</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00049">qgswmsparameters.h:49</a></div></div>
<div class="ttc" id="classQgsLegendSettings_html_a4c2a694a58487196952744657c94b92a"><div class="ttname"><a href="classQgsLegendSettings.html#a4c2a694a58487196952744657c94b92a">QgsLegendSettings::setMapUnitsPerPixel</a></div><div class="ttdeci">void setMapUnitsPerPixel(double mapUnitsPerPixel)</div><div class="ttdoc">Sets the mmPerMapUnit calculated by mapUnitsPerPixel mostly taken from the map settings. </div><div class="ttdef"><b>Definition:</b> <a href="qgslegendsettings_8cpp_source.html#l00045">qgslegendsettings.cpp:45</a></div></div>
<div class="ttc" id="classQgsRasterLayer_html_aef705cbeb9b8e9e1756d93146323abb5"><div class="ttname"><a href="classQgsRasterLayer.html#aef705cbeb9b8e9e1756d93146323abb5">QgsRasterLayer::renderer</a></div><div class="ttdeci">QgsRasterRenderer * renderer() const</div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterlayer_8h_source.html#l00292">qgsrasterlayer.h:292</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_a9b0dc97b5f9e21fa11eb803a33dfa7d8"><div class="ttname"><a href="classQgsExpressionContextUtils.html#a9b0dc97b5f9e21fa11eb803a33dfa7d8">QgsExpressionContextUtils::projectScope</a></div><div class="ttdeci">static QgsExpressionContextScope * projectScope(const QgsProject *project)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QGIS project. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontextutils_8cpp_source.html#l00229">qgsexpressioncontextutils.cpp:229</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsBadRequestException_html"><div class="ttname"><a href="classQgsWms_1_1QgsBadRequestException.html">QgsWms::QgsBadRequestException</a></div><div class="ttdoc">Exception thrown in case of malformed request. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00213">qgswmsserviceexception.h:213</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_ac44aac25ea00d124a7ba36dc270d0d8c"><div class="ttname"><a href="classQgsMapSettings.html#ac44aac25ea00d124a7ba36dc270d0d8c">QgsMapSettings::layers</a></div><div class="ttdeci">QList&lt; QgsMapLayer * &gt; layers() const</div><div class="ttdoc">Gets list of layers for map rendering The layers are stored in the reverse order of how they are rend...</div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00268">qgsmapsettings.cpp:268</a></div></div>
<div class="ttc" id="qgsogcutils_8h_html"><div class="ttname"><a href="qgsogcutils_8h.html">qgsogcutils.h</a></div></div>
<div class="ttc" id="classQgsFeature_html"><div class="ttname"><a href="classQgsFeature.html">QgsFeature</a></div><div class="ttdoc">The feature class encapsulates a single feature including its id, geometry and a list of field/values...</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00055">qgsfeature.h:55</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a47ce6590bbe09a858ff279ef6b990ce3"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a47ce6590bbe09a858ff279ef6b990ce3">QgsWms::QgsWmsParameters::infoFormat</a></div><div class="ttdeci">Format infoFormat() const</div><div class="ttdoc">Returns infoFormat. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00825">qgswmsparameters.cpp:825</a></div></div>
<div class="ttc" id="structQgsDxfExport_1_1DxfLayer_html"><div class="ttname"><a href="structQgsDxfExport_1_1DxfLayer.html">QgsDxfExport::DxfLayer</a></div><div class="ttdoc">Layers and optional attribute index to split into multiple layers using attribute value as layer name...</div><div class="ttdef"><b>Definition:</b> <a href="qgsdxfexport_8h_source.html#l00063">qgsdxfexport.h:63</a></div></div>
<div class="ttc" id="qgsannotation_8h_html"><div class="ttname"><a href="qgsannotation_8h.html">qgsannotation.h</a></div></div>
<div class="ttc" id="qgswfsgetfeature_8cpp_html_a7ad000982146f8b67e673cdc80a26bec"><div class="ttname"><a href="qgswfsgetfeature_8cpp.html#a7ad000982146f8b67e673cdc80a26bec">crs</a></div><div class="ttdeci">const QgsCoordinateReferenceSystem &amp; crs</div><div class="ttdef"><b>Definition:</b> <a href="qgswfsgetfeature_8cpp_source.html#l00049">qgswfsgetfeature.cpp:49</a></div></div>
<div class="ttc" id="qgswmsutils_8h_html"><div class="ttname"><a href="qgswmsutils_8h.html">qgswmsutils.h</a></div></div>
<div class="ttc" id="classQgsLayerRestorer_html"><div class="ttname"><a href="classQgsLayerRestorer.html">QgsLayerRestorer</a></div><div class="ttdoc">RAII class to restore layer configuration on destruction (opacity, filters, ...) </div><div class="ttdef"><b>Definition:</b> <a href="qgslayerrestorer_8h_source.html#l00035">qgslayerrestorer.h:35</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_a5e10f5468b7f099a0fc274df9427b4a1"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a5e10f5468b7f099a0fc274df9427b4a1">QgsWms::QgsWmsParametersComposerMap::mExtent</a></div><div class="ttdeci">QgsRectangle mExtent</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00082">qgswmsparameters.h:82</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a0b96d590a4255ba9811e537bae206d06"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a0b96d590a4255ba9811e537bae206d06">QgsWms::QgsWmsParameters::transparentAsBool</a></div><div class="ttdeci">bool transparentAsBool() const</div><div class="ttdoc">Returns TRANSPARENT parameter as a bool or its default value if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00922">qgswmsparameters.cpp:922</a></div></div>
<div class="ttc" id="classQgsFeature_html_a331068f619fa9a4b85dee464a6b0f8dd"><div class="ttname"><a href="classQgsFeature.html#a331068f619fa9a4b85dee464a6b0f8dd">QgsFeature::fields</a></div><div class="ttdeci">QgsFields fields</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00066">qgsfeature.h:66</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_aab0dc2dca2b882316c3bb3668dbf4667a504746b6d86b14d7835d00c3dfb0ad87"><div class="ttname"><a href="classQgsFeatureRequest.html#aab0dc2dca2b882316c3bb3668dbf4667a504746b6d86b14d7835d00c3dfb0ad87">QgsFeatureRequest::NoFlags</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8h_source.html#l00077">qgsfeaturerequest.h:77</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a60e72c2f73cb07fdbcdbc2d5068b5d9ca83e149905446b55bd3c4438a586d9abd"><div class="ttname"><a href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca83e149905446b55bd3c4438a586d9abd">QgsWkbTypes::PolygonGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00143">qgswkbtypes.h:143</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4a936d56ef1834d4641bdc61f6c43ec044"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a936d56ef1834d4641bdc61f6c43ec044">QgsWms::QgsServiceException::OGC_LayerNotDefined</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00051">qgswmsserviceexception.h:51</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a8645eb35ce3053a6dc1bc20cee33ebd1"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a8645eb35ce3053a6dc1bc20cee33ebd1">QgsWms::QgsWmsRenderContext::flattenedQueryLayers</a></div><div class="ttdeci">QStringList flattenedQueryLayers() const</div><div class="ttdoc">Returns a list of query layer names where group names are replaced by the names of their layer compon...</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00162">qgswmsrendercontext.cpp:162</a></div></div>
<div class="ttc" id="qgswfsgetfeature_8cpp_html_af4b23433112c7c162bd2bc1825c7847e"><div class="ttname"><a href="qgswfsgetfeature_8cpp.html#af4b23433112c7c162bd2bc1825c7847e">withGeom</a></div><div class="ttdeci">bool withGeom</div><div class="ttdef"><b>Definition:</b> <a href="qgswfsgetfeature_8cpp_source.html#l00055">qgswfsgetfeature.cpp:55</a></div></div>
<div class="ttc" id="classQgsFields_html_a747fd764be826bc9696597b3b79d1fbe"><div class="ttname"><a href="classQgsFields.html#a747fd764be826bc9696597b3b79d1fbe">QgsFields::count</a></div><div class="ttdeci">int count() const</div><div class="ttdoc">Returns number of items. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfields_8cpp_source.html#l00133">qgsfields.cpp:133</a></div></div>
<div class="ttc" id="classQgsLayout_html_a275bb7bb68287bcd28b61e30bf369d82"><div class="ttname"><a href="classQgsLayout.html#a275bb7bb68287bcd28b61e30bf369d82">QgsLayout::renderContext</a></div><div class="ttdeci">QgsLayoutRenderContext &amp; renderContext()</div><div class="ttdoc">Returns a reference to the layout&amp;#39;s render context, which stores information relating to the current ...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00357">qgslayout.cpp:357</a></div></div>
<div class="ttc" id="classQgsRenderContext_html_aa157a5da7d1ee90ecd3bde21941153fb"><div class="ttname"><a href="classQgsRenderContext.html#aa157a5da7d1ee90ecd3bde21941153fb">QgsRenderContext::setExtent</a></div><div class="ttdeci">void setExtent(const QgsRectangle &amp;extent)</div><div class="ttdoc">When rendering a map layer, calling this method sets the &quot;clipping&quot; extent for the layer (in the laye...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrendercontext_8h_source.html#l00362">qgsrendercontext.h:362</a></div></div>
<div class="ttc" id="structQgsLayerTreeModelLegendNode_1_1ItemContext_html_a0b281a181faff334e211b381016dad4c"><div class="ttname"><a href="structQgsLayerTreeModelLegendNode_1_1ItemContext.html#a0b281a181faff334e211b381016dad4c">QgsLayerTreeModelLegendNode::ItemContext::painter</a></div><div class="ttdeci">QPainter * painter</div><div class="ttdoc">Painter. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreemodellegendnode_8h_source.html#l00092">qgslayertreemodellegendnode.h:92</a></div></div>
<div class="ttc" id="classQgsCoordinateTransform_html_aa3b31ab89bfcac52eb7d850680de686a"><div class="ttname"><a href="classQgsCoordinateTransform.html#aa3b31ab89bfcac52eb7d850680de686a">QgsCoordinateTransform::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Returns true if the coordinate transform is valid, ie both the source and destination CRS have been s...</div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatetransform_8cpp_source.html#l00775">qgscoordinatetransform.cpp:775</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersFilter_html_a4fc4fc44d110d192517823f2415de2f3a7dbff13c646a1ba4cc2b5c106c548e2c"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersFilter.html#a4fc4fc44d110d192517823f2415de2f3a7dbff13c646a1ba4cc2b5c106c548e2c">QgsWms::QgsWmsParametersFilter::SQL</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00040">qgswmsparameters.h:40</a></div></div>
<div class="ttc" id="qgsvectordataprovider_8h_html"><div class="ttname"><a href="qgsvectordataprovider_8h.html">qgsvectordataprovider.h</a></div></div>
<div class="ttc" id="classQgsProject_html_a1801847d0eccf25996c6f8d0fee26b64"><div class="ttname"><a href="classQgsProject.html#a1801847d0eccf25996c6f8d0fee26b64">QgsProject::readNumEntry</a></div><div class="ttdeci">int readNumEntry(const QString &amp;scope, const QString &amp;key, int def=0, bool *ok=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l02113">qgsproject.cpp:2113</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1ImageExportSettings_html_a4d00db439bf69dd3e2885ca1cc2c1492"><div class="ttname"><a href="structQgsLayoutExporter_1_1ImageExportSettings.html#a4d00db439bf69dd3e2885ca1cc2c1492">QgsLayoutExporter::ImageExportSettings::pages</a></div><div class="ttdeci">QList&lt; int &gt; pages</div><div class="ttdoc">List of specific pages to export, or an empty list to export all pages. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00189">qgslayoutexporter.h:189</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a5887702048ca791a912ee47776bd7f26"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a5887702048ca791a912ee47776bd7f26">QgsWms::QgsWmsParameters::withMapTip</a></div><div class="ttdeci">bool withMapTip() const</div><div class="ttdoc">withMapTip </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01851">qgswmsparameters.cpp:1851</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a0e316117df7c7a29d635d9970f8711f1"><div class="ttname"><a href="classQgsPalLayerSettings.html#a0e316117df7c7a29d635d9970f8711f1">QgsPalLayerSettings::setFormat</a></div><div class="ttdeci">void setFormat(const QgsTextFormat &amp;format)</div><div class="ttdoc">Sets the label text formatting settings, e.g., font settings, buffer settings, etc. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00924">qgspallabeling.h:924</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_af3ee8eaf56340f2b72bb160b2534a04e"><div class="ttname"><a href="classQgsMapSettings.html#af3ee8eaf56340f2b72bb160b2534a04e">QgsMapSettings::destinationCrs</a></div><div class="ttdeci">QgsCoordinateReferenceSystem destinationCrs() const</div><div class="ttdoc">returns CRS of destination coordinate reference system </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00304">qgsmapsettings.cpp:304</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a1a6526a54c172262b5882f8a08571aee"><div class="ttname"><a href="classQgsMapLayer.html#a1a6526a54c172262b5882f8a08571aee">QgsMapLayer::extent</a></div><div class="ttdeci">virtual QgsRectangle extent() const</div><div class="ttdoc">Returns the extent of the layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l00190">qgsmaplayer.cpp:190</a></div></div>
<div class="ttc" id="classQgsException_html_aae00b1a7dfb1f6b6f9e399365715a2b4"><div class="ttname"><a href="classQgsException.html#aae00b1a7dfb1f6b6f9e399365715a2b4">QgsException::what</a></div><div class="ttdeci">QString what() const</div><div class="ttdef"><b>Definition:</b> <a href="qgsexception_8h_source.html#l00048">qgsexception.h:48</a></div></div>
<div class="ttc" id="structQgsMapRendererJob_1_1Error_html"><div class="ttname"><a href="structQgsMapRendererJob_1_1Error.html">QgsMapRendererJob::Error</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsmaprendererjob_8h_source.html#l00186">qgsmaprendererjob.h:186</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_ae02c2ce003e3cd8e6fe10a837363ff19"><div class="ttname"><a href="classQgsMapSettings.html#ae02c2ce003e3cd8e6fe10a837363ff19">QgsMapSettings::setFlag</a></div><div class="ttdeci">void setFlag(Flag flag, bool on=true)</div><div class="ttdoc">Enable or disable a particular flag (other flags are not affected) </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00328">qgsmapsettings.cpp:328</a></div></div>
<div class="ttc" id="classQgsAnnotation_html"><div class="ttname"><a href="classQgsAnnotation.html">QgsAnnotation</a></div><div class="ttdoc">Abstract base class for annotation items which are drawn over a map. </div><div class="ttdef"><b>Definition:</b> <a href="qgsannotation_8h_source.html#l00049">qgsannotation.h:49</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dbae53388a9d5ca1e2e97b7bc56a19f66f4"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbae53388a9d5ca1e2e97b7bc56a19f66f4">QgsWms::QgsWmsParameter::FORMAT</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00146">qgswmsparameters.h:146</a></div></div>
<div class="ttc" id="classQgsFields_html_ad0fde19705fd2bf82a061ca13e5cf737"><div class="ttname"><a href="classQgsFields.html#ad0fde19705fd2bf82a061ca13e5cf737">QgsFields::at</a></div><div class="ttdeci">QgsField at(int i) const</div><div class="ttdoc">Gets field at particular index (must be in range 0..N-1) </div><div class="ttdef"><b>Definition:</b> <a href="qgsfields_8cpp_source.html#l00163">qgsfields.cpp:163</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a7bc80ab21bd7e83b5107423e883fcc26"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a7bc80ab21bd7e83b5107423e883fcc26">QgsWms::QgsWmsParameters::bbox</a></div><div class="ttdeci">QString bbox() const</div><div class="ttdoc">Returns BBOX if defined or an empty string. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00690">qgswmsparameters.cpp:690</a></div></div>
<div class="ttc" id="classQgsMapSettings_html"><div class="ttname"><a href="classQgsMapSettings.html">QgsMapSettings</a></div><div class="ttdoc">The QgsMapSettings class contains configuration for rendering of the map. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8h_source.html#l00084">qgsmapsettings.h:84</a></div></div>
<div class="ttc" id="classQgsJsonExporter_html_a24a02c2bb3c6f8fbf6d8fd8f6db71b7f"><div class="ttname"><a href="classQgsJsonExporter.html#a24a02c2bb3c6f8fbf6d8fd8f6db71b7f">QgsJsonExporter::setAttributes</a></div><div class="ttdeci">void setAttributes(const QgsAttributeList &amp;attributes)</div><div class="ttdoc">Sets the list of attributes to include in the JSON exports. </div><div class="ttdef"><b>Definition:</b> <a href="qgsjsonutils_8h_source.html#l00165">qgsjsonutils.h:165</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersLayer_html_a99fa0cdbbedbffb18a264d50f87fc27c"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersLayer.html#a99fa0cdbbedbffb18a264d50f87fc27c">QgsWms::QgsWmsParametersLayer::mNickname</a></div><div class="ttdeci">QString mNickname</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00051">qgswmsparameters.h:51</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_ac7ce04c009ac81926b63af4c98bd5c72"><div class="ttname"><a href="classQgsMapLayer.html#ac7ce04c009ac81926b63af4c98bd5c72">QgsMapLayer::styleManager</a></div><div class="ttdeci">QgsMapLayerStyleManager * styleManager() const</div><div class="ttdoc">Gets access to the layer&amp;#39;s style manager. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l01749">qgsmaplayer.cpp:1749</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_af8cb6980633651b865bf88fc4f95c3aa"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#af8cb6980633651b865bf88fc4f95c3aa">QgsWms::QgsRenderer::getMap</a></div><div class="ttdeci">QImage * getMap()</div><div class="ttdoc">Returns the map as an image (or nullptr in case of error). </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8cpp_source.html#l00736">qgswmsrenderer.cpp:736</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_a8ed7f6237fc3256071bdb1741fc725a2"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#a8ed7f6237fc3256071bdb1741fc725a2">QgsServerProjectUtils::wmsFeatureInfoAddWktGeometry</a></div><div class="ttdeci">SERVER_EXPORT bool wmsFeatureInfoAddWktGeometry(const QgsProject &amp;project)</div><div class="ttdoc">Returns if the geometry is displayed as Well Known Text in GetFeatureInfo request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00132">qgsserverprojectutils.cpp:132</a></div></div>
<div class="ttc" id="qgswmsrenderer_8h_html"><div class="ttname"><a href="qgswmsrenderer_8h.html">qgswmsrenderer.h</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a34fe24129dea8620ecf623a60ad7d343"><div class="ttname"><a href="classQgsMapSettings.html#a34fe24129dea8620ecf623a60ad7d343">QgsMapSettings::layerTransform</a></div><div class="ttdeci">QgsCoordinateTransform layerTransform(const QgsMapLayer *layer) const</div><div class="ttdoc">Returns the coordinate transform from layer&amp;#39;s CRS to destination CRS. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00405">qgsmapsettings.cpp:405</a></div></div>
<div class="ttc" id="classQgsRasterIdentifyResult_html"><div class="ttname"><a href="classQgsRasterIdentifyResult.html">QgsRasterIdentifyResult</a></div><div class="ttdoc">Raster identify results container. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasteridentifyresult_8h_source.html#l00030">qgsrasteridentifyresult.h:30</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dba43621e997f287aeb5d306c2686101b07"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba43621e997f287aeb5d306c2686101b07">QgsWms::QgsWmsParameter::J</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00149">qgswmsparameters.h:149</a></div></div>
<div class="ttc" id="classQgsLayout_html_a10bd120a3eee0b381c1dab11a6fade78"><div class="ttname"><a href="classQgsLayout.html#a10bd120a3eee0b381c1dab11a6fade78">QgsLayout::layoutItems</a></div><div class="ttdeci">void layoutItems(QList&lt; T *&gt; &amp;itemList) const</div><div class="ttdoc">Returns a list of layout items of a specific type. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8h_source.html#l00121">qgslayout.h:121</a></div></div>
<div class="ttc" id="porting__processing_8dox_html_ac34f8cede000dff1f5b0b47d22fa9070"><div class="ttname"><a href="porting__processing_8dox.html#ac34f8cede000dff1f5b0b47d22fa9070">c</a></div><div class="ttdeci">As part of the API refactoring and improvements which landed in the Processing API was substantially reworked from the x version This was done in order to allow much of the underlying Processing framework to be ported into c</div><div class="ttdef"><b>Definition:</b> <a href="porting__processing_8dox_source.html#l00001">porting_processing.dox:1</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersFilter_html"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersFilter.html">QgsWms::QgsWmsParametersFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00034">qgswmsparameters.h:34</a></div></div>
<div class="ttc" id="classQgsOWSServerFilterRestorer_html_a47f3afe817b6aee575aa5f3643d43f24"><div class="ttname"><a href="classQgsOWSServerFilterRestorer.html#a47f3afe817b6aee575aa5f3643d43f24">QgsOWSServerFilterRestorer::applyAccessControlLayerFilters</a></div><div class="ttdeci">static void applyAccessControlLayerFilters(const QgsAccessControl *accessControl, QgsMapLayer *mapLayer, QHash&lt; QgsMapLayer *, QString &gt; &amp;originalLayerFilters)</div><div class="ttdoc">Apply filter from AccessControl. </div></div>
<div class="ttc" id="classQgsLayerTreeModel_html"><div class="ttname"><a href="classQgsLayerTreeModel.html">QgsLayerTreeModel</a></div><div class="ttdoc">The QgsLayerTreeModel class is model implementation for Qt item views framework. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreemodel_8h_source.html#l00053">qgslayertreemodel.h:53</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_a32ccd458c0cf1db10d38b9539513cc6e"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#a32ccd458c0cf1db10d38b9539513cc6e">QgsWms::QgsRenderer::HitTest</a></div><div class="ttdeci">QHash&lt; QgsVectorLayer *, SymbolSet &gt; HitTest</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8h_source.html#l00098">qgswmsrenderer.h:98</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4ad48cff839af29ebaa6603a565dd3f171"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4ad48cff839af29ebaa6603a565dd3f171">QgsWms::QgsServiceException::OGC_InvalidFormat</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00049">qgswmsserviceexception.h:49</a></div></div>
<div class="ttc" id="qgsprintlayout_8h_html"><div class="ttname"><a href="qgsprintlayout_8h.html">qgsprintlayout.h</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1ImageExportSettings_html_a5610e405bb45ddff4c2b91d3f1ee1d50"><div class="ttname"><a href="structQgsLayoutExporter_1_1ImageExportSettings.html#a5610e405bb45ddff4c2b91d3f1ee1d50">QgsLayoutExporter::ImageExportSettings::imageSize</a></div><div class="ttdeci">QSize imageSize</div><div class="ttdoc">Manual size in pixels for output image. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00168">qgslayoutexporter.h:168</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a6996d422e75accaa270273d7790d2ffa"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a6996d422e75accaa270273d7790d2ffa">QgsWms::QgsWmsParameters::lineToleranceAsInt</a></div><div class="ttdeci">int lineToleranceAsInt() const</div><div class="ttdoc">Returns FI_LINE_TOLERANCE parameter as an integer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01082">qgswmsparameters.cpp:1082</a></div></div>
<div class="ttc" id="classQgsRasterLayer_html_aa94300f244b4585b7545287c97c21cad"><div class="ttname"><a href="classQgsRasterLayer.html#aa94300f244b4585b7545287c97c21cad">QgsRasterLayer::dataProvider</a></div><div class="ttdeci">QgsRasterDataProvider * dataProvider() override</div><div class="ttdoc">Returns the layer&amp;#39;s data provider, it may be nullptr. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterlayer_8cpp_source.html#l00231">qgsrasterlayer.cpp:231</a></div></div>
<div class="ttc" id="qgsrasterrenderer_8h_html"><div class="ttname"><a href="qgsrasterrenderer_8h.html">qgsrasterrenderer.h</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a7d8c0bc9cdbb0e4159a8071205790f9a"><div class="ttname"><a href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9a">QgsPalLayerSettings::Property</a></div><div class="ttdeci">Property</div><div class="ttdoc">Data definable properties. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00324">qgspallabeling.h:324</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a695750e32e31ef5b07851a10f8ac2710"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a695750e32e31ef5b07851a10f8ac2710">QgsWms::QgsWmsRenderContext::isValidWidthHeight</a></div><div class="ttdeci">bool isValidWidthHeight() const</div><div class="ttdoc">Returns true if width and height are valid according to the maximum values defined within the project...</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00567">qgswmsrendercontext.cpp:567</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_aa7c168ddbcaaaa88eafb92340880e773"><div class="ttname"><a href="classQgsFeatureRequest.html#aa7c168ddbcaaaa88eafb92340880e773">QgsFeatureRequest::setFilterExpression</a></div><div class="ttdeci">QgsFeatureRequest &amp; setFilterExpression(const QString &amp;expression)</div><div class="ttdoc">Set the filter expression. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8cpp_source.html#l00125">qgsfeaturerequest.cpp:125</a></div></div>
<div class="ttc" id="classQgsRasterIdentifyResult_html_a5d9daec616f3440b0a47f651fd9fde02"><div class="ttname"><a href="classQgsRasterIdentifyResult.html#a5d9daec616f3440b0a47f651fd9fde02">QgsRasterIdentifyResult::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Returns true if valid. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasteridentifyresult_8h_source.html#l00055">qgsrasteridentifyresult.h:55</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a740b1fdeafefc378ffb58d0bb7c570ee"><div class="ttname"><a href="classQgsMapSettings.html#a740b1fdeafefc378ffb58d0bb7c570ee">QgsMapSettings::extent</a></div><div class="ttdeci">QgsRectangle extent() const</div><div class="ttdoc">Returns geographical coordinates of the rectangle that should be rendered. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00073">qgsmapsettings.cpp:73</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ae44996056abda846261e89d4266a805ba4342cc828b64c56f42a4565b2d5140b9"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba4342cc828b64c56f42a4565b2d5140b9">QgsWms::QgsWmsParameters::SVG</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00334">qgswmsparameters.h:334</a></div></div>
<div class="ttc" id="qgsvectorlayerfeaturecounter_8h_html"><div class="ttname"><a href="qgsvectorlayerfeaturecounter_8h.html">qgsvectorlayerfeaturecounter.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_abdc85bfeb7b8990eb22d6d2cb8843a3a"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#abdc85bfeb7b8990eb22d6d2cb8843a3a">QgsWms::QgsWmsRenderContext::isValidLayer</a></div><div class="ttdeci">bool isValidLayer(const QString &amp;nickname) const</div><div class="ttdoc">Returns true if the layer has to be rendered, false otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00274">qgswmsrendercontext.cpp:274</a></div></div>
<div class="ttc" id="classQgsLayoutItemMap_html_ad79d8d56572e594b41ae72b3c794c486"><div class="ttname"><a href="classQgsLayoutItemMap.html#ad79d8d56572e594b41ae72b3c794c486">QgsLayoutItemMap::layers</a></div><div class="ttdeci">QList&lt; QgsMapLayer * &gt; layers() const</div><div class="ttdoc">Returns the stored layer set. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitemmap_8cpp_source.html#l00276">qgslayoutitemmap.cpp:276</a></div></div>
<div class="ttc" id="classQgsFields_html_a4d243eff35b31845588ebdce08322b44"><div class="ttname"><a href="classQgsFields.html#a4d243eff35b31845588ebdce08322b44">QgsFields::indexFromName</a></div><div class="ttdeci">int indexFromName(const QString &amp;fieldName) const</div><div class="ttdoc">Gets the field index from the field name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfields_8cpp_source.html#l00202">qgsfields.cpp:202</a></div></div>
<div class="ttc" id="classQgsLayoutItemMap_html"><div class="ttname"><a href="classQgsLayoutItemMap.html">QgsLayoutItemMap</a></div><div class="ttdoc">Layout graphical items for displaying a map. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitemmap_8h_source.html#l00036">qgslayoutitemmap.h:36</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_ae41d3e17953076f4bc3a4329535f4e37"><div class="ttname"><a href="classQgsMapSettings.html#ae41d3e17953076f4bc3a4329535f4e37">QgsMapSettings::setOutputSize</a></div><div class="ttdeci">void setOutputSize(QSize size)</div><div class="ttdoc">Sets the size of the resulting map image. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00226">qgsmapsettings.cpp:226</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a1a82e718bbc6eb59324c2af3d0f7f1d7"><div class="ttname"><a href="classQgsPalLayerSettings.html#a1a82e718bbc6eb59324c2af3d0f7f1d7">QgsPalLayerSettings::displayAll</a></div><div class="ttdeci">bool displayAll</div><div class="ttdoc">If true, all features will be labelled even when overlaps occur. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00782">qgspallabeling.h:782</a></div></div>
<div class="ttc" id="classQgsTextFormat_html_a0975c3e674363a46934ee4c70020b4c9"><div class="ttname"><a href="classQgsTextFormat.html#a0975c3e674363a46934ee4c70020b4c9">QgsTextFormat::setSize</a></div><div class="ttdeci">void setSize(double size)</div><div class="ttdoc">Sets the size for rendered text. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8cpp_source.html#l01326">qgstextrenderer.cpp:1326</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_afba36ac63b06dd2659710f4f3cd58936"><div class="ttname"><a href="classQgsExpressionContextUtils.html#afba36ac63b06dd2659710f4f3cd58936">QgsExpressionContextUtils::globalScope</a></div><div class="ttdeci">static QgsExpressionContextScope * globalScope()</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to the global QGIS context...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontextutils_8cpp_source.html#l00032">qgsexpressioncontextutils.cpp:32</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a119d56587a60d0ecb4890de4af2b9c09"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a119d56587a60d0ecb4890de4af2b9c09">QgsWms::QgsWmsParameters::x</a></div><div class="ttdeci">QString x() const</div><div class="ttdoc">Returns X parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00882">qgswmsparameters.cpp:882</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_aaf8473f8fc3bf62aa55b0d0331897be8"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#aaf8473f8fc3bf62aa55b0d0331897be8">QgsWms::QgsWmsParameters::layoutParameter</a></div><div class="ttdeci">QString layoutParameter(const QString &amp;id, bool &amp;ok) const</div><div class="ttdoc">Returns a layout parameter thanks to its id. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01230">qgswmsparameters.cpp:1230</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a3810719f044f4804c620be5bba5f270f"><div class="ttname"><a href="classQgsVectorLayer.html#a3810719f044f4804c620be5bba5f270f">QgsVectorLayer::fields</a></div><div class="ttdeci">QgsFields fields() const FINAL</div><div class="ttdoc">Returns the list of fields of this layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l02881">qgsvectorlayer.cpp:2881</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4a1798a8b65c9b610c637911cfc1601b31"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a1798a8b65c9b610c637911cfc1601b31">QgsWms::QgsServiceException::OGC_InvalidCRS</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00059">qgswmsserviceexception.h:59</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_ae35b256b61b5c9c0917a49c98955734d"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#ae35b256b61b5c9c0917a49c98955734d">QgsServerProjectUtils::wmsMaxAtlasFeatures</a></div><div class="ttdeci">SERVER_EXPORT int wmsMaxAtlasFeatures(const QgsProject &amp;project)</div><div class="ttdoc">Returns the maximum number of atlas features which can be printed in a request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00114">qgsserverprojectutils.cpp:114</a></div></div>
<div class="ttc" id="qgsfeatureid_8h_html_a7489d935d2115a6dc09867363f1c3e63"><div class="ttname"><a href="qgsfeatureid_8h.html#a7489d935d2115a6dc09867363f1c3e63">STRING_TO_FID</a></div><div class="ttdeci">#define STRING_TO_FID(str)</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeatureid_8h_source.html#l00031">qgsfeatureid.h:31</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a81b1b40fe9114ae027af56bc1442fda9"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a81b1b40fe9114ae027af56bc1442fda9">QgsWms::QgsWmsRenderContext::setScaleDenominator</a></div><div class="ttdeci">void setScaleDenominator(double scaleDenominator)</div><div class="ttdoc">Sets a custom scale denominator. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00225">qgswmsrendercontext.cpp:225</a></div></div>
<div class="ttc" id="classQgsJsonUtils_html_a46e34523127b644a7c462080f4e83d6c"><div class="ttname"><a href="classQgsJsonUtils.html#a46e34523127b644a7c462080f4e83d6c">QgsJsonUtils::encodeValue</a></div><div class="ttdeci">static QString encodeValue(const QVariant &amp;value)</div><div class="ttdoc">Encodes a value to a JSON string representation, adding appropriate quotations and escaping where req...</div><div class="ttdef"><b>Definition:</b> <a href="qgsjsonutils_8cpp_source.html#l00255">qgsjsonutils.cpp:255</a></div></div>
<div class="ttc" id="classQgsServerParameterDefinition_html_a2e1dbe1f7644a9cc48ca8cf281a30d27"><div class="ttname"><a href="classQgsServerParameterDefinition.html#a2e1dbe1f7644a9cc48ca8cf281a30d27">QgsServerParameterDefinition::mValue</a></div><div class="ttdeci">QVariant mValue</div><div class="ttdef"><b>Definition:</b> <a href="qgsserverparameters_8h_source.html#l00165">qgsserverparameters.h:165</a></div></div>
<div class="ttc" id="classQgsLayerTree_html"><div class="ttname"><a href="classQgsLayerTree.html">QgsLayerTree</a></div><div class="ttdoc">Namespace with helper functions for layer tree operations. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertree_8h_source.html#l00032">qgslayertree.h:32</a></div></div>
<div class="ttc" id="classQgsLayoutMeasurement_html"><div class="ttname"><a href="classQgsLayoutMeasurement.html">QgsLayoutMeasurement</a></div><div class="ttdoc">This class provides a method of storing measurements for use in QGIS layouts using a variety of diffe...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutmeasurement_8h_source.html#l00033">qgslayoutmeasurement.h:33</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ad05e4d241308c269bbcc113c90f8cdd0"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ad05e4d241308c269bbcc113c90f8cdd0">QgsWms::QgsWmsParameters::crs</a></div><div class="ttdeci">QString crs() const</div><div class="ttdoc">Returns CRS or an empty string if none is defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00667">qgswmsparameters.cpp:667</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_a40af446b6e1404a33101c3f326fc55cc"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#a40af446b6e1404a33101c3f326fc55cc">QgsServerProjectUtils::wmsFeatureInfoDocumentElementNs</a></div><div class="ttdeci">SERVER_EXPORT QString wmsFeatureInfoDocumentElementNs(const QgsProject &amp;project)</div><div class="ttdoc">Returns the document element namespace for XML GetFeatureInfo request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00158">qgsserverprojectutils.cpp:158</a></div></div>
<div class="ttc" id="classQgsRectangle_html_ac5d660b2ad11bf1e1db7f61e03e12ba6"><div class="ttname"><a href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">QgsRectangle::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div><div class="ttdoc">Returns true if the rectangle is empty. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00426">qgsrectangle.h:426</a></div></div>
<div class="ttc" id="classQgsRenderContext_html_aea7e08e4ded5eb3196b90134a06460b0"><div class="ttname"><a href="classQgsRenderContext.html#aea7e08e4ded5eb3196b90134a06460b0">QgsRenderContext::extent</a></div><div class="ttdeci">const QgsRectangle &amp; extent() const</div><div class="ttdoc">When rendering a map layer, calling this method returns the &quot;clipping&quot; extent for the layer (in the l...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrendercontext_8h_source.html#l00238">qgsrendercontext.h:238</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a60e72c2f73cb07fdbcdbc2d5068b5d9ca2407075c945a7eadf4289316a8d0a79b"><div class="ttname"><a href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca2407075c945a7eadf4289316a8d0a79b">QgsWkbTypes::PointGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00141">qgswkbtypes.h:141</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4af5737467adc19cc6b182b282da1ffba0"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4af5737467adc19cc6b182b282da1ffba0">QgsWms::QgsServiceException::QGIS_MissingParameterValue</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00061">qgswmsserviceexception.h:61</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dbad83c3ded9743edd9c119c52ce0886bfe"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbad83c3ded9743edd9c119c52ce0886bfe">QgsWms::QgsWmsParameter::CRS</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00108">qgswmsparameters.h:108</a></div></div>
<div class="ttc" id="qgslayoutframe_8h_html"><div class="ttname"><a href="qgslayoutframe_8h.html">qgslayoutframe.h</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_adb432fe846c0ca47321636f606128b99"><div class="ttname"><a href="classQgsRasterInterface.html#adb432fe846c0ca47321636f606128b99">QgsRasterInterface::capabilities</a></div><div class="ttdeci">virtual int capabilities() const</div><div class="ttdoc">Returns a bitmask containing the supported capabilities. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00205">qgsrasterinterface.h:205</a></div></div>
<div class="ttc" id="classQgsDataProvider_html_a390a2d77b871763209396167d5558d18"><div class="ttname"><a href="classQgsDataProvider.html#a390a2d77b871763209396167d5558d18">QgsDataProvider::crs</a></div><div class="ttdeci">virtual QgsCoordinateReferenceSystem crs() const =0</div><div class="ttdoc">Returns the coordinate system for the data source. </div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1PdfExportSettings_html_aa1b934b6dbc3af4bb268730f33498680"><div class="ttname"><a href="structQgsLayoutExporter_1_1PdfExportSettings.html#aa1b934b6dbc3af4bb268730f33498680">QgsLayoutExporter::PdfExportSettings::dpi</a></div><div class="ttdeci">double dpi</div><div class="ttdoc">Resolution to export layout at. If dpi &lt;= 0 the default layout dpi will be used. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00250">qgslayoutexporter.h:250</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a4664080317260681ed15259f0690a0e0"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a4664080317260681ed15259f0690a0e0">QgsWms::QgsWmsParameters::filterGeom</a></div><div class="ttdeci">QString filterGeom() const</div><div class="ttdoc">Returns the filter geometry found in FILTER_GEOM parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01369">qgswmsparameters.cpp:1369</a></div></div>
<div class="ttc" id="classQgsLayout_html_a335b0864da1587dfb7f9f903d58c02d6"><div class="ttname"><a href="classQgsLayout.html#a335b0864da1587dfb7f9f903d58c02d6">QgsLayout::pageCollection</a></div><div class="ttdeci">QgsLayoutPageCollection * pageCollection()</div><div class="ttdoc">Returns a pointer to the layout&amp;#39;s page collection, which stores and manages page items in the layout...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00457">qgslayout.cpp:457</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a24e262c80b54fc44e6bdb90ca4b62020"><div class="ttname"><a href="classQgsMapSettings.html#a24e262c80b54fc44e6bdb90ca4b62020">QgsMapSettings::scale</a></div><div class="ttdeci">double scale() const</div><div class="ttdoc">Returns the calculated map scale. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00382">qgsmapsettings.cpp:382</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersHighlightLayer_html"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersHighlightLayer.html">QgsWms::QgsWmsParametersHighlightLayer</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00064">qgswmsparameters.h:64</a></div></div>
<div class="ttc" id="qgswfsgetfeature_8cpp_html_a91798216200b925186e1bf0e7fcb201b"><div class="ttname"><a href="qgswfsgetfeature_8cpp.html#a91798216200b925186e1bf0e7fcb201b">typeName</a></div><div class="ttdeci">const QString &amp; typeName</div><div class="ttdef"><b>Definition:</b> <a href="qgswfsgetfeature_8cpp_source.html#l00053">qgswfsgetfeature.cpp:53</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ae44996056abda846261e89d4266a805ba6e2e8a53e24a204528aed6ea872c472e"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba6e2e8a53e24a204528aed6ea872c472e">QgsWms::QgsWmsParameters::PNG</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00333">qgswmsparameters.h:333</a></div></div>
<div class="ttc" id="classQgsProjectVersion_html"><div class="ttname"><a href="classQgsProjectVersion.html">QgsProjectVersion</a></div><div class="ttdoc">A class to describe the version of a project. </div><div class="ttdef"><b>Definition:</b> <a href="qgsprojectversion_8h_source.html#l00032">qgsprojectversion.h:32</a></div></div>
<div class="ttc" id="classQgsFeature_html_a4d705310b40a69d0b4aefe9515229455"><div class="ttname"><a href="classQgsFeature.html#a4d705310b40a69d0b4aefe9515229455">QgsFeature::initAttributes</a></div><div class="ttdeci">void initAttributes(int fieldCount)</div><div class="ttdoc">Initialize this feature with the given number of fields. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00202">qgsfeature.cpp:202</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a7f80945a6f9149707a29d16706b3bafd"><div class="ttname"><a href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">QgsRectangle::width</a></div><div class="ttdeci">double width() const</div><div class="ttdoc">Returns the width of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00202">qgsrectangle.h:202</a></div></div>
<div class="ttc" id="qgis_8h_html_a3959144cd0579312fd39fd1bed94743b"><div class="ttname"><a href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a></div><div class="ttdeci">QString qgsDoubleToString(double a, int precision=17)</div><div class="ttdoc">Returns a string representation of a double. </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00225">qgis.h:225</a></div></div>
<div class="ttc" id="classQgis_html_a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b"><div class="ttname"><a href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a></div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00068">qgis.h:68</a></div></div>
<div class="ttc" id="classQgsExpressionContext_html"><div class="ttname"><a href="classQgsExpressionContext.html">QgsExpressionContext</a></div><div class="ttdoc">Expression contexts are used to encapsulate the parameters around which a QgsExpression should be eva...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontext_8h_source.html#l00371">qgsexpressioncontext.h:371</a></div></div>
<div class="ttc" id="classQgsLegendSettings_html_a2e7e7528a80d1a0e0d059aebbbf68c8b"><div class="ttname"><a href="classQgsLegendSettings.html#a2e7e7528a80d1a0e0d059aebbbf68c8b">QgsLegendSettings::setMapScale</a></div><div class="ttdeci">void setMapScale(double scale)</div><div class="ttdoc">Sets the legend map scale. </div><div class="ttdef"><b>Definition:</b> <a href="qgslegendsettings_8h_source.html#l00197">qgslegendsettings.h:197</a></div></div>
<div class="ttc" id="classQgsLayerTreeNode_html_aa29249808413d2442f212193be6a2327"><div class="ttname"><a href="classQgsLayerTreeNode.html#aa29249808413d2442f212193be6a2327">QgsLayerTreeNode::parent</a></div><div class="ttdeci">QgsLayerTreeNode * parent()</div><div class="ttdoc">Gets pointer to the parent. If parent is nullptr, the node is a root node. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreenode_8h_source.html#l00108">qgslayertreenode.h:108</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_abb96b3ba9f9f7cb36d82b65cdea01ff4"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#abb96b3ba9f9f7cb36d82b65cdea01ff4">QgsWms::QgsWmsParameters::infoFormatVersion</a></div><div class="ttdeci">int infoFormatVersion() const</div><div class="ttdoc">Returns the infoFormat version for GML. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00850">qgswmsparameters.cpp:850</a></div></div>
<div class="ttc" id="classQgsMessageLog_html_a08b7139ea06e6c5f12bf3b060d6960d5"><div class="ttname"><a href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a></div><div class="ttdeci">static void logMessage(const QString &amp;message, const QString &amp;tag=QString(), Qgis::MessageLevel level=Qgis::Warning, bool notifyUser=true)</div><div class="ttdoc">Adds a message to the log instance (and creates it if necessary). </div><div class="ttdef"><b>Definition:</b> <a href="qgsmessagelog_8cpp_source.html#l00027">qgsmessagelog.cpp:27</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1PdfExportSettings_html_a437c1bbd1c1b980dc8f729ce1e84b18a"><div class="ttname"><a href="structQgsLayoutExporter_1_1PdfExportSettings.html#a437c1bbd1c1b980dc8f729ce1e84b18a">QgsLayoutExporter::PdfExportSettings::rasterizeWholeImage</a></div><div class="ttdeci">bool rasterizeWholeImage</div><div class="ttdoc">Set to true to force whole layout to be rasterized while exporting. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00257">qgslayoutexporter.h:257</a></div></div>
<div class="ttc" id="qgsmessagelog_8h_html"><div class="ttname"><a href="qgsmessagelog_8h.html">qgsmessagelog.h</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a6ac140b933184ef6740e5aeaac89e25c"><div class="ttname"><a href="classQgsMapSettings.html#a6ac140b933184ef6740e5aeaac89e25c">QgsMapSettings::mapUnitsPerPixel</a></div><div class="ttdeci">double mapUnitsPerPixel() const</div><div class="ttdoc">Returns the distance in geographical coordinates that equals to one pixel in the map. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00377">qgsmapsettings.cpp:377</a></div></div>
<div class="ttc" id="classQgsRasterLayer_html_aa760dd6ec4dcb758d0f8c8084aa716d0"><div class="ttname"><a href="classQgsRasterLayer.html#aa760dd6ec4dcb758d0f8c8084aa716d0">QgsRasterLayer::bandName</a></div><div class="ttdeci">QString bandName(int bandNoInt) const</div><div class="ttdoc">Returns the name of a band given its number. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterlayer_8cpp_source.html#l00221">qgsrasterlayer.cpp:221</a></div></div>
<div class="ttc" id="classQgsPointXY_html_a30cab144736825771b8d79366058fcc7"><div class="ttname"><a href="classQgsPointXY.html#a30cab144736825771b8d79366058fcc7">QgsPointXY::setY</a></div><div class="ttdeci">void setY(double y)</div><div class="ttdoc">Sets the y value of the point. </div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00113">qgspointxy.h:113</a></div></div>
<div class="ttc" id="classQgsLayoutAtlas_html"><div class="ttname"><a href="classQgsLayoutAtlas.html">QgsLayoutAtlas</a></div><div class="ttdoc">Class used to render QgsLayout as an atlas, by iterating over the features from an associated vector ...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutatlas_8h_source.html#l00040">qgslayoutatlas.h:40</a></div></div>
<div class="ttc" id="qgsfeatureiterator_8h_html"><div class="ttname"><a href="qgsfeatureiterator_8h.html">qgsfeatureiterator.h</a></div></div>
<div class="ttc" id="classQgsLegendSettings_html"><div class="ttname"><a href="classQgsLegendSettings.html">QgsLegendSettings</a></div><div class="ttdoc">The QgsLegendSettings class stores the appearance and layout settings for legend drawing with QgsLege...</div><div class="ttdef"><b>Definition:</b> <a href="qgslegendsettings_8h_source.html#l00038">qgslegendsettings.h:38</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_a4d3ad02d2653d4b4fd366bcf366ff33f"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#a4d3ad02d2653d4b4fd366bcf366ff33f">QgsServerProjectUtils::wmsFeatureInfoSegmentizeWktGeometry</a></div><div class="ttdeci">SERVER_EXPORT bool wmsFeatureInfoSegmentizeWktGeometry(const QgsProject &amp;project)</div><div class="ttdoc">Returns if the geometry has to be segmentize in GetFeatureInfo request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00140">qgsserverprojectutils.cpp:140</a></div></div>
<div class="ttc" id="classQgsTextBufferSettings_html_a9c8dc7f774440867c55a3ad1d0bb07af"><div class="ttname"><a href="classQgsTextBufferSettings.html#a9c8dc7f774440867c55a3ad1d0bb07af">QgsTextBufferSettings::setEnabled</a></div><div class="ttdeci">void setEnabled(bool enabled)</div><div class="ttdoc">Sets whether the text buffer will be drawn. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8cpp_source.html#l00092">qgstextrenderer.cpp:92</a></div></div>
<div class="ttc" id="classQgsRenderContext_html_acb1f00872cd78053f355cfe39208af32"><div class="ttname"><a href="classQgsRenderContext.html#acb1f00872cd78053f355cfe39208af32">QgsRenderContext::fromQPainter</a></div><div class="ttdeci">static QgsRenderContext fromQPainter(QPainter *painter)</div><div class="ttdoc">Creates a default render context given a pixel based QPainter destination. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrendercontext_8cpp_source.html#l00098">qgsrendercontext.cpp:98</a></div></div>
<div class="ttc" id="classQgsFeatureFilter_html_a0a3f52d76c20af72c719eef4592b68e8"><div class="ttname"><a href="classQgsFeatureFilter.html#a0a3f52d76c20af72c719eef4592b68e8">QgsFeatureFilter::setFilter</a></div><div class="ttdeci">void setFilter(const QgsVectorLayer *layer, const QgsExpression &amp;expression)</div><div class="ttdoc">Set a filter for the given layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturefilter_8cpp_source.html#l00039">qgsfeaturefilter.cpp:39</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a7d8c0bc9cdbb0e4159a8071205790f9aa3ad1ca33ed0d27133f4dea2c6b8a47cd"><div class="ttname"><a href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9aa3ad1ca33ed0d27133f4dea2c6b8a47cd">QgsPalLayerSettings::Hali</a></div><div class="ttdoc">Horizontal alignment for data defined label position (Left, Center, Right) </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00416">qgspallabeling.h:416</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a5d449d8e9cb89e5d453c6e33fe1c66cca1f573db8056342bdd9ac382bcf14adf9"><div class="ttname"><a href="classQgsPalLayerSettings.html#a5d449d8e9cb89e5d453c6e33fe1c66cca1f573db8056342bdd9ac382bcf14adf9">QgsPalLayerSettings::AroundPoint</a></div><div class="ttdoc">Arranges candidates in a circle around a point (or centroid of a polygon). Applies to point or polygo...</div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00209">qgspallabeling.h:209</a></div></div>
<div class="ttc" id="classQgsEditorWidgetSetup_html_a2ee7059c72600fba45f255a377fc5359"><div class="ttname"><a href="classQgsEditorWidgetSetup.html#a2ee7059c72600fba45f255a377fc5359">QgsEditorWidgetSetup::type</a></div><div class="ttdeci">QString type() const</div><div class="ttdef"><b>Definition:</b> <a href="qgseditorwidgetsetup_8h_source.html#l00046">qgseditorwidgetsetup.h:46</a></div></div>
<div class="ttc" id="qgsdxfexport_8h_html"><div class="ttname"><a href="qgsdxfexport_8h.html">qgsdxfexport.h</a></div></div>
<div class="ttc" id="classQgsTextFormat_html_a083355ffc5f4f46c98d2ac8aebeecf6a"><div class="ttname"><a href="classQgsTextFormat.html#a083355ffc5f4f46c98d2ac8aebeecf6a">QgsTextFormat::setColor</a></div><div class="ttdeci">void setColor(const QColor &amp;color)</div><div class="ttdoc">Sets the color that text will be rendered in. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8cpp_source.html#l01336">qgstextrenderer.cpp:1336</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ae44996056abda846261e89d4266a805ba453ea312f6600d5c4285cd3c5e1f669d"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba453ea312f6600d5c4285cd3c5e1f669d">QgsWms::QgsWmsParameters::PDF</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00335">qgswmsparameters.h:335</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html"><div class="ttname"><a href="classQgsFeatureRequest.html">QgsFeatureRequest</a></div><div class="ttdoc">This class wraps a request for features to a vector layer (or directly its vector data provider)...</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8h_source.html#l00072">qgsfeaturerequest.h:72</a></div></div>
<div class="ttc" id="classQgsLayoutRenderContext_html_a03fc483b86406833e652dcc6e1c4c96d"><div class="ttname"><a href="classQgsLayoutRenderContext.html#a03fc483b86406833e652dcc6e1c4c96d">QgsLayoutRenderContext::setSelectionColor</a></div><div class="ttdeci">void setSelectionColor(const QColor &amp;color)</div><div class="ttdoc">Sets color that is used for drawing of selected vector features. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutrendercontext_8h_source.html#l00114">qgslayoutrendercontext.h:114</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_ad9db4259be1140760780608413792098"><div class="ttname"><a href="classQgsVectorLayer.html#ad9db4259be1140760780608413792098">QgsVectorLayer::primaryKeyAttributes</a></div><div class="ttdeci">QgsAttributeList primaryKeyAttributes() const</div><div class="ttdoc">Returns the list of attributes which make up the layer&amp;#39;s primary keys. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l02886">qgsvectorlayer.cpp:2886</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_ad961759c6807c70a6847c16fc8a615b8"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#ad961759c6807c70a6847c16fc8a615b8">QgsWms::QgsWmsParametersComposerMap::mHighlightLayers</a></div><div class="ttdeci">QList&lt; QgsWmsParametersHighlightLayer &gt; mHighlightLayers</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00089">qgswmsparameters.h:89</a></div></div>
<div class="ttc" id="classQgsLayout_html_a10ec1871a7fc8085be884f3b841ffb0c"><div class="ttname"><a href="classQgsLayout.html#a10ec1871a7fc8085be884f3b841ffb0c">QgsLayout::removeMultiFrame</a></div><div class="ttdeci">void removeMultiFrame(QgsLayoutMultiFrame *multiFrame)</div><div class="ttdoc">Removes a multiFrame from the layout (but does not delete it). </div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00579">qgslayout.cpp:579</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a82752c93ea29f4789e2973ef2090b9e7"><div class="ttname"><a href="classQgsVectorLayer.html#a82752c93ea29f4789e2973ef2090b9e7">QgsVectorLayer::subsetString</a></div><div class="ttdeci">QString subsetString</div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8h_source.html#l00366">qgsvectorlayer.h:366</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dba7153196e3c07752ed7dbcf8b162d224f"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba7153196e3c07752ed7dbcf8b162d224f">QgsWms::QgsWmsParameter::QUERY_LAYERS</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00130">qgswmsparameters.h:130</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_aff23c6b25cb0b69d472eeae8ba38647f"><div class="ttname"><a href="classQgsFeatureRequest.html#aff23c6b25cb0b69d472eeae8ba38647f">QgsFeatureRequest::setFilterRect</a></div><div class="ttdeci">QgsFeatureRequest &amp; setFilterRect(const QgsRectangle &amp;rectangle)</div><div class="ttdoc">Sets the rectangle from which features will be taken. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8cpp_source.html#l00093">qgsfeaturerequest.cpp:93</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a3760f8ae782f149de89ad1cd035f2680"><div class="ttname"><a href="classQgsMapSettings.html#a3760f8ae782f149de89ad1cd035f2680">QgsMapSettings::layerExtentToOutputExtent</a></div><div class="ttdeci">QgsRectangle layerExtentToOutputExtent(const QgsMapLayer *layer, QgsRectangle extent) const</div><div class="ttdoc">transform bounding box from layer&amp;#39;s CRS to output CRS </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00419">qgsmapsettings.cpp:419</a></div></div>
<div class="ttc" id="qgsmaplayer_8h_html"><div class="ttname"><a href="qgsmaplayer_8h.html">qgsmaplayer.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a4770e652cb6bb5c8cddeb1cd0030cc3d"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a4770e652cb6bb5c8cddeb1cd0030cc3d">QgsWms::QgsWmsParameters::composerTemplate</a></div><div class="ttdeci">QString composerTemplate() const</div><div class="ttdoc">Returns TEMPLATE parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01607">qgswmsparameters.cpp:1607</a></div></div>
<div class="ttc" id="classQgsFields_html_a3b0f9a92ff8cdbcdea3935f2d81ea5a0"><div class="ttname"><a href="classQgsFields.html#a3b0f9a92ff8cdbcdea3935f2d81ea5a0">QgsFields::append</a></div><div class="ttdeci">bool append(const QgsField &amp;field, FieldOrigin origin=OriginProvider, int originIndex=-1)</div><div class="ttdoc">Appends a field. The field must have unique name, otherwise it is rejected (returns false) ...</div><div class="ttdef"><b>Definition:</b> <a href="qgsfields_8cpp_source.html#l00059">qgsfields.cpp:59</a></div></div>
<div class="ttc" id="classQgsGeometry_html_afec44447afcd6be7f87cde707bce1152"><div class="ttname"><a href="classQgsGeometry.html#afec44447afcd6be7f87cde707bce1152">QgsGeometry::isNull</a></div><div class="ttdeci">bool isNull</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8h_source.html#l00114">qgsgeometry.h:114</a></div></div>
<div class="ttc" id="qgsfieldformatter_8h_html"><div class="ttname"><a href="qgsfieldformatter_8h.html">qgsfieldformatter.h</a></div></div>
<div class="ttc" id="qgsexception_8h_html"><div class="ttname"><a href="qgsexception_8h.html">qgsexception.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a29f3afc2232199b55d62f0c232055bd3"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a29f3afc2232199b55d62f0c232055bd3">QgsWms::QgsWmsParameters::versionAsNumber</a></div><div class="ttdeci">QgsProjectVersion versionAsNumber() const</div><div class="ttdoc">Returns VERSION parameter if defined or its default value. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00750">qgswmsparameters.cpp:750</a></div></div>
<div class="ttc" id="qgsserverprojectutils_8h_html"><div class="ttname"><a href="qgsserverprojectutils_8h.html">qgsserverprojectutils.h</a></div></div>
<div class="ttc" id="structQgsLayerTreeModelLegendNode_1_1ItemContext_html"><div class="ttname"><a href="structQgsLayerTreeModelLegendNode_1_1ItemContext.html">QgsLayerTreeModelLegendNode::ItemContext</a></div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreemodellegendnode_8h_source.html#l00087">qgslayertreemodellegendnode.h:87</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_afd293fb4109344c0f1a4b9bba596f529"><div class="ttname"><a href="classQgsVectorLayer.html#afd293fb4109344c0f1a4b9bba596f529">QgsVectorLayer::renderer</a></div><div class="ttdeci">QgsFeatureRenderer * renderer()</div><div class="ttdoc">Returns renderer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8h_source.html#l00794">qgsvectorlayer.h:794</a></div></div>
<div class="ttc" id="classQgsLayoutExporter_html_a06259d4d89f4ecfc996e07d5c0846203"><div class="ttname"><a href="classQgsLayoutExporter.html#a06259d4d89f4ecfc996e07d5c0846203">QgsLayoutExporter::exportToSvg</a></div><div class="ttdeci">ExportResult exportToSvg(const QString &amp;filePath, const QgsLayoutExporter::SvgExportSettings &amp;settings)</div><div class="ttdoc">Exports the layout as an SVG to the filePath, using the specified export settings. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8cpp_source.html#l00779">qgslayoutexporter.cpp:779</a></div></div>
<div class="ttc" id="group__core_html_ggafbd92a77d43d50b374d3d022ec71d30ca4bd4dfc6131d926f44355ecd5a6da56e"><div class="ttname"><a href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30ca4bd4dfc6131d926f44355ecd5a6da56e">QgsMapLayerType::RasterLayer</a></div></div>
<div class="ttc" id="classQgsLayoutItem_html_ab6d4914bae7fdcff4ef1439136d79d76"><div class="ttname"><a href="classQgsLayoutItem.html#ab6d4914bae7fdcff4ef1439136d79d76">QgsLayoutItem::id</a></div><div class="ttdeci">QString id() const</div><div class="ttdoc">Returns the item&amp;#39;s ID name. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitem_8h_source.html#l00351">qgslayoutitem.h:351</a></div></div>
<div class="ttc" id="qgslayertree_8h_html"><div class="ttname"><a href="qgslayertree_8h.html">qgslayertree.h</a></div></div>
<div class="ttc" id="classQgsField_html"><div class="ttname"><a href="classQgsField.html">QgsField</a></div><div class="ttdoc">Encapsulate a field in an attribute table or data source. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfield_8h_source.html#l00048">qgsfield.h:48</a></div></div>
<div class="ttc" id="classQgsGeometry_html_a3975e1ac16832371854703dfe699d5f2"><div class="ttname"><a href="classQgsGeometry.html#a3975e1ac16832371854703dfe699d5f2">QgsGeometry::pointOnSurface</a></div><div class="ttdeci">QgsGeometry pointOnSurface() const</div><div class="ttdoc">Returns a point guaranteed to lie on the surface of a geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l01994">qgsgeometry.cpp:1994</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_afadedc95ba4f880134211d94f110a893"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#afadedc95ba4f880134211d94f110a893">QgsWms::QgsWmsParameters::queryLayersNickname</a></div><div class="ttdeci">QStringList queryLayersNickname() const</div><div class="ttdoc">Returns nickname of layers found in QUERY_LAYERS parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01396">qgswmsparameters.cpp:1396</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_af98d2a59ef78f4c990e03ce40a68b687"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#af98d2a59ef78f4c990e03ce40a68b687">QgsWms::QgsWmsParametersComposerMap::mRotation</a></div><div class="ttdeci">float mRotation</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00084">qgswmsparameters.h:84</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html"><div class="ttname"><a href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a></div><div class="ttdoc">Abstract base class for all geometries. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00062">qgsabstractgeometry.h:62</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4">QgsWms::QgsServiceException::ExceptionCode</a></div><div class="ttdeci">ExceptionCode</div><div class="ttdoc">Exception codes as defined in OGC scpecifications for WMS 1.1.1 and WMS 1.3.0. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00047">qgswmsserviceexception.h:47</a></div></div>
<div class="ttc" id="classQgsMapToPixel_html_a4ca6884ad7af7c01d1fe60dc01a0875e"><div class="ttname"><a href="classQgsMapToPixel.html#a4ca6884ad7af7c01d1fe60dc01a0875e">QgsMapToPixel::mapUnitsPerPixel</a></div><div class="ttdeci">double mapUnitsPerPixel() const</div><div class="ttdoc">Returns current map units per pixel. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaptopixel_8cpp_source.html#l00128">qgsmaptopixel.cpp:128</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1PdfExportSettings_html_a8ef337cee21992b46b4c5db06d2e2f2a"><div class="ttname"><a href="structQgsLayoutExporter_1_1PdfExportSettings.html#a8ef337cee21992b46b4c5db06d2e2f2a">QgsLayoutExporter::PdfExportSettings::flags</a></div><div class="ttdeci">QgsLayoutRenderContext::Flags flags</div><div class="ttdoc">Layout context flags, which control how the export will be created. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00279">qgslayoutexporter.h:279</a></div></div>
<div class="ttc" id="structQgsMapRendererJob_1_1Error_html_a932adf008a5ee09ecae0ec145586012e"><div class="ttname"><a href="structQgsMapRendererJob_1_1Error.html#a932adf008a5ee09ecae0ec145586012e">QgsMapRendererJob::Error::layerID</a></div><div class="ttdeci">QString layerID</div><div class="ttdef"><b>Definition:</b> <a href="qgsmaprendererjob_8h_source.html#l00193">qgsmaprendererjob.h:193</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a555f77ce77aa4a16c48ef7a27fd26585"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a555f77ce77aa4a16c48ef7a27fd26585">QgsWms::QgsWmsParameters::pointToleranceAsInt</a></div><div class="ttdeci">int pointToleranceAsInt() const</div><div class="ttdoc">Returns FI_POINT_TOLERANCE parameter as an integer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01087">qgswmsparameters.cpp:1087</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a60e72c2f73cb07fdbcdbc2d5068b5d9ca832c909332693470bd25b59e273a04a5"><div class="ttname"><a href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca832c909332693470bd25b59e273a04a5">QgsWkbTypes::LineGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00142">qgswkbtypes.h:142</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a841378caa6e40f148d8adeed6fe03a6d"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a841378caa6e40f148d8adeed6fe03a6d">QgsWms::QgsWmsParameters::format</a></div><div class="ttdeci">Format format() const</div><div class="ttdoc">Returns format. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00784">qgswmsparameters.cpp:784</a></div></div>
<div class="ttc" id="classQgsLayout_html"><div class="ttname"><a href="classQgsLayout.html">QgsLayout</a></div><div class="ttdoc">Base class for layouts, which can contain items such as maps, labels, scalebars, etc. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8h_source.html#l00049">qgslayout.h:49</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_a2c644a29810847d596c21a729f465e1a"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#a2c644a29810847d596c21a729f465e1a">QgsWms::QgsRenderer::QgsRenderer</a></div><div class="ttdeci">QgsRenderer(const QgsWmsRenderContext &amp;context)</div><div class="ttdoc">Constructor for QgsRenderer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8cpp_source.html#l00097">qgswmsrenderer.cpp:97</a></div></div>
<div class="ttc" id="classQgsLayoutManager_html"><div class="ttname"><a href="classQgsLayoutManager.html">QgsLayoutManager</a></div><div class="ttdoc">Manages storage of a set of layouts. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutmanager_8h_source.html#l00043">qgslayoutmanager.h:43</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a8b8706728c90bc5c0e9c3ea3925b4453"><div class="ttname"><a href="classQgsAbstractGeometry.html#a8b8706728c90bc5c0e9c3ea3925b4453">QgsAbstractGeometry::wkbType</a></div><div class="ttdeci">QgsWkbTypes::Type wkbType() const</div><div class="ttdoc">Returns the WKB type of the geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00180">qgsabstractgeometry.h:180</a></div></div>
<div class="ttc" id="qgspallabeling_8h_html"><div class="ttname"><a href="qgspallabeling_8h.html">qgspallabeling.h</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_ab7fcb070c317b3cb4853f11ea8ce3afd"><div class="ttname"><a href="classQgsMapLayer.html#ab7fcb070c317b3cb4853f11ea8ce3afd">QgsMapLayer::readSld</a></div><div class="ttdeci">virtual bool readSld(const QDomNode &amp;node, QString &amp;errorMessage)</div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8h_source.html#l00846">qgsmaplayer.h:846</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_aafd7caafcc3edff7a0ce0d9fec50f11b"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#aafd7caafcc3edff7a0ce0d9fec50f11b">QgsWms::QgsWmsRenderContext::testFlag</a></div><div class="ttdeci">bool testFlag(Flag flag) const</div><div class="ttdoc">Returns the status of a rendering flag. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00061">qgswmsrendercontext.cpp:61</a></div></div>
<div class="ttc" id="classQgsFieldFormatterRegistry_html_afb0912d40c920756c58b5121ddccde09"><div class="ttname"><a href="classQgsFieldFormatterRegistry.html#afb0912d40c920756c58b5121ddccde09">QgsFieldFormatterRegistry::fieldFormatter</a></div><div class="ttdeci">QgsFieldFormatter * fieldFormatter(const QString &amp;id) const</div><div class="ttdoc">Gets a field formatter by its id. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfieldformatterregistry_8cpp_source.html#l00069">qgsfieldformatterregistry.cpp:69</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a617ec25cc1bf4827379639b6d05ca47b"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a617ec25cc1bf4827379639b6d05ca47b">QgsWms::QgsWmsRenderContext::settings</a></div><div class="ttdeci">const QgsServerSettings &amp; settings() const</div><div class="ttdoc">Returns settings of the server. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00071">qgswmsrendercontext.cpp:71</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a0979c94d37319114480c1f9274e653c2"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a0979c94d37319114480c1f9274e653c2">QgsWms::QgsWmsRenderContext::mapSize</a></div><div class="ttdeci">QSize mapSize(bool aspectRatio=true) const</div><div class="ttdoc">Returns the size (in pixels) of the map to render, according to width and height WMS parameters as we...</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00641">qgswmsrendercontext.cpp:641</a></div></div>
<div class="ttc" id="classQgsProject_html_a7488b66a620c80d2891e686d8229770d"><div class="ttname"><a href="classQgsProject.html#a7488b66a620c80d2891e686d8229770d">QgsProject::annotationManager</a></div><div class="ttdeci">QgsAnnotationManager * annotationManager()</div><div class="ttdoc">Returns pointer to the project&amp;#39;s annotation manager. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l02580">qgsproject.cpp:2580</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a99eb38a3f60048c737ec755b2d3cf6d6"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a99eb38a3f60048c737ec755b2d3cf6d6">QgsWms::QgsWmsParameters::polygonToleranceAsInt</a></div><div class="ttdeci">int polygonToleranceAsInt() const</div><div class="ttdoc">Returns FI_POLYGON_TOLERANCE parameter as an integer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01077">qgswmsparameters.cpp:1077</a></div></div>
<div class="ttc" id="classQgsPointXY_html_acc02289a06924ed7aaeb59f8406e3514"><div class="ttname"><a href="classQgsPointXY.html#acc02289a06924ed7aaeb59f8406e3514">QgsPointXY::setX</a></div><div class="ttdeci">void setX(double x)</div><div class="ttdoc">Sets the x value of the point. </div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00104">qgspointxy.h:104</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_a38cb9f09509c6075b6218efb651b9aed"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a38cb9f09509c6075b6218efb651b9aed">QgsWms::QgsWmsParametersComposerMap::mGridX</a></div><div class="ttdeci">float mGridX</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00085">qgswmsparameters.h:85</a></div></div>
<div class="ttc" id="qgsjsonutils_8h_html_ab701e3ac61a85b337ec5c1abaad6742d"><div class="ttname"><a href="qgsjsonutils_8h.html#ab701e3ac61a85b337ec5c1abaad6742d">json</a></div><div class="ttdeci">nlohmann::json json</div><div class="ttdef"><b>Definition:</b> <a href="qgsjsonutils_8h_source.html#l00027">qgsjsonutils.h:27</a></div></div>
<div class="ttc" id="classQgsPointXY_html_ac39fe3e623259485edcc42fbb77ab328"><div class="ttname"><a href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">QgsPointXY::x</a></div><div class="ttdeci">double x</div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00047">qgspointxy.h:47</a></div></div>
<div class="ttc" id="classQgsProject_html_a914ca9e8fb91ac5ae7c5df0f9b7c51ff"><div class="ttname"><a href="classQgsProject.html#a914ca9e8fb91ac5ae7c5df0f9b7c51ff">QgsProject::layoutManager</a></div><div class="ttdeci">const QgsLayoutManager * layoutManager() const</div><div class="ttdoc">Returns the project&amp;#39;s layout manager, which manages compositions within the project. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l02560">qgsproject.cpp:2560</a></div></div>
<div class="ttc" id="classQgsJsonExporter_html"><div class="ttname"><a href="classQgsJsonExporter.html">QgsJsonExporter</a></div><div class="ttdoc">Handles exporting QgsFeature features to GeoJSON features. </div><div class="ttdef"><b>Definition:</b> <a href="qgsjsonutils_8h_source.html#l00045">qgsjsonutils.h:45</a></div></div>
<div class="ttc" id="classQgsFieldFormatter_html"><div class="ttname"><a href="classQgsFieldFormatter.html">QgsFieldFormatter</a></div><div class="ttdoc">A field formatter helps to handle and display values for a field. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfieldformatter_8h_source.html#l00040">qgsfieldformatter.h:40</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_ade0e96125f5d912953b168a736d2e09b"><div class="ttname"><a href="classQgsPalLayerSettings.html#ade0e96125f5d912953b168a736d2e09b">QgsPalLayerSettings::placement</a></div><div class="ttdeci">Placement placement</div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00592">qgspallabeling.h:592</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dbaa55b4728efd409910c2f2b59a9dce672"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbaa55b4728efd409910c2f2b59a9dce672">QgsWms::QgsWmsParameter::INFO_FORMAT</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00147">qgswmsparameters.h:147</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_ac205b0e92b81bbe7599e4af9a37b82d9"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#ac205b0e92b81bbe7599e4af9a37b82d9">QgsWms::QgsWmsRenderContext::project</a></div><div class="ttdeci">const QgsProject * project() const</div><div class="ttdoc">Returns the project. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00076">qgswmsrendercontext.cpp:76</a></div></div>
<div class="ttc" id="namespaceQgsWms_html"><div class="ttname"><a href="namespaceQgsWms.html">QgsWms</a></div><div class="ttdoc">Median cut implementation. </div><div class="ttdef"><b>Definition:</b> <a href="qgsdxfwriter_8cpp_source.html#l00022">qgsdxfwriter.cpp:22</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_ac0ba0c7407515786658dbe032c6bd874"><div class="ttname"><a href="classQgsServerSettings.html#ac0ba0c7407515786658dbe032c6bd874">QgsServerSettings::parallelRendering</a></div><div class="ttdeci">bool parallelRendering() const</div><div class="ttdoc">Returns parallel rendering setting. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00322">qgsserversettings.cpp:322</a></div></div>
<div class="ttc" id="qgslayoutitemmap_8h_html"><div class="ttname"><a href="qgslayoutitemmap_8h.html">qgslayoutitemmap.h</a></div></div>
<div class="ttc" id="qgslayoutitempage_8h_html"><div class="ttname"><a href="qgslayoutitempage_8h.html">qgslayoutitempage.h</a></div></div>
<div class="ttc" id="classQgsRaster_html_a17a81534803b9b5ee1e5cd91aab628c6abddd4a3ccc84c95df83e7bfdd8dbf9fe"><div class="ttname"><a href="classQgsRaster.html#a17a81534803b9b5ee1e5cd91aab628c6abddd4a3ccc84c95df83e7bfdd8dbf9fe">QgsRaster::IdentifyFormatValue</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsraster_8h_source.html#l00060">qgsraster.h:60</a></div></div>
<div class="ttc" id="qgslayoutitemlabel_8h_html"><div class="ttname"><a href="qgslayoutitemlabel_8h.html">qgslayoutitemlabel.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a34092f249d4c75487468d655afff4ea9"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a34092f249d4c75487468d655afff4ea9">QgsWms::QgsWmsParameters::withGeometry</a></div><div class="ttdeci">bool withGeometry() const</div><div class="ttdoc">Returns if the client wants the feature info response with geometry information. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01846">qgswmsparameters.cpp:1846</a></div></div>
<div class="ttc" id="classQgsRasterIdentifyResult_html_a879fda07adfa01bd8bd647d6fb73c8b6"><div class="ttname"><a href="classQgsRasterIdentifyResult.html#a879fda07adfa01bd8bd647d6fb73c8b6">QgsRasterIdentifyResult::results</a></div><div class="ttdeci">QMap&lt; int, QVariant &gt; results() const</div><div class="ttdoc">Returns the identify results. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasteridentifyresult_8h_source.html#l00066">qgsrasteridentifyresult.h:66</a></div></div>
<div class="ttc" id="classQgsGeometry_html_a6d80b6a9b799d6be0a3dd1d4f932db1b"><div class="ttname"><a href="classQgsGeometry.html#a6d80b6a9b799d6be0a3dd1d4f932db1b">QgsGeometry::constGet</a></div><div class="ttdeci">const QgsAbstractGeometry * constGet() const</div><div class="ttdoc">Returns a non-modifiable (const) reference to the underlying abstract geometry primitive. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l00125">qgsgeometry.cpp:125</a></div></div>
<div class="ttc" id="classQgsLayoutPageCollection_html_a862a2cc4ad2aebe9f20d4a0aa0cb7086"><div class="ttname"><a href="classQgsLayoutPageCollection.html#a862a2cc4ad2aebe9f20d4a0aa0cb7086">QgsLayoutPageCollection::pageCount</a></div><div class="ttdeci">int pageCount() const</div><div class="ttdoc">Returns the number of pages in the collection. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutpagecollection_8cpp_source.html#l00446">qgslayoutpagecollection.cpp:446</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a601966d81267b649960ec2d409208350"><div class="ttname"><a href="classQgsRectangle.html#a601966d81267b649960ec2d409208350">QgsRectangle::yMinimum</a></div><div class="ttdeci">double yMinimum() const</div><div class="ttdoc">Returns the y minimum value (bottom side of rectangle). </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00177">qgsrectangle.h:177</a></div></div>
<div class="ttc" id="qgsgeometry_8h_html"><div class="ttname"><a href="qgsgeometry_8h.html">qgsgeometry.h</a></div></div>
<div class="ttc" id="classQgsRenderContext_html_a42707c8a463905e7c64af78c921077ff"><div class="ttname"><a href="classQgsRenderContext.html#a42707c8a463905e7c64af78c921077ff">QgsRenderContext::expressionContext</a></div><div class="ttdeci">QgsExpressionContext &amp; expressionContext()</div><div class="ttdoc">Gets the expression context. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrendercontext_8h_source.html#l00476">qgsrendercontext.h:476</a></div></div>
<div class="ttc" id="classQgsGeometry_html_af049bb336e5fc77145be4b4eab9bdbba"><div class="ttname"><a href="classQgsGeometry.html#af049bb336e5fc77145be4b4eab9bdbba">QgsGeometry::asWkt</a></div><div class="ttdeci">QString asWkt(int precision=17) const</div><div class="ttdoc">Exports the geometry to WKT. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l01264">qgsgeometry.cpp:1264</a></div></div>
<div class="ttc" id="classQgsScaleCalculator_html"><div class="ttname"><a href="classQgsScaleCalculator.html">QgsScaleCalculator</a></div><div class="ttdoc">Calculates scale for a given combination of canvas size, map extent, and monitor dpi. </div><div class="ttdef"><b>Definition:</b> <a href="qgsscalecalculator_8h_source.html#l00034">qgsscalecalculator.h:34</a></div></div>
<div class="ttc" id="classQgsLayoutExporter_html"><div class="ttname"><a href="classQgsLayoutExporter.html">QgsLayoutExporter</a></div><div class="ttdoc">Handles rendering and exports of layouts to various formats. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00042">qgslayoutexporter.h:42</a></div></div>
<div class="ttc" id="classQgsSymbolLayerUtils_html_accf5697c3830de7ef4d31543b0db56b8"><div class="ttname"><a href="classQgsSymbolLayerUtils.html#accf5697c3830de7ef4d31543b0db56b8">QgsSymbolLayerUtils::symbolProperties</a></div><div class="ttdeci">static QString symbolProperties(QgsSymbol *symbol)</div><div class="ttdoc">Returns a string representing the symbol. </div><div class="ttdef"><b>Definition:</b> <a href="qgssymbollayerutils_8cpp_source.html#l01108">qgssymbollayerutils.cpp:1108</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a7fe11d0cd4fb7146dca5516c3eb03347"><div class="ttname"><a href="classQgsRectangle.html#a7fe11d0cd4fb7146dca5516c3eb03347">QgsRectangle::xMaximum</a></div><div class="ttdeci">double xMaximum() const</div><div class="ttdoc">Returns the x maximum value (right side of rectangle). </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00162">qgsrectangle.h:162</a></div></div>
<div class="ttc" id="classQgsProject_html_a83c873d44d3229ff6c52886d309e1280"><div class="ttname"><a href="classQgsProject.html#a83c873d44d3229ff6c52886d309e1280">QgsProject::transformContext</a></div><div class="ttdeci">QgsCoordinateTransformContext transformContext</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8h_source.html#l00096">qgsproject.h:96</a></div></div>
<div class="ttc" id="classQgsLayerTreeLayer_html_ac7c463e2587b85cb6ca6f1de4b25d18a"><div class="ttname"><a href="classQgsLayerTreeLayer.html#ac7c463e2587b85cb6ca6f1de4b25d18a">QgsLayerTreeLayer::layer</a></div><div class="ttdeci">QgsMapLayer * layer() const</div><div class="ttdoc">Returns the map layer associated with this node. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreelayer_8h_source.html#l00073">qgslayertreelayer.h:73</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_abeb4d081fd4eb7debb30dfcdd5be8d58"><div class="ttname"><a href="classQgsPalLayerSettings.html#abeb4d081fd4eb7debb30dfcdd5be8d58">QgsPalLayerSettings::placementFlags</a></div><div class="ttdeci">unsigned int placementFlags</div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00593">qgspallabeling.h:593</a></div></div>
<div class="ttc" id="classQgsRectangle_html_ab8a73ddc15774addc822550266f886c9"><div class="ttname"><a href="classQgsRectangle.html#ab8a73ddc15774addc822550266f886c9">QgsRectangle::combineExtentWith</a></div><div class="ttdeci">void combineExtentWith(const QgsRectangle &amp;rect)</div><div class="ttdoc">Expands the rectangle so that it covers both the original rectangle and the given rectangle...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00359">qgsrectangle.h:359</a></div></div>
<div class="ttc" id="qgslayertreemodel_8h_html"><div class="ttname"><a href="qgslayertreemodel_8h.html">qgslayertreemodel.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a98ab15ea8c19ce681651e29a0024aa3e"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a98ab15ea8c19ce681651e29a0024aa3e">QgsWms::QgsWmsRenderContext::layerNickname</a></div><div class="ttdeci">QString layerNickname(const QgsMapLayer &amp;layer) const</div><div class="ttdoc">Returns the nickname (short name, id or name) of the layer according to the current configuration...</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00243">qgswmsrendercontext.cpp:243</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a7caef4b2aacf215b0f1103c9bc8eb111"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a7caef4b2aacf215b0f1103c9bc8eb111">QgsWms::QgsWmsParameters::heightAsInt</a></div><div class="ttdeci">int heightAsInt() const</div><div class="ttdoc">Returns HEIGHT parameter as an int or its default value if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00710">qgswmsparameters.cpp:710</a></div></div>
<div class="ttc" id="classQgsGeometry_html_a736b669b7ae22b13848562970707d180"><div class="ttname"><a href="classQgsGeometry.html#a736b669b7ae22b13848562970707d180">QgsGeometry::fromWkt</a></div><div class="ttdeci">static QgsGeometry fromWkt(const QString &amp;wkt)</div><div class="ttdoc">Creates a new geometry from a WKT string. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l00151">qgsgeometry.cpp:151</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a5d449d8e9cb89e5d453c6e33fe1c66cc"><div class="ttname"><a href="classQgsPalLayerSettings.html#a5d449d8e9cb89e5d453c6e33fe1c66cc">QgsPalLayerSettings::Placement</a></div><div class="ttdeci">Placement</div><div class="ttdoc">Placement modes which determine how label candidates are generated for a feature. ...</div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00207">qgspallabeling.h:207</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_a77b474b7f97cfbbee0863a534cd7fb32"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#a77b474b7f97cfbbee0863a534cd7fb32">QgsWms::QgsRenderer::SymbolSet</a></div><div class="ttdeci">QSet&lt; QString &gt; SymbolSet</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8h_source.html#l00097">qgswmsrenderer.h:97</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1PdfExportSettings_html"><div class="ttname"><a href="structQgsLayoutExporter_1_1PdfExportSettings.html">QgsLayoutExporter::PdfExportSettings</a></div><div class="ttdoc">Contains settings relating to exporting layouts to PDF. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00242">qgslayoutexporter.h:242</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_afc62189976b903500393f9c803ce202faec2f2c6ceb1cecf81bb84cc4b57b9bc0"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202faec2f2c6ceb1cecf81bb84cc4b57b9bc0">QgsWms::QgsWmsRenderContext::SetAccessControl</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8h_source.html#l00046">qgswmsrendercontext.h:46</a></div></div>
<div class="ttc" id="qgsfields_8h_html"><div class="ttname"><a href="qgsfields_8h.html">qgsfields.h</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_aeee4d7cba827a833373a092681f556d8"><div class="ttname"><a href="classQgsMapSettings.html#aeee4d7cba827a833373a092681f556d8">QgsMapSettings::setBackgroundColor</a></div><div class="ttdeci">void setBackgroundColor(const QColor &amp;color)</div><div class="ttdoc">Sets the background color of the map. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8h_source.html#l00244">qgsmapsettings.h:244</a></div></div>
<div class="ttc" id="classQgsDxfExport_html_a80c70c3805a5176767a91b4e6bbffa60"><div class="ttname"><a href="classQgsDxfExport.html#a80c70c3805a5176767a91b4e6bbffa60">QgsDxfExport::setSymbologyScale</a></div><div class="ttdeci">void setSymbologyScale(double scale)</div><div class="ttdoc">Set reference scale for output. </div><div class="ttdef"><b>Definition:</b> <a href="qgsdxfexport_8h_source.html#l00146">qgsdxfexport.h:146</a></div></div>
<div class="ttc" id="qgsexpressioncontextutils_8h_html"><div class="ttname"><a href="qgsexpressioncontextutils_8h.html">qgsexpressioncontextutils.h</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a5d449d8e9cb89e5d453c6e33fe1c66cca4f3d6d88545bf3e32ed488e4a082f471"><div class="ttname"><a href="classQgsPalLayerSettings.html#a5d449d8e9cb89e5d453c6e33fe1c66cca4f3d6d88545bf3e32ed488e4a082f471">QgsPalLayerSettings::Line</a></div><div class="ttdoc">Arranges candidates parallel to a generalised line representing the feature or parallel to a polygon&amp;#39;...</div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00211">qgspallabeling.h:211</a></div></div>
<div class="ttc" id="qgsjsonutils_8h_html"><div class="ttname"><a href="qgsjsonutils_8h.html">qgsjsonutils.h</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_aab8be674f02573b225990d9c17e1ac79"><div class="ttname"><a href="classQgsMapSettings.html#aab8be674f02573b225990d9c17e1ac79">QgsMapSettings::setLabelingEngineSettings</a></div><div class="ttdeci">void setLabelingEngineSettings(const QgsLabelingEngineSettings &amp;settings)</div><div class="ttdoc">Sets the global configuration of the labeling engine. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8h_source.html#l00475">qgsmapsettings.h:475</a></div></div>
<div class="ttc" id="classQgsRenderContext_html"><div class="ttname"><a href="classQgsRenderContext.html">QgsRenderContext</a></div><div class="ttdoc">Contains information about the context of a rendering operation. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrendercontext_8h_source.html#l00050">qgsrendercontext.h:50</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_a2d2bad09978a32266e50cca3126caf9b"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a2d2bad09978a32266e50cca3126caf9b">QgsWms::QgsWmsParametersComposerMap::mExternalLayers</a></div><div class="ttdeci">QList&lt; QgsWmsParametersExternalLayer &gt; mExternalLayers</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00088">qgswmsparameters.h:88</a></div></div>
<div class="ttc" id="classQgsLayoutMeasurement_html_abea68d971256eac7aacaeb2b1570f47b"><div class="ttname"><a href="classQgsLayoutMeasurement.html#abea68d971256eac7aacaeb2b1570f47b">QgsLayoutMeasurement::length</a></div><div class="ttdeci">double length() const</div><div class="ttdoc">Returns the length of the measurement. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutmeasurement_8h_source.html#l00048">qgslayoutmeasurement.h:48</a></div></div>
<div class="ttc" id="qgslayoutmanager_8h_html"><div class="ttname"><a href="qgslayoutmanager_8h.html">qgslayoutmanager.h</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1ImageExportSettings_html"><div class="ttname"><a href="structQgsLayoutExporter_1_1ImageExportSettings.html">QgsLayoutExporter::ImageExportSettings</a></div><div class="ttdoc">Contains settings relating to exporting layouts to raster images. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00146">qgslayoutexporter.h:146</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_ad97a6492b7f61a41dcbe399537415fc2"><div class="ttname"><a href="classQgsExpressionContextUtils.html#ad97a6492b7f61a41dcbe399537415fc2">QgsExpressionContextUtils::mapSettingsScope</a></div><div class="ttdeci">static QgsExpressionContextScope * mapSettingsScope(const QgsMapSettings &amp;mapSettings)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QgsMapSettings object...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontextutils_8cpp_source.html#l00408">qgsexpressioncontextutils.cpp:408</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_af4e02049b2e28427b19e690ed4998d31"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#af4e02049b2e28427b19e690ed4998d31">QgsWms::QgsWmsParameters::jAsInt</a></div><div class="ttdeci">int jAsInt() const</div><div class="ttdoc">Returns J parameter as an int or its default value if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00877">qgswmsparameters.cpp:877</a></div></div>
<div class="ttc" id="qgsserverexception_8h_html"><div class="ttname"><a href="qgsserverexception_8h.html">qgsserverexception.h</a></div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html_a0213a21ebf445a417db751b1e5da7afe"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html#a0213a21ebf445a417db751b1e5da7afe">QgsCoordinateReferenceSystem::fromOgcWmsCrs</a></div><div class="ttdeci">static QgsCoordinateReferenceSystem fromOgcWmsCrs(const QString &amp;ogcCrs)</div><div class="ttdoc">Creates a CRS from a given OGC WMS-format Coordinate Reference System string. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8cpp_source.html#l00180">qgscoordinatereferencesystem.cpp:180</a></div></div>
<div class="ttc" id="classQgsRenderContext_html_a431d875fd7f8f8f82818cb8605b3c2f5"><div class="ttname"><a href="classQgsRenderContext.html#a431d875fd7f8f8f82818cb8605b3c2f5">QgsRenderContext::mapToPixel</a></div><div class="ttdeci">const QgsMapToPixel &amp; mapToPixel() const</div><div class="ttdoc">Returns the context&amp;#39;s map to pixel transform, which transforms between map coordinates and device coo...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrendercontext_8h_source.html#l00257">qgsrendercontext.h:257</a></div></div>
<div class="ttc" id="classQgsAnnotationManager_html_a079587ad547db7362e1cdb6059fb0a02"><div class="ttname"><a href="classQgsAnnotationManager.html#a079587ad547db7362e1cdb6059fb0a02">QgsAnnotationManager::annotations</a></div><div class="ttdeci">QList&lt; QgsAnnotation *&gt; annotations() const</div><div class="ttdoc">Returns a list of all annotations contained in the manager. </div><div class="ttdef"><b>Definition:</b> <a href="qgsannotationmanager_8cpp_source.html#l00072">qgsannotationmanager.cpp:72</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dba16d6769e75d6f6efa303baa3628109af"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba16d6769e75d6f6efa303baa3628109af">QgsWms::QgsWmsParameter::LAYER</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00120">qgswmsparameters.h:120</a></div></div>
<div class="ttc" id="classQgsGeometry_html_a77bddd38cd041a4e2988fa8e014c060f"><div class="ttname"><a href="classQgsGeometry.html#a77bddd38cd041a4e2988fa8e014c060f">QgsGeometry::asPoint</a></div><div class="ttdeci">QgsPointXY asPoint() const</div><div class="ttdoc">Returns the contents of the geometry as a 2-dimensional point. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l01396">qgsgeometry.cpp:1396</a></div></div>
<div class="ttc" id="qgsfeatureid_8h_html_a6870a72b2bd3966b1e3327a1758cfa03"><div class="ttname"><a href="qgsfeatureid_8h.html#a6870a72b2bd3966b1e3327a1758cfa03">FID_TO_STRING</a></div><div class="ttdeci">#define FID_TO_STRING(fid)</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeatureid_8h_source.html#l00030">qgsfeatureid.h:30</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a9c47cf78b8c863a19fbf62ac37489793"><div class="ttname"><a href="classQgsVectorLayer.html#a9c47cf78b8c863a19fbf62ac37489793">QgsVectorLayer::editorWidgetSetup</a></div><div class="ttdeci">QgsEditorWidgetSetup editorWidgetSetup(int index) const</div><div class="ttdoc">The editor widget setup defines which QgsFieldFormatter and editor widget will be used for the field ...</div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l04858">qgsvectorlayer.cpp:4858</a></div></div>
<div class="ttc" id="classQgsCoordinateTransform_html_a8bc24d9a900ec38443bb573eb77e66f5a86faf04e40154edd976b1240e2bdc9bd"><div class="ttname"><a href="classQgsCoordinateTransform.html#a8bc24d9a900ec38443bb573eb77e66f5a86faf04e40154edd976b1240e2bdc9bd">QgsCoordinateTransform::ReverseTransform</a></div><div class="ttdoc">Transform from destination to source CRS. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatetransform_8h_source.html#l00061">qgscoordinatetransform.h:61</a></div></div>
<div class="ttc" id="classQgsLayoutRenderContext_html_aae823feceb47451b481ce3be51e37456a610ffdc4825896bc89df73a1794dcc3f"><div class="ttname"><a href="classQgsLayoutRenderContext.html#aae823feceb47451b481ce3be51e37456a610ffdc4825896bc89df73a1794dcc3f">QgsLayoutRenderContext::FlagDrawSelection</a></div><div class="ttdoc">Draw selection. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutrendercontext_8h_source.html#l00048">qgslayoutrendercontext.h:48</a></div></div>
<div class="ttc" id="qgsrenderer_8h_html"><div class="ttname"><a href="qgsrenderer_8h.html">qgsrenderer.h</a></div></div>
<div class="ttc" id="classQgsLayout_html_abc071f5106e1d6254189cf3fffc5e11f"><div class="ttname"><a href="classQgsLayout.html#abc071f5106e1d6254189cf3fffc5e11f">QgsLayout::removeLayoutItem</a></div><div class="ttdeci">void removeLayoutItem(QgsLayoutItem *item)</div><div class="ttdoc">Removes an item from the layout. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayout_8cpp_source.html#l00554">qgslayout.cpp:554</a></div></div>
<div class="ttc" id="classQgsFieldFormatter_html_ac9dc40b958c0da8b443e0f48856061a2"><div class="ttname"><a href="classQgsFieldFormatter.html#ac9dc40b958c0da8b443e0f48856061a2">QgsFieldFormatter::representValue</a></div><div class="ttdeci">virtual QString representValue(QgsVectorLayer *layer, int fieldIndex, const QVariantMap &amp;config, const QVariant &amp;cache, const QVariant &amp;value) const</div><div class="ttdoc">Create a pretty String representation of the value. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfieldformatter_8cpp_source.html#l00027">qgsfieldformatter.cpp:27</a></div></div>
<div class="ttc" id="qgsmaplayerlegend_8h_html"><div class="ttname"><a href="qgsmaplayerlegend_8h.html">qgsmaplayerlegend.h</a></div></div>
<div class="ttc" id="classQgsDxfExport_html_aff36f6e706b2061f5b1c28a02733f2b1"><div class="ttname"><a href="classQgsDxfExport.html#aff36f6e706b2061f5b1c28a02733f2b1">QgsDxfExport::setLayerTitleAsName</a></div><div class="ttdeci">void setLayerTitleAsName(bool layerTitleAsName)</div><div class="ttdoc">Enable use of title (where set) instead of layer name, when attribute index of corresponding layer in...</div><div class="ttdef"><b>Definition:</b> <a href="qgsdxfexport_8h_source.html#l00208">qgsdxfexport.h:208</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a70dff7aceefd4b16909f038e32aece11a4d5a4986629f537e7494bbb96892b807"><div class="ttname"><a href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a4d5a4986629f537e7494bbb96892b807">QgsWkbTypes::NoGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00084">qgswkbtypes.h:84</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a273418a57a61baec5c528f97e0d57ad3"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a273418a57a61baec5c528f97e0d57ad3">QgsWms::QgsWmsRenderContext::isValidGroup</a></div><div class="ttdeci">bool isValidGroup(const QString &amp;name) const</div><div class="ttdoc">Returns true if name is a group. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00279">qgswmsrendercontext.cpp:279</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_acf02b49474618c788e7ce6a9aa2283bf"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#acf02b49474618c788e7ce6a9aa2283bf">QgsWms::QgsWmsRenderContext::precision</a></div><div class="ttdeci">int precision() const</div><div class="ttdoc">Returns the precision to use according to the current configuration. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00135">qgswmsrendercontext.cpp:135</a></div></div>
<div class="ttc" id="classQgsLayerTreeModel_html_a884e38dfb1a075809b64f45081d38f17"><div class="ttname"><a href="classQgsLayerTreeModel.html#a884e38dfb1a075809b64f45081d38f17">QgsLayerTreeModel::rootGroup</a></div><div class="ttdeci">QgsLayerTree * rootGroup() const</div><div class="ttdoc">Returns pointer to the root node of the layer tree. Always a non nullptr value. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreemodel_8cpp_source.html#l00514">qgslayertreemodel.cpp:514</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a1c3432e5fe5da77a4b93ed599f218adc"><div class="ttname"><a href="classQgsMapSettings.html#a1c3432e5fe5da77a4b93ed599f218adc">QgsMapSettings::setSelectionColor</a></div><div class="ttdeci">void setSelectionColor(const QColor &amp;color)</div><div class="ttdoc">Sets color that is used for drawing of selected vector features. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8h_source.html#l00249">qgsmapsettings.h:249</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a8b1e61edeca056f552fe01438155dbde"><div class="ttname"><a href="classQgsMapLayer.html#a8b1e61edeca056f552fe01438155dbde">QgsMapLayer::hasScaleBasedVisibility</a></div><div class="ttdeci">bool hasScaleBasedVisibility() const</div><div class="ttdoc">Returns whether scale based visibility is enabled for the layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l00663">qgsmaplayer.cpp:663</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_ad48ca440176498a96249d3939e7909cd"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#ad48ca440176498a96249d3939e7909cd">QgsWms::QgsWmsParametersComposerMap::mGridY</a></div><div class="ttdeci">float mGridY</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00086">qgswmsparameters.h:86</a></div></div>
<div class="ttc" id="structQgsLayerTreeModelLegendNode_1_1ItemContext_html_a364950d7ea7bbf7d0cb7e75ee8282ed5"><div class="ttname"><a href="structQgsLayerTreeModelLegendNode_1_1ItemContext.html#a364950d7ea7bbf7d0cb7e75ee8282ed5">QgsLayerTreeModelLegendNode::ItemContext::point</a></div><div class="ttdeci">QPointF point</div><div class="ttdoc">Top-left corner of the legend item. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreemodellegendnode_8h_source.html#l00094">qgslayertreemodellegendnode.h:94</a></div></div>
<div class="ttc" id="classQgsDxfExport_html_ab950354bb2c980dc8dff828a7b30f52b"><div class="ttname"><a href="classQgsDxfExport.html#ab950354bb2c980dc8dff828a7b30f52b">QgsDxfExport::setExtent</a></div><div class="ttdeci">void setExtent(const QgsRectangle &amp;r)</div><div class="ttdoc">Set extent of area to export. </div><div class="ttdef"><b>Definition:</b> <a href="qgsdxfexport_8h_source.html#l00193">qgsdxfexport.h:193</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_abb7c4503320c2e7c0caaf6c5653bc76b"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#abb7c4503320c2e7c0caaf6c5653bc76b">QgsWms::QgsWmsRenderContext::sld</a></div><div class="ttdeci">QDomElement sld(const QgsMapLayer &amp;layer) const</div><div class="ttdoc">Returns a SLD document for a specific layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00081">qgswmsrendercontext.cpp:81</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1SvgExportSettings_html_a673ec3b56b97cf1d0aba9a01b4940766"><div class="ttname"><a href="structQgsLayoutExporter_1_1SvgExportSettings.html#a673ec3b56b97cf1d0aba9a01b4940766">QgsLayoutExporter::SvgExportSettings::dpi</a></div><div class="ttdeci">double dpi</div><div class="ttdoc">Resolution to export layout at. If dpi &lt;= 0 the default layout dpi will be used. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00385">qgslayoutexporter.h:385</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a458915771c654267452de22ad54f1cf2"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a458915771c654267452de22ad54f1cf2">QgsWms::QgsWmsParameters::pointTolerance</a></div><div class="ttdeci">QString pointTolerance() const</div><div class="ttdoc">Returns FI_POINT_TOLERANCE parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01072">qgswmsparameters.cpp:1072</a></div></div>
<div class="ttc" id="classQgsEditorWidgetSetup_html"><div class="ttname"><a href="classQgsEditorWidgetSetup.html">QgsEditorWidgetSetup</a></div><div class="ttdoc">Holder for the widget type and its configuration for a field. </div><div class="ttdef"><b>Definition:</b> <a href="qgseditorwidgetsetup_8h_source.html#l00028">qgseditorwidgetsetup.h:28</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a36a064daae9df4c5e23f825f2fce0456"><div class="ttname"><a href="classQgsVectorLayer.html#a36a064daae9df4c5e23f825f2fce0456">QgsVectorLayer::mapTipTemplate</a></div><div class="ttdeci">QString mapTipTemplate</div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8h_source.html#l00368">qgsvectorlayer.h:368</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a4378d2578dfa3bf8242cbaa1e84fea9d"><div class="ttname"><a href="classQgsWkbTypes.html#a4378d2578dfa3bf8242cbaa1e84fea9d">QgsWkbTypes::isCurvedType</a></div><div class="ttdeci">static bool isCurvedType(Type type)</div><div class="ttdoc">Returns true if the WKB type is a curved type or can contain curved geometries. </div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00609">qgswkbtypes.h:609</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersFilter_html_a4fc4fc44d110d192517823f2415de2f3a7eb8e9d83eac5473443bc2d7c54abdc1"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersFilter.html#a4fc4fc44d110d192517823f2415de2f3a7eb8e9d83eac5473443bc2d7c54abdc1">QgsWms::QgsWmsParametersFilter::OGC_FE</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00041">qgswmsparameters.h:41</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a0739b0932966de5fa6060e4a437d3a0e"><div class="ttname"><a href="classQgsMapSettings.html#a0739b0932966de5fa6060e4a437d3a0e">QgsMapSettings::layerToMapCoordinates</a></div><div class="ttdeci">QgsPointXY layerToMapCoordinates(const QgsMapLayer *layer, QgsPointXY point) const</div><div class="ttdoc">transform point coordinates from layer&amp;#39;s CRS to output CRS </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00467">qgsmapsettings.cpp:467</a></div></div>
<div class="ttc" id="classQgsLayoutItemMap_html_ab6b169a68e56327a49e96ada5023ea10"><div class="ttname"><a href="classQgsLayoutItemMap.html#ab6b169a68e56327a49e96ada5023ea10">QgsLayoutItemMap::scale</a></div><div class="ttdeci">double scale() const</div><div class="ttdoc">Returns the map scale. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitemmap_8cpp_source.html#l00141">qgslayoutitemmap.cpp:141</a></div></div>
<div class="ttc" id="classQgsFeatureRenderer_html_a86927ac5c7b347c9cf62e8fa9464e8af"><div class="ttname"><a href="classQgsFeatureRenderer.html#a86927ac5c7b347c9cf62e8fa9464e8af">QgsFeatureRenderer::loadSld</a></div><div class="ttdeci">static QgsFeatureRenderer * loadSld(const QDomNode &amp;node, QgsWkbTypes::GeometryType geomType, QString &amp;errorMessage)</div><div class="ttdoc">Create a new renderer according to the information contained in the UserStyle element of a SLD style ...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrenderer_8cpp_source.html#l00204">qgsrenderer.cpp:204</a></div></div>
<div class="ttc" id="classQgsTextBufferSettings_html"><div class="ttname"><a href="classQgsTextBufferSettings.html">QgsTextBufferSettings</a></div><div class="ttdoc">Container for settings relating to a text buffer. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8h_source.html#l00046">qgstextrenderer.h:46</a></div></div>
<div class="ttc" id="classQgsRenderContext_html_ac326603e162b609b609fd4ccebf7ffe8"><div class="ttname"><a href="classQgsRenderContext.html#ac326603e162b609b609fd4ccebf7ffe8">QgsRenderContext::fromMapSettings</a></div><div class="ttdeci">static QgsRenderContext fromMapSettings(const QgsMapSettings &amp;mapSettings)</div><div class="ttdoc">create initialized QgsRenderContext instance from given QgsMapSettings </div><div class="ttdef"><b>Definition:</b> <a href="qgsrendercontext_8cpp_source.html#l00157">qgsrendercontext.cpp:157</a></div></div>
<div class="ttc" id="classQgsLayoutExporter_html_a0d5bdecfc7e15618c1d52b3184b53215"><div class="ttname"><a href="classQgsLayoutExporter.html#a0d5bdecfc7e15618c1d52b3184b53215">QgsLayoutExporter::exportToPdf</a></div><div class="ttdeci">ExportResult exportToPdf(const QString &amp;filePath, const QgsLayoutExporter::PdfExportSettings &amp;settings)</div><div class="ttdoc">Exports the layout as a PDF to the filePath, using the specified export settings. ...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8cpp_source.html#l00478">qgslayoutexporter.cpp:478</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html">QgsWms::QgsWmsRenderContext</a></div><div class="ttdoc">Rendering context for the WMS renderer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8h_source.html#l00034">qgswmsrendercontext.h:34</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsSecurityException_html"><div class="ttname"><a href="classQgsWms_1_1QgsSecurityException.html">QgsWms::QgsSecurityException</a></div><div class="ttdoc">Exception thrown when data access violates access controls. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00192">qgswmsserviceexception.h:192</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsMapRendererJobProxy_html"><div class="ttname"><a href="classQgsWms_1_1QgsMapRendererJobProxy.html">QgsWms::QgsMapRendererJobProxy</a></div><div class="ttdoc">Proxy for sequential or parallel map render job. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaprendererjobproxy_8h_source.html#l00035">qgsmaprendererjobproxy.h:35</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4a983c52f95c97c6493b699f2da831efea"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4a983c52f95c97c6493b699f2da831efea">QgsWms::QgsServiceException::OGC_InvalidPoint</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00058">qgswmsserviceexception.h:58</a></div></div>
<div class="ttc" id="classQgsProject_html_a26df6e8516ac9625901108875681803b"><div class="ttname"><a href="classQgsProject.html#a26df6e8516ac9625901108875681803b">QgsProject::instance</a></div><div class="ttdeci">static QgsProject * instance()</div><div class="ttdoc">Returns the QgsProject singleton instance. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l00438">qgsproject.cpp:438</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_ab0c2d6ce60da3873726f544c7d9ea47a"><div class="ttname"><a href="classQgsPalLayerSettings.html#ab0c2d6ce60da3873726f544c7d9ea47a">QgsPalLayerSettings::dist</a></div><div class="ttdeci">double dist</div><div class="ttdoc">Distance from feature to the label. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00626">qgspallabeling.h:626</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a07233499d2c4a14c7c1ccbaa6a88a02b"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a07233499d2c4a14c7c1ccbaa6a88a02b">QgsWms::QgsWmsParameters::dxfScale</a></div><div class="ttdeci">double dxfScale() const</div><div class="ttdoc">Returns the DXF SCALE parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01928">qgswmsparameters.cpp:1928</a></div></div>
<div class="ttc" id="classQgsGeometry_html_adfc04c94b51cdeb55942b699fdd4d564"><div class="ttname"><a href="classQgsGeometry.html#adfc04c94b51cdeb55942b699fdd4d564">QgsGeometry::boundingBox</a></div><div class="ttdeci">QgsRectangle boundingBox() const</div><div class="ttdoc">Returns the bounding box of the geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l00944">qgsgeometry.cpp:944</a></div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html_aecc077365492da22796fe7c702616406"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html#aecc077365492da22796fe7c702616406">QgsCoordinateReferenceSystem::hasAxisInverted</a></div><div class="ttdeci">bool hasAxisInverted() const</div><div class="ttdoc">Returns whether axis is inverted (e.g., for WMS 1.3) for the CRS. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8cpp_source.html#l00653">qgscoordinatereferencesystem.cpp:653</a></div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html">QgsCoordinateReferenceSystem</a></div><div class="ttdoc">This class represents a coordinate reference system (CRS). </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8h_source.html#l00198">qgscoordinatereferencesystem.h:198</a></div></div>
<div class="ttc" id="classQgsFeatureFilterProviderGroup_html_a531bf1fee97af50f28eddba21ac69242"><div class="ttname"><a href="classQgsFeatureFilterProviderGroup.html#a531bf1fee97af50f28eddba21ac69242">QgsFeatureFilterProviderGroup::addProvider</a></div><div class="ttdeci">QgsFeatureFilterProviderGroup &amp; addProvider(const QgsFeatureFilterProvider *provider)</div><div class="ttdoc">Add another filter provider to the group. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturefilterprovidergroup_8cpp_source.html#l00042">qgsfeaturefilterprovidergroup.cpp:42</a></div></div>
<div class="ttc" id="classQgsFeature_html_ae6c4c7a5c40d420c95285ce072c24307"><div class="ttname"><a href="classQgsFeature.html#ae6c4c7a5c40d420c95285ce072c24307">QgsFeature::setGeometry</a></div><div class="ttdeci">void setGeometry(const QgsGeometry &amp;geometry)</div><div class="ttdoc">Set the feature&amp;#39;s geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00137">qgsfeature.cpp:137</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a58c037558ae76bb5eb91628026cb7dd0"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a58c037558ae76bb5eb91628026cb7dd0">QgsWms::QgsWmsParameters::polygonTolerance</a></div><div class="ttdeci">QString polygonTolerance() const</div><div class="ttdoc">Returns FI_POLYGON_TOLERANCE parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01062">qgswmsparameters.cpp:1062</a></div></div>
<div class="ttc" id="classQgsRasterDataProvider_html_a5b033a4ab93593c8378af8005ed52ccd"><div class="ttname"><a href="classQgsRasterDataProvider.html#a5b033a4ab93593c8378af8005ed52ccd">QgsRasterDataProvider::identify</a></div><div class="ttdeci">virtual QgsRasterIdentifyResult identify(const QgsPointXY &amp;point, QgsRaster::IdentifyFormat format, const QgsRectangle &amp;boundingBox=QgsRectangle(), int width=0, int height=0, int dpi=96)</div><div class="ttdoc">Identify raster value(s) found on the point position. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterdataprovider_8cpp_source.html#l00245">qgsrasterdataprovider.cpp:245</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4af91cf4a628ccf1d726d4ec4e3b7371d5"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4af91cf4a628ccf1d726d4ec4e3b7371d5">QgsWms::QgsServiceException::OGC_InvalidSRS</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00050">qgswmsserviceexception.h:50</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a8c727ee280cdd2baacca0a116ee0abdc"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a8c727ee280cdd2baacca0a116ee0abdc">QgsWms::QgsWmsParameters::atlasPk</a></div><div class="ttdeci">QStringList atlasPk() const</div><div class="ttdoc">Returns the ATLAS_PK parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01244">qgswmsparameters.cpp:1244</a></div></div>
<div class="ttc" id="classQgsOgcUtils_html_aa921c6532cb08b1ad99d711ba0b9e677"><div class="ttname"><a href="classQgsOgcUtils.html#aa921c6532cb08b1ad99d711ba0b9e677">QgsOgcUtils::geometryToGML</a></div><div class="ttdeci">static QDomElement geometryToGML(const QgsGeometry &amp;geometry, QDomDocument &amp;doc, QgsOgcUtils::GMLVersion gmlVersion, const QString &amp;srsName, bool invertAxisOrientation, const QString &amp;gmlIdBase, int precision=17)</div><div class="ttdoc">Exports the geometry to GML. </div><div class="ttdef"><b>Definition:</b> <a href="qgsogcutils_8cpp_source.html#l01132">qgsogcutils.cpp:1132</a></div></div>
<div class="ttc" id="classQgsCoordinateTransform_html"><div class="ttname"><a href="classQgsCoordinateTransform.html">QgsCoordinateTransform</a></div><div class="ttdoc">Class for doing transforms between two map coordinate systems. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatetransform_8h_source.html#l00052">qgscoordinatetransform.h:52</a></div></div>
<div class="ttc" id="qgssymbollayerutils_8h_html"><div class="ttname"><a href="qgssymbollayerutils_8h.html">qgssymbollayerutils.h</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a821be8716d32d6dd6a7b75bd4080b73c"><div class="ttname"><a href="classQgsWkbTypes.html#a821be8716d32d6dd6a7b75bd4080b73c">QgsWkbTypes::displayString</a></div><div class="ttdeci">static QString displayString(Type type)</div><div class="ttdoc">Returns a display string type for a WKB type, e.g., the geometry name used in WKT geometry representa...</div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8cpp_source.html#l00119">qgswkbtypes.cpp:119</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_aba0ee124dcf2d037f3af53d99866c01c"><div class="ttname"><a href="classQgsVectorLayer.html#aba0ee124dcf2d037f3af53d99866c01c">QgsVectorLayer::setSubsetString</a></div><div class="ttdeci">virtual bool setSubsetString(const QString &amp;subset)</div><div class="ttdoc">Sets the string (typically sql) used to define a subset of the layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l00879">qgsvectorlayer.cpp:879</a></div></div>
<div class="ttc" id="classQgsOgcUtils_html_ad31a34fd7e1013e2b6913fd6b5459c8d"><div class="ttname"><a href="classQgsOgcUtils.html#ad31a34fd7e1013e2b6913fd6b5459c8d">QgsOgcUtils::rectangleToGMLEnvelope</a></div><div class="ttdeci">static QDomElement rectangleToGMLEnvelope(QgsRectangle *env, QDomDocument &amp;doc, int precision=17)</div><div class="ttdoc">Exports the rectangle to GML3 Envelope. </div><div class="ttdef"><b>Definition:</b> <a href="qgsogcutils_8cpp_source.html#l01086">qgsogcutils.cpp:1086</a></div></div>
<div class="ttc" id="classQgsLayerTreeModelLegendNode_html"><div class="ttname"><a href="classQgsLayerTreeModelLegendNode.html">QgsLayerTreeModelLegendNode</a></div><div class="ttdoc">The QgsLegendRendererItem class is abstract interface for legend items returned from QgsMapLayerLegen...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreemodellegendnode_8h_source.html#l00048">qgslayertreemodellegendnode.h:48</a></div></div>
<div class="ttc" id="qgswfsgetfeature_8cpp_html_a64f06b5c5ff2705cb7507ad5817560c0"><div class="ttname"><a href="qgswfsgetfeature_8cpp.html#a64f06b5c5ff2705cb7507ad5817560c0">outputCrs</a></div><div class="ttdeci">const QgsCoordinateReferenceSystem &amp; outputCrs</div><div class="ttdef"><b>Definition:</b> <a href="qgswfsgetfeature_8cpp_source.html#l00059">qgswfsgetfeature.cpp:59</a></div></div>
<div class="ttc" id="qgsvectorlayer_8h_html"><div class="ttname"><a href="qgsvectorlayer_8h.html">qgsvectorlayer.h</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a3186f5474a5fa3ced21e8204d339c301"><div class="ttname"><a href="classQgsRectangle.html#a3186f5474a5fa3ced21e8204d339c301">QgsRectangle::xMinimum</a></div><div class="ttdeci">double xMinimum() const</div><div class="ttdoc">Returns the x minimum value (left side of rectangle). </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00167">qgsrectangle.h:167</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a2bd2b940e1db7812d638da28caabd62a"><div class="ttname"><a href="classQgsMapSettings.html#a2bd2b940e1db7812d638da28caabd62a">QgsMapSettings::setLayers</a></div><div class="ttdeci">void setLayers(const QList&lt; QgsMapLayer *&gt; &amp;layers)</div><div class="ttdoc">Set list of layers for map rendering. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00273">qgsmapsettings.cpp:273</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersLayer_html_a0294dbbed7d43559e8d9831961d1e0a4"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersLayer.html#a0294dbbed7d43559e8d9831961d1e0a4">QgsWms::QgsWmsParametersLayer::mSelection</a></div><div class="ttdeci">QStringList mSelection</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00054">qgswmsparameters.h:54</a></div></div>
<div class="ttc" id="qgsannotationmanager_8h_html"><div class="ttname"><a href="qgsannotationmanager_8h.html">qgsannotationmanager.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a1dad461c28ef757cd1a77ba3a77b42ff"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a1dad461c28ef757cd1a77ba3a77b42ff">QgsWms::QgsWmsParameters::formatAsString</a></div><div class="ttdeci">QString formatAsString() const</div><div class="ttdoc">Returns FORMAT parameter as a string. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00773">qgswmsparameters.cpp:773</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ac3d9c616bf2564cf62a56b593fc2446d"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ac3d9c616bf2564cf62a56b593fc2446d">QgsWms::QgsWmsParameters::dxfLayerAttributes</a></div><div class="ttdeci">QStringList dxfLayerAttributes() const</div><div class="ttdoc">Returns the DXF LAYERATTRIBUTES parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01902">qgswmsparameters.cpp:1902</a></div></div>
<div class="ttc" id="classQgsVectorLayerSimpleLabeling_html"><div class="ttname"><a href="classQgsVectorLayerSimpleLabeling.html">QgsVectorLayerSimpleLabeling</a></div><div class="ttdoc">Basic implementation of the labeling interface. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayerlabeling_8h_source.html#l00144">qgsvectorlayerlabeling.h:144</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4aadc219cee4bc10ffb4e7374fb6f45ab1"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4aadc219cee4bc10ffb4e7374fb6f45ab1">QgsWms::QgsServiceException::OGC_StyleNotDefined</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00052">qgswmsserviceexception.h:52</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a6b7b7f6a7310996e521c7674fad5e542"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a6b7b7f6a7310996e521c7674fad5e542">QgsWms::QgsWmsParameters::lineTolerance</a></div><div class="ttdeci">QString lineTolerance() const</div><div class="ttdoc">Returns FI_LINE_TOLERANCE parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01067">qgswmsparameters.cpp:1067</a></div></div>
<div class="ttc" id="classQgsProject_html_a322fce15a4dd7505398ef9d24295f0c1"><div class="ttname"><a href="classQgsProject.html#a322fce15a4dd7505398ef9d24295f0c1">QgsProject::mapLayer</a></div><div class="ttdeci">QgsMapLayer * mapLayer(const QString &amp;layerId) const</div><div class="ttdoc">Retrieve a pointer to a registered layer by layer ID. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l02678">qgsproject.cpp:2678</a></div></div>
<div class="ttc" id="classQgsLegendRenderer_html_a0d35b6326078ed37eeca250acc5582e2"><div class="ttname"><a href="classQgsLegendRenderer.html#a0d35b6326078ed37eeca250acc5582e2">QgsLegendRenderer::minimumSize</a></div><div class="ttdeci">QSizeF minimumSize(QgsRenderContext *renderContext=nullptr)</div><div class="ttdoc">Runs the layout algorithm and returns the minimum size required for the legend. </div><div class="ttdef"><b>Definition:</b> <a href="qgslegendrenderer_8cpp_source.html#l00039">qgslegendrenderer.cpp:39</a></div></div>
<div class="ttc" id="classQgsTextFormat_html_aa3f1e5f1c056b5e77ab72d8f13b7bbbe"><div class="ttname"><a href="classQgsTextFormat.html#aa3f1e5f1c056b5e77ab72d8f13b7bbbe">QgsTextFormat::setBuffer</a></div><div class="ttdeci">void setBuffer(const QgsTextBufferSettings &amp;bufferSettings)</div><div class="ttdoc">Sets the text&amp;#39;s buffer settings. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8h_source.html#l01011">qgstextrenderer.h:1011</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a87a5cf3ee2fe6494c04a9e88876cc54e"><div class="ttname"><a href="classQgsRectangle.html#a87a5cf3ee2fe6494c04a9e88876cc54e">QgsRectangle::yMaximum</a></div><div class="ttdeci">double yMaximum() const</div><div class="ttdoc">Returns the y maximum value (top side of rectangle). </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00172">qgsrectangle.h:172</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a34d5f22eeef1ebb67dc757f6415a481e"><div class="ttname"><a href="classQgsVectorLayer.html#a34d5f22eeef1ebb67dc757f6415a481e">QgsVectorLayer::getFeatures</a></div><div class="ttdeci">QgsFeatureIterator getFeatures(const QgsFeatureRequest &amp;request=QgsFeatureRequest()) const FINAL</div><div class="ttdoc">Queries the layer for features specified in request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l00923">qgsvectorlayer.cpp:923</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a0594da1ee92c9fc9e15659fc39522f97"><div class="ttname"><a href="classQgsMapLayer.html#a0594da1ee92c9fc9e15659fc39522f97">QgsMapLayer::name</a></div><div class="ttdeci">QString name</div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8h_source.html#l00082">qgsmaplayer.h:82</a></div></div>
<div class="ttc" id="qgslayerrestorer_8h_html"><div class="ttname"><a href="qgslayerrestorer_8h.html">qgslayerrestorer.h</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a4185f13de667ef7a3ea0f109bb4b42fea282380b939b3f192255e6ab991fc4ac5"><div class="ttname"><a href="classQgsMapSettings.html#a4185f13de667ef7a3ea0f109bb4b42fea282380b939b3f192255e6ab991fc4ac5">QgsMapSettings::UseRenderingOptimization</a></div><div class="ttdoc">Enable vector simplification and other rendering optimizations. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8h_source.html#l00261">qgsmapsettings.h:261</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a48aa2482057ce35f097976d804906e1a"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a48aa2482057ce35f097976d804906e1a">QgsWms::QgsWmsParameters::y</a></div><div class="ttdeci">QString y() const</div><div class="ttdoc">Returns Y parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00887">qgswmsparameters.cpp:887</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a83703773695ab49cee84b30f398abd05"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a83703773695ab49cee84b30f398abd05">QgsWms::QgsWmsParameters::backgroundColorAsColor</a></div><div class="ttdeci">QColor backgroundColorAsColor() const</div><div class="ttdoc">Returns BGCOLOR parameter as a QColor or its default value if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01602">qgswmsparameters.cpp:1602</a></div></div>
<div class="ttc" id="classQgsRasterRenderer_html_aa4645c9fcb14b2af1544af370aca23da"><div class="ttname"><a href="classQgsRasterRenderer.html#aa4645c9fcb14b2af1544af370aca23da">QgsRasterRenderer::setOpacity</a></div><div class="ttdeci">void setOpacity(double opacity)</div><div class="ttdoc">Sets the opacity for the renderer, where opacity is a value between 0 (totally transparent) and 1...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterrenderer_8h_source.html#l00080">qgsrasterrenderer.h:80</a></div></div>
<div class="ttc" id="classQgsLayerTreeGroup_html_a527b55b8befc7c9a8c6a0c439cd16a8a"><div class="ttname"><a href="classQgsLayerTreeGroup.html#a527b55b8befc7c9a8c6a0c439cd16a8a">QgsLayerTreeGroup::findLayerIds</a></div><div class="ttdeci">QStringList findLayerIds() const</div><div class="ttdoc">Find layer IDs used in all layer nodes. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreegroup_8cpp_source.html#l00397">qgslayertreegroup.cpp:397</a></div></div>
<div class="ttc" id="classQgsGeometry_html_a89a0aad67d4bab51852ab9308fd854f9"><div class="ttname"><a href="classQgsGeometry.html#a89a0aad67d4bab51852ab9308fd854f9">QgsGeometry::type</a></div><div class="ttdeci">QgsWkbTypes::GeometryType type</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8h_source.html#l00115">qgsgeometry.h:115</a></div></div>
<div class="ttc" id="qgslayoutexporter_8h_html"><div class="ttname"><a href="qgslayoutexporter_8h.html">qgslayoutexporter.h</a></div></div>
<div class="ttc" id="classQgsFeature_html_abf0922d13bcf28c72770d8acdd75594e"><div class="ttname"><a href="classQgsFeature.html#abf0922d13bcf28c72770d8acdd75594e">QgsFeature::geometry</a></div><div class="ttdeci">QgsGeometry geometry</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00067">qgsfeature.h:67</a></div></div>
<div class="ttc" id="classQgsCsException_html"><div class="ttname"><a href="classQgsCsException.html">QgsCsException</a></div><div class="ttdoc">Custom exception class for Coordinate Reference System related exceptions. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexception_8h_source.html#l00065">qgsexception.h:65</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a1e78dec0541aaeff25feac9a2445ae29"><div class="ttname"><a href="classQgsMapLayer.html#a1e78dec0541aaeff25feac9a2445ae29">QgsMapLayer::customProperty</a></div><div class="ttdeci">QVariant customProperty(const QString &amp;value, const QVariant &amp;defaultValue=QVariant()) const</div><div class="ttdoc">Read a custom property from layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8cpp_source.html#l01695">qgsmaplayer.cpp:1695</a></div></div>
<div class="ttc" id="qgslayoutpagecollection_8h_html"><div class="ttname"><a href="qgslayoutpagecollection_8h.html">qgslayoutpagecollection.h</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a9b380cb976d5ae18a5f18f85807a823d"><div class="ttname"><a href="classQgsMapSettings.html#a9b380cb976d5ae18a5f18f85807a823d">QgsMapSettings::selectionColor</a></div><div class="ttdeci">QColor selectionColor() const</div><div class="ttdoc">Gets color that is used for drawing of selected vector features. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8h_source.html#l00251">qgsmapsettings.h:251</a></div></div>
<div class="ttc" id="namespaceQgsServerProjectUtils_html_a111131950438e1c30d49be0c14884178"><div class="ttname"><a href="namespaceQgsServerProjectUtils.html#a111131950438e1c30d49be0c14884178">QgsServerProjectUtils::wmsFeatureInfoSchema</a></div><div class="ttdeci">SERVER_EXPORT QString wmsFeatureInfoSchema(const QgsProject &amp;project)</div><div class="ttdoc">Returns the schema URL for XML GetFeatureInfo request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverprojectutils_8cpp_source.html#l00163">qgsserverprojectutils.cpp:163</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a148a526506fe9bbc6cfc0e9c08d1b327"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a148a526506fe9bbc6cfc0e9c08d1b327">QgsWms::QgsWmsParameters::dxfFormatOptions</a></div><div class="ttdeci">QMap&lt; DxfFormatOption, QString &gt; dxfFormatOptions() const</div><div class="ttdoc">Returns a map of DXF options defined within FORMAT_OPTIONS parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01977">qgswmsparameters.cpp:1977</a></div></div>
<div class="ttc" id="qgsfield_8h_html_a00f27df80eac3fb534923fefaed2181d"><div class="ttname"><a href="qgsfield_8h.html#a00f27df80eac3fb534923fefaed2181d">QgsAttributeList</a></div><div class="ttdeci">QList&lt; int &gt; QgsAttributeList</div><div class="ttdef"><b>Definition:</b> <a href="qgsfield_8h_source.html#l00027">qgsfield.h:27</a></div></div>
<div class="ttc" id="classQgsPrintLayout_html"><div class="ttname"><a href="classQgsPrintLayout.html">QgsPrintLayout</a></div><div class="ttdoc">Print layout, a QgsLayout subclass for static or atlas-based layouts. </div><div class="ttdef"><b>Definition:</b> <a href="qgsprintlayout_8h_source.html#l00030">qgsprintlayout.h:30</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a52291ec77f0c2a63043676727e4f2560"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a52291ec77f0c2a63043676727e4f2560">QgsWms::QgsWmsRenderContext::layer</a></div><div class="ttdeci">QgsMapLayer * layer(const QString &amp;nickname) const</div><div class="ttdoc">Returns the layer corresponding to the nickname, or a nullptr if not found or if the layer do not nee...</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00258">qgswmsrendercontext.cpp:258</a></div></div>
<div class="ttc" id="classQgsExpressionContextUtils_html_af1b61531d9512e4cdc8ca505ae07be89"><div class="ttname"><a href="classQgsExpressionContextUtils.html#af1b61531d9512e4cdc8ca505ae07be89">QgsExpressionContextUtils::layerScope</a></div><div class="ttdeci">static QgsExpressionContextScope * layerScope(const QgsMapLayer *layer)</div><div class="ttdoc">Creates a new scope which contains variables and functions relating to a QgsMapLayer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexpressioncontextutils_8cpp_source.html#l00316">qgsexpressioncontextutils.cpp:316</a></div></div>
<div class="ttc" id="classQgsLayoutItemLegend_html"><div class="ttname"><a href="classQgsLayoutItemLegend.html">QgsLayoutItemLegend</a></div><div class="ttdoc">A layout item subclass for map legends. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitemlegend_8h_source.html#l00061">qgslayoutitemlegend.h:61</a></div></div>
<div class="ttc" id="classQgsLayerTreeGroup_html_ab1d23a4fa30202929c97cfe00c326e03"><div class="ttname"><a href="classQgsLayerTreeGroup.html#ab1d23a4fa30202929c97cfe00c326e03">QgsLayerTreeGroup::findLayer</a></div><div class="ttdeci">QgsLayerTreeLayer * findLayer(QgsMapLayer *layer) const</div><div class="ttdoc">Find layer node representing the map layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreegroup_8cpp_source.html#l00195">qgslayertreegroup.cpp:195</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a7d8c0bc9cdbb0e4159a8071205790f9aa1259502d5cc3dd3c06d4f93a74cb8d93"><div class="ttname"><a href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9aa1259502d5cc3dd3c06d4f93a74cb8d93">QgsPalLayerSettings::PositionY</a></div><div class="ttdoc">Y-coordinate data defined label position. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00415">qgspallabeling.h:415</a></div></div>
<div class="ttc" id="classQgsFeatureIterator_html_a0e06c74bda2fbddbd7f2de13363fac44"><div class="ttname"><a href="classQgsFeatureIterator.html#a0e06c74bda2fbddbd7f2de13363fac44">QgsFeatureIterator::nextFeature</a></div><div class="ttdeci">bool nextFeature(QgsFeature &amp;f)</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeatureiterator_8h_source.html#l00373">qgsfeatureiterator.h:373</a></div></div>
<div class="ttc" id="classQgsTextFormat_html"><div class="ttname"><a href="classQgsTextFormat.html">QgsTextFormat</a></div><div class="ttdoc">Container for all settings relating to text rendering. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8h_source.html#l00978">qgstextrenderer.h:978</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1SvgExportSettings_html_a8e9455105c0d53025bc0a1f041afe110"><div class="ttname"><a href="structQgsLayoutExporter_1_1SvgExportSettings.html#a8e9455105c0d53025bc0a1f041afe110">QgsLayoutExporter::SvgExportSettings::flags</a></div><div class="ttdeci">QgsLayoutRenderContext::Flags flags</div><div class="ttdoc">Layout context flags, which control how the export will be created. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00426">qgslayoutexporter.h:426</a></div></div>
<div class="ttc" id="classQgsLayoutSize_html"><div class="ttname"><a href="classQgsLayoutSize.html">QgsLayoutSize</a></div><div class="ttdoc">This class provides a method of storing sizes, consisting of a width and height, for use in QGIS layo...</div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutsize_8h_source.html#l00040">qgslayoutsize.h:40</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_aab0dc2dca2b882316c3bb3668dbf4667af5584cc22947cb704cb5c89a9c2e066d"><div class="ttname"><a href="classQgsFeatureRequest.html#aab0dc2dca2b882316c3bb3668dbf4667af5584cc22947cb704cb5c89a9c2e066d">QgsFeatureRequest::NoGeometry</a></div><div class="ttdoc">Geometry is not required. It may still be returned if e.g. required for a filter condition. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8h_source.html#l00078">qgsfeaturerequest.h:78</a></div></div>
<div class="ttc" id="qgswmsserviceexception_8h_html"><div class="ttname"><a href="qgswmsserviceexception_8h.html">qgswmsserviceexception.h</a></div></div>
<div class="ttc" id="classQgsGeometry_html_aa9309455d08598378f06fa758e64cd3e"><div class="ttname"><a href="classQgsGeometry.html#aa9309455d08598378f06fa758e64cd3e">QgsGeometry::set</a></div><div class="ttdeci">void set(QgsAbstractGeometry *geometry)</div><div class="ttdoc">Sets the underlying geometry store. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometry_8cpp_source.html#l00136">qgsgeometry.cpp:136</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ab98bf25965876af468ae6c14576f63d2"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ab98bf25965876af468ae6c14576f63d2">QgsWms::QgsWmsParameters::externalLayersParameters</a></div><div class="ttdeci">QList&lt; QgsWmsParametersExternalLayer &gt; externalLayersParameters() const</div><div class="ttdoc">Returns parameters for each external layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01580">qgswmsparameters.cpp:1580</a></div></div>
<div class="ttc" id="group__core_html_ggafbd92a77d43d50b374d3d022ec71d30cac2649d14d3e8745d4cd8a76053d7d18d"><div class="ttname"><a href="group__core.html#ggafbd92a77d43d50b374d3d022ec71d30cac2649d14d3e8745d4cd8a76053d7d18d">QgsMapLayerType::PluginLayer</a></div></div>
<div class="ttc" id="qgsfeaturerequest_8h_html"><div class="ttname"><a href="qgsfeaturerequest_8h.html">qgsfeaturerequest.h</a></div></div>
<div class="ttc" id="classQgsAttributes_html"><div class="ttname"><a href="classQgsAttributes.html">QgsAttributes</a></div><div class="ttdoc">A vector of attributes. </div><div class="ttdef"><b>Definition:</b> <a href="qgsattributes_8h_source.html#l00057">qgsattributes.h:57</a></div></div>
<div class="ttc" id="classQgsOgcUtils_html_adc3636e57cc6a8958167de25c7570a84"><div class="ttname"><a href="classQgsOgcUtils.html#adc3636e57cc6a8958167de25c7570a84">QgsOgcUtils::expressionFromOgcFilter</a></div><div class="ttdeci">static QgsExpression * expressionFromOgcFilter(const QDomElement &amp;element, QgsVectorLayer *layer=nullptr)</div><div class="ttdoc">Parse XML with OGC filter into QGIS expression. </div><div class="ttdef"><b>Definition:</b> <a href="qgsogcutils_8cpp_source.html#l01603">qgsogcutils.cpp:1603</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsServiceException_html_a8361c33da28f05b369245bd7bc1c8cf4aeffb3776ee51777c91cf22539d19238f"><div class="ttname"><a href="classQgsWms_1_1QgsServiceException.html#a8361c33da28f05b369245bd7bc1c8cf4aeffb3776ee51777c91cf22539d19238f">QgsWms::QgsServiceException::OGC_LayerNotQueryable</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsserviceexception_8h_source.html#l00053">qgswmsserviceexception.h:53</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_afc62189976b903500393f9c803ce202fa04ca5667f8d4c05024fe2b6eb9dd19a5"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#afc62189976b903500393f9c803ce202fa04ca5667f8d4c05024fe2b6eb9dd19a5">QgsWms::QgsWmsRenderContext::UseFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8h_source.html#l00042">qgswmsrendercontext.h:42</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1ImageExportSettings_html_ad36b13d44aae0e70ee161a5cfdc0c90d"><div class="ttname"><a href="structQgsLayoutExporter_1_1ImageExportSettings.html#ad36b13d44aae0e70ee161a5cfdc0c90d">QgsLayoutExporter::ImageExportSettings::dpi</a></div><div class="ttdeci">double dpi</div><div class="ttdoc">Resolution to export layout at. If dpi &lt;= 0 the default layout dpi will be used. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00154">qgslayoutexporter.h:154</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_a2ff8dfd45f6789560553fb9400ce496f"><div class="ttname"><a href="classQgsServerSettings.html#a2ff8dfd45f6789560553fb9400ce496f">QgsServerSettings::maxThreads</a></div><div class="ttdeci">int maxThreads() const</div><div class="ttdoc">Returns the maximum number of threads to use. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00327">qgsserversettings.cpp:327</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_af3e8c49a30638360c6c260e08d405309"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#af3e8c49a30638360c6c260e08d405309">QgsWms::QgsWmsParameters::dpi</a></div><div class="ttdeci">QString dpi() const</div><div class="ttdoc">Returns DPI parameter or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00740">qgswmsparameters.cpp:740</a></div></div>
<div class="ttc" id="qgslayoutmeasurement_8h_html"><div class="ttname"><a href="qgslayoutmeasurement_8h.html">qgslayoutmeasurement.h</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_aeab946f60b7a5644ccc62495a6717206"><div class="ttname"><a href="classQgsMapSettings.html#aeab946f60b7a5644ccc62495a6717206">QgsMapSettings::mapToLayerCoordinates</a></div><div class="ttdeci">QgsPointXY mapToLayerCoordinates(const QgsMapLayer *layer, QgsPointXY point) const</div><div class="ttdoc">transform point coordinates from output CRS to layer&amp;#39;s CRS </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00501">qgsmapsettings.cpp:501</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html"><div class="ttname"><a href="classQgsVectorLayer.html">QgsVectorLayer</a></div><div class="ttdoc">Represents a vector layer which manages a vector based data sets. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8h_source.html#l00362">qgsvectorlayer.h:362</a></div></div>
<div class="ttc" id="structQgsLayerTreeModelLegendNode_1_1ItemContext_html_ad92ab91e6dbb34759e3d7162ba0013b7"><div class="ttname"><a href="structQgsLayerTreeModelLegendNode_1_1ItemContext.html#ad92ab91e6dbb34759e3d7162ba0013b7">QgsLayerTreeModelLegendNode::ItemContext::labelXOffset</a></div><div class="ttdeci">double labelXOffset</div><div class="ttdoc">offset from the left side where label should start </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreemodellegendnode_8h_source.html#l00096">qgslayertreemodellegendnode.h:96</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a92766dbf18643e91bdd301d25a490c6e"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a92766dbf18643e91bdd301d25a490c6e">QgsWms::QgsWmsParameters::iAsInt</a></div><div class="ttdeci">int iAsInt() const</div><div class="ttdoc">Returns I parameter as an int or its default value if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00872">qgswmsparameters.cpp:872</a></div></div>
<div class="ttc" id="classQgsFeature_html_ae5957f3cf812dc7c077ee7f906745ac7"><div class="ttname"><a href="classQgsFeature.html#ae5957f3cf812dc7c077ee7f906745ac7">QgsFeature::attribute</a></div><div class="ttdeci">QVariant attribute(const QString &amp;name) const</div><div class="ttdoc">Lookup attribute value from attribute name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8cpp_source.html#l00262">qgsfeature.cpp:262</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1SvgExportSettings_html"><div class="ttname"><a href="structQgsLayoutExporter_1_1SvgExportSettings.html">QgsLayoutExporter::SvgExportSettings</a></div><div class="ttdoc">Contains settings relating to exporting layouts to SVG. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00377">qgslayoutexporter.h:377</a></div></div>
<div class="ttc" id="classQgsLayoutFrame_html"><div class="ttname"><a href="classQgsLayoutFrame.html">QgsLayoutFrame</a></div><div class="ttdoc">Base class for frame items, which form a layout multiframe item. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutframe_8h_source.html#l00031">qgslayoutframe.h:31</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a508c8cf96ed6925d12a33085612f9b05a3289d821c3ce98cc0152d083c040ab2e"><div class="ttname"><a href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a3289d821c3ce98cc0152d083c040ab2e">QgsRasterInterface::IdentifyValue</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00191">qgsrasterinterface.h:191</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a32ef18a7d189116d90c34b56fa3a7007"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a32ef18a7d189116d90c34b56fa3a7007">QgsWms::QgsWmsParameters::composerMapParameters</a></div><div class="ttdeci">QgsWmsParametersComposerMap composerMapParameters(int mapId) const</div><div class="ttdoc">Returns the requested parameters for a composer map parameter. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l01612">qgswmsparameters.cpp:1612</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a2074dabaf33c1ba3a4407aff45b75a59"><div class="ttname"><a href="classQgsAbstractGeometry.html#a2074dabaf33c1ba3a4407aff45b75a59">QgsAbstractGeometry::segmentize</a></div><div class="ttdeci">virtual QgsAbstractGeometry * segmentize(double tolerance=M_PI/180., SegmentationToleranceType toleranceType=MaximumAngle) const</div><div class="ttdoc">Returns a version of the geometry without curves. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8cpp_source.html#l00310">qgsabstractgeometry.cpp:310</a></div></div>
<div class="ttc" id="classQgsLayoutItemHtml_html"><div class="ttname"><a href="classQgsLayoutItemHtml.html">QgsLayoutItemHtml</a></div><div class="ttdoc">A layout multiframe subclass for HTML content. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutitemhtml_8h_source.html#l00036">qgslayoutitemhtml.h:36</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a7d8c0bc9cdbb0e4159a8071205790f9aafc00c9b621833b0c92ac3cd03611a842"><div class="ttname"><a href="classQgsPalLayerSettings.html#a7d8c0bc9cdbb0e4159a8071205790f9aafc00c9b621833b0c92ac3cd03611a842">QgsPalLayerSettings::Vali</a></div><div class="ttdoc">Vertical alignment for data defined label position (Bottom, Base, Half, Cap, Top) ...</div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00417">qgspallabeling.h:417</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersLayer_html_a92b04b515c2184b9ccdb2e94065289c6"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersLayer.html#a92b04b515c2184b9ccdb2e94065289c6">QgsWms::QgsWmsParametersLayer::mFilter</a></div><div class="ttdeci">QList&lt; QgsWmsParametersFilter &gt; mFilter</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00053">qgswmsparameters.h:53</a></div></div>
<div class="ttc" id="qgsfilterrestorer_8h_html"><div class="ttname"><a href="qgsfilterrestorer_8h.html">qgsfilterrestorer.h</a></div></div>
<div class="ttc" id="classQgsException_html"><div class="ttname"><a href="classQgsException.html">QgsException</a></div><div class="ttdoc">Defines a QGIS exception class. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexception_8h_source.html#l00034">qgsexception.h:34</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html">QgsWms::QgsWmsParameter</a></div><div class="ttdoc">WMS parameter received from the client. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00098">qgswmsparameters.h:98</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_ab9fe0275aa8684f752725ed8872226be"><div class="ttname"><a href="classQgsFeatureRequest.html#ab9fe0275aa8684f752725ed8872226be">QgsFeatureRequest::transformContext</a></div><div class="ttdeci">QgsCoordinateTransformContext transformContext() const</div><div class="ttdoc">Returns the transform context, for use when a destinationCrs() has been set and reprojection is requi...</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8cpp_source.html#l00254">qgsfeaturerequest.cpp:254</a></div></div>
<div class="ttc" id="classQgsDxfExport_html_a700780127af97a8dd53e4dba25405bbf"><div class="ttname"><a href="classQgsDxfExport.html#a700780127af97a8dd53e4dba25405bbf">QgsDxfExport::addLayers</a></div><div class="ttdeci">void addLayers(const QList&lt; QgsDxfExport::DxfLayer &gt; &amp;layers)</div><div class="ttdoc">Add layers to export. </div><div class="ttdef"><b>Definition:</b> <a href="qgsdxfexport_8cpp_source.html#l00409">qgsdxfexport.cpp:409</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a02c75181a6898b349c39d94f5ce9600d"><div class="ttname"><a href="classQgsVectorLayer.html#a02c75181a6898b349c39d94f5ce9600d">QgsVectorLayer::attributeDisplayName</a></div><div class="ttdeci">QString attributeDisplayName(int index) const</div><div class="ttdoc">Convenience function that returns the attribute alias if defined or the field name else...</div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l02791">qgsvectorlayer.cpp:2791</a></div></div>
<div class="ttc" id="classQgsTextBufferSettings_html_a4338a2349425772539faf6c4c691c435"><div class="ttname"><a href="classQgsTextBufferSettings.html#a4338a2349425772539faf6c4c691c435">QgsTextBufferSettings::setColor</a></div><div class="ttdeci">void setColor(const QColor &amp;color)</div><div class="ttdoc">Sets the color for the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="qgstextrenderer_8cpp_source.html#l00132">qgstextrenderer.cpp:132</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a67fba9e271265dddf0e9bb3a28c9e7de"><div class="ttname"><a href="classQgsPalLayerSettings.html#a67fba9e271265dddf0e9bb3a28c9e7de">QgsPalLayerSettings::priority</a></div><div class="ttdeci">int priority</div><div class="ttdoc">Label priority. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00725">qgspallabeling.h:725</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_aaf3488afc0e3919ed9bdf6902f90d53ba63489984a286cdc4dbf64319651c4fdd"><div class="ttname"><a href="classQgsMapLayer.html#aaf3488afc0e3919ed9bdf6902f90d53ba63489984a286cdc4dbf64319651c4fdd">QgsMapLayer::Identifiable</a></div><div class="ttdoc">If the layer is identifiable using the identify map tool and as a WMS layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8h_source.html#l00136">qgsmaplayer.h:136</a></div></div>
<div class="ttc" id="classQgsMapSettings_html_a73da4f11859995fe92a7e28d2a64530c"><div class="ttname"><a href="classQgsMapSettings.html#a73da4f11859995fe92a7e28d2a64530c">QgsMapSettings::outputSize</a></div><div class="ttdeci">QSize outputSize() const</div><div class="ttdoc">Returns the size of the resulting map image. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapsettings_8cpp_source.html#l00221">qgsmapsettings.cpp:221</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a60e72c2f73cb07fdbcdbc2d5068b5d9ca18226cfb487dc768c4b74d00c1939ea0"><div class="ttname"><a href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9ca18226cfb487dc768c4b74d00c1939ea0">QgsWkbTypes::UnknownGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00144">qgswkbtypes.h:144</a></div></div>
<div class="ttc" id="classQgsRasterRenderer_html"><div class="ttname"><a href="classQgsRasterRenderer.html">QgsRasterRenderer</a></div><div class="ttdoc">Raster renderer pipe that applies colors to a raster. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterrenderer_8h_source.html#l00037">qgsrasterrenderer.h:37</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_ae44996056abda846261e89d4266a805ba5de193f910eede41c793241de3caa5c2"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#ae44996056abda846261e89d4266a805ba5de193f910eede41c793241de3caa5c2">QgsWms::QgsWmsParameters::JPG</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00332">qgswmsparameters.h:332</a></div></div>
<div class="ttc" id="qgscoordinatereferencesystem_8h_html"><div class="ttname"><a href="qgscoordinatereferencesystem_8h.html">qgscoordinatereferencesystem.h</a></div></div>
<div class="ttc" id="classQgsFeatureRenderer_html_a1dc475663007d2a26f8e4480fd51ba9b"><div class="ttname"><a href="classQgsFeatureRenderer.html#a1dc475663007d2a26f8e4480fd51ba9b">QgsFeatureRenderer::clone</a></div><div class="ttdeci">virtual QgsFeatureRenderer * clone() const =0</div><div class="ttdoc">Create a deep copy of this renderer. </div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html_ab2dee1805d8e3b62448e4d106753b595"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html#ab2dee1805d8e3b62448e4d106753b595">QgsCoordinateReferenceSystem::authid</a></div><div class="ttdeci">QString authid() const</div><div class="ttdoc">Returns the authority identifier for the CRS. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8cpp_source.html#l01245">qgscoordinatereferencesystem.cpp:1245</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersComposerMap_html_a80c5557245752eed835b467742f9d145"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersComposerMap.html#a80c5557245752eed835b467742f9d145">QgsWms::QgsWmsParametersComposerMap::mHasExtent</a></div><div class="ttdeci">bool mHasExtent</div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00081">qgswmsparameters.h:81</a></div></div>
<div class="ttc" id="classQgsFeature_html_a0c49a035fc3aa0ca232450394f689029"><div class="ttname"><a href="classQgsFeature.html#a0c49a035fc3aa0ca232450394f689029">QgsFeature::attributes</a></div><div class="ttdeci">QgsAttributes attributes</div><div class="ttdef"><b>Definition:</b> <a href="qgsfeature_8h_source.html#l00065">qgsfeature.h:65</a></div></div>
<div class="ttc" id="classQgsFeatureFilterProviderGroup_html"><div class="ttname"><a href="classQgsFeatureFilterProviderGroup.html">QgsFeatureFilterProviderGroup</a></div><div class="ttdoc">A filter filter provider grouping several filter providers. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturefilterprovidergroup_8h_source.html#l00032">qgsfeaturefilterprovidergroup.h:32</a></div></div>
<div class="ttc" id="classQgsMapLayerStyleManager_html_a33f9452854c20bca39789ea711c6020b"><div class="ttname"><a href="classQgsMapLayerStyleManager.html#a33f9452854c20bca39789ea711c6020b">QgsMapLayerStyleManager::setCurrentStyle</a></div><div class="ttdeci">bool setCurrentStyle(const QString &amp;name)</div><div class="ttdoc">Set a different style as the current style - will apply it to the layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayerstylemanager_8cpp_source.html#l00169">qgsmaplayerstylemanager.cpp:169</a></div></div>
<div class="ttc" id="classQgsDxfExport_html"><div class="ttname"><a href="classQgsDxfExport.html">QgsDxfExport</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsdxfexport_8h_source.html#l00055">qgsdxfexport.h:55</a></div></div>
<div class="ttc" id="structQgsMapRendererJob_1_1Error_html_a47caa6a3d819aa5b522dac03ab5405fd"><div class="ttname"><a href="structQgsMapRendererJob_1_1Error.html#a47caa6a3d819aa5b522dac03ab5405fd">QgsMapRendererJob::Error::message</a></div><div class="ttdeci">QString message</div><div class="ttdef"><b>Definition:</b> <a href="qgsmaprendererjob_8h_source.html#l00194">qgsmaprendererjob.h:194</a></div></div>
<div class="ttc" id="classQgsCoordinateTransform_html_a8cc5d64f1438300f231ec9444edbbe67"><div class="ttname"><a href="classQgsCoordinateTransform.html#a8cc5d64f1438300f231ec9444edbbe67">QgsCoordinateTransform::transformBoundingBox</a></div><div class="ttdeci">QgsRectangle transformBoundingBox(const QgsRectangle &amp;rectangle, TransformDirection direction=ForwardTransform, bool handle180Crossover=false) const SIP_THROW(QgsCsException)</div><div class="ttdoc">Transforms a rectangle from the source CRS to the destination CRS. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatetransform_8cpp_source.html#l00500">qgscoordinatetransform.cpp:500</a></div></div>
<div class="ttc" id="classQgsMapLayer_html_a3619f5329809ff09bf0cc88b05dd6168"><div class="ttname"><a href="classQgsMapLayer.html#a3619f5329809ff09bf0cc88b05dd6168">QgsMapLayer::crs</a></div><div class="ttdeci">QgsCoordinateReferenceSystem crs</div><div class="ttdef"><b>Definition:</b> <a href="qgsmaplayer_8h_source.html#l00085">qgsmaplayer.h:85</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsRenderContext_html_a84903d316c24b3de07073a6777b73965"><div class="ttname"><a href="classQgsWms_1_1QgsWmsRenderContext.html#a84903d316c24b3de07073a6777b73965">QgsWms::QgsWmsRenderContext::style</a></div><div class="ttdeci">QString style(const QgsMapLayer &amp;layer) const</div><div class="ttdoc">Returns a style&amp;#39;s name for a specific layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrendercontext_8cpp_source.html#l00094">qgswmsrendercontext.cpp:94</a></div></div>
<div class="ttc" id="qgsaccesscontrol_8h_html"><div class="ttname"><a href="qgsaccesscontrol_8h.html">qgsaccesscontrol.h</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dba330ab96a38c98ed9985204e521f31b52"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dba330ab96a38c98ed9985204e521f31b52">QgsWms::QgsWmsParameter::I</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00148">qgswmsparameters.h:148</a></div></div>
<div class="ttc" id="classQgsRectangle_html_aef2567ca2b950376232f55539c4cf5cc"><div class="ttname"><a href="classQgsRectangle.html#aef2567ca2b950376232f55539c4cf5cc">QgsRectangle::invert</a></div><div class="ttdeci">void invert()</div><div class="ttdoc">Swap x/y coordinates in the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00532">qgsrectangle.h:532</a></div></div>
<div class="ttc" id="classQgsRectangle_html_ad0a64f974edb994e38e3c418e48396d8"><div class="ttname"><a href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">QgsRectangle::height</a></div><div class="ttdeci">double height() const</div><div class="ttdoc">Returns the height of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00209">qgsrectangle.h:209</a></div></div>
<div class="ttc" id="classQgsFeatureRequest_html_a650612f14b4a10f5afa553d13a810927"><div class="ttname"><a href="classQgsFeatureRequest.html#a650612f14b4a10f5afa553d13a810927">QgsFeatureRequest::setFlags</a></div><div class="ttdeci">QgsFeatureRequest &amp; setFlags(QgsFeatureRequest::Flags flags)</div><div class="ttdoc">Sets flags that affect how features will be fetched. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeaturerequest_8cpp_source.html#l00180">qgsfeaturerequest.cpp:180</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_a2f17ebe5d3a46f807074e0c5954bd66c"><div class="ttname"><a href="classQgsPalLayerSettings.html#a2f17ebe5d3a46f807074e0c5954bd66c">QgsPalLayerSettings::dataDefinedProperties</a></div><div class="ttdeci">QgsPropertyCollection &amp; dataDefinedProperties()</div><div class="ttdoc">Returns a reference to the label&amp;#39;s property collection, used for data defined overrides. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00891">qgspallabeling.h:891</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameters_html_a7ad90c53ef9e1642ad535204cd1710a9"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameters.html#a7ad90c53ef9e1642ad535204cd1710a9">QgsWms::QgsWmsParameters::xAsInt</a></div><div class="ttdeci">int xAsInt() const</div><div class="ttdoc">Returns X parameter as an int or its default value if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8cpp_source.html#l00892">qgswmsparameters.cpp:892</a></div></div>
<div class="ttc" id="classQgsLayerTreeLayer_html"><div class="ttname"><a href="classQgsLayerTreeLayer.html">QgsLayerTreeLayer</a></div><div class="ttdoc">Layer tree node points to a map layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayertreelayer_8h_source.html#l00042">qgslayertreelayer.h:42</a></div></div>
<div class="ttc" id="classQgsLegendRenderer_html"><div class="ttname"><a href="classQgsLegendRenderer.html">QgsLegendRenderer</a></div><div class="ttdoc">The QgsLegendRenderer class handles automatic layout and rendering of legend. </div><div class="ttdef"><b>Definition:</b> <a href="qgslegendrenderer_8h_source.html#l00046">qgslegendrenderer.h:46</a></div></div>
<div class="ttc" id="structQgsLayoutExporter_1_1ImageExportSettings_html_a6d5f6d12437f66492d977611ba3ab715"><div class="ttname"><a href="structQgsLayoutExporter_1_1ImageExportSettings.html#a6d5f6d12437f66492d977611ba3ab715">QgsLayoutExporter::ImageExportSettings::flags</a></div><div class="ttdeci">QgsLayoutRenderContext::Flags flags</div><div class="ttdoc">Layout context flags, which control how the export will be created. </div><div class="ttdef"><b>Definition:</b> <a href="qgslayoutexporter_8h_source.html#l00209">qgslayoutexporter.h:209</a></div></div>
<div class="ttc" id="structQgsWms_1_1QgsWmsParametersExternalLayer_html"><div class="ttname"><a href="structQgsWms_1_1QgsWmsParametersExternalLayer.html">QgsWms::QgsWmsParametersExternalLayer</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00058">qgswmsparameters.h:58</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsRenderer_html_acb99228370280f08d6e09219466d5843"><div class="ttname"><a href="classQgsWms_1_1QgsRenderer.html#acb99228370280f08d6e09219466d5843">QgsWms::QgsRenderer::getLegendGraphics</a></div><div class="ttdeci">QImage * getLegendGraphics(QgsLayerTreeModel &amp;model)</div><div class="ttdoc">Returns the map legend as an image (or nullptr in case of error). </div><div class="ttdef"><b>Definition:</b> <a href="qgswmsrenderer_8cpp_source.html#l00111">qgswmsrenderer.cpp:111</a></div></div>
<div class="ttc" id="classQgsExpression_html_a5d51cbf8b96a2b4d2ce115171e5522fd"><div class="ttname"><a href="classQgsExpression.html#a5d51cbf8b96a2b4d2ce115171e5522fd">QgsExpression::replaceExpressionText</a></div><div class="ttdeci">static QString replaceExpressionText(const QString &amp;action, const QgsExpressionContext *context, const QgsDistanceArea *distanceArea=nullptr)</div><div class="ttdoc">This function replaces each expression between [% and %] in the string with the result of its evaluat...</div><div class="ttdef"><b>Definition:</b> <a href="qgsexpression_8cpp_source.html#l00470">qgsexpression.cpp:470</a></div></div>
<div class="ttc" id="classQgsPalLayerSettings_html_ac57b3ecf3c052e33c947ed8713e4b48c"><div class="ttname"><a href="classQgsPalLayerSettings.html#ac57b3ecf3c052e33c947ed8713e4b48c">QgsPalLayerSettings::fieldName</a></div><div class="ttdeci">QString fieldName</div><div class="ttdoc">Name of field (or an expression) to use for label text. </div><div class="ttdef"><b>Definition:</b> <a href="qgspallabeling_8h_source.html#l00481">qgspallabeling.h:481</a></div></div>
<div class="ttc" id="classQgsWms_1_1QgsWmsParameter_html_a530ab5c095c43803ab11e6d2b41240dbab257dc9133b0ae10f9139ad03a5a9064"><div class="ttname"><a href="classQgsWms_1_1QgsWmsParameter.html#a530ab5c095c43803ab11e6d2b41240dbab257dc9133b0ae10f9139ad03a5a9064">QgsWms::QgsWmsParameter::SRS</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswmsparameters_8h_source.html#l00109">qgswmsparameters.h:109</a></div></div>
<div class="ttc" id="classQgsProject_html_acbbef3e8385b56322828621c02ec9cd4"><div class="ttname"><a href="classQgsProject.html#acbbef3e8385b56322828621c02ec9cd4">QgsProject::labelingEngineSettings</a></div><div class="ttdeci">const QgsLabelingEngineSettings &amp; labelingEngineSettings() const</div><div class="ttdoc">Returns project&amp;#39;s global labeling engine settings. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8cpp_source.html#l01528">qgsproject.cpp:1528</a></div></div>
<div class="ttc" id="classQgsCoordinateReferenceSystem_html_a077267450cec872305c6690de5b5b09c"><div class="ttname"><a href="classQgsCoordinateReferenceSystem.html#a077267450cec872305c6690de5b5b09c">QgsCoordinateReferenceSystem::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Returns whether this CRS is correctly initialized and usable. </div><div class="ttdef"><b>Definition:</b> <a href="qgscoordinatereferencesystem_8cpp_source.html#l00854">qgscoordinatereferencesystem.cpp:854</a></div></div>
<div class="ttc" id="classQgsVectorLayer_html_a5fb4b2d29452da3c59db401fe43aa9fe"><div class="ttname"><a href="classQgsVectorLayer.html#a5fb4b2d29452da3c59db401fe43aa9fe">QgsVectorLayer::setOpacity</a></div><div class="ttdeci">void setOpacity(double opacity)</div><div class="ttdoc">Sets the opacity for the vector layer, where opacity is a value between 0 (totally transparent) and 1...</div><div class="ttdef"><b>Definition:</b> <a href="qgsvectorlayer_8cpp_source.html#l03974">qgsvectorlayer.cpp:3974</a></div></div>
<div class="ttc" id="qgslegendrenderer_8h_html"><div class="ttname"><a href="qgslegendrenderer_8h.html">qgslegendrenderer.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 22 2019 09:24:07 for QGIS API Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
