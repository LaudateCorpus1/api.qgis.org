<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QGIS API Documentation: /tmp/buildd/qgis-3.8.0+99unstable/src/server/qgsserver.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="api_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QGIS API Documentation
   &#160;<span id="projectnumber">3.8.0-Zanzibar (11aff65)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_075bb3ff235063c77951cd176d15a741.html">server</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qgsserver.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qgsserver_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">                              qgsserver.cpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> A server application supporting WMS / WFS / WCS</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">                              -------------------</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  begin                : July 04, 2006</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  copyright            : (C) 2006 by Marco Hugentobler &amp; Ionut Iosifescu Enescu</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">                       : (C) 2015 by Alessandro Pasotti</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  email                : marco dot hugentobler at karto dot baug dot ethz dot ch</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">                       : elpaso at itopen dot it</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *   (at your option) any later version.                                   *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//for CMAKE_INSTALL_PREFIX</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;qgsconfig.h&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsserver_8h.html">qgsserver.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsauthmanager_8h.html">qgsauthmanager.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgscapabilitiescache_8h.html">qgscapabilitiescache.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfontutils_8h.html">qgsfontutils.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrequesthandler_8h.html">qgsrequesthandler.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsproject_8h.html">qgsproject.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsproviderregistry_8h.html">qgsproviderregistry.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslogger_8h.html">qgslogger.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsmapserviceexception_8h.html">qgsmapserviceexception.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsnetworkaccessmanager_8h.html">qgsnetworkaccessmanager.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsserverlogger_8h.html">qgsserverlogger.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsserverrequest_8h.html">qgsserverrequest.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsfilterresponsedecorator_8h.html">qgsfilterresponsedecorator.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsservice_8h.html">qgsservice.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsserverparameters_8h.html">qgsserverparameters.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsapplication_8h.html">qgsapplication.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;QDomDocument&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;QNetworkDiskCache&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;QSettings&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;QDateTime&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// TODO: remove, it&#39;s only needed by a single debug message</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;fcgi_stdio.h&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// Server status static initializers.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Default values are for C++, SIP bindings will override their</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// options in in init()</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;QString *QgsServer::sConfigFilePath = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="classQgsCapabilitiesCache.html">QgsCapabilitiesCache</a> *QgsServer::sCapabilitiesCache = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<a class="code" href="classQgsServerInterfaceImpl.html">QgsServerInterfaceImpl</a> *QgsServer::sServerInterface = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">// Initialization must run once for all servers</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keywordtype">bool</span> QgsServer::sInitialized = <span class="keyword">false</span>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<a class="code" href="classQgsServerSettings.html">QgsServerSettings</a> QgsServer::sSettings;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="classQgsServiceRegistry.html">QgsServiceRegistry</a> *QgsServer::sServiceRegistry = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classQgsServer.html#a2cdda50c1f9ba5d46c7eaf62f44bb131">   64</a></span>&#160;<a class="code" href="classQgsServer.html#a2cdda50c1f9ba5d46c7eaf62f44bb131">QgsServer::QgsServer</a>()</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// QgsApplication must exist</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">if</span> ( qobject_cast&lt;QgsApplication *&gt;( qApp ) == <span class="keyword">nullptr</span> )</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    qFatal( <span class="stringliteral">&quot;A QgsApplication must exist before a QgsServer instance can be created.&quot;</span> );</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    abort();</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  init();</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  mConfigCache = <a class="code" href="classQgsConfigCache.html#aabf4924a0d70400f80802a74856d87c6">QgsConfigCache::instance</a>();</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;QString &amp;QgsServer::serverName()</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">static</span> QString *name = <span class="keyword">new</span> QString( QStringLiteral( <span class="stringliteral">&quot;qgis_server&quot;</span> ) );</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">return</span> *name;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;}</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;QFileInfo QgsServer::defaultAdminSLD()</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">return</span> QFileInfo( QStringLiteral( <span class="stringliteral">&quot;admin.sld&quot;</span> ) );</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keywordtype">void</span> QgsServer::setupNetworkAccessManager()</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  QSettings settings;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="classQgsNetworkAccessManager.html">QgsNetworkAccessManager</a> *nam = <a class="code" href="classQgsNetworkAccessManager.html#ad6744b4063755b69e2e071ab23efa0eb">QgsNetworkAccessManager::instance</a>();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  QNetworkDiskCache *cache = <span class="keyword">new</span> QNetworkDiskCache( <span class="keyword">nullptr</span> );</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  qint64 cacheSize = sSettings.<a class="code" href="classQgsServerSettings.html#af79bab4610e2f534752e7523ad6a828d">cacheSize</a>();</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  QString cacheDirectory = sSettings.<a class="code" href="classQgsServerSettings.html#a06964d5b422b7a01ab8168a356b9fee3">cacheDirectory</a>();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  cache-&gt;setCacheDirectory( cacheDirectory );</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  cache-&gt;setMaximumCacheSize( cacheSize );</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( QStringLiteral( <span class="stringliteral">&quot;cacheDirectory: %1&quot;</span> ).arg( cache-&gt;cacheDirectory() ), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( QStringLiteral( <span class="stringliteral">&quot;maximumCacheSize: %1&quot;</span> ).arg( cache-&gt;maximumCacheSize() ), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  nam-&gt;setCache( cache );</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;QFileInfo QgsServer::defaultProjectFile()</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  QDir currentDir;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  fprintf( FCGI_stderr, <span class="stringliteral">&quot;current directory: %s\n&quot;</span>, currentDir.absolutePath().toUtf8().constData() );</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  QStringList nameFilterList;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  nameFilterList &lt;&lt; QStringLiteral( <span class="stringliteral">&quot;*.qgs&quot;</span> )</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                 &lt;&lt; QStringLiteral( <span class="stringliteral">&quot;*.qgz&quot;</span> );</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  QFileInfoList projectFiles = currentDir.entryInfoList( nameFilterList, QDir::Files, QDir::Name );</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> x = 0; x &lt; projectFiles.size(); x++ )</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( projectFiles.at( x ).absoluteFilePath(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> ( projectFiles.isEmpty() )</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> QFileInfo();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">return</span> projectFiles.at( 0 );</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">void</span> QgsServer::printRequestParameters( <span class="keyword">const</span> QMap&lt; QString, QString&gt; &amp;parameterMap, <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257">Qgis::MessageLevel</a> logLevel )</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">if</span> ( logLevel &gt; <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> )</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  QMap&lt; QString, QString&gt;::const_iterator pIt = parameterMap.constBegin();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">for</span> ( ; pIt != parameterMap.constEnd(); ++pIt )</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( pIt.key() + <span class="stringliteral">&quot;:&quot;</span> + pIt.value(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;QString QgsServer::configPath( <span class="keyword">const</span> QString &amp;defaultConfigPath, <span class="keyword">const</span> QString &amp;configPath )</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  QString cfPath( defaultConfigPath );</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  QString projectFile = sSettings.<a class="code" href="classQgsServerSettings.html#a36980ad8dd32de069f5e0dbcd5d8515b">projectFile</a>();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">if</span> ( !projectFile.isEmpty() )</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    cfPath = projectFile;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QStringLiteral( <span class="stringliteral">&quot;QGIS_PROJECT_FILE:%1&quot;</span> ).arg( cfPath ) );</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> ( configPath.isEmpty() )</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( QStringLiteral( <span class="stringliteral">&quot;Using default configuration file path: %1&quot;</span> ).arg( defaultConfigPath ), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      cfPath = configPath;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a>( QStringLiteral( <span class="stringliteral">&quot;MAP:%1&quot;</span> ).arg( cfPath ) );</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">return</span> cfPath;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keywordtype">void</span> QgsServer::initLocale()</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// System locale override</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">if</span> ( ! sSettings.<a class="code" href="classQgsServerSettings.html#aeba0d1e3d94f2b111903bedaf5d98483">overrideSystemLocale</a>().isEmpty() )</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    QLocale::setDefault( QLocale( sSettings.<a class="code" href="classQgsServerSettings.html#aeba0d1e3d94f2b111903bedaf5d98483">overrideSystemLocale</a>() ) );</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// Number group separator settings</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  QLocale currentLocale;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span> ( sSettings.<a class="code" href="classQgsServerSettings.html#ac37d14a84e0554ec94c22c1e763e5140">showGroupSeparator</a>() )</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    currentLocale.setNumberOptions( currentLocale.numberOptions() &amp;= ~QLocale::NumberOption::OmitGroupSeparator );</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    currentLocale.setNumberOptions( currentLocale.numberOptions() |= QLocale::NumberOption::OmitGroupSeparator );</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  QLocale::setDefault( currentLocale );</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keywordtype">bool</span> QgsServer::init()</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> ( sInitialized )</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  QCoreApplication::setOrganizationName( <a class="code" href="classQgsApplication.html#a93f785f223e9c10963637636ad347d75">QgsApplication::QGIS_ORGANIZATION_NAME</a> );</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  QCoreApplication::setOrganizationDomain( <a class="code" href="classQgsApplication.html#a84c96c37c0366362feace30f10f033c7">QgsApplication::QGIS_ORGANIZATION_DOMAIN</a> );</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  QCoreApplication::setApplicationName( <a class="code" href="classQgsApplication.html#a84710a569a0da3f12b4983419466e449">QgsApplication::QGIS_APPLICATION_NAME</a> );</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="classQgsApplication.html#a4725d46a64c9c0fc0238298ac89e9b8d">QgsApplication::init</a>();</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">#if defined(SERVER_SKIP_ECW)</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;Skipping GDAL ECW drivers in server.&quot;</span>, <span class="stringliteral">&quot;Server&quot;</span>, <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="classQgsApplication.html#a1f5823f492142108e73552db99f327e0">QgsApplication::skipGdalDriver</a>( <span class="stringliteral">&quot;ECW&quot;</span> );</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="classQgsApplication.html#a1f5823f492142108e73552db99f327e0">QgsApplication::skipGdalDriver</a>( <span class="stringliteral">&quot;JP2ECW&quot;</span> );</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// reload settings to take into account QCoreApplication and QgsApplication</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// configuration</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  sSettings.<a class="code" href="classQgsServerSettings.html#af3ec69fe620cacd1aea7fa729a1fccf4">load</a>();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// init and configure logger</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="classQgsServerLogger.html#a1fb7aaff2af0ba2a829c265bd4ed02b0">QgsServerLogger::instance</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="classQgsServerLogger.html#a1fb7aaff2af0ba2a829c265bd4ed02b0">QgsServerLogger::instance</a>()-&gt;<a class="code" href="classQgsServerLogger.html#ad6ad9bfd4d3520d6642ae0a1674c1097">setLogLevel</a>( sSettings.<a class="code" href="classQgsServerSettings.html#a3fa45944e4d907ef6fe73ffc49d75875">logLevel</a>() );</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">if</span> ( ! sSettings.<a class="code" href="classQgsServerSettings.html#a84893b33f96a05e34918304d50c561bf">logFile</a>().isEmpty() )</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="classQgsServerLogger.html#a1fb7aaff2af0ba2a829c265bd4ed02b0">QgsServerLogger::instance</a>()-&gt;<a class="code" href="classQgsServerLogger.html#ae5dc902a6821c1a8480c9ace6604eb5b">setLogFile</a>( sSettings.<a class="code" href="classQgsServerSettings.html#a84893b33f96a05e34918304d50c561bf">logFile</a>() );</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( sSettings.<a class="code" href="classQgsServerSettings.html#a32bc697a4b16e937a9b87ab64eea1eb2">logStderr</a>() )</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="classQgsServerLogger.html#a1fb7aaff2af0ba2a829c265bd4ed02b0">QgsServerLogger::instance</a>()-&gt;<a class="code" href="classQgsServerLogger.html#afd20b283573c8f936f8b434f56915c0b">setLogStderr</a>();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// Configure locale</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  initLocale();</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// log settings currently used</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  sSettings.<a class="code" href="classQgsServerSettings.html#a772aaffb36114e23685a3e411ffd1cd6">logSummary</a>();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  setupNetworkAccessManager();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  QDomImplementation::setInvalidDataPolicy( QDomImplementation::DropInvalidChars );</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// Instantiate the plugin directory so that providers are loaded</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="classQgsProviderRegistry.html#a60c16019b5073ee00c3e26141312bfb2">QgsProviderRegistry::instance</a>( <a class="code" href="classQgsApplication.html#a41b2d890c1cd6426451a46c1dc110d27">QgsApplication::pluginPath</a>() );</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;Prefix  PATH: &quot;</span> + <a class="code" href="classQgsApplication.html#a882ad0999f14365436e2c241fa411b25">QgsApplication::prefixPath</a>(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;Plugin  PATH: &quot;</span> + <a class="code" href="classQgsApplication.html#a41b2d890c1cd6426451a46c1dc110d27">QgsApplication::pluginPath</a>(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;PkgData PATH: &quot;</span> + <a class="code" href="classQgsApplication.html#a54c2585a8214bc2031f0e11e6b88445a">QgsApplication::pkgDataPath</a>(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;User DB PATH: &quot;</span> + <a class="code" href="classQgsApplication.html#ab60a0a01f2a675b56830b21d586e9344">QgsApplication::qgisUserDatabaseFilePath</a>(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;Auth DB PATH: &quot;</span> + <a class="code" href="classQgsApplication.html#ab4e912d6a82a6abb8f75b65147ef99f9">QgsApplication::qgisAuthDatabaseFilePath</a>(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;SVG PATHS: &quot;</span> + <a class="code" href="classQgsApplication.html#a72ede5c9c332de4e47cb7be4a5a43279">QgsApplication::svgPaths</a>().join( QDir::listSeparator() ), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="classQgsApplication.html#a43c433bf00a60f0f9a4f3fac31b361fb">QgsApplication::createDatabase</a>(); <span class="comment">//init qgis.db (e.g. necessary for user crs)</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// Initialize the authentication system</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">//   creates or uses qgis-auth.db in ~/.qgis3/ or directory defined by QGIS_AUTH_DB_DIR_PATH env variable</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">//   set the master password as first line of file defined by QGIS_AUTH_PASSWORD_FILE env variable</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">//   (QGIS_AUTH_PASSWORD_FILE variable removed from environment after accessing)</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="classQgsApplication.html#aa879f2f9f0d9d79f1d7968cc0f1b9a6a">QgsApplication::authManager</a>()-&gt;<a class="code" href="classQgsAuthManager.html#a3cd5ebc04fbd90b3f6dec1cad4c9995d">init</a>( <a class="code" href="classQgsApplication.html#a41b2d890c1cd6426451a46c1dc110d27">QgsApplication::pluginPath</a>(), <a class="code" href="classQgsApplication.html#ab4e912d6a82a6abb8f75b65147ef99f9">QgsApplication::qgisAuthDatabaseFilePath</a>() );</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  QString defaultConfigFilePath;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  QFileInfo projectFileInfo = defaultProjectFile(); <span class="comment">//try to find a .qgs/.qgz file in the server directory</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> ( projectFileInfo.exists() )</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    defaultConfigFilePath = projectFileInfo.absoluteFilePath();</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;Using default project file: &quot;</span> + defaultConfigFilePath, QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    QFileInfo adminSLDFileInfo = defaultAdminSLD();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> ( adminSLDFileInfo.exists() )</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      defaultConfigFilePath = adminSLDFileInfo.absoluteFilePath();</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// Store the config file path</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  sConfigFilePath = <span class="keyword">new</span> QString( defaultConfigFilePath );</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">//create cache for capabilities XML</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  sCapabilitiesCache = <span class="keyword">new</span> <a class="code" href="classQgsCapabilitiesCache.html">QgsCapabilitiesCache</a>();</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="classQgsFontUtils.html#a8bb56c12d27879d94cf63ac710200a28">QgsFontUtils::loadStandardTestFonts</a>( QStringList() &lt;&lt; QStringLiteral( <span class="stringliteral">&quot;Roman&quot;</span> ) &lt;&lt; QStringLiteral( <span class="stringliteral">&quot;Bold&quot;</span> ) );</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  sServiceRegistry = <span class="keyword">new</span> <a class="code" href="classQgsServiceRegistry.html">QgsServiceRegistry</a>();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  sServerInterface = <span class="keyword">new</span> <a class="code" href="classQgsServerInterfaceImpl.html">QgsServerInterfaceImpl</a>( sCapabilitiesCache, sServiceRegistry, &amp;sSettings );</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// Load service module</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  QString modulePath = <a class="code" href="classQgsApplication.html#a672f9cfb826a7793c7d3e641e2163f28">QgsApplication::libexecPath</a>() + <span class="stringliteral">&quot;server&quot;</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  qDebug() &lt;&lt; <span class="stringliteral">&quot;Initializing server modules from &quot;</span> &lt;&lt; modulePath &lt;&lt; endl;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  sServiceRegistry-&gt;<a class="code" href="classQgsServiceRegistry.html#ab2c9dfb598ae0c1f7120d5b100ab65c7">init</a>( modulePath,  sServerInterface );</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  sInitialized = <span class="keyword">true</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( QStringLiteral( <span class="stringliteral">&quot;Server initialized&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classQgsServer.html#aa7e49fd1de25911be9790d4a82524143">  279</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsServer.html#aa7e49fd1de25911be9790d4a82524143">QgsServer::putenv</a>( <span class="keyword">const</span> QString &amp;var, <span class="keyword">const</span> QString &amp;val )</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  _putenv_s( var.toStdString().c_str(), val.toStdString().c_str() );</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  setenv( var.toStdString().c_str(), val.toStdString().c_str(), 1 );</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  sSettings.<a class="code" href="classQgsServerSettings.html#af3ec69fe620cacd1aea7fa729a1fccf4">load</a>( var );</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classQgsServer.html#a80cb233f8d76660f518d09a8ab0afdd0">  289</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsServer.html#a80cb233f8d76660f518d09a8ab0afdd0">QgsServer::handleRequest</a>( <a class="code" href="classQgsServerRequest.html">QgsServerRequest</a> &amp;request, <a class="code" href="classQgsServerResponse.html">QgsServerResponse</a> &amp;response, <span class="keyword">const</span> <a class="code" href="classQgsProject.html">QgsProject</a> *project )</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;{</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257">Qgis::MessageLevel</a> logLevel = <a class="code" href="classQgsServerLogger.html#a1fb7aaff2af0ba2a829c265bd4ed02b0">QgsServerLogger::instance</a>()-&gt;<a class="code" href="classQgsServerLogger.html#a31e8e4bccf584f6ec4bee3ed9aa898a8">logLevel</a>();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  QTime time; <span class="comment">//used for measuring request time if loglevel &lt; 1</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  qApp-&gt;processEvents();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> ( logLevel == <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> )</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    time.start();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// Pass the filters to the requestHandler, this is needed for the following reasons:</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// Allow server request to call sendResponse plugin hook if enabled</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <a class="code" href="classQgsFilterResponseDecorator.html">QgsFilterResponseDecorator</a> responseDecorator( sServerInterface-&gt;<a class="code" href="classQgsServerInterfaceImpl.html#a8c010683f28a1c7a031acf2b4934558f">filters</a>(), response );</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">//Request handler</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="classQgsRequestHandler.html">QgsRequestHandler</a> requestHandler( request, response );</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">try</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// TODO: split parse input into plain parse and processing from specific services</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    requestHandler.parseInput();</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">catch</span> ( <a class="code" href="classQgsMapServiceException.html">QgsMapServiceException</a> &amp;e )</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;Parse input exception: &quot;</span> + e.<a class="code" href="classQgsOgcServiceException.html#a7b2532f8bc995d944358515daf2bfba7">message</a>(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257a5dc0864bcb26c7371368f692a45192d4">Qgis::Critical</a> );</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    requestHandler.setServiceException( e );</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// Set the request handler into the interface for plugins to manipulate it</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  sServerInterface-&gt;<a class="code" href="classQgsServerInterfaceImpl.html#a4e2198b0a44b33024d557040948b69e2">setRequestHandler</a>( &amp;requestHandler );</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Initialize configfilepath so that is is available</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// before calling plugin methods</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// Note that plugins may still change that value using</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// setConfigFilePath() interface method</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">if</span> ( ! project )</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    QString configFilePath = configPath( *sConfigFilePath, request.<a class="code" href="classQgsServerRequest.html#a0f4f91d54807820c05535e5361c58f89">serverParameters</a>().<a class="code" href="classQgsServerParameters.html#a20d84abebdf1698d439c3515e91259a9">map</a>() );</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    sServerInterface-&gt;<a class="code" href="classQgsServerInterfaceImpl.html#af7bbfaaaeea3461b622bbe1b2563894c">setConfigFilePath</a>( configFilePath );</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    sServerInterface-&gt;<a class="code" href="classQgsServerInterfaceImpl.html#af7bbfaaaeea3461b622bbe1b2563894c">setConfigFilePath</a>( project-&gt;<a class="code" href="classQgsProject.html#a93f3f2a1c4562922da48473311b9b79d">fileName</a>() );</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// Call  requestReady() method (if enabled)</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  responseDecorator.start();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// Plugins may have set exceptions</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> ( !requestHandler.exceptionRaised() )</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">try</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keyword">const</span> <a class="code" href="classQgsServerParameters.html">QgsServerParameters</a> params = request.<a class="code" href="classQgsServerRequest.html#a0f4f91d54807820c05535e5361c58f89">serverParameters</a>();</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      printRequestParameters( params.<a class="code" href="classQgsServerParameters.html#a0059fd89d324fff531e701b18784a5cd">toMap</a>(), logLevel );</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="comment">//Config file path</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">if</span> ( ! project )</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="comment">// load the project if needed and not empty</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        project = mConfigCache-&gt;<a class="code" href="classQgsConfigCache.html#aaa103f761569f915c132a079de644b84">project</a>( sServerInterface-&gt;<a class="code" href="classQgsServerInterfaceImpl.html#ac14f1b37eb2cab058ceb19a38750b69f">configFilePath</a>() );</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span> ( ! project )</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;          <span class="keywordflow">throw</span> <a class="code" href="classQgsServerException.html">QgsServerException</a>( QStringLiteral( <span class="stringliteral">&quot;Project file error&quot;</span> ) );</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">if</span> ( ! params.<a class="code" href="classQgsServerParameters.html#a4b8a353b7d0948cf20796784f4db2647">fileName</a>().isEmpty() )</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keyword">const</span> QString value = QString( <span class="stringliteral">&quot;attachment; filename=\&quot;%1\&quot;&quot;</span> ).arg( params.<a class="code" href="classQgsServerParameters.html#a4b8a353b7d0948cf20796784f4db2647">fileName</a>() );</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        requestHandler.setResponseHeader( QStringLiteral( <span class="stringliteral">&quot;Content-Disposition&quot;</span> ), value );</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="comment">// Lookup for service</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="classQgsService.html">QgsService</a> *service = sServiceRegistry-&gt;<a class="code" href="classQgsServiceRegistry.html#abc58c84fb6ad59e626d87c7a82eab040">getService</a>( params.<a class="code" href="classQgsServerParameters.html#a351fd17de5308371855355d7bfffc9ae">service</a>(), params.<a class="code" href="classQgsServerParameters.html#ad21277c8d5e0c229c628c6f5ab4684b8">version</a>() );</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">if</span> ( service )</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        service-&gt;<a class="code" href="classQgsService.html#ae6b407a80acb3a89b3dc9cc8bf3763b5">executeRequest</a>( request, responseDecorator, project );</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classQgsOgcServiceException.html">QgsOgcServiceException</a>( QStringLiteral( <span class="stringliteral">&quot;Service configuration error&quot;</span> ),</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                      QStringLiteral( <span class="stringliteral">&quot;Service unknown or unsupported&quot;</span> ) );</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">catch</span> ( <a class="code" href="classQgsServerException.html">QgsServerException</a> &amp;ex )</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      responseDecorator.write( ex );</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      QString format;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( ex.<a class="code" href="classQgsServerException.html#a9ad2a12d819050476f3b5fbb25e9714b">formatResponse</a>( format ), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">catch</span> ( <a class="code" href="classQgsException.html">QgsException</a> &amp;ex )</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="comment">// Internal server error</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      response.<a class="code" href="classQgsServerResponse.html#ad27dad2d5e71d32ccfab867fb814831c">sendError</a>( 500, QStringLiteral( <span class="stringliteral">&quot;Internal Server Error&quot;</span> ) );</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( ex.<a class="code" href="classQgsException.html#aae00b1a7dfb1f6b6f9e399365715a2b4">what</a>(), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257a5dc0864bcb26c7371368f692a45192d4">Qgis::Critical</a> );</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// Terminate the response</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  responseDecorator.finish();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// We are done using requestHandler in plugins, make sure we don&#39;t access</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// to a deleted request handler from Python bindings</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  sServerInterface-&gt;<a class="code" href="classQgsServerInterfaceImpl.html#a858b4b871ae9da4740ca74a601848aea">clearRequestHandler</a>();</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span> ( logLevel == <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> )</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( <span class="stringliteral">&quot;Request finished in &quot;</span> + QString::number( time.elapsed() ) + <span class="stringliteral">&quot; ms&quot;</span>, QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="preprocessor">#ifdef HAVE_SERVER_PYTHON_PLUGINS</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="keywordtype">void</span> QgsServer::initPython()</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// Init plugins</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">if</span> ( ! <a class="code" href="classQgsServerPlugins.html#ae57864950b03e46da57a3217d8c8323a">QgsServerPlugins::initPlugins</a>( sServerInterface ) )</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( QStringLiteral( <span class="stringliteral">&quot;No server python plugins are available&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a>( QStringLiteral( <span class="stringliteral">&quot;Server python plugins loaded&quot;</span> ), QStringLiteral( <span class="stringliteral">&quot;Server&quot;</span> ), <a class="code" href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a> );</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="ttc" id="qgsmapserviceexception_8h_html"><div class="ttname"><a href="qgsmapserviceexception_8h.html">qgsmapserviceexception.h</a></div></div>
<div class="ttc" id="qgsservice_8h_html"><div class="ttname"><a href="qgsservice_8h.html">qgsservice.h</a></div></div>
<div class="ttc" id="classQgsServerParameters_html_a0059fd89d324fff531e701b18784a5cd"><div class="ttname"><a href="classQgsServerParameters.html#a0059fd89d324fff531e701b18784a5cd">QgsServerParameters::toMap</a></div><div class="ttdeci">QMap&lt; QString, QString &gt; toMap() const</div><div class="ttdoc">Returns all parameters in a map. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverparameters_8cpp_source.html#l00504">qgsserverparameters.cpp:504</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_a06964d5b422b7a01ab8168a356b9fee3"><div class="ttname"><a href="classQgsServerSettings.html#a06964d5b422b7a01ab8168a356b9fee3">QgsServerSettings::cacheDirectory</a></div><div class="ttdeci">QString cacheDirectory() const</div><div class="ttdoc">Returns the cache directory. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00362">qgsserversettings.cpp:362</a></div></div>
<div class="ttc" id="qgsproject_8h_html"><div class="ttname"><a href="qgsproject_8h.html">qgsproject.h</a></div></div>
<div class="ttc" id="qgsserverparameters_8h_html"><div class="ttname"><a href="qgsserverparameters_8h.html">qgsserverparameters.h</a></div></div>
<div class="ttc" id="qgsserverlogger_8h_html"><div class="ttname"><a href="qgsserverlogger_8h.html">qgsserverlogger.h</a></div></div>
<div class="ttc" id="qgsauthmanager_8h_html"><div class="ttname"><a href="qgsauthmanager_8h.html">qgsauthmanager.h</a></div></div>
<div class="ttc" id="classQgsApplication_html_ab60a0a01f2a675b56830b21d586e9344"><div class="ttname"><a href="classQgsApplication.html#ab60a0a01f2a675b56830b21d586e9344">QgsApplication::qgisUserDatabaseFilePath</a></div><div class="ttdeci">static QString qgisUserDatabaseFilePath()</div><div class="ttdoc">Returns the path to the user qgis.db file. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00929">qgsapplication.cpp:929</a></div></div>
<div class="ttc" id="classQgsServerResponse_html_ad27dad2d5e71d32ccfab867fb814831c"><div class="ttname"><a href="classQgsServerResponse.html#ad27dad2d5e71d32ccfab867fb814831c">QgsServerResponse::sendError</a></div><div class="ttdeci">virtual void sendError(int code, const QString &amp;message)=0</div><div class="ttdoc">Send error This method delegates error handling at the server level. </div></div>
<div class="ttc" id="classQgsServerInterfaceImpl_html_af7bbfaaaeea3461b622bbe1b2563894c"><div class="ttname"><a href="classQgsServerInterfaceImpl.html#af7bbfaaaeea3461b622bbe1b2563894c">QgsServerInterfaceImpl::setConfigFilePath</a></div><div class="ttdeci">void setConfigFilePath(const QString &amp;configFilePath) override</div><div class="ttdoc">Set the configuration file path. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverinterfaceimpl_8cpp_source.html#l00061">qgsserverinterfaceimpl.cpp:61</a></div></div>
<div class="ttc" id="classQgsServerInterfaceImpl_html_ac14f1b37eb2cab058ceb19a38750b69f"><div class="ttname"><a href="classQgsServerInterfaceImpl.html#ac14f1b37eb2cab058ceb19a38750b69f">QgsServerInterfaceImpl::configFilePath</a></div><div class="ttdeci">QString configFilePath() override</div><div class="ttdoc">Returns the configuration file path. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverinterfaceimpl_8h_source.html#l00081">qgsserverinterfaceimpl.h:81</a></div></div>
<div class="ttc" id="qgslogger_8h_html_ab273942cfb1b76ef0a5dafe6ed64fe23"><div class="ttname"><a href="qgslogger_8h.html#ab273942cfb1b76ef0a5dafe6ed64fe23">QgsDebugMsg</a></div><div class="ttdeci">#define QgsDebugMsg(str)</div><div class="ttdef"><b>Definition:</b> <a href="qgslogger_8h_source.html#l00038">qgslogger.h:38</a></div></div>
<div class="ttc" id="classQgsOgcServiceException_html"><div class="ttname"><a href="classQgsOgcServiceException.html">QgsOgcServiceException</a></div><div class="ttdoc">Exception base class for service exceptions. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverexception_8h_source.html#l00076">qgsserverexception.h:76</a></div></div>
<div class="ttc" id="classQgsServerPlugins_html_ae57864950b03e46da57a3217d8c8323a"><div class="ttname"><a href="classQgsServerPlugins.html#ae57864950b03e46da57a3217d8c8323a">QgsServerPlugins::initPlugins</a></div><div class="ttdeci">static bool initPlugins(QgsServerInterface *interface)</div><div class="ttdoc">Initializes the Python plugins. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverplugins_8cpp_source.html#l00039">qgsserverplugins.cpp:39</a></div></div>
<div class="ttc" id="classQgsServerLogger_html_a31e8e4bccf584f6ec4bee3ed9aa898a8"><div class="ttname"><a href="classQgsServerLogger.html#a31e8e4bccf584f6ec4bee3ed9aa898a8">QgsServerLogger::logLevel</a></div><div class="ttdeci">Qgis::MessageLevel logLevel() const</div><div class="ttdoc">Gets the current log level. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverlogger_8h_source.html#l00050">qgsserverlogger.h:50</a></div></div>
<div class="ttc" id="classQgsServerSettings_html"><div class="ttname"><a href="classQgsServerSettings.html">QgsServerSettings</a></div><div class="ttdoc">Provides a way to retrieve settings by prioritizing according to environment variables, ini file and default values. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8h_source.html#l00079">qgsserversettings.h:79</a></div></div>
<div class="ttc" id="classQgsFilterResponseDecorator_html"><div class="ttname"><a href="classQgsFilterResponseDecorator.html">QgsFilterResponseDecorator</a></div><div class="ttdoc">Class defining decorator for calling filter&amp;#39;s hooks. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfilterresponsedecorator_8h_source.html#l00034">qgsfilterresponsedecorator.h:34</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_a36980ad8dd32de069f5e0dbcd5d8515b"><div class="ttname"><a href="classQgsServerSettings.html#a36980ad8dd32de069f5e0dbcd5d8515b">QgsServerSettings::projectFile</a></div><div class="ttdeci">QString projectFile() const</div><div class="ttdoc">Returns the QGS project file to use. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00352">qgsserversettings.cpp:352</a></div></div>
<div class="ttc" id="classQgis_html_a60c079f4d8b7c479498be3d42ec96257"><div class="ttname"><a href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257">Qgis::MessageLevel</a></div><div class="ttdeci">MessageLevel</div><div class="ttdoc">Level for messages This will be used both for message log and message bar in application. </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00066">qgis.h:66</a></div></div>
<div class="ttc" id="classQgsOgcServiceException_html_a7b2532f8bc995d944358515daf2bfba7"><div class="ttname"><a href="classQgsOgcServiceException.html#a7b2532f8bc995d944358515daf2bfba7">QgsOgcServiceException::message</a></div><div class="ttdeci">QString message() const</div><div class="ttdoc">Returns the exception message. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverexception_8h_source.html#l00088">qgsserverexception.h:88</a></div></div>
<div class="ttc" id="qgscapabilitiescache_8h_html"><div class="ttname"><a href="qgscapabilitiescache_8h.html">qgscapabilitiescache.h</a></div></div>
<div class="ttc" id="qgsnetworkaccessmanager_8h_html"><div class="ttname"><a href="qgsnetworkaccessmanager_8h.html">qgsnetworkaccessmanager.h</a></div></div>
<div class="ttc" id="classQgsServer_html_aa7e49fd1de25911be9790d4a82524143"><div class="ttname"><a href="classQgsServer.html#aa7e49fd1de25911be9790d4a82524143">QgsServer::putenv</a></div><div class="ttdeci">void putenv(const QString &amp;var, const QString &amp;val)</div><div class="ttdoc">Set environment variable. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserver_8cpp_source.html#l00279">qgsserver.cpp:279</a></div></div>
<div class="ttc" id="classQgsException_html_aae00b1a7dfb1f6b6f9e399365715a2b4"><div class="ttname"><a href="classQgsException.html#aae00b1a7dfb1f6b6f9e399365715a2b4">QgsException::what</a></div><div class="ttdeci">QString what() const</div><div class="ttdef"><b>Definition:</b> <a href="qgsexception_8h_source.html#l00048">qgsexception.h:48</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_af79bab4610e2f534752e7523ad6a828d"><div class="ttname"><a href="classQgsServerSettings.html#af79bab4610e2f534752e7523ad6a828d">QgsServerSettings::cacheSize</a></div><div class="ttdeci">qint64 cacheSize() const</div><div class="ttdoc">Returns the cache size. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00357">qgsserversettings.cpp:357</a></div></div>
<div class="ttc" id="classQgsServerParameters_html_a20d84abebdf1698d439c3515e91259a9"><div class="ttname"><a href="classQgsServerParameters.html#a20d84abebdf1698d439c3515e91259a9">QgsServerParameters::map</a></div><div class="ttdeci">QString map() const</div><div class="ttdoc">Returns MAP parameter as a string or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverparameters_8cpp_source.html#l00472">qgsserverparameters.cpp:472</a></div></div>
<div class="ttc" id="qgsserver_8h_html"><div class="ttname"><a href="qgsserver_8h.html">qgsserver.h</a></div></div>
<div class="ttc" id="qgsfilterresponsedecorator_8h_html"><div class="ttname"><a href="qgsfilterresponsedecorator_8h.html">qgsfilterresponsedecorator.h</a></div></div>
<div class="ttc" id="classQgsProviderRegistry_html_a60c16019b5073ee00c3e26141312bfb2"><div class="ttname"><a href="classQgsProviderRegistry.html#a60c16019b5073ee00c3e26141312bfb2">QgsProviderRegistry::instance</a></div><div class="ttdeci">static QgsProviderRegistry * instance(const QString &amp;pluginPath=QString())</div><div class="ttdoc">Means of accessing canonical single instance. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproviderregistry_8cpp_source.html#l00054">qgsproviderregistry.cpp:54</a></div></div>
<div class="ttc" id="classQgsServerLogger_html_ad6ad9bfd4d3520d6642ae0a1674c1097"><div class="ttname"><a href="classQgsServerLogger.html#ad6ad9bfd4d3520d6642ae0a1674c1097">QgsServerLogger::setLogLevel</a></div><div class="ttdeci">void setLogLevel(Qgis::MessageLevel level)</div><div class="ttdoc">Set the current log level. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverlogger_8cpp_source.html#l00054">qgsserverlogger.cpp:54</a></div></div>
<div class="ttc" id="classQgsServerInterfaceImpl_html"><div class="ttname"><a href="classQgsServerInterfaceImpl.html">QgsServerInterfaceImpl</a></div><div class="ttdoc">Interfaces exposed by QGIS Server and made available to plugins. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverinterfaceimpl_8h_source.html#l00035">qgsserverinterfaceimpl.h:35</a></div></div>
<div class="ttc" id="classQgsApplication_html_a41b2d890c1cd6426451a46c1dc110d27"><div class="ttname"><a href="classQgsApplication.html#a41b2d890c1cd6426451a46c1dc110d27">QgsApplication::pluginPath</a></div><div class="ttdeci">static QString pluginPath()</div><div class="ttdoc">Returns the path to the application plugin directory. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00510">qgsapplication.cpp:510</a></div></div>
<div class="ttc" id="classQgsApplication_html_a43c433bf00a60f0f9a4f3fac31b361fb"><div class="ttname"><a href="classQgsApplication.html#a43c433bf00a60f0f9a4f3fac31b361fb">QgsApplication::createDatabase</a></div><div class="ttdeci">static bool createDatabase(QString *errorMessage=nullptr)</div><div class="ttdoc">initialize qgis.db </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01649">qgsapplication.cpp:1649</a></div></div>
<div class="ttc" id="classQgsService_html_ae6b407a80acb3a89b3dc9cc8bf3763b5"><div class="ttname"><a href="classQgsService.html#ae6b407a80acb3a89b3dc9cc8bf3763b5">QgsService::executeRequest</a></div><div class="ttdeci">virtual void executeRequest(const QgsServerRequest &amp;request, QgsServerResponse &amp;response, const QgsProject *project)=0</div><div class="ttdoc">Execute the requests and set result in QgsServerRequest. </div></div>
<div class="ttc" id="classQgsServerSettings_html_ac37d14a84e0554ec94c22c1e763e5140"><div class="ttname"><a href="classQgsServerSettings.html#ac37d14a84e0554ec94c22c1e763e5140">QgsServerSettings::showGroupSeparator</a></div><div class="ttdeci">bool showGroupSeparator() const</div><div class="ttdoc">Show group (thousand) separator. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00372">qgsserversettings.cpp:372</a></div></div>
<div class="ttc" id="classQgis_html_a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b"><div class="ttname"><a href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257afce4aaf1d34b0afcf7629e6567ff125b">Qgis::Info</a></div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00068">qgis.h:68</a></div></div>
<div class="ttc" id="classQgsMessageLog_html_a08b7139ea06e6c5f12bf3b060d6960d5"><div class="ttname"><a href="classQgsMessageLog.html#a08b7139ea06e6c5f12bf3b060d6960d5">QgsMessageLog::logMessage</a></div><div class="ttdeci">static void logMessage(const QString &amp;message, const QString &amp;tag=QString(), Qgis::MessageLevel level=Qgis::Warning, bool notifyUser=true)</div><div class="ttdoc">Adds a message to the log instance (and creates it if necessary). </div><div class="ttdef"><b>Definition:</b> <a href="qgsmessagelog_8cpp_source.html#l00027">qgsmessagelog.cpp:27</a></div></div>
<div class="ttc" id="classQgsServerParameters_html_ad21277c8d5e0c229c628c6f5ab4684b8"><div class="ttname"><a href="classQgsServerParameters.html#ad21277c8d5e0c229c628c6f5ab4684b8">QgsServerParameters::version</a></div><div class="ttdeci">QString version() const</div><div class="ttdoc">Returns VERSION parameter as a string or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverparameters_8cpp_source.html#l00477">qgsserverparameters.cpp:477</a></div></div>
<div class="ttc" id="qgsapplication_8h_html"><div class="ttname"><a href="qgsapplication_8h.html">qgsapplication.h</a></div></div>
<div class="ttc" id="classQgsServiceRegistry_html_ab2c9dfb598ae0c1f7120d5b100ab65c7"><div class="ttname"><a href="classQgsServiceRegistry.html#ab2c9dfb598ae0c1f7120d5b100ab65c7">QgsServiceRegistry::init</a></div><div class="ttdeci">void init(const QString &amp;nativeModulepath, QgsServerInterface *serverIface=nullptr)</div><div class="ttdoc">Initialize registry, load modules and auto register services. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserviceregistry_8cpp_source.html#l00225">qgsserviceregistry.cpp:225</a></div></div>
<div class="ttc" id="classQgsProject_html"><div class="ttname"><a href="classQgsProject.html">QgsProject</a></div><div class="ttdoc">Reads and writes project states. </div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8h_source.html#l00089">qgsproject.h:89</a></div></div>
<div class="ttc" id="classQgsServerInterfaceImpl_html_a8c010683f28a1c7a031acf2b4934558f"><div class="ttname"><a href="classQgsServerInterfaceImpl.html#a8c010683f28a1c7a031acf2b4934558f">QgsServerInterfaceImpl::filters</a></div><div class="ttdeci">QgsServerFiltersMap filters() override</div><div class="ttdoc">Returns the list of current QgsServerFilter. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverinterfaceimpl_8h_source.html#l00053">qgsserverinterfaceimpl.h:53</a></div></div>
<div class="ttc" id="classQgsFontUtils_html_a8bb56c12d27879d94cf63ac710200a28"><div class="ttname"><a href="classQgsFontUtils.html#a8bb56c12d27879d94cf63ac710200a28">QgsFontUtils::loadStandardTestFonts</a></div><div class="ttdeci">static bool loadStandardTestFonts(const QStringList &amp;loadstyles)</div><div class="ttdoc">Loads standard test fonts from filesystem or qrc resource. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfontutils_8cpp_source.html#l00226">qgsfontutils.cpp:226</a></div></div>
<div class="ttc" id="classQgsServerLogger_html_afd20b283573c8f936f8b434f56915c0b"><div class="ttname"><a href="classQgsServerLogger.html#afd20b283573c8f936f8b434f56915c0b">QgsServerLogger::setLogStderr</a></div><div class="ttdeci">void setLogStderr()</div><div class="ttdoc">Activates logging to stderr. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverlogger_8cpp_source.html#l00071">qgsserverlogger.cpp:71</a></div></div>
<div class="ttc" id="classQgsRequestHandler_html"><div class="ttname"><a href="classQgsRequestHandler.html">QgsRequestHandler</a></div><div class="ttdoc">This class is an interface hiding the details of reading input and writing output from/to a wms reque...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrequesthandler_8h_source.html#l00043">qgsrequesthandler.h:43</a></div></div>
<div class="ttc" id="classQgsApplication_html_a93f785f223e9c10963637636ad347d75"><div class="ttname"><a href="classQgsApplication.html#a93f785f223e9c10963637636ad347d75">QgsApplication::QGIS_ORGANIZATION_NAME</a></div><div class="ttdeci">static const char * QGIS_ORGANIZATION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8h_source.html#l00125">qgsapplication.h:125</a></div></div>
<div class="ttc" id="classQgsConfigCache_html_aaa103f761569f915c132a079de644b84"><div class="ttname"><a href="classQgsConfigCache.html#aaa103f761569f915c132a079de644b84">QgsConfigCache::project</a></div><div class="ttdeci">const QgsProject * project(const QString &amp;path)</div><div class="ttdoc">If the project is not cached yet, then the project is read thanks to the path. </div><div class="ttdef"><b>Definition:</b> <a href="qgsconfigcache_8cpp_source.html#l00040">qgsconfigcache.cpp:40</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_a84893b33f96a05e34918304d50c561bf"><div class="ttname"><a href="classQgsServerSettings.html#a84893b33f96a05e34918304d50c561bf">QgsServerSettings::logFile</a></div><div class="ttdeci">QString logFile() const</div><div class="ttdoc">Returns the log file. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00332">qgsserversettings.cpp:332</a></div></div>
<div class="ttc" id="classQgsServerException_html"><div class="ttname"><a href="classQgsServerException.html">QgsServerException</a></div><div class="ttdoc">Exception base class for server exceptions. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverexception_8h_source.html#l00036">qgsserverexception.h:36</a></div></div>
<div class="ttc" id="classQgsApplication_html_a54c2585a8214bc2031f0e11e6b88445a"><div class="ttname"><a href="classQgsApplication.html#a54c2585a8214bc2031f0e11e6b88445a">QgsApplication::pkgDataPath</a></div><div class="ttdeci">static QString pkgDataPath()</div><div class="ttdoc">Returns the common root path of all application data directories. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00514">qgsapplication.cpp:514</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_aeba0d1e3d94f2b111903bedaf5d98483"><div class="ttname"><a href="classQgsServerSettings.html#aeba0d1e3d94f2b111903bedaf5d98483">QgsServerSettings::overrideSystemLocale</a></div><div class="ttdeci">QString overrideSystemLocale() const</div><div class="ttdoc">Overrides system locale. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00367">qgsserversettings.cpp:367</a></div></div>
<div class="ttc" id="classQgsApplication_html_a1f5823f492142108e73552db99f327e0"><div class="ttname"><a href="classQgsApplication.html#a1f5823f492142108e73552db99f327e0">QgsApplication::skipGdalDriver</a></div><div class="ttdeci">static void skipGdalDriver(const QString &amp;driver)</div><div class="ttdoc">Sets the GDAL_SKIP environment variable to include the specified driver and then calls GDALDriverMana...</div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01499">qgsapplication.cpp:1499</a></div></div>
<div class="ttc" id="classQgsService_html"><div class="ttname"><a href="classQgsService.html">QgsService</a></div><div class="ttdoc">QgsService Class defining interfaces for QGIS server services. </div><div class="ttdef"><b>Definition:</b> <a href="qgsservice_8h_source.html#l00039">qgsservice.h:39</a></div></div>
<div class="ttc" id="classQgsCapabilitiesCache_html"><div class="ttname"><a href="classQgsCapabilitiesCache.html">QgsCapabilitiesCache</a></div><div class="ttdoc">A cache for capabilities xml documents (by configuration file path) </div><div class="ttdef"><b>Definition:</b> <a href="qgscapabilitiescache_8h_source.html#l00034">qgscapabilitiescache.h:34</a></div></div>
<div class="ttc" id="classQgsServerRequest_html"><div class="ttname"><a href="classQgsServerRequest.html">QgsServerRequest</a></div><div class="ttdoc">QgsServerRequest Class defining request interface passed to services QgsService::executeRequest() met...</div><div class="ttdef"><b>Definition:</b> <a href="qgsserverrequest_8h_source.html#l00038">qgsserverrequest.h:38</a></div></div>
<div class="ttc" id="classQgsApplication_html_aa879f2f9f0d9d79f1d7968cc0f1b9a6a"><div class="ttname"><a href="classQgsApplication.html#aa879f2f9f0d9d79f1d7968cc0f1b9a6a">QgsApplication::authManager</a></div><div class="ttdeci">static QgsAuthManager * authManager()</div><div class="ttdoc">Returns the application&amp;#39;s authentication manager instance. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01194">qgsapplication.cpp:1194</a></div></div>
<div class="ttc" id="classQgsNetworkAccessManager_html_ad6744b4063755b69e2e071ab23efa0eb"><div class="ttname"><a href="classQgsNetworkAccessManager.html#ad6744b4063755b69e2e071ab23efa0eb">QgsNetworkAccessManager::instance</a></div><div class="ttdeci">static QgsNetworkAccessManager * instance(Qt::ConnectionType connectionType=Qt::BlockingQueuedConnection)</div><div class="ttdoc">Returns a pointer to the active QgsNetworkAccessManager for the current thread. </div><div class="ttdef"><b>Definition:</b> <a href="qgsnetworkaccessmanager_8cpp_source.html#l00111">qgsnetworkaccessmanager.cpp:111</a></div></div>
<div class="ttc" id="classQgsServerParameters_html_a351fd17de5308371855355d7bfffc9ae"><div class="ttname"><a href="classQgsServerParameters.html#a351fd17de5308371855355d7bfffc9ae">QgsServerParameters::service</a></div><div class="ttdeci">QString service() const</div><div class="ttdoc">Returns SERVICE parameter as a string or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverparameters_8cpp_source.html#l00487">qgsserverparameters.cpp:487</a></div></div>
<div class="ttc" id="classQgsServerException_html_a9ad2a12d819050476f3b5fbb25e9714b"><div class="ttname"><a href="classQgsServerException.html#a9ad2a12d819050476f3b5fbb25e9714b">QgsServerException::formatResponse</a></div><div class="ttdeci">virtual QByteArray formatResponse(QString &amp;responseFormat) const</div><div class="ttdoc">Formats the exception for sending to client. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverexception_8cpp_source.html#l00030">qgsserverexception.cpp:30</a></div></div>
<div class="ttc" id="classQgsServiceRegistry_html"><div class="ttname"><a href="classQgsServiceRegistry.html">QgsServiceRegistry</a></div><div class="ttdoc">QgsServiceRegistry Class defining the registry manager for QGIS server services. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserviceregistry_8h_source.html#l00047">qgsserviceregistry.h:47</a></div></div>
<div class="ttc" id="classQgis_html_a60c079f4d8b7c479498be3d42ec96257a5dc0864bcb26c7371368f692a45192d4"><div class="ttname"><a href="classQgis.html#a60c079f4d8b7c479498be3d42ec96257a5dc0864bcb26c7371368f692a45192d4">Qgis::Critical</a></div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00070">qgis.h:70</a></div></div>
<div class="ttc" id="classQgsApplication_html_a84c96c37c0366362feace30f10f033c7"><div class="ttname"><a href="classQgsApplication.html#a84c96c37c0366362feace30f10f033c7">QgsApplication::QGIS_ORGANIZATION_DOMAIN</a></div><div class="ttdeci">static const char * QGIS_ORGANIZATION_DOMAIN</div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8h_source.html#l00126">qgsapplication.h:126</a></div></div>
<div class="ttc" id="classQgsApplication_html_a4725d46a64c9c0fc0238298ac89e9b8d"><div class="ttname"><a href="classQgsApplication.html#a4725d46a64c9c0fc0238298ac89e9b8d">QgsApplication::init</a></div><div class="ttdeci">static void init(QString profileFolder=QString())</div><div class="ttdoc">This method initializes paths etc for QGIS. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00179">qgsapplication.cpp:179</a></div></div>
<div class="ttc" id="classQgsServiceRegistry_html_abc58c84fb6ad59e626d87c7a82eab040"><div class="ttname"><a href="classQgsServiceRegistry.html#abc58c84fb6ad59e626d87c7a82eab040">QgsServiceRegistry::getService</a></div><div class="ttdeci">QgsService * getService(const QString &amp;name, const QString &amp;version=QString())</div><div class="ttdoc">Retrieve a service from its name. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserviceregistry_8cpp_source.html#l00088">qgsserviceregistry.cpp:88</a></div></div>
<div class="ttc" id="classQgsServerParameters_html"><div class="ttname"><a href="classQgsServerParameters.html">QgsServerParameters</a></div><div class="ttdoc">QgsServerParameters provides an interface to retrieve and manipulate global parameters received from ...</div><div class="ttdef"><b>Definition:</b> <a href="qgsserverparameters_8h_source.html#l00228">qgsserverparameters.h:228</a></div></div>
<div class="ttc" id="classQgsServerRequest_html_a0f4f91d54807820c05535e5361c58f89"><div class="ttname"><a href="classQgsServerRequest.html#a0f4f91d54807820c05535e5361c58f89">QgsServerRequest::serverParameters</a></div><div class="ttdeci">QgsServerParameters serverParameters() const</div><div class="ttdoc">Returns parameters. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverrequest_8cpp_source.html#l00084">qgsserverrequest.cpp:84</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_af3ec69fe620cacd1aea7fa729a1fccf4"><div class="ttname"><a href="classQgsServerSettings.html#af3ec69fe620cacd1aea7fa729a1fccf4">QgsServerSettings::load</a></div><div class="ttdeci">void load()</div><div class="ttdoc">Load settings according to current environment variables. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00188">qgsserversettings.cpp:188</a></div></div>
<div class="ttc" id="classQgsServerLogger_html_a1fb7aaff2af0ba2a829c265bd4ed02b0"><div class="ttname"><a href="classQgsServerLogger.html#a1fb7aaff2af0ba2a829c265bd4ed02b0">QgsServerLogger::instance</a></div><div class="ttdeci">static QgsServerLogger * instance()</div><div class="ttdoc">Gets the singleton instance. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverlogger_8cpp_source.html#l00022">qgsserverlogger.cpp:22</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_a772aaffb36114e23685a3e411ffd1cd6"><div class="ttname"><a href="classQgsServerSettings.html#a772aaffb36114e23685a3e411ffd1cd6">QgsServerSettings::logSummary</a></div><div class="ttdeci">void logSummary() const</div><div class="ttdoc">Log a summary of settings currently loaded. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00294">qgsserversettings.cpp:294</a></div></div>
<div class="ttc" id="classQgsAuthManager_html_a3cd5ebc04fbd90b3f6dec1cad4c9995d"><div class="ttname"><a href="classQgsAuthManager.html#a3cd5ebc04fbd90b3f6dec1cad4c9995d">QgsAuthManager::init</a></div><div class="ttdeci">bool init(const QString &amp;pluginPath=QString(), const QString &amp;authDatabasePath=QString())</div><div class="ttdoc">init initialize QCA, prioritize qca-ossl plugin and optionally set up the authentication database ...</div><div class="ttdef"><b>Definition:</b> <a href="qgsauthmanager_8cpp_source.html#l00173">qgsauthmanager.cpp:173</a></div></div>
<div class="ttc" id="qgsfontutils_8h_html"><div class="ttname"><a href="qgsfontutils_8h.html">qgsfontutils.h</a></div></div>
<div class="ttc" id="qgsrequesthandler_8h_html"><div class="ttname"><a href="qgsrequesthandler_8h.html">qgsrequesthandler.h</a></div></div>
<div class="ttc" id="classQgsApplication_html_a72ede5c9c332de4e47cb7be4a5a43279"><div class="ttname"><a href="classQgsApplication.html#a72ede5c9c332de4e47cb7be4a5a43279">QgsApplication::svgPaths</a></div><div class="ttdeci">static QStringList svgPaths()</div><div class="ttdoc">Returns the paths to svg directories. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00972">qgsapplication.cpp:972</a></div></div>
<div class="ttc" id="classQgsServerInterfaceImpl_html_a858b4b871ae9da4740ca74a601848aea"><div class="ttname"><a href="classQgsServerInterfaceImpl.html#a858b4b871ae9da4740ca74a601848aea">QgsServerInterfaceImpl::clearRequestHandler</a></div><div class="ttdeci">void clearRequestHandler() override</div><div class="ttdoc">Clear the request handler. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverinterfaceimpl_8cpp_source.html#l00051">qgsserverinterfaceimpl.cpp:51</a></div></div>
<div class="ttc" id="classQgsServerLogger_html_ae5dc902a6821c1a8480c9ace6604eb5b"><div class="ttname"><a href="classQgsServerLogger.html#ae5dc902a6821c1a8480c9ace6604eb5b">QgsServerLogger::setLogFile</a></div><div class="ttdeci">void setLogFile(const QString &amp;filename=QString())</div><div class="ttdoc">Set the current log file. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverlogger_8cpp_source.html#l00059">qgsserverlogger.cpp:59</a></div></div>
<div class="ttc" id="classQgsServerResponse_html"><div class="ttname"><a href="classQgsServerResponse.html">QgsServerResponse</a></div><div class="ttdoc">QgsServerResponse Class defining response interface passed to services QgsService::executeRequest() m...</div><div class="ttdef"><b>Definition:</b> <a href="qgsserverresponse_8h_source.html#l00042">qgsserverresponse.h:42</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_a3fa45944e4d907ef6fe73ffc49d75875"><div class="ttname"><a href="classQgsServerSettings.html#a3fa45944e4d907ef6fe73ffc49d75875">QgsServerSettings::logLevel</a></div><div class="ttdeci">Qgis::MessageLevel logLevel() const</div><div class="ttdoc">Returns the log level. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00342">qgsserversettings.cpp:342</a></div></div>
<div class="ttc" id="classQgsApplication_html_ab4e912d6a82a6abb8f75b65147ef99f9"><div class="ttname"><a href="classQgsApplication.html#ab4e912d6a82a6abb8f75b65147ef99f9">QgsApplication::qgisAuthDatabaseFilePath</a></div><div class="ttdeci">static QString qgisAuthDatabaseFilePath()</div><div class="ttdoc">Returns the path to the user authentication database file: qgis-auth.db. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00934">qgsapplication.cpp:934</a></div></div>
<div class="ttc" id="classQgsConfigCache_html_aabf4924a0d70400f80802a74856d87c6"><div class="ttname"><a href="classQgsConfigCache.html#aabf4924a0d70400f80802a74856d87c6">QgsConfigCache::instance</a></div><div class="ttdeci">static QgsConfigCache * instance()</div><div class="ttdoc">Returns the current instance. </div><div class="ttdef"><b>Definition:</b> <a href="qgsconfigcache_8cpp_source.html#l00025">qgsconfigcache.cpp:25</a></div></div>
<div class="ttc" id="qgsproviderregistry_8h_html"><div class="ttname"><a href="qgsproviderregistry_8h.html">qgsproviderregistry.h</a></div></div>
<div class="ttc" id="classQgsApplication_html_a672f9cfb826a7793c7d3e641e2163f28"><div class="ttname"><a href="classQgsApplication.html#a672f9cfb826a7793c7d3e641e2163f28">QgsApplication::libexecPath</a></div><div class="ttdeci">static QString libexecPath()</div><div class="ttdoc">Returns the path with utility executables (help viewer, crssync, ...) </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l01151">qgsapplication.cpp:1151</a></div></div>
<div class="ttc" id="classQgsApplication_html_a882ad0999f14365436e2c241fa411b25"><div class="ttname"><a href="classQgsApplication.html#a882ad0999f14365436e2c241fa411b25">QgsApplication::prefixPath</a></div><div class="ttdeci">static QString prefixPath()</div><div class="ttdoc">Returns the path to the application prefix directory. </div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8cpp_source.html#l00494">qgsapplication.cpp:494</a></div></div>
<div class="ttc" id="classQgsApplication_html_a84710a569a0da3f12b4983419466e449"><div class="ttname"><a href="classQgsApplication.html#a84710a569a0da3f12b4983419466e449">QgsApplication::QGIS_APPLICATION_NAME</a></div><div class="ttdeci">static const char * QGIS_APPLICATION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="qgsapplication_8h_source.html#l00127">qgsapplication.h:127</a></div></div>
<div class="ttc" id="classQgsMapServiceException_html"><div class="ttname"><a href="classQgsMapServiceException.html">QgsMapServiceException</a></div><div class="ttdoc">Exception class for WMS service exceptions (for compatibility only). </div><div class="ttdef"><b>Definition:</b> <a href="qgsmapserviceexception_8h_source.html#l00040">qgsmapserviceexception.h:40</a></div></div>
<div class="ttc" id="classQgsServerSettings_html_a32bc697a4b16e937a9b87ab64eea1eb2"><div class="ttname"><a href="classQgsServerSettings.html#a32bc697a4b16e937a9b87ab64eea1eb2">QgsServerSettings::logStderr</a></div><div class="ttdeci">bool logStderr() const</div><div class="ttdoc">Returns whether logging to stderr is activated. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserversettings_8cpp_source.html#l00337">qgsserversettings.cpp:337</a></div></div>
<div class="ttc" id="classQgsException_html"><div class="ttname"><a href="classQgsException.html">QgsException</a></div><div class="ttdoc">Defines a QGIS exception class. </div><div class="ttdef"><b>Definition:</b> <a href="qgsexception_8h_source.html#l00034">qgsexception.h:34</a></div></div>
<div class="ttc" id="classQgsNetworkAccessManager_html"><div class="ttname"><a href="classQgsNetworkAccessManager.html">QgsNetworkAccessManager</a></div><div class="ttdoc">network access manager for QGISThis class implements the QGIS network access manager. </div><div class="ttdef"><b>Definition:</b> <a href="qgsnetworkaccessmanager_8h_source.html#l00251">qgsnetworkaccessmanager.h:251</a></div></div>
<div class="ttc" id="classQgsProject_html_a93f3f2a1c4562922da48473311b9b79d"><div class="ttname"><a href="classQgsProject.html#a93f3f2a1c4562922da48473311b9b79d">QgsProject::fileName</a></div><div class="ttdeci">QString fileName</div><div class="ttdef"><b>Definition:</b> <a href="qgsproject_8h_source.html#l00093">qgsproject.h:93</a></div></div>
<div class="ttc" id="classQgsServer_html_a2cdda50c1f9ba5d46c7eaf62f44bb131"><div class="ttname"><a href="classQgsServer.html#a2cdda50c1f9ba5d46c7eaf62f44bb131">QgsServer::QgsServer</a></div><div class="ttdeci">QgsServer()</div><div class="ttdoc">Creates the server instance. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserver_8cpp_source.html#l00064">qgsserver.cpp:64</a></div></div>
<div class="ttc" id="qgsserverrequest_8h_html"><div class="ttname"><a href="qgsserverrequest_8h.html">qgsserverrequest.h</a></div></div>
<div class="ttc" id="classQgsServerInterfaceImpl_html_a4e2198b0a44b33024d557040948b69e2"><div class="ttname"><a href="classQgsServerInterfaceImpl.html#a4e2198b0a44b33024d557040948b69e2">QgsServerInterfaceImpl::setRequestHandler</a></div><div class="ttdeci">void setRequestHandler(QgsRequestHandler *requestHandler) override</div><div class="ttdoc">Set the request handler. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverinterfaceimpl_8cpp_source.html#l00056">qgsserverinterfaceimpl.cpp:56</a></div></div>
<div class="ttc" id="classQgsServerParameters_html_a4b8a353b7d0948cf20796784f4db2647"><div class="ttname"><a href="classQgsServerParameters.html#a4b8a353b7d0948cf20796784f4db2647">QgsServerParameters::fileName</a></div><div class="ttdeci">QString fileName() const</div><div class="ttdoc">Returns FILE_NAME parameter as a string or an empty string if not defined. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserverparameters_8cpp_source.html#l00482">qgsserverparameters.cpp:482</a></div></div>
<div class="ttc" id="qgslogger_8h_html"><div class="ttname"><a href="qgslogger_8h.html">qgslogger.h</a></div></div>
<div class="ttc" id="classQgsServer_html_a80cb233f8d76660f518d09a8ab0afdd0"><div class="ttname"><a href="classQgsServer.html#a80cb233f8d76660f518d09a8ab0afdd0">QgsServer::handleRequest</a></div><div class="ttdeci">void handleRequest(QgsServerRequest &amp;request, QgsServerResponse &amp;response, const QgsProject *project=nullptr)</div><div class="ttdoc">Handles the request. </div><div class="ttdef"><b>Definition:</b> <a href="qgsserver_8cpp_source.html#l00289">qgsserver.cpp:289</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 22 2019 09:24:07 for QGIS API Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
