<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Quantum GIS API Documentation: src/core/qgsdiagramrendererv2.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>src/core/qgsdiagramrendererv2.cpp</h1><a href="qgsdiagramrendererv2_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include "<a class="code" href="qgsdiagramrendererv2_8h.html">qgsdiagramrendererv2.h</a>"</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include "<a class="code" href="qgsdiagram_8h.html">qgsdiagram.h</a>"</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include "<a class="code" href="qgsrendercontext_8h.html">qgsrendercontext.h</a>"</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;QDomElement&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;QPainter&gt;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 
<a name="l00008"></a><a class="code" href="structQgsDiagramLayerSettings.html#6a51d7ed4eb819d3f9d834f9a4dd317b">00008</a> <span class="keywordtype">void</span> <a class="code" href="structQgsDiagramLayerSettings.html#6a51d7ed4eb819d3f9d834f9a4dd317b">QgsDiagramLayerSettings::readXML</a>( <span class="keyword">const</span> QDomElement&amp; elem )
<a name="l00009"></a>00009 {
<a name="l00010"></a>00010   <a class="code" href="structQgsDiagramLayerSettings.html#e5a1e3512c468eb7978c5d158ee25668">placement</a> = ( <a class="code" href="structQgsDiagramLayerSettings.html#59f40cab611f9b9b9d8c0206f3d193aa">Placement</a> )elem.attribute( <span class="stringliteral">"placement"</span> ).toInt();
<a name="l00011"></a>00011   <a class="code" href="structQgsDiagramLayerSettings.html#2eabdd8ae4320a5e90388bd98768f35c">placementFlags</a> = ( <a class="code" href="structQgsDiagramLayerSettings.html#fe8826171069134fbfdbe3a9107f3f8b">LinePlacementFlags</a> )elem.attribute( <span class="stringliteral">"linePlacementFlags"</span> ).toInt();
<a name="l00012"></a>00012   <a class="code" href="structQgsDiagramLayerSettings.html#616a55d8a4966c4be7894e2fd0938319">priority</a> = elem.attribute( <span class="stringliteral">"priority"</span> ).toInt();
<a name="l00013"></a>00013   <a class="code" href="structQgsDiagramLayerSettings.html#49faa5dd75e3d884ab09c1f3bbf30577">obstacle</a> = elem.attribute( <span class="stringliteral">"obstacle"</span> ).toInt();
<a name="l00014"></a>00014   <a class="code" href="structQgsDiagramLayerSettings.html#df4c203e8f760b9fee36c53e8d2164ac">dist</a> = elem.attribute( <span class="stringliteral">"dist"</span> ).toDouble();
<a name="l00015"></a>00015   <a class="code" href="structQgsDiagramLayerSettings.html#31663c48767b9c738798287ba6183f98">xPosColumn</a> = elem.attribute( <span class="stringliteral">"xPosColumn"</span> ).toInt();
<a name="l00016"></a>00016   <a class="code" href="structQgsDiagramLayerSettings.html#8c48779daca01dc238e115e5417ab96a">yPosColumn</a> = elem.attribute( <span class="stringliteral">"yPosColumn"</span> ).toInt();
<a name="l00017"></a>00017 }
<a name="l00018"></a>00018 
<a name="l00019"></a><a class="code" href="structQgsDiagramLayerSettings.html#5752a186a042b45db3cd31ebd1f77ce7">00019</a> <span class="keywordtype">void</span> <a class="code" href="structQgsDiagramLayerSettings.html#5752a186a042b45db3cd31ebd1f77ce7">QgsDiagramLayerSettings::writeXML</a>( QDomElement&amp; layerElem, QDomDocument&amp; doc )<span class="keyword"> const</span>
<a name="l00020"></a>00020 <span class="keyword"></span>{
<a name="l00021"></a>00021   QDomElement diagramLayerElem = doc.createElement( <span class="stringliteral">"DiagramLayerSettings"</span> );
<a name="l00022"></a>00022   diagramLayerElem.setAttribute( <span class="stringliteral">"placement"</span>, <a class="code" href="structQgsDiagramLayerSettings.html#e5a1e3512c468eb7978c5d158ee25668">placement</a> );
<a name="l00023"></a>00023   diagramLayerElem.setAttribute( <span class="stringliteral">"linePlacementFlags"</span>, <a class="code" href="structQgsDiagramLayerSettings.html#2eabdd8ae4320a5e90388bd98768f35c">placementFlags</a> );
<a name="l00024"></a>00024   diagramLayerElem.setAttribute( <span class="stringliteral">"priority"</span>, <a class="code" href="structQgsDiagramLayerSettings.html#616a55d8a4966c4be7894e2fd0938319">priority</a> );
<a name="l00025"></a>00025   diagramLayerElem.setAttribute( <span class="stringliteral">"obstacle"</span>, <a class="code" href="structQgsDiagramLayerSettings.html#49faa5dd75e3d884ab09c1f3bbf30577">obstacle</a> );
<a name="l00026"></a>00026   diagramLayerElem.setAttribute( <span class="stringliteral">"dist"</span>, <a class="code" href="structQgsDiagramLayerSettings.html#df4c203e8f760b9fee36c53e8d2164ac">dist</a> );
<a name="l00027"></a>00027   diagramLayerElem.setAttribute( <span class="stringliteral">"xPosColumn"</span>, <a class="code" href="structQgsDiagramLayerSettings.html#31663c48767b9c738798287ba6183f98">xPosColumn</a> );
<a name="l00028"></a>00028   diagramLayerElem.setAttribute( <span class="stringliteral">"yPosColumn"</span>, <a class="code" href="structQgsDiagramLayerSettings.html#8c48779daca01dc238e115e5417ab96a">yPosColumn</a> );
<a name="l00029"></a>00029   layerElem.appendChild( diagramLayerElem );
<a name="l00030"></a>00030 }
<a name="l00031"></a>00031 
<a name="l00032"></a><a class="code" href="structQgsDiagramSettings.html#35a13b430b2e724ceadd73a5a423fd8c">00032</a> <span class="keywordtype">void</span> <a class="code" href="structQgsDiagramSettings.html#35a13b430b2e724ceadd73a5a423fd8c">QgsDiagramSettings::readXML</a>( <span class="keyword">const</span> QDomElement&amp; elem )
<a name="l00033"></a>00033 {
<a name="l00034"></a>00034   <a class="code" href="structQgsDiagramSettings.html#61f5c9dc07baca036d9e43a7cf42679f">font</a>.fromString( elem.attribute( <span class="stringliteral">"font"</span> ) );
<a name="l00035"></a>00035   <a class="code" href="structQgsDiagramSettings.html#95f95b52aa0283611a50eb031856cdff">backgroundColor</a>.setNamedColor( elem.attribute( <span class="stringliteral">"backgroundColor"</span> ) );
<a name="l00036"></a>00036   <a class="code" href="structQgsDiagramSettings.html#95f95b52aa0283611a50eb031856cdff">backgroundColor</a>.setAlpha( elem.attribute( <span class="stringliteral">"backgroundAlpha"</span> ).toInt() );
<a name="l00037"></a>00037   <a class="code" href="structQgsDiagramSettings.html#de60278db873686eb3be02762026a21b">size</a>.setWidth( elem.attribute( <span class="stringliteral">"width"</span> ).toDouble() );
<a name="l00038"></a>00038   <a class="code" href="structQgsDiagramSettings.html#de60278db873686eb3be02762026a21b">size</a>.setHeight( elem.attribute( <span class="stringliteral">"height"</span> ).toDouble() );
<a name="l00039"></a>00039   <a class="code" href="structQgsDiagramSettings.html#51bfca443abda79cbb8d6bf411a3a708">penColor</a>.setNamedColor( elem.attribute( <span class="stringliteral">"penColor"</span> ) );
<a name="l00040"></a>00040   <a class="code" href="structQgsDiagramSettings.html#d864032fd28ea3db7e2a71dbd185ba47">penWidth</a> = elem.attribute( <span class="stringliteral">"penWidth"</span> ).toDouble();
<a name="l00041"></a>00041   <a class="code" href="structQgsDiagramSettings.html#f8952029475d337eed272810c1aa5b06">minScaleDenominator</a> = elem.attribute( <span class="stringliteral">"minScaleDenominator"</span>, <span class="stringliteral">"-1"</span> ).toDouble();
<a name="l00042"></a>00042   <a class="code" href="structQgsDiagramSettings.html#078e16c0c65d590dca8c893069a12323">maxScaleDenominator</a> = elem.attribute( <span class="stringliteral">"maxScaleDenominator"</span>, <span class="stringliteral">"-1"</span> ).toDouble();
<a name="l00043"></a>00043 
<a name="l00044"></a>00044   <span class="comment">//mm vs map units</span>
<a name="l00045"></a>00045   <span class="keywordflow">if</span> ( elem.attribute( <span class="stringliteral">"sizeType"</span> ) == <span class="stringliteral">"MM"</span> )
<a name="l00046"></a>00046   {
<a name="l00047"></a>00047     <a class="code" href="structQgsDiagramSettings.html#2a9641944d96efd547715e846669e3a5">sizeType</a> = <a class="code" href="structQgsDiagramSettings.html#fb9a56ce134fbd6506a3f45ebf12bf4d3c578dad90d997c53797e5c810685722">MM</a>;
<a name="l00048"></a>00048   }
<a name="l00049"></a>00049   <span class="keywordflow">else</span>
<a name="l00050"></a>00050   {
<a name="l00051"></a>00051     <a class="code" href="structQgsDiagramSettings.html#2a9641944d96efd547715e846669e3a5">sizeType</a> = <a class="code" href="structQgsDiagramSettings.html#fb9a56ce134fbd6506a3f45ebf12bf4dd190f31c66d4015c3e33e240ce287649">MapUnits</a>;
<a name="l00052"></a>00052   }
<a name="l00053"></a>00053 
<a name="l00054"></a>00054   <span class="comment">//colors</span>
<a name="l00055"></a>00055   <a class="code" href="structQgsDiagramSettings.html#805bd9d0edc801afb5da1e53e70dc1e3">categoryColors</a>.clear();
<a name="l00056"></a>00056   QStringList colorList = elem.attribute( <span class="stringliteral">"colors"</span> ).split( <span class="stringliteral">"/"</span> );
<a name="l00057"></a>00057   QStringList::const_iterator colorIt = colorList.constBegin();
<a name="l00058"></a>00058   <span class="keywordflow">for</span> ( ; colorIt != colorList.constEnd(); ++colorIt )
<a name="l00059"></a>00059   {
<a name="l00060"></a>00060     <a class="code" href="structQgsDiagramSettings.html#805bd9d0edc801afb5da1e53e70dc1e3">categoryColors</a>.append( QColor( *colorIt ) );
<a name="l00061"></a>00061   }
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   <span class="comment">//attribute indices</span>
<a name="l00064"></a>00064   <a class="code" href="structQgsDiagramSettings.html#2cff802d794bc8a5c07fac9da26d469c">categoryIndices</a>.clear();
<a name="l00065"></a>00065   QStringList catList = elem.attribute( <span class="stringliteral">"categories"</span> ).split( <span class="stringliteral">"/"</span> );
<a name="l00066"></a>00066   QStringList::const_iterator catIt = catList.constBegin();
<a name="l00067"></a>00067   <span class="keywordflow">for</span> ( ; catIt != catList.constEnd(); ++catIt )
<a name="l00068"></a>00068   {
<a name="l00069"></a>00069     <a class="code" href="structQgsDiagramSettings.html#2cff802d794bc8a5c07fac9da26d469c">categoryIndices</a>.append( catIt-&gt;toInt() );
<a name="l00070"></a>00070   }
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="structQgsDiagramSettings.html#fa9150c56b7bbeca1a7844167c65df0a">00073</a> <span class="keywordtype">void</span> <a class="code" href="structQgsDiagramSettings.html#fa9150c56b7bbeca1a7844167c65df0a">QgsDiagramSettings::writeXML</a>( QDomElement&amp; rendererElem, QDomDocument&amp; doc )<span class="keyword"> const</span>
<a name="l00074"></a>00074 <span class="keyword"></span>{
<a name="l00075"></a>00075   QDomElement categoryElem = doc.createElement( <span class="stringliteral">"DiagramCategory"</span> );
<a name="l00076"></a>00076   categoryElem.setAttribute( <span class="stringliteral">"font"</span>, <a class="code" href="structQgsDiagramSettings.html#61f5c9dc07baca036d9e43a7cf42679f">font</a>.toString() );
<a name="l00077"></a>00077   categoryElem.setAttribute( <span class="stringliteral">"backgroundColor"</span>, <a class="code" href="structQgsDiagramSettings.html#95f95b52aa0283611a50eb031856cdff">backgroundColor</a>.name() );
<a name="l00078"></a>00078   categoryElem.setAttribute( <span class="stringliteral">"backgroundAlpha"</span>, <a class="code" href="structQgsDiagramSettings.html#95f95b52aa0283611a50eb031856cdff">backgroundColor</a>.alpha() );
<a name="l00079"></a>00079   categoryElem.setAttribute( <span class="stringliteral">"width"</span>, <a class="code" href="structQgsDiagramSettings.html#de60278db873686eb3be02762026a21b">size</a>.width() );
<a name="l00080"></a>00080   categoryElem.setAttribute( <span class="stringliteral">"height"</span>, <a class="code" href="structQgsDiagramSettings.html#de60278db873686eb3be02762026a21b">size</a>.height() );
<a name="l00081"></a>00081   categoryElem.setAttribute( <span class="stringliteral">"penColor"</span>, <a class="code" href="structQgsDiagramSettings.html#51bfca443abda79cbb8d6bf411a3a708">penColor</a>.name() );
<a name="l00082"></a>00082   categoryElem.setAttribute( <span class="stringliteral">"penWidth"</span>, <a class="code" href="structQgsDiagramSettings.html#d864032fd28ea3db7e2a71dbd185ba47">penWidth</a> );
<a name="l00083"></a>00083   categoryElem.setAttribute( <span class="stringliteral">"minScaleDenominator"</span>, <a class="code" href="structQgsDiagramSettings.html#f8952029475d337eed272810c1aa5b06">minScaleDenominator</a> );
<a name="l00084"></a>00084   categoryElem.setAttribute( <span class="stringliteral">"maxScaleDenominator"</span>, <a class="code" href="structQgsDiagramSettings.html#078e16c0c65d590dca8c893069a12323">maxScaleDenominator</a> );
<a name="l00085"></a>00085   <span class="keywordflow">if</span> ( <a class="code" href="structQgsDiagramSettings.html#2a9641944d96efd547715e846669e3a5">sizeType</a> == <a class="code" href="structQgsDiagramSettings.html#fb9a56ce134fbd6506a3f45ebf12bf4d3c578dad90d997c53797e5c810685722">MM</a> )
<a name="l00086"></a>00086   {
<a name="l00087"></a>00087     categoryElem.setAttribute( <span class="stringliteral">"sizeType"</span>, <span class="stringliteral">"MM"</span> );
<a name="l00088"></a>00088   }
<a name="l00089"></a>00089   <span class="keywordflow">else</span>
<a name="l00090"></a>00090   {
<a name="l00091"></a>00091     categoryElem.setAttribute( <span class="stringliteral">"sizeType"</span>, <span class="stringliteral">"MapUnits"</span> );
<a name="l00092"></a>00092   }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094   QString colors;
<a name="l00095"></a>00095   <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structQgsDiagramSettings.html#805bd9d0edc801afb5da1e53e70dc1e3">categoryColors</a>.size(); ++i )
<a name="l00096"></a>00096   {
<a name="l00097"></a>00097     <span class="keywordflow">if</span> ( i &gt; 0 )
<a name="l00098"></a>00098     {
<a name="l00099"></a>00099       colors.append( <span class="stringliteral">"/"</span> );
<a name="l00100"></a>00100     }
<a name="l00101"></a>00101     colors.append( <a class="code" href="structQgsDiagramSettings.html#805bd9d0edc801afb5da1e53e70dc1e3">categoryColors</a>.at( i ).name() );
<a name="l00102"></a>00102   }
<a name="l00103"></a>00103   categoryElem.setAttribute( <span class="stringliteral">"colors"</span>, colors );
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   QString categories;
<a name="l00106"></a>00106   <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="structQgsDiagramSettings.html#2cff802d794bc8a5c07fac9da26d469c">categoryIndices</a>.size(); ++i )
<a name="l00107"></a>00107   {
<a name="l00108"></a>00108     <span class="keywordflow">if</span> ( i &gt; 0 )
<a name="l00109"></a>00109     {
<a name="l00110"></a>00110       categories.append( <span class="stringliteral">"/"</span> );
<a name="l00111"></a>00111     }
<a name="l00112"></a>00112     categories.append( QString::number( <a class="code" href="structQgsDiagramSettings.html#2cff802d794bc8a5c07fac9da26d469c">categoryIndices</a>.at( i ) ) );
<a name="l00113"></a>00113   }
<a name="l00114"></a>00114   categoryElem.setAttribute( <span class="stringliteral">"categories"</span>, categories );
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   rendererElem.appendChild( categoryElem );
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="classQgsDiagramRendererV2.html#ee6c0c0fe776b4c0a2ef76f26933e001">00119</a> <a class="code" href="classQgsDiagramRendererV2.html#ee6c0c0fe776b4c0a2ef76f26933e001">QgsDiagramRendererV2::QgsDiagramRendererV2</a>(): mDiagram( 0 )
<a name="l00120"></a>00120 {
<a name="l00121"></a>00121 }
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="classQgsDiagramRendererV2.html#94578a435cf8470017ba753ed83955dc">00123</a> <a class="code" href="classQgsDiagramRendererV2.html#94578a435cf8470017ba753ed83955dc">QgsDiagramRendererV2::~QgsDiagramRendererV2</a>()
<a name="l00124"></a>00124 {
<a name="l00125"></a>00125   <span class="keyword">delete</span> <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a>;
<a name="l00126"></a>00126 }
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="classQgsDiagramRendererV2.html#99c08ad580f1e7539a20b0a02cd0a28e">00128</a> <span class="keywordtype">void</span> <a class="code" href="classQgsDiagramRendererV2.html#99c08ad580f1e7539a20b0a02cd0a28e">QgsDiagramRendererV2::setDiagram</a>( <a class="code" href="classQgsDiagram.html" title="Base class for all diagram types.">QgsDiagram</a>* d )
<a name="l00129"></a>00129 {
<a name="l00130"></a>00130   <span class="keyword">delete</span> <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a>;
<a name="l00131"></a>00131   <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a> = d;
<a name="l00132"></a>00132 }
<a name="l00133"></a>00133 
<a name="l00134"></a><a class="code" href="classQgsDiagramRendererV2.html#4036036a57e6217bde62830fcc8cbb4d">00134</a> <span class="keywordtype">void</span> <a class="code" href="classQgsDiagramRendererV2.html#4036036a57e6217bde62830fcc8cbb4d">QgsDiagramRendererV2::renderDiagram</a>( <span class="keyword">const</span> <a class="code" href="qgsfeature_8h.html#54fb9a5ab4cfae301a0415ce490f08c8">QgsAttributeMap</a>&amp; att, <a class="code" href="classQgsRenderContext.html" title="Contains information about the context of a rendering operation.">QgsRenderContext</a>&amp; c, <span class="keyword">const</span> QPointF&amp; pos )
<a name="l00135"></a>00135 {
<a name="l00136"></a>00136   <span class="keywordflow">if</span> ( !<a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a> )
<a name="l00137"></a>00137   {
<a name="l00138"></a>00138     <span class="keywordflow">return</span>;
<a name="l00139"></a>00139   }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   <a class="code" href="structQgsDiagramSettings.html">QgsDiagramSettings</a> s;
<a name="l00142"></a>00142   <span class="keywordflow">if</span> ( !<a class="code" href="classQgsDiagramRendererV2.html#b4ddc2452ebe804dae70ef6254b62e19" title="Returns list with all diagram settings in the renderer.">diagramSettings</a>( att, c, s ) )
<a name="l00143"></a>00143   {
<a name="l00144"></a>00144     <span class="keywordflow">return</span>;
<a name="l00145"></a>00145   }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147   <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a>-&gt;<a class="code" href="classQgsDiagram.html#cc627953fe6a23e230c89494527fcb40" title="Draws the diagram at the given position (in pixel coordinates).">renderDiagram</a>( att, c, s, pos );
<a name="l00148"></a>00148 }
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="classQgsDiagramRendererV2.html#6ddd94b9dfe3cd2f0190279cd81f2b28">00150</a> QSizeF <a class="code" href="classQgsDiagramRendererV2.html#6ddd94b9dfe3cd2f0190279cd81f2b28" title="Returns size of the diagram for feature f in map units.">QgsDiagramRendererV2::sizeMapUnits</a>( <span class="keyword">const</span> <a class="code" href="qgsfeature_8h.html#54fb9a5ab4cfae301a0415ce490f08c8">QgsAttributeMap</a>&amp; attributes, <span class="keyword">const</span> <a class="code" href="classQgsRenderContext.html" title="Contains information about the context of a rendering operation.">QgsRenderContext</a>&amp; c )
<a name="l00151"></a>00151 {
<a name="l00152"></a>00152   <a class="code" href="structQgsDiagramSettings.html">QgsDiagramSettings</a> s;
<a name="l00153"></a>00153   <span class="keywordflow">if</span> ( !<a class="code" href="classQgsDiagramRendererV2.html#b4ddc2452ebe804dae70ef6254b62e19" title="Returns list with all diagram settings in the renderer.">diagramSettings</a>( attributes, c, s ) )
<a name="l00154"></a>00154   {
<a name="l00155"></a>00155     <span class="keywordflow">return</span> QSizeF();
<a name="l00156"></a>00156   }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158   QSizeF size = <a class="code" href="classQgsDiagramRendererV2.html#3a31148ebad5dbf3d42ba509d5012c0a" title="Returns size of the diagram (in painter units) or an invalid size in case of error...">diagramSize</a>( attributes, c );
<a name="l00159"></a>00159   <span class="keywordflow">if</span> ( s.<a class="code" href="structQgsDiagramSettings.html#2a9641944d96efd547715e846669e3a5">sizeType</a> == <a class="code" href="structQgsDiagramSettings.html#fb9a56ce134fbd6506a3f45ebf12bf4d3c578dad90d997c53797e5c810685722">QgsDiagramSettings::MM</a> )
<a name="l00160"></a>00160   {
<a name="l00161"></a>00161     <a class="code" href="classQgsDiagramRendererV2.html#c5488e2fd7eb1e4659fba10d5917ffaf" title="Converts size from mm to map units.">convertSizeToMapUnits</a>( size, c );
<a name="l00162"></a>00162   }
<a name="l00163"></a>00163   <span class="keywordflow">return</span> size;
<a name="l00164"></a>00164 }
<a name="l00165"></a>00165 
<a name="l00166"></a><a class="code" href="classQgsDiagramRendererV2.html#c5488e2fd7eb1e4659fba10d5917ffaf">00166</a> <span class="keywordtype">void</span> <a class="code" href="classQgsDiagramRendererV2.html#c5488e2fd7eb1e4659fba10d5917ffaf" title="Converts size from mm to map units.">QgsDiagramRendererV2::convertSizeToMapUnits</a>( QSizeF&amp; size, <span class="keyword">const</span> <a class="code" href="classQgsRenderContext.html" title="Contains information about the context of a rendering operation.">QgsRenderContext</a>&amp; context )<span class="keyword"> const</span>
<a name="l00167"></a>00167 <span class="keyword"></span>{
<a name="l00168"></a>00168   <span class="keywordflow">if</span> ( !size.isValid() )
<a name="l00169"></a>00169   {
<a name="l00170"></a>00170     <span class="keywordflow">return</span>;
<a name="l00171"></a>00171   }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keywordtype">int</span> dpi = <a class="code" href="classQgsDiagramRendererV2.html#03e08392be3f2a74bd2e6ac511237fea" title="Returns the paint device dpi (or -1 in case of error.">dpiPaintDevice</a>( context.<a class="code" href="classQgsRenderContext.html#4f731650f12397a604ae0d7a9ef0fd6e">constPainter</a>() );
<a name="l00174"></a>00174   <span class="keywordflow">if</span> ( dpi &lt; 0 )
<a name="l00175"></a>00175   {
<a name="l00176"></a>00176     <span class="keywordflow">return</span>;
<a name="l00177"></a>00177   }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179   <span class="keywordtype">double</span> pixelToMap = dpi / 25.4 * context.<a class="code" href="classQgsRenderContext.html#be5b3cb445070d6f5343132d6c347e65">mapToPixel</a>().<a class="code" href="classQgsMapToPixel.html#d8c374aa5e47057d4c2f45a5ced78bd0" title="Return current map units per pixel.">mapUnitsPerPixel</a>();
<a name="l00180"></a>00180   size.rwidth() *= pixelToMap;
<a name="l00181"></a>00181   size.rheight() *= pixelToMap;
<a name="l00182"></a>00182 }
<a name="l00183"></a>00183 
<a name="l00184"></a><a class="code" href="classQgsDiagramRendererV2.html#03e08392be3f2a74bd2e6ac511237fea">00184</a> <span class="keywordtype">int</span> <a class="code" href="classQgsDiagramRendererV2.html#03e08392be3f2a74bd2e6ac511237fea" title="Returns the paint device dpi (or -1 in case of error.">QgsDiagramRendererV2::dpiPaintDevice</a>( <span class="keyword">const</span> QPainter* painter )
<a name="l00185"></a>00185 {
<a name="l00186"></a>00186   <span class="keywordflow">if</span> ( painter )
<a name="l00187"></a>00187   {
<a name="l00188"></a>00188     QPaintDevice* device = painter-&gt;device();
<a name="l00189"></a>00189     <span class="keywordflow">if</span> ( device )
<a name="l00190"></a>00190     {
<a name="l00191"></a>00191       <span class="keywordflow">return</span> device-&gt;logicalDpiX();
<a name="l00192"></a>00192     }
<a name="l00193"></a>00193   }
<a name="l00194"></a>00194   <span class="keywordflow">return</span> -1;
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 
<a name="l00197"></a><a class="code" href="classQgsDiagramRendererV2.html#fc2a50b252c784f39b77d7ef862d4852">00197</a> <span class="keywordtype">void</span> <a class="code" href="classQgsDiagramRendererV2.html#fc2a50b252c784f39b77d7ef862d4852">QgsDiagramRendererV2::_readXML</a>( <span class="keyword">const</span> QDomElement&amp; elem )
<a name="l00198"></a>00198 {
<a name="l00199"></a>00199   <span class="keyword">delete</span> <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a>;
<a name="l00200"></a>00200   QString diagramType = elem.attribute( <span class="stringliteral">"diagramType"</span> );
<a name="l00201"></a>00201   <span class="keywordflow">if</span> ( diagramType == <span class="stringliteral">"Pie"</span> )
<a name="l00202"></a>00202   {
<a name="l00203"></a>00203     <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a> = <span class="keyword">new</span> <a class="code" href="classQgsPieDiagram.html">QgsPieDiagram</a>();
<a name="l00204"></a>00204   }
<a name="l00205"></a>00205   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( diagramType == <span class="stringliteral">"Text"</span> )
<a name="l00206"></a>00206   {
<a name="l00207"></a>00207     <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a> = <span class="keyword">new</span> <a class="code" href="classQgsTextDiagram.html">QgsTextDiagram</a>();
<a name="l00208"></a>00208   }
<a name="l00209"></a>00209   <span class="keywordflow">else</span>
<a name="l00210"></a>00210   {
<a name="l00211"></a>00211     <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a> = 0;
<a name="l00212"></a>00212   }
<a name="l00213"></a>00213 }
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="classQgsDiagramRendererV2.html#c0e78467cfb5d1f42713c592a4b49e8d">00215</a> <span class="keywordtype">void</span> <a class="code" href="classQgsDiagramRendererV2.html#c0e78467cfb5d1f42713c592a4b49e8d">QgsDiagramRendererV2::_writeXML</a>( QDomElement&amp; rendererElem, QDomDocument&amp; doc )<span class="keyword"> const</span>
<a name="l00216"></a>00216 <span class="keyword"></span>{
<a name="l00217"></a>00217   <span class="keywordflow">if</span> ( <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a> )
<a name="l00218"></a>00218   {
<a name="l00219"></a>00219     rendererElem.setAttribute( <span class="stringliteral">"diagramType"</span>, <a class="code" href="classQgsDiagramRendererV2.html#b9198a93605768c7887b148ca6ef6d7a" title="Reference to the object that does the real diagram rendering.">mDiagram</a>-&gt;<a class="code" href="classQgsDiagram.html#179c9cce7e87e220aee8dc64b108786e">diagramName</a>() );
<a name="l00220"></a>00220   }
<a name="l00221"></a>00221 }
<a name="l00222"></a>00222 
<a name="l00223"></a><a class="code" href="classQgsSingleCategoryDiagramRenderer.html#53e811c9dd4d46b888116c8c285cb500">00223</a> <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#53e811c9dd4d46b888116c8c285cb500">QgsSingleCategoryDiagramRenderer::QgsSingleCategoryDiagramRenderer</a>(): <a class="code" href="classQgsDiagramRendererV2.html" title="Returns diagram settings for a feature.">QgsDiagramRendererV2</a>()
<a name="l00224"></a>00224 {
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 
<a name="l00227"></a><a class="code" href="classQgsSingleCategoryDiagramRenderer.html#2684d63d1c76899c697e5ba4e428e246">00227</a> <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#2684d63d1c76899c697e5ba4e428e246">QgsSingleCategoryDiagramRenderer::~QgsSingleCategoryDiagramRenderer</a>()
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229 }
<a name="l00230"></a>00230 
<a name="l00231"></a><a class="code" href="classQgsSingleCategoryDiagramRenderer.html#6f879a03fbc502ebab84fe1fc9773f88">00231</a> <span class="keywordtype">bool</span> <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#c129b2b26e8e5612ea64cee5275e5334" title="Returns list with all diagram settings in the renderer.">QgsSingleCategoryDiagramRenderer::diagramSettings</a>( <span class="keyword">const</span> <a class="code" href="qgsfeature_8h.html#54fb9a5ab4cfae301a0415ce490f08c8">QgsAttributeMap</a>&amp;, <span class="keyword">const</span> <a class="code" href="classQgsRenderContext.html" title="Contains information about the context of a rendering operation.">QgsRenderContext</a>&amp; c, <a class="code" href="structQgsDiagramSettings.html">QgsDiagramSettings</a>&amp; s )
<a name="l00232"></a>00232 {
<a name="l00233"></a>00233   s = <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#4442ec31112ac08dde69fd46c8eb4804">mSettings</a>;
<a name="l00234"></a>00234   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00235"></a>00235 }
<a name="l00236"></a>00236 
<a name="l00237"></a><a class="code" href="classQgsSingleCategoryDiagramRenderer.html#c129b2b26e8e5612ea64cee5275e5334">00237</a> QList&lt;QgsDiagramSettings&gt; <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#c129b2b26e8e5612ea64cee5275e5334" title="Returns list with all diagram settings in the renderer.">QgsSingleCategoryDiagramRenderer::diagramSettings</a>()<span class="keyword"> const</span>
<a name="l00238"></a>00238 <span class="keyword"></span>{
<a name="l00239"></a>00239   QList&lt;QgsDiagramSettings&gt; settingsList;
<a name="l00240"></a>00240   settingsList.push_back( <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#4442ec31112ac08dde69fd46c8eb4804">mSettings</a> );
<a name="l00241"></a>00241   <span class="keywordflow">return</span> settingsList;
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="classQgsSingleCategoryDiagramRenderer.html#b56dc88361aa91715c6429283b4cc73c">00244</a> <span class="keywordtype">void</span> <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#b56dc88361aa91715c6429283b4cc73c">QgsSingleCategoryDiagramRenderer::readXML</a>( <span class="keyword">const</span> QDomElement&amp; elem )
<a name="l00245"></a>00245 {
<a name="l00246"></a>00246   QDomElement categoryElem = elem.firstChildElement( <span class="stringliteral">"DiagramCategory"</span> );
<a name="l00247"></a>00247   <span class="keywordflow">if</span> ( categoryElem.isNull() )
<a name="l00248"></a>00248   {
<a name="l00249"></a>00249     <span class="keywordflow">return</span>;
<a name="l00250"></a>00250   }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252   <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#4442ec31112ac08dde69fd46c8eb4804">mSettings</a>.<a class="code" href="structQgsDiagramSettings.html#35a13b430b2e724ceadd73a5a423fd8c">readXML</a>( categoryElem );
<a name="l00253"></a>00253   <a class="code" href="classQgsDiagramRendererV2.html#fc2a50b252c784f39b77d7ef862d4852">_readXML</a>( elem );
<a name="l00254"></a>00254 }
<a name="l00255"></a>00255 
<a name="l00256"></a><a class="code" href="classQgsSingleCategoryDiagramRenderer.html#59069b40db6c28c021b5b5ae6455118a">00256</a> <span class="keywordtype">void</span> <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#59069b40db6c28c021b5b5ae6455118a">QgsSingleCategoryDiagramRenderer::writeXML</a>( QDomElement&amp; layerElem, QDomDocument&amp; doc )<span class="keyword"> const</span>
<a name="l00257"></a>00257 <span class="keyword"></span>{
<a name="l00258"></a>00258   QDomElement rendererElem = doc.createElement( <span class="stringliteral">"SingleCategoryDiagramRenderer"</span> );
<a name="l00259"></a>00259   <a class="code" href="classQgsSingleCategoryDiagramRenderer.html#4442ec31112ac08dde69fd46c8eb4804">mSettings</a>.<a class="code" href="structQgsDiagramSettings.html#fa9150c56b7bbeca1a7844167c65df0a">writeXML</a>( rendererElem, doc );
<a name="l00260"></a>00260   <a class="code" href="classQgsDiagramRendererV2.html#c0e78467cfb5d1f42713c592a4b49e8d">_writeXML</a>( rendererElem, doc );
<a name="l00261"></a>00261   layerElem.appendChild( rendererElem );
<a name="l00262"></a>00262 }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#23854c921c1dfbb6ef8fa8dc203e2025">00265</a> <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#23854c921c1dfbb6ef8fa8dc203e2025">QgsLinearlyInterpolatedDiagramRenderer::QgsLinearlyInterpolatedDiagramRenderer</a>(): <a class="code" href="classQgsDiagramRendererV2.html" title="Returns diagram settings for a feature.">QgsDiagramRendererV2</a>()
<a name="l00266"></a>00266 {
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00269"></a><a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#540340e5faa70384cb875aef3a72f3bc">00269</a> <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#540340e5faa70384cb875aef3a72f3bc">QgsLinearlyInterpolatedDiagramRenderer::~QgsLinearlyInterpolatedDiagramRenderer</a>()
<a name="l00270"></a>00270 {
<a name="l00271"></a>00271 }
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#19b722172bf84df0ccd42b7d6bb9724d">00273</a> QList&lt;QgsDiagramSettings&gt; <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#19b722172bf84df0ccd42b7d6bb9724d" title="Returns list with all diagram settings in the renderer.">QgsLinearlyInterpolatedDiagramRenderer::diagramSettings</a>()<span class="keyword"> const</span>
<a name="l00274"></a>00274 <span class="keyword"></span>{
<a name="l00275"></a>00275   QList&lt;QgsDiagramSettings&gt; settingsList;
<a name="l00276"></a>00276   settingsList.push_back( <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#03a396f37d5ee592d76c4acad42a9522">mSettings</a> );
<a name="l00277"></a>00277   <span class="keywordflow">return</span> settingsList;
<a name="l00278"></a>00278 }
<a name="l00279"></a>00279 
<a name="l00280"></a><a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#b6d773b395c5a545aae70e8022d9b405">00280</a> <span class="keywordtype">bool</span> <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#19b722172bf84df0ccd42b7d6bb9724d" title="Returns list with all diagram settings in the renderer.">QgsLinearlyInterpolatedDiagramRenderer::diagramSettings</a>( <span class="keyword">const</span> <a class="code" href="qgsfeature_8h.html#54fb9a5ab4cfae301a0415ce490f08c8">QgsAttributeMap</a>&amp; attributes, <span class="keyword">const</span> <a class="code" href="classQgsRenderContext.html" title="Contains information about the context of a rendering operation.">QgsRenderContext</a>&amp; c, <a class="code" href="structQgsDiagramSettings.html">QgsDiagramSettings</a>&amp; s )
<a name="l00281"></a>00281 {
<a name="l00282"></a>00282   s = <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#03a396f37d5ee592d76c4acad42a9522">mSettings</a>;
<a name="l00283"></a>00283   s.<a class="code" href="structQgsDiagramSettings.html#de60278db873686eb3be02762026a21b">size</a> = <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#a00f4c1aa19f6d5c13fd2487d47aa807" title="Returns size of the diagram (in painter units) or an invalid size in case of error...">diagramSize</a>( attributes, c );
<a name="l00284"></a>00284   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 
<a name="l00287"></a><a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#cebcb49daa3603d3b0788718283b9e2e">00287</a> QList&lt;int&gt; <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#cebcb49daa3603d3b0788718283b9e2e" title="Returns attribute indices needed for diagram rendering.">QgsLinearlyInterpolatedDiagramRenderer::diagramAttributes</a>()<span class="keyword"> const</span>
<a name="l00288"></a>00288 <span class="keyword"></span>{
<a name="l00289"></a>00289   QList&lt;int&gt; attributes = <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#03a396f37d5ee592d76c4acad42a9522">mSettings</a>.<a class="code" href="structQgsDiagramSettings.html#2cff802d794bc8a5c07fac9da26d469c">categoryIndices</a>;
<a name="l00290"></a>00290   <span class="keywordflow">if</span> ( !attributes.contains( <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#4cf578b5ee17dc82c2a8a83e1082dbb9" title="Index of the classification attribute.">mClassificationAttribute</a> ) )
<a name="l00291"></a>00291   {
<a name="l00292"></a>00292     attributes.push_back( <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#4cf578b5ee17dc82c2a8a83e1082dbb9" title="Index of the classification attribute.">mClassificationAttribute</a> );
<a name="l00293"></a>00293   }
<a name="l00294"></a>00294   <span class="keywordflow">return</span> attributes;
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00297"></a><a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#a00f4c1aa19f6d5c13fd2487d47aa807">00297</a> QSizeF <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#a00f4c1aa19f6d5c13fd2487d47aa807" title="Returns size of the diagram (in painter units) or an invalid size in case of error...">QgsLinearlyInterpolatedDiagramRenderer::diagramSize</a>( <span class="keyword">const</span> <a class="code" href="qgsfeature_8h.html#54fb9a5ab4cfae301a0415ce490f08c8">QgsAttributeMap</a>&amp; attributes, <span class="keyword">const</span> <a class="code" href="classQgsRenderContext.html" title="Contains information about the context of a rendering operation.">QgsRenderContext</a>&amp; c )
<a name="l00298"></a>00298 {
<a name="l00299"></a>00299   QgsAttributeMap::const_iterator attIt = attributes.find( <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#4cf578b5ee17dc82c2a8a83e1082dbb9" title="Index of the classification attribute.">mClassificationAttribute</a> );
<a name="l00300"></a>00300   <span class="keywordflow">if</span> ( attIt == attributes.constEnd() )
<a name="l00301"></a>00301   {
<a name="l00302"></a>00302     <span class="keywordflow">return</span> QSizeF(); <span class="comment">//zero size if attribute is missing</span>
<a name="l00303"></a>00303   }
<a name="l00304"></a>00304   <span class="keywordtype">double</span> value = attIt.value().toDouble();
<a name="l00305"></a>00305 
<a name="l00306"></a>00306   <span class="comment">//interpolate size</span>
<a name="l00307"></a>00307   <span class="keywordtype">double</span> ratio = ( value - <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#cecbbf242302e178a2205509200076a5">mLowerValue</a> ) / ( <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#7388a0ce3d6196b1a35a4cab1da6092b">mUpperValue</a> - <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#cecbbf242302e178a2205509200076a5">mLowerValue</a> );
<a name="l00308"></a>00308   <span class="keywordflow">return</span> QSizeF( <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#027e3d50e784fd77d1c373f4cc5da2f0">mUpperSize</a>.width() * ratio + <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#c7e54f4d2f45f91f1191f75ce3fe42d8">mLowerSize</a>.width() * ( 1 - ratio ),
<a name="l00309"></a>00309                  <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#027e3d50e784fd77d1c373f4cc5da2f0">mUpperSize</a>.height() * ratio + <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#c7e54f4d2f45f91f1191f75ce3fe42d8">mLowerSize</a>.height() * ( 1 - ratio ) );
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a><a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#b2702e4f0577691061e7306327296fd8">00312</a> <span class="keywordtype">void</span> <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#b2702e4f0577691061e7306327296fd8">QgsLinearlyInterpolatedDiagramRenderer::readXML</a>( <span class="keyword">const</span> QDomElement&amp; elem )
<a name="l00313"></a>00313 {
<a name="l00314"></a>00314   <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#cecbbf242302e178a2205509200076a5">mLowerValue</a> = elem.attribute( <span class="stringliteral">"lowerValue"</span> ).toDouble();
<a name="l00315"></a>00315   <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#7388a0ce3d6196b1a35a4cab1da6092b">mUpperValue</a> = elem.attribute( <span class="stringliteral">"upperValue"</span> ).toDouble();
<a name="l00316"></a>00316   <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#c7e54f4d2f45f91f1191f75ce3fe42d8">mLowerSize</a>.setWidth( elem.attribute( <span class="stringliteral">"lowerWidth"</span> ).toDouble() );
<a name="l00317"></a>00317   <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#c7e54f4d2f45f91f1191f75ce3fe42d8">mLowerSize</a>.setHeight( elem.attribute( <span class="stringliteral">"lowerHeight"</span> ).toDouble() );
<a name="l00318"></a>00318   <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#027e3d50e784fd77d1c373f4cc5da2f0">mUpperSize</a>.setWidth( elem.attribute( <span class="stringliteral">"upperWidth"</span> ).toDouble() );
<a name="l00319"></a>00319   <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#027e3d50e784fd77d1c373f4cc5da2f0">mUpperSize</a>.setHeight( elem.attribute( <span class="stringliteral">"upperHeight"</span> ).toDouble() );
<a name="l00320"></a>00320   <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#4cf578b5ee17dc82c2a8a83e1082dbb9" title="Index of the classification attribute.">mClassificationAttribute</a> = elem.attribute( <span class="stringliteral">"classificationAttribute"</span> ).toInt();
<a name="l00321"></a>00321   QDomElement settingsElem = elem.firstChildElement( <span class="stringliteral">"DiagramCategory"</span> );
<a name="l00322"></a>00322   <span class="keywordflow">if</span> ( !settingsElem.isNull() )
<a name="l00323"></a>00323   {
<a name="l00324"></a>00324     <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#03a396f37d5ee592d76c4acad42a9522">mSettings</a>.<a class="code" href="structQgsDiagramSettings.html#35a13b430b2e724ceadd73a5a423fd8c">readXML</a>( settingsElem );
<a name="l00325"></a>00325   }
<a name="l00326"></a>00326   <a class="code" href="classQgsDiagramRendererV2.html#fc2a50b252c784f39b77d7ef862d4852">_readXML</a>( elem );
<a name="l00327"></a>00327 }
<a name="l00328"></a>00328 
<a name="l00329"></a><a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#42dc10493b5ab861c0ff2820802d58e7">00329</a> <span class="keywordtype">void</span> <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#42dc10493b5ab861c0ff2820802d58e7">QgsLinearlyInterpolatedDiagramRenderer::writeXML</a>( QDomElement&amp; layerElem, QDomDocument&amp; doc )<span class="keyword"> const</span>
<a name="l00330"></a>00330 <span class="keyword"></span>{
<a name="l00331"></a>00331   QDomElement rendererElem = doc.createElement( <span class="stringliteral">"LinearlyInterpolatedDiagramRenderer"</span> );
<a name="l00332"></a>00332   rendererElem.setAttribute( <span class="stringliteral">"lowerValue"</span>, <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#cecbbf242302e178a2205509200076a5">mLowerValue</a> );
<a name="l00333"></a>00333   rendererElem.setAttribute( <span class="stringliteral">"upperValue"</span>, <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#7388a0ce3d6196b1a35a4cab1da6092b">mUpperValue</a> );
<a name="l00334"></a>00334   rendererElem.setAttribute( <span class="stringliteral">"lowerWidth"</span>, <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#c7e54f4d2f45f91f1191f75ce3fe42d8">mLowerSize</a>.width() );
<a name="l00335"></a>00335   rendererElem.setAttribute( <span class="stringliteral">"lowerHeight"</span>, <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#c7e54f4d2f45f91f1191f75ce3fe42d8">mLowerSize</a>.height() );
<a name="l00336"></a>00336   rendererElem.setAttribute( <span class="stringliteral">"upperWidth"</span>, <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#027e3d50e784fd77d1c373f4cc5da2f0">mUpperSize</a>.width() );
<a name="l00337"></a>00337   rendererElem.setAttribute( <span class="stringliteral">"upperHeight"</span>, <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#027e3d50e784fd77d1c373f4cc5da2f0">mUpperSize</a>.height() );
<a name="l00338"></a>00338   rendererElem.setAttribute( <span class="stringliteral">"classificationAttribute"</span>, <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#4cf578b5ee17dc82c2a8a83e1082dbb9" title="Index of the classification attribute.">mClassificationAttribute</a> );
<a name="l00339"></a>00339   <a class="code" href="classQgsLinearlyInterpolatedDiagramRenderer.html#03a396f37d5ee592d76c4acad42a9522">mSettings</a>.<a class="code" href="structQgsDiagramSettings.html#fa9150c56b7bbeca1a7844167c65df0a">writeXML</a>( rendererElem, doc );
<a name="l00340"></a>00340   <a class="code" href="classQgsDiagramRendererV2.html#c0e78467cfb5d1f42713c592a4b49e8d">_writeXML</a>( rendererElem, doc );
<a name="l00341"></a>00341   layerElem.appendChild( rendererElem );
<a name="l00342"></a>00342 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Feb 4 19:08:31 2012 for Quantum GIS API Documentation by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
