<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QGIS API Documentation: /tmp/buildd/qgis-3.2.0+99unstable/src/core/geometry/qgsgeometryutils.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="api_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QGIS API Documentation
   &#160;<span id="projectnumber">3.2.0-Bonn (bc43194)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li><li class="navelem"><a class="el" href="dir_556f3b234eb81c65d6f57f7f7fcaeed3.html">geometry</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qgsgeometryutils.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qgsgeometryutils_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">                        qgsgeometryutils.cpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">  -------------------------------------------------------------------</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">Date                 : 21 Nov 2014</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">Copyright            : (C) 2014 by Marco Hugentobler</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">email                : marco.hugentobler at sourcepole dot com</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> ***************************************************************************</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *   (at your option) any later version.                                   *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsgeometryutils_8h.html">qgsgeometryutils.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgscurve_8h.html">qgscurve.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgscurvepolygon_8h.html">qgscurvepolygon.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsgeometrycollection_8h.html">qgsgeometrycollection.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslinestring_8h.html">qgslinestring.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgswkbptr_8h.html">qgswkbptr.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslogger_8h.html">qgslogger.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;QStringList&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;QVector&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;QRegularExpression&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a30ee2268427404a01163a6875fb6a45d">   30</a></span>&#160;QVector&lt;QgsLineString *&gt; <a class="code" href="classQgsGeometryUtils.html#a30ee2268427404a01163a6875fb6a45d">QgsGeometryUtils::extractLineStrings</a>( <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> *geom )</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  QVector&lt; QgsLineString * &gt; linestrings;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordflow">if</span> ( !geom )</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">return</span> linestrings;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  QVector&lt; const QgsAbstractGeometry * &gt; geometries;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  geometries &lt;&lt; geom;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">while</span> ( ! geometries.isEmpty() )</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> *g = geometries.takeFirst();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">if</span> ( <span class="keyword">const</span> <a class="code" href="classQgsCurve.html">QgsCurve</a> *curve = qgsgeometry_cast&lt; const QgsCurve * &gt;( g ) )</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      linestrings &lt;&lt; static_cast&lt; QgsLineString * &gt;( curve-&gt;segmentize() );</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <span class="keyword">const</span> <a class="code" href="classQgsGeometryCollection.html">QgsGeometryCollection</a> *collection = qgsgeometry_cast&lt; const QgsGeometryCollection * &gt;( g ) )</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; collection-&gt;numGeometries(); ++i )</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        geometries.append( collection-&gt;geometryN( i ) );</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <span class="keyword">const</span> <a class="code" href="classQgsCurvePolygon.html">QgsCurvePolygon</a> *curvePolygon = qgsgeometry_cast&lt; const QgsCurvePolygon * &gt;( g ) )</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <span class="keywordflow">if</span> ( curvePolygon-&gt;exteriorRing() )</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        linestrings &lt;&lt; static_cast&lt; QgsLineString * &gt;( curvePolygon-&gt;exteriorRing()-&gt;segmentize() );</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; curvePolygon-&gt;numInteriorRings(); ++i )</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        linestrings &lt;&lt; static_cast&lt; QgsLineString * &gt;( curvePolygon-&gt;interiorRing( i )-&gt;segmentize() );</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> linestrings;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#aa080c3faa7f3ec792ba1de170067edd1">   66</a></span>&#160;<a class="code" href="classQgsPoint.html">QgsPoint</a> <a class="code" href="classQgsGeometryUtils.html#aa080c3faa7f3ec792ba1de170067edd1">QgsGeometryUtils::closestVertex</a>( <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> &amp;geom, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt, <a class="code" href="structQgsVertexId.html">QgsVertexId</a> &amp;<span class="keywordtype">id</span> )</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordtype">double</span> minDist = std::numeric_limits&lt;double&gt;::max();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordtype">double</span> currentDist = 0;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> minDistPoint;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordtype">id</span> = <a class="code" href="structQgsVertexId.html">QgsVertexId</a>(); <span class="comment">// set as invalid</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="structQgsVertexId.html">QgsVertexId</a> vertexId;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> vertex;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">while</span> ( geom.<a class="code" href="classQgsAbstractGeometry.html#af5ec97c5568c257e0284b733a1c86d82">nextVertex</a>( vertexId, vertex ) )</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    currentDist = <a class="code" href="classQgsGeometryUtils.html#a144dde0ca4aae2957f574013d1c46fee">QgsGeometryUtils::sqrDistance2D</a>( pt, vertex );</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// The &lt;= is on purpose: for geometries with closing vertices, this ensures</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// that the closing vertex is returned. For the vertex tool, the rubberband</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// of the closing vertex is above the opening vertex, hence with the &lt;=</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// situations where the covered opening vertex rubberband is selected are</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// avoided.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> ( currentDist &lt;= minDist )</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      minDist = currentDist;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      minDistPoint = vertex;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordtype">id</span>.part = vertexId.<a class="code" href="structQgsVertexId.html#a15b583fbfa250d2515c40681ca6c5df9">part</a>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordtype">id</span>.ring = vertexId.<a class="code" href="structQgsVertexId.html#a3a1c1efa2cd2432a69b21460c901d2a5">ring</a>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordtype">id</span>.vertex = vertexId.<a class="code" href="structQgsVertexId.html#a087b27093477d27f29eb430af5f2d7da">vertex</a>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordtype">id</span>.type = vertexId.<a class="code" href="structQgsVertexId.html#a182f4d9812961538bd62c58c032dd049">type</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">return</span> minDistPoint;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a49e289c3f558d60ca4c22d1bf6b85be8">   97</a></span>&#160;<a class="code" href="classQgsPoint.html">QgsPoint</a> <a class="code" href="classQgsGeometryUtils.html#a49e289c3f558d60ca4c22d1bf6b85be8">QgsGeometryUtils::closestPoint</a>( <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> &amp;geometry, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;point )</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> <a class="code" href="classQgsGeometryUtils.html#a49e289c3f558d60ca4c22d1bf6b85be8">closestPoint</a>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="structQgsVertexId.html">QgsVertexId</a> vertexAfter;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  geometry.<a class="code" href="classQgsAbstractGeometry.html#afb4026bdd44aec81bbbfb232b267f812">closestSegment</a>( point, closestPoint, vertexAfter, <span class="keyword">nullptr</span>, <a class="code" href="qgis_8h.html#aaa5bc30d33a49f3a38e8a5d7664f870c">DEFAULT_SEGMENT_EPSILON</a> );</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> ( vertexAfter.<a class="code" href="structQgsVertexId.html#a103a806ea38b111017a9fa30ec93d60e">isValid</a>() )</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> pointAfter = geometry.<a class="code" href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">vertexAt</a>( vertexAfter );</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">if</span> ( vertexAfter.<a class="code" href="structQgsVertexId.html#a087b27093477d27f29eb430af5f2d7da">vertex</a> &gt; 0 )</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <a class="code" href="structQgsVertexId.html">QgsVertexId</a> vertexBefore = vertexAfter;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      vertexBefore.<a class="code" href="structQgsVertexId.html#a087b27093477d27f29eb430af5f2d7da">vertex</a>--;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> pointBefore = geometry.<a class="code" href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">vertexAt</a>( vertexBefore );</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">length</a> = pointBefore.<a class="code" href="classQgsPoint.html#ac7a87dbf3c7517d335222b8e2fc8fdba">distance</a>( pointAfter );</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordtype">double</span> distance = pointBefore.<a class="code" href="classQgsPoint.html#ac7a87dbf3c7517d335222b8e2fc8fdba">distance</a>( closestPoint );</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( distance, 0.0 ) )</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        closestPoint = pointBefore;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( distance, length ) )</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        closestPoint = pointAfter;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classQgsWkbTypes.html#a7d06b78c1092f48bd0391631c4d99a75">QgsWkbTypes::hasZ</a>( geometry.<a class="code" href="classQgsAbstractGeometry.html#a8b8706728c90bc5c0e9c3ea3925b4453">wkbType</a>() ) &amp;&amp; length )</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          closestPoint.<a class="code" href="classQgsPoint.html#a31a943ac0ab4256bc6a0012e370effb4">addZValue</a>( pointBefore.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() + ( pointAfter.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() - pointBefore.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() ) * distance / length );</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classQgsWkbTypes.html#ac3b831ff06608f829f4f99f76d71516b">QgsWkbTypes::hasM</a>( geometry.<a class="code" href="classQgsAbstractGeometry.html#a8b8706728c90bc5c0e9c3ea3925b4453">wkbType</a>() ) )</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;          closestPoint.<a class="code" href="classQgsPoint.html#a1a22f2bc353403e5b607c6f5f36d5410">addMValue</a>( pointBefore.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>() + ( pointAfter.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>() - pointBefore.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>() ) * distance / length );</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#a49e289c3f558d60ca4c22d1bf6b85be8">closestPoint</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a7180a1c445d69d8a98c7347befd6e8b5">  130</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a7180a1c445d69d8a98c7347befd6e8b5">QgsGeometryUtils::distanceToVertex</a>( <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> &amp;geom, <a class="code" href="structQgsVertexId.html">QgsVertexId</a> <span class="keywordtype">id</span> )</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordtype">double</span> currentDist = 0;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="structQgsVertexId.html">QgsVertexId</a> vertexId;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> vertex;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">while</span> ( geom.<a class="code" href="classQgsAbstractGeometry.html#af5ec97c5568c257e0284b733a1c86d82">nextVertex</a>( vertexId, vertex ) )</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> ( vertexId == <span class="keywordtype">id</span> )</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="comment">//found target vertex</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">return</span> currentDist;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    currentDist += geom.<a class="code" href="classQgsAbstractGeometry.html#ae1afc6e953981f8929312ad6b558fe2d">segmentLength</a>( vertexId );</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">//could not find target vertex</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a4eb7af49a21c2d18bc12416ddbc37fba">  149</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a4eb7af49a21c2d18bc12416ddbc37fba">QgsGeometryUtils::verticesAtDistance</a>( <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> &amp;geometry, <span class="keywordtype">double</span> distance, <a class="code" href="structQgsVertexId.html">QgsVertexId</a> &amp;previousVertex, <a class="code" href="structQgsVertexId.html">QgsVertexId</a> &amp;<a class="code" href="classQgsAbstractGeometry.html#af5ec97c5568c257e0284b733a1c86d82">nextVertex</a> )</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordtype">double</span> currentDist = 0;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  previousVertex = <a class="code" href="structQgsVertexId.html">QgsVertexId</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  nextVertex = <a class="code" href="structQgsVertexId.html">QgsVertexId</a>();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> point;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> previousPoint;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( distance, 0.0 ) )</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    geometry.<a class="code" href="classQgsAbstractGeometry.html#af5ec97c5568c257e0284b733a1c86d82">nextVertex</a>( previousVertex, point );</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    nextVertex = previousVertex;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">while</span> ( currentDist &lt; distance &amp;&amp; geometry.<a class="code" href="classQgsAbstractGeometry.html#af5ec97c5568c257e0284b733a1c86d82">nextVertex</a>( nextVertex, point ) )</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> ( !first )</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      currentDist += std::sqrt( <a class="code" href="classQgsGeometryUtils.html#a144dde0ca4aae2957f574013d1c46fee">QgsGeometryUtils::sqrDistance2D</a>( previousPoint, point ) );</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( currentDist, distance ) )</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="comment">// exact hit!</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      previousVertex = <a class="code" href="classQgsAbstractGeometry.html#af5ec97c5568c257e0284b733a1c86d82">nextVertex</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> ( currentDist &gt; distance )</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    previousVertex = <a class="code" href="classQgsAbstractGeometry.html#af5ec97c5568c257e0284b733a1c86d82">nextVertex</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    previousPoint = point;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    first = <span class="keyword">false</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">//could not find target distance</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a144dde0ca4aae2957f574013d1c46fee">  194</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a144dde0ca4aae2957f574013d1c46fee">QgsGeometryUtils::sqrDistance2D</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt2 )</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">return</span> ( pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) * ( pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) + ( pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) * ( pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() );</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a62d279644f48048f879cd033bebab085">  199</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a62d279644f48048f879cd033bebab085">QgsGeometryUtils::sqrDistToLine</a>( <span class="keywordtype">double</span> ptX, <span class="keywordtype">double</span> ptY, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2, <span class="keywordtype">double</span> &amp;minDistX, <span class="keywordtype">double</span> &amp;minDistY, <span class="keywordtype">double</span> epsilon )</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  minDistX = x1;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  minDistY = y1;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordtype">double</span> dx = x2 - x1;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordtype">double</span> dy = y2 - y1;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( dx, 0.0 ) || !<a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( dy, 0.0 ) )</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">double</span> t = ( ( ptX - x1 ) * dx + ( ptY - y1 ) * dy ) / ( dx * dx + dy * dy );</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> ( t &gt; 1 )</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      minDistX = x2;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      minDistY = y2;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( t &gt; 0 )</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      minDistX += dx * t;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      minDistY += dy * t;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  dx = ptX - minDistX;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  dy = ptY - minDistY;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordtype">double</span> dist = dx * dx + dy * dy;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">//prevent rounding errors if the point is directly on the segment</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( dist, 0.0, epsilon ) )</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    minDistX = ptX;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    minDistY = ptY;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> 0.0;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">return</span> dist;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a3656c360046728a78651f08274fa6e5c">  238</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a3656c360046728a78651f08274fa6e5c">QgsGeometryUtils::lineIntersection</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p1, <a class="code" href="classQgsVector.html">QgsVector</a> v1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p2, <a class="code" href="classQgsVector.html">QgsVector</a> v2, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;intersection )</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordtype">double</span> d = v1.<a class="code" href="classQgsVector.html#a14ec897a1119a7c1204d1c9bd3597b36">y</a>() * v2.<a class="code" href="classQgsVector.html#aa1cd72557be74dec1a3bfa2836e1db84">x</a>() - v1.<a class="code" href="classQgsVector.html#aa1cd72557be74dec1a3bfa2836e1db84">x</a>() * v2.<a class="code" href="classQgsVector.html#a14ec897a1119a7c1204d1c9bd3597b36">y</a>();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( d, 0 ) )</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordtype">double</span> dx = p2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">double</span> dy = p2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordtype">double</span> k = ( dy * v2.<a class="code" href="classQgsVector.html#aa1cd72557be74dec1a3bfa2836e1db84">x</a>() - dx * v2.<a class="code" href="classQgsVector.html#a14ec897a1119a7c1204d1c9bd3597b36">y</a>() ) / d;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  intersection = <a class="code" href="classQgsPoint.html">QgsPoint</a>( p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + v1.<a class="code" href="classQgsVector.html#aa1cd72557be74dec1a3bfa2836e1db84">x</a>() * k, p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() + v1.<a class="code" href="classQgsVector.html#a14ec897a1119a7c1204d1c9bd3597b36">y</a>() * k );</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// z support for intersection point</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="classQgsGeometryUtils.html#a629b530ec92320ac21c8b3c3ecc7374d">QgsGeometryUtils::setZValueFromPoints</a>( <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a>() &lt;&lt; p1 &lt;&lt; p2, intersection );</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a470d7ca2f6790424432d32145e553999">  257</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a470d7ca2f6790424432d32145e553999">QgsGeometryUtils::segmentIntersection</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p2, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;q1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;q2, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;intersectionPoint, <span class="keywordtype">bool</span> &amp;isIntersection, <span class="keyword">const</span> <span class="keywordtype">double</span> tolerance, <span class="keywordtype">bool</span> acceptImproperIntersection )</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  isIntersection = <span class="keyword">false</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="classQgsVector.html">QgsVector</a> v( p2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() );</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="classQgsVector.html">QgsVector</a> w( q2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - q1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), q2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - q1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() );</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordtype">double</span> vl = v.<a class="code" href="classQgsVector.html#ae069e031d42ece48a235716e85791ae6">length</a>();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">double</span> wl = w.length();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( vl, 0.0, tolerance ) || <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( wl, 0.0, tolerance ) )</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  v = v / vl;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  w = w / wl;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="classQgsGeometryUtils.html#a3656c360046728a78651f08274fa6e5c">QgsGeometryUtils::lineIntersection</a>( p1, v, q1, w, intersectionPoint ) )</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  isIntersection = <span class="keyword">true</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">if</span> ( acceptImproperIntersection )</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> ( ( p1 == q1 ) || ( p1 == q2 ) )</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      intersectionPoint = p1;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( p2 == q1 ) || ( p2 == q2 ) )</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      intersectionPoint = p2;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">double</span> x, y;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="comment">// intersectionPoint = p1</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( <a class="code" href="classQgsGeometryUtils.html#a62d279644f48048f879cd033bebab085">QgsGeometryUtils::sqrDistToLine</a>( p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), q1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), q1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), q2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), q2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), x, y, tolerance ), 0.0, tolerance ) ||</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="comment">// intersectionPoint = p2</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( <a class="code" href="classQgsGeometryUtils.html#a62d279644f48048f879cd033bebab085">QgsGeometryUtils::sqrDistToLine</a>( p2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), q1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), q1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), q2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), q2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), x, y, tolerance ), 0.0, tolerance ) ||</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="comment">// intersectionPoint = q1</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( <a class="code" href="classQgsGeometryUtils.html#a62d279644f48048f879cd033bebab085">QgsGeometryUtils::sqrDistToLine</a>( q1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), q1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), p2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), x, y, tolerance ), 0.0, tolerance ) ||</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="comment">// intersectionPoint = q2</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( <a class="code" href="classQgsGeometryUtils.html#a62d279644f48048f879cd033bebab085">QgsGeometryUtils::sqrDistToLine</a>( q2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), q2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), p2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), x, y, tolerance ), 0.0, tolerance )</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    )</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordtype">double</span> lambdav = <a class="code" href="classQgsVector.html">QgsVector</a>( intersectionPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), intersectionPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) *  v;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> ( lambdav &lt; 0. + tolerance || lambdav &gt; vl - tolerance )</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordtype">double</span> lambdaw = <a class="code" href="classQgsVector.html">QgsVector</a>( intersectionPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - q1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), intersectionPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - q1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) * w;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">return</span> !( lambdaw &lt; 0. + tolerance || lambdaw &gt;= wl - tolerance );</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a7bfe096677b3d7e91e697f077795ab10">  317</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a7bfe096677b3d7e91e697f077795ab10">QgsGeometryUtils::lineCircleIntersection</a>( <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;center, <span class="keyword">const</span> <span class="keywordtype">double</span> radius,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;linePoint1, <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;linePoint2,</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;intersection )</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// formula taken from http://mathworld.wolfram.com/Circle-LineIntersection.html</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> x1 = linePoint1.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() - center.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>();</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> y1 = linePoint1.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() - center.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> x2 = linePoint2.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() - center.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> y2 = linePoint2.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() - center.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dx = x2 - x1;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dy = y2 - y1;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dr = std::sqrt( std::pow( dx, 2 ) + std::pow( dy, 2 ) );</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> d = x1 * y2 - x2 * y1;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> disc = std::pow( radius, 2 ) * std::pow( dr, 2 ) - std::pow( d, 2 );</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">if</span> ( disc &lt; 0 )</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">//no intersection or tangent</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// two solutions</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> sgnDy = dy &lt; 0 ? -1 : 1;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> ax = center.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() + ( d * dy + sgnDy * dx * std::sqrt( std::pow( radius, 2 ) * std::pow( dr, 2 ) - std::pow( d, 2 ) ) ) / ( std::pow( dr, 2 ) );</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> ay = center.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() + ( -d * dx + std::fabs( dy ) * std::sqrt( std::pow( radius, 2 ) * std::pow( dr, 2 ) - std::pow( d, 2 ) ) ) / ( std::pow( dr, 2 ) );</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> p1( ax, ay );</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> bx = center.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() + ( d * dy - sgnDy * dx * std::sqrt( std::pow( radius, 2 ) * std::pow( dr, 2 ) - std::pow( d, 2 ) ) ) / ( std::pow( dr, 2 ) );</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> by = center.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() + ( -d * dx - std::fabs( dy ) * std::sqrt( std::pow( radius, 2 ) * std::pow( dr, 2 ) - std::pow( d, 2 ) ) ) / ( std::pow( dr, 2 ) );</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> p2( bx, by );</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// snap to nearest intersection</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> ( intersection.<a class="code" href="classQgsPointXY.html#a2a65e8984c72a1b8d09efbf4d098ac58">sqrDist</a>( p1 ) &lt; intersection.<a class="code" href="classQgsPointXY.html#a2a65e8984c72a1b8d09efbf4d098ac58">sqrDist</a>( p2 ) )</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      intersection.<a class="code" href="classQgsPointXY.html#a9c127bd5c55c3c987fe6e4a8b895927b">set</a>( p1.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>(), p1.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() );</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      intersection.<a class="code" href="classQgsPointXY.html#a9c127bd5c55c3c987fe6e4a8b895927b">set</a>( p2.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>(), p2.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() );</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">// based on public domain work by 3/26/2005 Tim Voght</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">// see http://paulbourke.net/geometry/circlesphere/tvoght.c</span></div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a50c030f40ed9f9c8d2bda60f18a77cc5">  369</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classQgsGeometryUtils.html#a50c030f40ed9f9c8d2bda60f18a77cc5">QgsGeometryUtils::circleCircleIntersections</a>( <a class="code" href="classQgsPointXY.html">QgsPointXY</a> center0, <span class="keyword">const</span> <span class="keywordtype">double</span> r0, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> center1, <span class="keyword">const</span> <span class="keywordtype">double</span> r1, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;intersection1, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;intersection2 )</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// determine the straight-line distance between the centers</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> d = center0.<a class="code" href="classQgsPointXY.html#a2c0482148f1ca052c7f38d762e0072ac">distance</a>( center1 );</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// check for solvability</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span> ( d &gt; ( r0 + r1 ) )</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// no solution. circles do not intersect.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( d &lt; std::fabs( r0 - r1 ) )</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// no solution. one circle is contained in the other</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( d, 0 ) &amp;&amp; ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( r0, r1 ) ) )</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// no solutions, the circles coincide</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">/* &#39;point 2&#39; is the point where the line through the circle</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">   * intersection points crosses the line between the circle</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">   * centers.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// Determine the distance from point 0 to point 2.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> a = ( ( r0 * r0 ) - ( r1 * r1 ) + ( d * d ) ) / ( 2.0 * d ) ;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">/* dx and dy are the vertical and horizontal distances between</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">   * the circle centers.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dx = center1.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() - center0.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dy = center1.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() - center0.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// Determine the coordinates of point 2.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> x2 = center0.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() + ( dx * a / d );</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> y2 = center0.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() + ( dy * a / d );</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">/* Determine the distance from point 2 to either of the</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">   * intersection points.</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> h = std::sqrt( ( r0 * r0 ) - ( a * a ) );</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">/* Now determine the offsets of the intersection points from</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">   * point 2.</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> rx = dy * ( h / d );</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> ry = dx * ( h / d );</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// determine the absolute intersection points</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  intersection1 = <a class="code" href="classQgsPointXY.html">QgsPointXY</a>( x2 + rx, y2 - ry );</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  intersection2 = <a class="code" href="classQgsPointXY.html">QgsPointXY</a>( x2 - rx, y2 +  ry );</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// see if we have 1 or 2 solutions</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( d, r0 + r1 ) )</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">// Using https://stackoverflow.com/a/1351794/1861260</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">// and inspired by http://csharphelper.com/blog/2014/11/find-the-tangent-lines-between-a-point-and-a-circle-in-c/</span></div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#ab57a8ffe2e0c40ffd0be9425072db5da">  433</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#ab57a8ffe2e0c40ffd0be9425072db5da">QgsGeometryUtils::tangentPointAndCircle</a>( <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;center, <span class="keywordtype">double</span> radius, <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;p, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;pt1, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;pt2 )</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// distance from point to center of circle</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dx = center.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() - p.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dy = center.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() - p.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>();</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> distanceSquared = dx * dx + dy * dy;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> radiusSquared = radius * radius;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> ( distanceSquared &lt; radiusSquared )</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// point is inside circle!</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// distance from point to tangent point, using pythagoras</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> distanceToTangent = std::sqrt( distanceSquared - radiusSquared );</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// tangent points are those where the original circle intersects a circle centered</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// on p with radius distanceToTangent</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="classQgsGeometryUtils.html#a50c030f40ed9f9c8d2bda60f18a77cc5">circleCircleIntersections</a>( center, radius, p, distanceToTangent, pt1, pt2 );</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">// inspired by http://csharphelper.com/blog/2014/12/find-the-tangent-lines-between-two-circles-in-c/</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#ac175d0754be043c64b52f09394e6f8f2">  457</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classQgsGeometryUtils.html#ac175d0754be043c64b52f09394e6f8f2">QgsGeometryUtils::circleCircleOuterTangents</a>( <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;center1, <span class="keywordtype">double</span> radius1, <span class="keyword">const</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;center2, <span class="keywordtype">double</span> radius2, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;line1P1, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;line1P2, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;line2P1, <a class="code" href="classQgsPointXY.html">QgsPointXY</a> &amp;line2P2 )</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> ( radius1 &gt; radius2 )</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#ac175d0754be043c64b52f09394e6f8f2">circleCircleOuterTangents</a>( center2, radius2, center1, radius1, line1P1, line1P2, line2P1, line2P2 );</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> radius2a = radius2 - radius1;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="classQgsGeometryUtils.html#ab57a8ffe2e0c40ffd0be9425072db5da">tangentPointAndCircle</a>( center2, radius2a, center1, line1P2, line2P2 ) )</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// there are no tangents</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// get the vector perpendicular to the</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// first tangent with length radius1</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <a class="code" href="classQgsVector.html">QgsVector</a> v1( -( line1P2.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() - center1.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() ), line1P2.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() - center1.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() );</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> v1Length = v1.<a class="code" href="classQgsVector.html#ae069e031d42ece48a235716e85791ae6">length</a>();</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  v1 = v1 * ( radius1 / v1Length );</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// offset the tangent vector&#39;s points</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  line1P1 = center1 + v1;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  line1P2 = line1P2 + v1;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// get the vector perpendicular to the</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="comment">// second tangent with length radius1</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="classQgsVector.html">QgsVector</a> v2( line2P2.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>() - center1.<a class="code" href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">y</a>(), -( line2P2.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() - center1.<a class="code" href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">x</a>() ) );</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> v2Length = v2.<a class="code" href="classQgsVector.html#ae069e031d42ece48a235716e85791ae6">length</a>();</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  v2 = v2 * ( radius1 / v2Length );</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="comment">// offset the tangent vector&#39;s points</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  line2P1 = center1 + v2;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  line2P2 = line2P2 + v2;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a3d7b691bba93e6637b181b601aff85d7">  492</a></span>&#160;QVector&lt;QgsGeometryUtils::SelfIntersection&gt; <a class="code" href="classQgsGeometryUtils.html#a3d7b691bba93e6637b181b601aff85d7">QgsGeometryUtils::selfIntersections</a>( <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a> *geom, <span class="keywordtype">int</span> part, <span class="keywordtype">int</span> ring, <span class="keywordtype">double</span> tolerance )</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  QVector&lt;SelfIntersection&gt; intersections;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordtype">int</span> n = geom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a234be132c5f849e44001a998e239fc3f">vertexCount</a>( part, ring );</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordtype">bool</span> isClosed = geom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">vertexAt</a>( <a class="code" href="structQgsVertexId.html">QgsVertexId</a>( part, ring, 0 ) ) == geom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">vertexAt</a>( <a class="code" href="structQgsVertexId.html">QgsVertexId</a>( part, ring, n - 1 ) );</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="comment">// Check every pair of segments for intersections</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0, j = 1; j &lt; n; i = j++ )</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> pi = geom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">vertexAt</a>( <a class="code" href="structQgsVertexId.html">QgsVertexId</a>( part, ring, i ) );</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> pj = geom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">vertexAt</a>( <a class="code" href="structQgsVertexId.html">QgsVertexId</a>( part, ring, j ) );</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classQgsGeometryUtils.html#a144dde0ca4aae2957f574013d1c46fee">QgsGeometryUtils::sqrDistance2D</a>( pi, pj ) &lt; tolerance * tolerance ) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// Don&#39;t test neighboring edges</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">int</span> start = j + 1;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">int</span> end = i == 0 &amp;&amp; isClosed ? n - 1 : n;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k = start, l = start + 1; l &lt; end; k = l++ )</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> pk = geom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">vertexAt</a>( <a class="code" href="structQgsVertexId.html">QgsVertexId</a>( part, ring, k ) );</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> pl = geom-&gt;<a class="code" href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">vertexAt</a>( <a class="code" href="structQgsVertexId.html">QgsVertexId</a>( part, ring, l ) );</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <a class="code" href="classQgsPoint.html">QgsPoint</a> inter;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordtype">bool</span> intersection = <span class="keyword">false</span>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">if</span> ( !<a class="code" href="classQgsGeometryUtils.html#a470d7ca2f6790424432d32145e553999">QgsGeometryUtils::segmentIntersection</a>( pi, pj, pk, pl, inter, intersection, tolerance ) ) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <a class="code" href="structQgsGeometryUtils_1_1SelfIntersection.html">SelfIntersection</a> s;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      s.<a class="code" href="structQgsGeometryUtils_1_1SelfIntersection.html#a7db0da87c5689dbace93aa8a1e481836">segment1</a> = i;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      s.<a class="code" href="structQgsGeometryUtils_1_1SelfIntersection.html#ac5b050f46e47e889576159eb1efc7f21">segment2</a> = k;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keywordflow">if</span> ( s.<a class="code" href="structQgsGeometryUtils_1_1SelfIntersection.html#a7db0da87c5689dbace93aa8a1e481836">segment1</a> &gt; s.<a class="code" href="structQgsGeometryUtils_1_1SelfIntersection.html#ac5b050f46e47e889576159eb1efc7f21">segment2</a> )</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        std::swap( s.<a class="code" href="structQgsGeometryUtils_1_1SelfIntersection.html#a7db0da87c5689dbace93aa8a1e481836">segment1</a>, s.<a class="code" href="structQgsGeometryUtils_1_1SelfIntersection.html#ac5b050f46e47e889576159eb1efc7f21">segment2</a> );</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      s.<a class="code" href="structQgsGeometryUtils_1_1SelfIntersection.html#ab3c38c8b997b597112cb0350ff4ba316">point</a> = inter;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      intersections.append( s );</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">return</span> intersections;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a13c58d52e2e34e9d5c61a2ee274256cf">  532</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classQgsGeometryUtils.html#a13c58d52e2e34e9d5c61a2ee274256cf">QgsGeometryUtils::leftOfLine</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2 )</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;{</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordtype">double</span> f1 = x - x1;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordtype">double</span> f2 = y2 - y1;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordtype">double</span> f3 = y - y1;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordtype">double</span> f4 = x2 - x1;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="keywordtype">double</span> test = ( f1 * f2 - f3 * f4 );</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// return -1, 0, or 1</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( test, 0.0 ) ? 0 : ( test &lt; 0 ? -1 : 1 );</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a22b89067f9fc24ace0776bfdcdb02d32">  543</a></span>&#160;<a class="code" href="classQgsPoint.html">QgsPoint</a> <a class="code" href="classQgsGeometryUtils.html#a22b89067f9fc24ace0776bfdcdb02d32">QgsGeometryUtils::pointOnLineWithDistance</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;startPoint, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;directionPoint, <span class="keywordtype">double</span> distance )</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;{</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordtype">double</span> dx = directionPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - startPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordtype">double</span> dy = directionPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - startPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">length</a> = std::sqrt( dx * dx + dy * dy );</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( length, 0.0 ) )</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">return</span> startPoint;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordtype">double</span> scaleFactor = distance / <a class="code" href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">length</a>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsPoint.html">QgsPoint</a>( startPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + dx * scaleFactor, startPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() + dy * scaleFactor );</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">  558</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">QgsGeometryUtils::ccwAngle</a>( <span class="keywordtype">double</span> dy, <span class="keywordtype">double</span> dx )</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> = std::atan2( dy, dx ) * 180 / M_PI;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keywordflow">if</span> ( angle &lt; 0 )</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">return</span> 360 + <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( angle &gt; 360 )</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">return</span> 360 - <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#af76638035bdd789ecf79a3e4dd64c28b">  572</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsGeometryUtils.html#af76638035bdd789ecf79a3e4dd64c28b">QgsGeometryUtils::circleCenterRadius</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt2, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt3, <span class="keywordtype">double</span> &amp;radius, <span class="keywordtype">double</span> &amp;centerX, <span class="keywordtype">double</span> &amp;centerY )</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordtype">double</span> dx21, dy21, dx31, dy31, h21, h31, d;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">//closed circle</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), pt3.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) &amp;&amp; <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), pt3.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) )</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    centerX = ( pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) / 2.0;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    centerY = ( pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() + pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) / 2.0;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    radius = std::sqrt( std::pow( centerX - pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), 2.0 ) + std::pow( centerY - pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), 2.0 ) );</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// Using Cartesian circumcenter eguations from page https://en.wikipedia.org/wiki/Circumscribed_circle</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  dx21 = pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  dy21 = pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  dx31 = pt3.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  dy31 = pt3.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  h21 = std::pow( dx21, 2.0 ) + std::pow( dy21, 2.0 );</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  h31 = std::pow( dx31, 2.0 ) + std::pow( dy31, 2.0 );</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// 2*Cross product, d&lt;0 means clockwise and d&gt;0 counterclockwise sweeping angle</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  d = 2 * ( dx21 * dy31 - dx31 * dy21 );</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// Check colinearity, Cross product = 0</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( std::fabs( d ), 0.0, 0.00000000001 ) )</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    radius = -1.0;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// Calculate centroid coordinates and radius</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  centerX = pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + ( h21 * dy31 - h31 * dy21 ) / d;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  centerY = pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - ( h21 * dx31 - h31 * dx21 ) / d;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  radius = std::sqrt( std::pow( centerX - pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), 2.0 ) + std::pow( centerY - pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), 2.0 ) );</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a4a8616d9e6a701b7a050eee9882575f0">  610</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a4a8616d9e6a701b7a050eee9882575f0">QgsGeometryUtils::circleClockwise</a>( <span class="keywordtype">double</span> angle1, <span class="keywordtype">double</span> angle2, <span class="keywordtype">double</span> angle3 )</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">if</span> ( angle3 &gt;= angle1 )</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">return</span> !( angle2 &gt; angle1 &amp;&amp; angle2 &lt; angle3 );</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">return</span> !( angle2 &gt; angle1 || angle2 &lt; angle3 );</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#ab0e4af53b00b02365ba1884fe346fd6a">  622</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#ab0e4af53b00b02365ba1884fe346fd6a">QgsGeometryUtils::circleAngleBetween</a>( <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>, <span class="keywordtype">double</span> angle1, <span class="keywordtype">double</span> angle2, <span class="keywordtype">bool</span> clockwise )</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">if</span> ( clockwise )</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> ( angle2 &lt; angle1 )</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <span class="keywordflow">return</span> ( angle &lt;= angle1 &amp;&amp; angle &gt;= angle2 );</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">return</span> ( angle &lt;= angle1 || angle &gt;= angle2 );</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> ( angle2 &gt; angle1 )</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keywordflow">return</span> ( angle &gt;= angle1 &amp;&amp; angle &lt;= angle2 );</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">return</span> ( angle &gt;= angle1 || angle &lt;= angle2 );</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a3830ad4ee3d544c852e7439c34b279ed">  648</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a3830ad4ee3d544c852e7439c34b279ed">QgsGeometryUtils::angleOnCircle</a>( <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>, <span class="keywordtype">double</span> angle1, <span class="keywordtype">double</span> angle2, <span class="keywordtype">double</span> angle3 )</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;{</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordtype">bool</span> clockwise = <a class="code" href="classQgsGeometryUtils.html#a4a8616d9e6a701b7a050eee9882575f0">circleClockwise</a>( angle1, angle2, angle3 );</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#ab0e4af53b00b02365ba1884fe346fd6a">circleAngleBetween</a>( angle, angle1, angle3, clockwise );</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a5d4030841d90e62d97faaa6001f2ce47">  654</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a5d4030841d90e62d97faaa6001f2ce47">QgsGeometryUtils::circleLength</a>( <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2, <span class="keywordtype">double</span> x3, <span class="keywordtype">double</span> y3 )</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordtype">double</span> centerX, centerY, radius;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <a class="code" href="classQgsGeometryUtils.html#af76638035bdd789ecf79a3e4dd64c28b">circleCenterRadius</a>( <a class="code" href="classQgsPoint.html">QgsPoint</a>( x1, y1 ), <a class="code" href="classQgsPoint.html">QgsPoint</a>( x2, y2 ), <a class="code" href="classQgsPoint.html">QgsPoint</a>( x3, y3 ), radius, centerX, centerY );</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">length</a> = M_PI / 180.0 * radius * <a class="code" href="classQgsGeometryUtils.html#a4e467f58b82e16d7d106e64ec5507d41">sweepAngle</a>( centerX, centerY, x1, y1, x2, y2, x3, y3 );</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">if</span> ( length &lt; 0 )</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    length = -<a class="code" href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">length</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">length</a>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a4e467f58b82e16d7d106e64ec5507d41">  666</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a4e467f58b82e16d7d106e64ec5507d41">QgsGeometryUtils::sweepAngle</a>( <span class="keywordtype">double</span> centerX, <span class="keywordtype">double</span> centerY, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2, <span class="keywordtype">double</span> x3, <span class="keywordtype">double</span> y3 )</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;{</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordtype">double</span> p1Angle = <a class="code" href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">QgsGeometryUtils::ccwAngle</a>( y1 - centerY, x1 - centerX );</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordtype">double</span> p2Angle = <a class="code" href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">QgsGeometryUtils::ccwAngle</a>( y2 - centerY, x2 - centerX );</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordtype">double</span> p3Angle = <a class="code" href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">QgsGeometryUtils::ccwAngle</a>( y3 - centerY, x3 - centerX );</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">if</span> ( p3Angle &gt;= p1Angle )</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span> ( p2Angle &gt; p1Angle &amp;&amp; p2Angle &lt; p3Angle )</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">return</span> ( p3Angle - p1Angle );</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">return</span> ( - ( p1Angle + ( 360 - p3Angle ) ) );</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> ( p2Angle &lt; p1Angle &amp;&amp; p2Angle &gt; p3Angle )</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">return</span> ( -( p1Angle - p3Angle ) );</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">return</span> ( p3Angle + ( 360 - p1Angle ) );</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a3e594a769fa61050f23701028592d20f">  696</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a3e594a769fa61050f23701028592d20f">QgsGeometryUtils::segmentMidPoint</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p2, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;result, <span class="keywordtype">double</span> radius, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;mousePos )</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> midPoint( ( p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + p2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) / 2.0, ( p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() + p2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) / 2.0 );</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordtype">double</span> midDist = std::sqrt( <a class="code" href="classQgsGeometryUtils.html#a144dde0ca4aae2957f574013d1c46fee">sqrDistance2D</a>( p1, midPoint ) );</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">if</span> ( radius &lt; midDist )</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordtype">double</span> centerMidDist = std::sqrt( radius * radius - midDist * midDist );</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordtype">double</span> dist = radius - centerMidDist;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordtype">double</span> midDx = midPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordtype">double</span> midDy = midPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">//get the four possible midpoints</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  QVector&lt;QgsPoint&gt; possibleMidPoints;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  possibleMidPoints.append( <a class="code" href="classQgsGeometryUtils.html#a22b89067f9fc24ace0776bfdcdb02d32">pointOnLineWithDistance</a>( midPoint, <a class="code" href="classQgsPoint.html">QgsPoint</a>( midPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - midDy, midPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() + midDx ), dist ) );</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  possibleMidPoints.append( <a class="code" href="classQgsGeometryUtils.html#a22b89067f9fc24ace0776bfdcdb02d32">pointOnLineWithDistance</a>( midPoint, <a class="code" href="classQgsPoint.html">QgsPoint</a>( midPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - midDy, midPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() + midDx ), 2 * radius - dist ) );</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  possibleMidPoints.append( <a class="code" href="classQgsGeometryUtils.html#a22b89067f9fc24ace0776bfdcdb02d32">pointOnLineWithDistance</a>( midPoint, <a class="code" href="classQgsPoint.html">QgsPoint</a>( midPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + midDy, midPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - midDx ), dist ) );</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  possibleMidPoints.append( <a class="code" href="classQgsGeometryUtils.html#a22b89067f9fc24ace0776bfdcdb02d32">pointOnLineWithDistance</a>( midPoint, <a class="code" href="classQgsPoint.html">QgsPoint</a>( midPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + midDy, midPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - midDx ), 2 * radius - dist ) );</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="comment">//take the closest one</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordtype">double</span> minDist = std::numeric_limits&lt;double&gt;::max();</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordtype">int</span> minDistIndex = -1;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; possibleMidPoints.size(); ++i )</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordtype">double</span> currentDist = <a class="code" href="classQgsGeometryUtils.html#a144dde0ca4aae2957f574013d1c46fee">sqrDistance2D</a>( mousePos, possibleMidPoints.at( i ) );</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">if</span> ( currentDist &lt; minDist )</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      minDistIndex = i;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      minDist = currentDist;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">if</span> ( minDistIndex == -1 )</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  result = possibleMidPoints.at( minDistIndex );</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// add z support if necessary</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classQgsGeometryUtils.html#a629b530ec92320ac21c8b3c3ecc7374d">QgsGeometryUtils::setZValueFromPoints</a>( <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a>() &lt;&lt; p1 &lt;&lt; p2, result );</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#aefc107e7fb672b96cda84bdf264a6803">  743</a></span>&#160;<a class="code" href="classQgsPoint.html">QgsPoint</a> <a class="code" href="classQgsGeometryUtils.html#aefc107e7fb672b96cda84bdf264a6803">QgsGeometryUtils::segmentMidPointFromCenter</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p2, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;center, <span class="keyword">const</span> <span class="keywordtype">bool</span> useShortestArc )</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;{</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordtype">double</span> midPointAngle = <a class="code" href="classQgsGeometryUtils.html#af38ff91a0c328424a2bc058ceb027ee8">averageAngle</a>( <a class="code" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">lineAngle</a>( center.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), center.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ),</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                                       <a class="code" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">lineAngle</a>( center.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), center.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), p2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) );</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">if</span> ( !useShortestArc )</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    midPointAngle += M_PI;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">return</span> center.<a class="code" href="classQgsPoint.html#ae5b591ac604024fdb873e4ca4a209e1f">project</a>( center.<a class="code" href="classQgsPoint.html#ac7a87dbf3c7517d335222b8e2fc8fdba">distance</a>( p1 ), midPointAngle * 180 / M_PI );</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a1a561c0c6fc83213e04d481e11513366">  752</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a1a561c0c6fc83213e04d481e11513366">QgsGeometryUtils::circleTangentDirection</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;tangentPoint, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;cp1,</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;cp2, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;cp3 )</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;{</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">//calculate circle midpoint</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordtype">double</span> mX, mY, radius;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <a class="code" href="classQgsGeometryUtils.html#af76638035bdd789ecf79a3e4dd64c28b">circleCenterRadius</a>( cp1, cp2, cp3, radius, mX, mY );</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordtype">double</span> p1Angle = <a class="code" href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">QgsGeometryUtils::ccwAngle</a>( cp1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mY, cp1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mX );</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordtype">double</span> p2Angle = <a class="code" href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">QgsGeometryUtils::ccwAngle</a>( cp2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mY, cp2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mX );</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordtype">double</span> p3Angle = <a class="code" href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">QgsGeometryUtils::ccwAngle</a>( cp3.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - mY, cp3.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - mX );</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> = 0;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classQgsGeometryUtils.html#a4a8616d9e6a701b7a050eee9882575f0">circleClockwise</a>( p1Angle, p2Angle, p3Angle ) )</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    angle = <a class="code" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">lineAngle</a>( tangentPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), tangentPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), mX, mY ) - M_PI_2;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    angle = <a class="code" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">lineAngle</a>( mX, mY, tangentPoint.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), tangentPoint.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) - M_PI_2;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> ( angle &lt; 0 )</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    angle += 2 * M_PI;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#acd1fde5712c49daae3e148a7fad90409">  776</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsGeometryUtils.html#acd1fde5712c49daae3e148a7fad90409">QgsGeometryUtils::segmentizeArc</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p2, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p3, <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> &amp;points, <span class="keywordtype">double</span> tolerance, <a class="code" href="classQgsAbstractGeometry.html#a0ad4bdf6c9a37daa3be14cb41fc38d96">QgsAbstractGeometry::SegmentationToleranceType</a> toleranceType, <span class="keywordtype">bool</span> hasZ, <span class="keywordtype">bool</span> hasM )</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;{</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordtype">bool</span> reversed = <span class="keyword">false</span>;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordtype">int</span> segSide = <a class="code" href="classQgsGeometryUtils.html#a64471f7abd516f4ff9608fdcdd5d0105">segmentSide</a>( p1, p3, p2 );</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> circlePoint1;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> circlePoint2 = p2;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> circlePoint3;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> ( segSide == -1 )</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment">// Reverse !</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    circlePoint1 = p3;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    circlePoint3 = p1;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    reversed = <span class="keyword">true</span>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  }</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    circlePoint1 = p1;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    circlePoint3 = p3;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">//adapted code from PostGIS</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordtype">double</span> radius = 0;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordtype">double</span> centerX = 0;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordtype">double</span> centerY = 0;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <a class="code" href="classQgsGeometryUtils.html#af76638035bdd789ecf79a3e4dd64c28b">circleCenterRadius</a>( circlePoint1, circlePoint2, circlePoint3, radius, centerX, centerY );</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">if</span> ( circlePoint1 != circlePoint3 &amp;&amp; ( radius &lt; 0 || <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( segSide, 0.0 ) ) ) <span class="comment">//points are colinear</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    points.append( p1 );</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    points.append( p2 );</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    points.append( p3 );</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordtype">double</span> increment = tolerance; <span class="comment">//one segment per degree</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordflow">if</span> ( toleranceType == <a class="code" href="classQgsAbstractGeometry.html#a0ad4bdf6c9a37daa3be14cb41fc38d96a366917a4d314a51392c2e04686aad8d2">QgsAbstractGeometry::MaximumDifference</a> )</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordtype">double</span> halfAngle = std::acos( -tolerance / radius + 1 );</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    increment = 2 * halfAngle;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">//angles of pt1, pt2, pt3</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordtype">double</span> a1 = std::atan2( circlePoint1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - centerY, circlePoint1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - centerX );</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordtype">double</span> a2 = std::atan2( circlePoint2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - centerY, circlePoint2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - centerX );</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordtype">double</span> a3 = std::atan2( circlePoint3.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - centerY, circlePoint3.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - centerX );</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// Make segmentation symmetric</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> symmetric = <span class="keyword">true</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">if</span> ( symmetric )</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> = a3 - a1;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> ( angle &lt; 0 ) angle += M_PI * 2;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="comment">/* Number of segments in output */</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordtype">int</span> segs = ceil( angle / increment );</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="comment">/* Tweak increment to be regular for all the arc */</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    increment = angle / segs;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">/* Adjust a3 up so we can increment from a1 to a3 cleanly */</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">if</span> ( a3 &lt; a1 )</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    a3 += 2.0 * M_PI;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> ( a2 &lt; a1 )</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    a2 += 2.0 * M_PI;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordtype">double</span> x, y;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordtype">double</span> z = 0;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordtype">double</span> m = 0;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  QVector&lt;QgsPoint&gt; stringPoints;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  stringPoints.insert( 0, circlePoint1 );</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">if</span> ( circlePoint2 != circlePoint3 &amp;&amp; circlePoint1 != circlePoint2 ) <span class="comment">//draw straight line segment if two points have the same position</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11">QgsWkbTypes::Type</a> pointWkbType = <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a28b2733de642d6d326fcf0f91b52ce9e">QgsWkbTypes::Point</a>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> ( hasZ )</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      pointWkbType = <a class="code" href="classQgsWkbTypes.html#ad9273a12c511e00949293a0f5b212763">QgsWkbTypes::addZ</a>( pointWkbType );</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">if</span> ( hasM )</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      pointWkbType = <a class="code" href="classQgsWkbTypes.html#a2ca1e4874d2d0c31898ee96f2dd88939">QgsWkbTypes::addM</a>( pointWkbType );</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// As we&#39;re adding the last point in any case, we&#39;ll avoid</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">// including a point which is at less than 1% increment distance</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="comment">// from it (may happen to find them due to numbers approximation).</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="comment">// NOTE that this effectively allows in output some segments which</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="comment">//      are more distant than requested. This is at most 1% off</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="comment">//      from requested MaxAngle and less for MaxError.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordtype">double</span> tolError = increment / 100;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordtype">double</span> stopAngle = a3 - tolError;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> = a1 + increment; <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> &lt; stopAngle; <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> += increment )</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      x = centerX + radius * std::cos( <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> );</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      y = centerY + radius * std::sin( <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> );</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keywordflow">if</span> ( hasZ )</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        z = <a class="code" href="classQgsGeometryUtils.html#a2af83f4149ee076e6e6de01ab08017a9">interpolateArcValue</a>( <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>, a1, a2, a3, circlePoint1.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>(), circlePoint2.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>(), circlePoint3.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() );</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">if</span> ( hasM )</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        m = <a class="code" href="classQgsGeometryUtils.html#a2af83f4149ee076e6e6de01ab08017a9">interpolateArcValue</a>( <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>, a1, a2, a3, circlePoint1.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>(), circlePoint2.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>(), circlePoint3.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>() );</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      stringPoints.insert( stringPoints.size(), <a class="code" href="classQgsPoint.html">QgsPoint</a>( pointWkbType, x, y, z, m ) );</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  }</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  stringPoints.insert( stringPoints.size(), circlePoint3 );</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">// TODO: check if or implement QgsPointSequence directly taking an iterator to append</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="keywordflow">if</span> ( reversed )</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    std::reverse( stringPoints.begin(), stringPoints.end() );</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> ( ! points.empty() &amp;&amp; stringPoints.front() == points.back() ) stringPoints.pop_front();</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  points.append( stringPoints );</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;}</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a64471f7abd516f4ff9608fdcdd5d0105">  893</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classQgsGeometryUtils.html#a64471f7abd516f4ff9608fdcdd5d0105">QgsGeometryUtils::segmentSide</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt3, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt2 )</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;{</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordtype">double</span> side = ( ( pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) * ( pt3.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) - ( pt3.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) * ( pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) );</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">if</span> ( side == 0.0 )</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> ( side &lt; 0 )</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    }</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> ( side &gt; 0 )</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a2af83f4149ee076e6e6de01ab08017a9">  914</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a2af83f4149ee076e6e6de01ab08017a9">QgsGeometryUtils::interpolateArcValue</a>( <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>, <span class="keywordtype">double</span> a1, <span class="keywordtype">double</span> a2, <span class="keywordtype">double</span> a3, <span class="keywordtype">double</span> zm1, <span class="keywordtype">double</span> zm2, <span class="keywordtype">double</span> zm3 )</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;{</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="comment">/* Counter-clockwise sweep */</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keywordflow">if</span> ( a1 &lt; a2 )</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">if</span> ( angle &lt;= a2 )</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="keywordflow">return</span> zm1 + ( zm2 - zm1 ) * ( angle - a1 ) / ( a2 - a1 );</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <span class="keywordflow">return</span> zm2 + ( zm3 - zm2 ) * ( angle - a2 ) / ( a3 - a2 );</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">/* Clockwise sweep */</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  {</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span> ( angle &gt;= a2 )</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keywordflow">return</span> zm1 + ( zm2 - zm1 ) * ( a1 - angle ) / ( a1 - a2 );</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">return</span> zm2 + ( zm3 - zm2 ) * ( a2 - angle ) / ( a2 - a3 );</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;}</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#ac9635bdbebe1ce52b755d2928ae7053b">  934</a></span>&#160;<a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> <a class="code" href="classQgsGeometryUtils.html#ac9635bdbebe1ce52b755d2928ae7053b">QgsGeometryUtils::pointsFromWKT</a>( <span class="keyword">const</span> QString &amp;wktCoordinateList, <span class="keywordtype">bool</span> <a class="code" href="classQgsAbstractGeometry.html#a414275940aae6a3a8a7f0adeeefcfdee">is3D</a>, <span class="keywordtype">bool</span> <a class="code" href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">isMeasure</a> )</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;{</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordtype">int</span> dim = 2 + is3D + <a class="code" href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">isMeasure</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> points;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keyword">const</span> QStringList coordList = wktCoordinateList.split( <span class="charliteral">&#39;,&#39;</span>, QString::SkipEmptyParts );</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="comment">//first scan through for extra unexpected dimensions</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordtype">bool</span> foundZ = <span class="keyword">false</span>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="keywordtype">bool</span> foundM = <span class="keyword">false</span>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  QRegularExpression rx( QStringLiteral( <span class="stringliteral">&quot;\\s&quot;</span> ) );</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> QString &amp;pointCoordinates : coordList )</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    QStringList coordinates = pointCoordinates.split( rx, QString::SkipEmptyParts );</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">if</span> ( coordinates.size() == 3 &amp;&amp; !foundZ &amp;&amp; !foundM &amp;&amp; !is3D &amp;&amp; !<a class="code" href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">isMeasure</a> )</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="comment">// 3 dimensional coordinates, but not specifically marked as such. We allow this</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="comment">// anyway and upgrade geometry to have Z dimension</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      foundZ = <span class="keyword">true</span>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( coordinates.size() &gt;= 4 &amp;&amp; ( !( is3D || foundZ ) || !( isMeasure || foundM ) ) )</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      <span class="comment">// 4 (or more) dimensional coordinates, but not specifically marked as such. We allow this</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="comment">// anyway and upgrade geometry to have Z&amp;M dimensions</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      foundZ = <span class="keyword">true</span>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      foundM = <span class="keyword">true</span>;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    }</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> QString &amp;pointCoordinates : coordList )</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    QStringList coordinates = pointCoordinates.split( rx, QString::SkipEmptyParts );</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">if</span> ( coordinates.size() &lt; dim )</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordtype">int</span> idx = 0;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordtype">double</span> x = coordinates[idx++].toDouble();</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordtype">double</span> y = coordinates[idx++].toDouble();</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordtype">double</span> z = 0;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">if</span> ( ( is3D || foundZ ) &amp;&amp; coordinates.length() &gt; idx )</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      z = coordinates[idx++].toDouble();</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordtype">double</span> m = 0;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span> ( ( isMeasure || foundM ) &amp;&amp; coordinates.length() &gt; idx )</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      m = coordinates[idx++].toDouble();</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11">QgsWkbTypes::Type</a> t = <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a28b2733de642d6d326fcf0f91b52ce9e">QgsWkbTypes::Point</a>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> ( is3D || foundZ )</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="keywordflow">if</span> ( isMeasure || foundM )</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        t = <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11af451e9e8aeada4ee3f0847ea6abdf861">QgsWkbTypes::PointZM</a>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        t = <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a53c800ce9bc3507d2eabd6ed1e1f7c29">QgsWkbTypes::PointZ</a>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">if</span> ( isMeasure || foundM )</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        t = <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a9051ba2136de707a2c82d2a5a73e54ba">QgsWkbTypes::PointM</a>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        t = <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a28b2733de642d6d326fcf0f91b52ce9e">QgsWkbTypes::Point</a>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    points.append( <a class="code" href="classQgsPoint.html">QgsPoint</a>( t, x, y, z, m ) );</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">return</span> points;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a3964b6cc15536a0df0280b833a5ec1fa"> 1002</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsGeometryUtils.html#a3964b6cc15536a0df0280b833a5ec1fa">QgsGeometryUtils::pointsToWKB</a>( <a class="code" href="classQgsWkbPtr.html">QgsWkbPtr</a> &amp;wkb, <span class="keyword">const</span> <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> &amp;points, <span class="keywordtype">bool</span> <a class="code" href="classQgsAbstractGeometry.html#a414275940aae6a3a8a7f0adeeefcfdee">is3D</a>, <span class="keywordtype">bool</span> <a class="code" href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">isMeasure</a> )</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;{</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  wkb &lt;&lt; static_cast&lt;quint32&gt;( points.size() );</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;point : points )</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    wkb &lt;&lt; point.x() &lt;&lt; point.y();</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> ( is3D )</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      wkb &lt;&lt; point.z();</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span> ( isMeasure )</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      wkb &lt;&lt; point.m();</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  }</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;}</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#aee5c8ee3cd87f06d4ab3f02e2b9afe5e"> 1019</a></span>&#160;QString <a class="code" href="classQgsGeometryUtils.html#aee5c8ee3cd87f06d4ab3f02e2b9afe5e">QgsGeometryUtils::pointsToWKT</a>( <span class="keyword">const</span> <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> &amp;points, <span class="keywordtype">int</span> precision, <span class="keywordtype">bool</span> <a class="code" href="classQgsAbstractGeometry.html#a414275940aae6a3a8a7f0adeeefcfdee">is3D</a>, <span class="keywordtype">bool</span> <a class="code" href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">isMeasure</a> )</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;{</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  QString wkt = QStringLiteral( <span class="stringliteral">&quot;(&quot;</span> );</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p : points )</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    wkt += <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.x(), precision );</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    wkt += <span class="charliteral">&#39; &#39;</span> + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.y(), precision );</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> ( is3D )</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      wkt += <span class="charliteral">&#39; &#39;</span> + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.z(), precision );</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">if</span> ( isMeasure )</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      wkt += <span class="charliteral">&#39; &#39;</span> + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.m(), precision );</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    wkt += QLatin1String( <span class="stringliteral">&quot;, &quot;</span> );</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordflow">if</span> ( wkt.endsWith( QLatin1String( <span class="stringliteral">&quot;, &quot;</span> ) ) )</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    wkt.chop( 2 ); <span class="comment">// Remove last &quot;, &quot;</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  wkt += <span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keywordflow">return</span> wkt;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;}</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a6ce1f0cd40ebbb41cfb868bac3b6fa37"> 1038</a></span>&#160;QDomElement <a class="code" href="classQgsGeometryUtils.html#a6ce1f0cd40ebbb41cfb868bac3b6fa37">QgsGeometryUtils::pointsToGML2</a>( <span class="keyword">const</span> <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> &amp;points, QDomDocument &amp;doc, <span class="keywordtype">int</span> precision, <span class="keyword">const</span> QString &amp;ns, <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html#a429cf06290bd0bdb2134a30c16d4d2a7">QgsAbstractGeometry::AxisOrder</a> &amp;axisOrder )</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;{</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  QDomElement elemCoordinates = doc.createElementNS( ns, QStringLiteral( <span class="stringliteral">&quot;coordinates&quot;</span> ) );</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// coordinate separator</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  QString cs = QStringLiteral( <span class="stringliteral">&quot;,&quot;</span> );</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// tupel separator</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  QString ts = QStringLiteral( <span class="stringliteral">&quot; &quot;</span> );</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  elemCoordinates.setAttribute( QStringLiteral( <span class="stringliteral">&quot;cs&quot;</span> ), cs );</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  elemCoordinates.setAttribute( QStringLiteral( <span class="stringliteral">&quot;ts&quot;</span> ), ts );</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  QString strCoordinates;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p : points )</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> ( axisOrder == QgsAbstractGeometry::AxisOrder::XY )</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      strCoordinates += <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.x(), precision ) + cs + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.y(), precision ) + ts;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      strCoordinates += <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.y(), precision ) + cs + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.x(), precision ) + ts;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keywordflow">if</span> ( strCoordinates.endsWith( ts ) )</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    strCoordinates.chop( 1 ); <span class="comment">// Remove trailing space</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  elemCoordinates.appendChild( doc.createTextNode( strCoordinates ) );</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">return</span> elemCoordinates;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;}</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a04a21154737a5f1d03cf916838d18158"> 1065</a></span>&#160;QDomElement <a class="code" href="classQgsGeometryUtils.html#a04a21154737a5f1d03cf916838d18158">QgsGeometryUtils::pointsToGML3</a>( <span class="keyword">const</span> <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> &amp;points, QDomDocument &amp;doc, <span class="keywordtype">int</span> precision, <span class="keyword">const</span> QString &amp;ns, <span class="keywordtype">bool</span> <a class="code" href="classQgsAbstractGeometry.html#a414275940aae6a3a8a7f0adeeefcfdee">is3D</a>, <span class="keyword">const</span> <a class="code" href="classQgsAbstractGeometry.html#a429cf06290bd0bdb2134a30c16d4d2a7">QgsAbstractGeometry::AxisOrder</a> &amp;axisOrder )</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;{</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  QDomElement elemPosList = doc.createElementNS( ns, QStringLiteral( <span class="stringliteral">&quot;posList&quot;</span> ) );</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  elemPosList.setAttribute( QStringLiteral( <span class="stringliteral">&quot;srsDimension&quot;</span> ), is3D ? 3 : 2 );</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  QString strCoordinates;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p : points )</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">if</span> ( axisOrder == QgsAbstractGeometry::AxisOrder::XY )</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      strCoordinates += <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.x(), precision ) + <span class="charliteral">&#39; &#39;</span> + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.y(), precision ) + <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      strCoordinates += <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.y(), precision ) + <span class="charliteral">&#39; &#39;</span> + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.x(), precision ) + <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">if</span> ( is3D )</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      strCoordinates += <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.z(), precision ) + <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  }</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span> ( strCoordinates.endsWith( <span class="charliteral">&#39; &#39;</span> ) )</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    strCoordinates.chop( 1 ); <span class="comment">// Remove trailing space</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  elemPosList.appendChild( doc.createTextNode( strCoordinates ) );</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keywordflow">return</span> elemPosList;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a07240ad18cc55657f2dd1c3c0625f935"> 1087</a></span>&#160;QString <a class="code" href="classQgsGeometryUtils.html#a07240ad18cc55657f2dd1c3c0625f935">QgsGeometryUtils::pointsToJSON</a>( <span class="keyword">const</span> <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> &amp;points, <span class="keywordtype">int</span> precision )</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;{</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  QString json = QStringLiteral( <span class="stringliteral">&quot;[ &quot;</span> );</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p : points )</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    json += <span class="charliteral">&#39;[&#39;</span> + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.x(), precision ) + <span class="stringliteral">&quot;, &quot;</span> + <a class="code" href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a>( p.y(), precision ) + <span class="stringliteral">&quot;], &quot;</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordflow">if</span> ( json.endsWith( QLatin1String( <span class="stringliteral">&quot;, &quot;</span> ) ) )</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    json.chop( 2 ); <span class="comment">// Remove last &quot;, &quot;</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  json += <span class="charliteral">&#39;]&#39;</span>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordflow">return</span> json;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;}</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9"> 1102</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9">QgsGeometryUtils::normalizedAngle</a>( <span class="keywordtype">double</span> <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a> )</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;{</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordtype">double</span> clippedAngle = <a class="code" href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">angle</a>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">if</span> ( clippedAngle &gt;= M_PI * 2 || clippedAngle &lt;= -2 * M_PI )</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    clippedAngle = std::fmod( clippedAngle, 2 * M_PI );</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordflow">if</span> ( clippedAngle &lt; 0.0 )</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    clippedAngle += 2 * M_PI;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  }</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">return</span> clippedAngle;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;}</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a004420650407f52fc2337ef539d2b05a"> 1116</a></span>&#160;QPair&lt;QgsWkbTypes::Type, QString&gt; <a class="code" href="classQgsGeometryUtils.html#a004420650407f52fc2337ef539d2b05a">QgsGeometryUtils::wktReadBlock</a>( <span class="keyword">const</span> QString &amp;wkt )</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;{</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11">QgsWkbTypes::Type</a> <a class="code" href="classQgsAbstractGeometry.html#a8b8706728c90bc5c0e9c3ea3925b4453">wkbType</a> = <a class="code" href="classQgsWkbTypes.html#a493206d2135d8dd371e104e5c4cbe76a">QgsWkbTypes::parseType</a>( wkt );</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  QRegularExpression cooRegEx( QStringLiteral( <span class="stringliteral">&quot;^[^\\(]*\\((.*)\\)[^\\)]*$&quot;</span> ) );</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  cooRegEx.setPatternOptions( QRegularExpression::DotMatchesEverythingOption );</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  QRegularExpressionMatch match = cooRegEx.match( wkt );</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  QString contents = match.hasMatch() ? match.captured( 1 ) : QString();</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keywordflow">return</span> qMakePair( wkbType, contents );</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;}</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a504ac13c428f8ab1563e9da67a0a592c"> 1127</a></span>&#160;QStringList <a class="code" href="classQgsGeometryUtils.html#a504ac13c428f8ab1563e9da67a0a592c">QgsGeometryUtils::wktGetChildBlocks</a>( <span class="keyword">const</span> QString &amp;wkt, <span class="keyword">const</span> QString &amp;defaultType )</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;{</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordtype">int</span> level = 0;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  QString block;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  QStringList blocks;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0, n = wkt.length(); i &lt; n; ++i )</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> ( ( wkt[i].isSpace() || wkt[i] == <span class="charliteral">&#39;\n&#39;</span> || wkt[i] == <span class="charliteral">&#39;\t&#39;</span> ) &amp;&amp; level == 0 )</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">if</span> ( wkt[i] == <span class="charliteral">&#39;,&#39;</span> &amp;&amp; level == 0 )</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="keywordflow">if</span> ( !block.isEmpty() )</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <span class="keywordflow">if</span> ( block.startsWith( <span class="charliteral">&#39;(&#39;</span> ) &amp;&amp; !defaultType.isEmpty() )</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;          block.prepend( defaultType + <span class="charliteral">&#39; &#39;</span> );</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        blocks.append( block );</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      block.clear();</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    }</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">if</span> ( wkt[i] == <span class="charliteral">&#39;(&#39;</span> )</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      ++level;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( wkt[i] == <span class="charliteral">&#39;)&#39;</span> )</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      --level;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    block += wkt[i];</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keywordflow">if</span> ( !block.isEmpty() )</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> ( block.startsWith( <span class="charliteral">&#39;(&#39;</span> ) &amp;&amp; !defaultType.isEmpty() )</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      block.prepend( defaultType + <span class="charliteral">&#39; &#39;</span> );</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    blocks.append( block );</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordflow">return</span> blocks;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;}</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a9106a89b89d754332b067bbcf0a6aa0f"> 1163</a></span>&#160;<a class="code" href="classQgsPoint.html">QgsPoint</a> <a class="code" href="classQgsGeometryUtils.html#a9106a89b89d754332b067bbcf0a6aa0f">QgsGeometryUtils::midpoint</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt2 )</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;{</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11">QgsWkbTypes::Type</a> pType( <a class="code" href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a28b2733de642d6d326fcf0f91b52ce9e">QgsWkbTypes::Point</a> );</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordtype">double</span> x = ( pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) / 2.0;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keywordtype">double</span> y = ( pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() + pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) / 2.0;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordtype">double</span> z = std::numeric_limits&lt;double&gt;::quiet_NaN();</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keywordtype">double</span> m = std::numeric_limits&lt;double&gt;::quiet_NaN();</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">if</span> ( pt1.<a class="code" href="classQgsAbstractGeometry.html#a414275940aae6a3a8a7f0adeeefcfdee">is3D</a>() || pt2.<a class="code" href="classQgsAbstractGeometry.html#a414275940aae6a3a8a7f0adeeefcfdee">is3D</a>() )</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  {</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    pType = <a class="code" href="classQgsWkbTypes.html#ad9273a12c511e00949293a0f5b212763">QgsWkbTypes::addZ</a>( pType );</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    z = ( pt1.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() + pt2.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() ) / 2.0;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  }</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordflow">if</span> ( pt1.<a class="code" href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">isMeasure</a>() || pt2.<a class="code" href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">isMeasure</a>() )</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    pType = <a class="code" href="classQgsWkbTypes.html#a2ca1e4874d2d0c31898ee96f2dd88939">QgsWkbTypes::addM</a>( pType );</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    m = ( pt1.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>() + pt2.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>() ) / 2.0;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  }</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsPoint.html">QgsPoint</a>( pType, x, y, z, m );</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;}</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div><div class="line"><a name="l01188"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#ac4a0719a14b58c8194411bed45836da3"> 1188</a></span>&#160;<a class="code" href="classQgsPoint.html">QgsPoint</a> <a class="code" href="classQgsGeometryUtils.html#a14d201050669ccc6c5e3c9c835c9292f">QgsGeometryUtils::interpolatePointOnLine</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p2, <span class="keyword">const</span> <span class="keywordtype">double</span> fraction )</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;{</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> _fraction = 1 - fraction;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsPoint.html">QgsPoint</a>( p1.<a class="code" href="classQgsAbstractGeometry.html#a8b8706728c90bc5c0e9c3ea3925b4453">wkbType</a>(),</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                   p1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() * _fraction + p2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() * fraction,</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                   p1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() * _fraction + p2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() * fraction,</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                   p1.<a class="code" href="classQgsAbstractGeometry.html#a414275940aae6a3a8a7f0adeeefcfdee">is3D</a>() ? p1.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() * _fraction + p2.<a class="code" href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">z</a>() * fraction : std::numeric_limits&lt;double&gt;::quiet_NaN(),</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                   p1.<a class="code" href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">isMeasure</a>() ? p1.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>() * _fraction + p2.<a class="code" href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">m</a>() * fraction : std::numeric_limits&lt;double&gt;::quiet_NaN() );</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;}</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a14d201050669ccc6c5e3c9c835c9292f"> 1198</a></span>&#160;<a class="code" href="classQgsPointXY.html">QgsPointXY</a> <a class="code" href="classQgsGeometryUtils.html#a14d201050669ccc6c5e3c9c835c9292f">QgsGeometryUtils::interpolatePointOnLine</a>( <span class="keyword">const</span> <span class="keywordtype">double</span> x1, <span class="keyword">const</span> <span class="keywordtype">double</span> y1, <span class="keyword">const</span> <span class="keywordtype">double</span> x2, <span class="keyword">const</span> <span class="keywordtype">double</span> y2, <span class="keyword">const</span> <span class="keywordtype">double</span> fraction )</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;{</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> deltaX = ( x2 - x1 ) * fraction;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> deltaY = ( y2 - y1 ) * fraction;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a>( x1 + deltaX, y1 + deltaY );</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a41ecee21ba106861e168a3b594cd6bb1"> 1205</a></span>&#160;<a class="code" href="classQgsPointXY.html">QgsPointXY</a> <a class="code" href="classQgsGeometryUtils.html#a41ecee21ba106861e168a3b594cd6bb1">QgsGeometryUtils::interpolatePointOnLineByValue</a>( <span class="keyword">const</span> <span class="keywordtype">double</span> x1, <span class="keyword">const</span> <span class="keywordtype">double</span> y1, <span class="keyword">const</span> <span class="keywordtype">double</span> v1, <span class="keyword">const</span> <span class="keywordtype">double</span> x2, <span class="keyword">const</span> <span class="keywordtype">double</span> y2, <span class="keyword">const</span> <span class="keywordtype">double</span> v2, <span class="keyword">const</span> <span class="keywordtype">double</span> value )</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;{</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( v1, v2 ) )</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classQgsPointXY.html">QgsPointXY</a>( x1, y1 );</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> fraction = ( value - v1 ) / ( v2 - v1 );</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#a14d201050669ccc6c5e3c9c835c9292f">interpolatePointOnLine</a>( x1, y1, x2, y2, fraction );</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;}</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a2665fb5f1da1ac0d3f91fdc226d70f18"> 1214</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a2665fb5f1da1ac0d3f91fdc226d70f18">QgsGeometryUtils::gradient</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt2 )</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;{</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordtype">double</span> delta_x = pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordtype">double</span> delta_y = pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( delta_x, 0.0 ) )</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  {</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">return</span> INFINITY;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="keywordflow">return</span> delta_y / delta_x;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;}</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a87fb039bff7972b8cd86ce938c1c1fd7"> 1226</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsGeometryUtils.html#a87fb039bff7972b8cd86ce938c1c1fd7">QgsGeometryUtils::coefficients</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt2, <span class="keywordtype">double</span> &amp;a, <span class="keywordtype">double</span> &amp;b, <span class="keywordtype">double</span> &amp;<a class="code" href="porting__processing_8dox.html#ac34f8cede000dff1f5b0b47d22fa9070">c</a> )</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;{</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) )</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    a = 1;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    b = 0;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    c = -pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() ) )</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    a = 0;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    b = 1;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    c = -pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    a = pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>();</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    b = pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() - pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    c = pt1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() * pt2.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - pt1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() * pt2.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>();</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;}</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a61134ca2bbdc99e4c8518a980ae801e3"> 1249</a></span>&#160;<a class="code" href="classQgsLineString.html">QgsLineString</a> <a class="code" href="classQgsGeometryUtils.html#a61134ca2bbdc99e4c8518a980ae801e3">QgsGeometryUtils::perpendicularSegment</a>( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;p, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;s1, <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;s2 )</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;{</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <a class="code" href="classQgsLineString.html">QgsLineString</a> line;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <a class="code" href="classQgsPoint.html">QgsPoint</a> p2;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordflow">if</span> ( ( p == s1 ) || ( p == s2 ) )</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">return</span> line;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  }</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keywordtype">double</span> a, b, <a class="code" href="porting__processing_8dox.html#ac34f8cede000dff1f5b0b47d22fa9070">c</a>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="classQgsGeometryUtils.html#a87fb039bff7972b8cd86ce938c1c1fd7">coefficients</a>( s1, s2, a, b, c );</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( a, 0 ) )</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    p2 = <a class="code" href="classQgsPoint.html">QgsPoint</a>( p.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), s1.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() );</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  }</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( b, 0 ) )</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    p2 = <a class="code" href="classQgsPoint.html">QgsPoint</a>( s1.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), p.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() );</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordtype">double</span> y = ( -c - a * p.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() ) / b;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordtype">double</span> m = <a class="code" href="classQgsGeometryUtils.html#a2665fb5f1da1ac0d3f91fdc226d70f18">gradient</a>( s1, s2 );</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordtype">double</span> d2 = 1 + m * m;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordtype">double</span> H = p.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>() - y;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordtype">double</span> dx = m * H / d2;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordtype">double</span> dy = m * dx;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    p2 = <a class="code" href="classQgsPoint.html">QgsPoint</a>( p.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>() + dx, y + dy );</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  line.<a class="code" href="classQgsLineString.html#acc649e8d3737ff8aca805a36de870929">addVertex</a>( p );</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  line.<a class="code" href="classQgsLineString.html#acc649e8d3737ff8aca805a36de870929">addVertex</a>( p2 );</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="keywordflow">return</span> line;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;}</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b"> 1287</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">QgsGeometryUtils::lineAngle</a>( <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2 )</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;{</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keywordtype">double</span> at = std::atan2( y2 - y1, x2 - x1 );</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordtype">double</span> a = -at + M_PI_2;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9">normalizedAngle</a>( a );</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;}</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#ab19886e042dd8b70558b4a137666122b"> 1294</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#ab19886e042dd8b70558b4a137666122b">QgsGeometryUtils::angleBetweenThreePoints</a>( <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2, <span class="keywordtype">double</span> x3, <span class="keywordtype">double</span> y3 )</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;{</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordtype">double</span> angle1 = std::atan2( y1 - y2, x1 - x2 );</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="keywordtype">double</span> angle2 = std::atan2( y3 - y2, x3 - x2 );</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9">normalizedAngle</a>( angle1 - angle2 );</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;}</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a898e1dd6d90612e36bcb4090566fceaf"> 1301</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#a898e1dd6d90612e36bcb4090566fceaf">QgsGeometryUtils::linePerpendicularAngle</a>( <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2 )</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;{</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordtype">double</span> a = <a class="code" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">lineAngle</a>( x1, y1, x2, y2 );</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  a += M_PI_2;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9">normalizedAngle</a>( a );</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="line"><a name="l01308"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#af38ff91a0c328424a2bc058ceb027ee8"> 1308</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#af38ff91a0c328424a2bc058ceb027ee8">QgsGeometryUtils::averageAngle</a>( <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2, <span class="keywordtype">double</span> x3, <span class="keywordtype">double</span> y3 )</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;{</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">// calc average angle between the previous and next point</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordtype">double</span> a1 = <a class="code" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">lineAngle</a>( x1, y1, x2, y2 );</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordtype">double</span> a2 = <a class="code" href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">lineAngle</a>( x2, y2, x3, y3 );</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#af38ff91a0c328424a2bc058ceb027ee8">averageAngle</a>( a1, a2 );</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a44d439ae9a9b7e78e3385d831c4921e1"> 1316</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#af38ff91a0c328424a2bc058ceb027ee8">QgsGeometryUtils::averageAngle</a>( <span class="keywordtype">double</span> a1, <span class="keywordtype">double</span> a2 )</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;{</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  a1 = <a class="code" href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9">normalizedAngle</a>( a1 );</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  a2 = <a class="code" href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9">normalizedAngle</a>( a2 );</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordtype">double</span> clockwiseDiff = 0.0;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="keywordflow">if</span> ( a2 &gt;= a1 )</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    clockwiseDiff = a2 - a1;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  }</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    clockwiseDiff = a2 + ( 2 * M_PI - a1 );</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  }</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="keywordtype">double</span> counterClockwiseDiff = 2 * M_PI - clockwiseDiff;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="keywordtype">double</span> resultAngle = 0;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">if</span> ( clockwiseDiff &lt;= counterClockwiseDiff )</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    resultAngle = a1 + clockwiseDiff / 2.0;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  {</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    resultAngle = a1 - counterClockwiseDiff / 2.0;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9">normalizedAngle</a>( resultAngle );</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#ac61ea6321323405cbe982fa28259171c"> 1343</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classQgsGeometryUtils.html#ac61ea6321323405cbe982fa28259171c">QgsGeometryUtils::skewLinesDistance</a>( <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;P1, <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;P12,</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;P2, <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;P22 )</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;{</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> u1 = P12 - P1;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> u2 = P22 - P2;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> u3 = <a class="code" href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a>( u1, u2 );</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keywordflow">if</span> ( u3.<a class="code" href="classQgsVector3D.html#ae81a794d3bd8434469fb31ae365f8c06">length</a>() == 0 ) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  u3.<a class="code" href="classQgsVector3D.html#aaa5d8b6db2381a505eae70e9a0f60b38">normalize</a>();</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> dir = P1 - P2;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">return</span> std::fabs( ( <a class="code" href="classQgsVector3D.html#a7a1123f05c6c4e209651e5e9ea937e02">QgsVector3D::dotProduct</a>( dir, u3 ) ) ); <span class="comment">// u3 is already normalized</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;}</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#aeb3be402938d206cce4e2dac9307fe31"> 1355</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#aeb3be402938d206cce4e2dac9307fe31">QgsGeometryUtils::skewLinesProjection</a>( <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;P1, <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;P12,</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;P2, <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;P22,</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;X1, <span class="keywordtype">double</span> epsilon )</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;{</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> d = P2 - P1;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> u1 = P12 - P1;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  u1.<a class="code" href="classQgsVector3D.html#aaa5d8b6db2381a505eae70e9a0f60b38">normalize</a>();</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> u2 = P22 - P2;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  u2.<a class="code" href="classQgsVector3D.html#aaa5d8b6db2381a505eae70e9a0f60b38">normalize</a>();</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> u3 = <a class="code" href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a>( u1, u2 );</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="keywordflow">if</span> ( std::fabs( u3.<a class="code" href="classQgsVector3D.html#a7b42b1f4219553982cd61a54683010e7">x</a>() ) &lt;= epsilon &amp;&amp;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;       std::fabs( u3.<a class="code" href="classQgsVector3D.html#a253665002bc4e353628927fa773b4aac">y</a>() ) &lt;= epsilon &amp;&amp;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;       std::fabs( u3.<a class="code" href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">z</a>() ) &lt;= epsilon )</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  {</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="comment">// The rays are almost parallel.</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  }</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="comment">// X1 and X2 are the closest points on lines</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">// we want to find X1 (lies on u1)</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// solving the linear equation in r1 and r2: Xi = Pi + ri*ui</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// we are only interested in X1 so we only solve for r1.</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordtype">float</span> a1 = <a class="code" href="classQgsVector3D.html#a7a1123f05c6c4e209651e5e9ea937e02">QgsVector3D::dotProduct</a>( u1, u1 ), b1 = <a class="code" href="classQgsVector3D.html#a7a1123f05c6c4e209651e5e9ea937e02">QgsVector3D::dotProduct</a>( u1, u2 ), c1 = <a class="code" href="classQgsVector3D.html#a7a1123f05c6c4e209651e5e9ea937e02">QgsVector3D::dotProduct</a>( u1, d );</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="keywordtype">float</span> a2 = <a class="code" href="classQgsVector3D.html#a7a1123f05c6c4e209651e5e9ea937e02">QgsVector3D::dotProduct</a>( u1, u2 ), b2 = <a class="code" href="classQgsVector3D.html#a7a1123f05c6c4e209651e5e9ea937e02">QgsVector3D::dotProduct</a>( u2, u2 ), c2 = <a class="code" href="classQgsVector3D.html#a7a1123f05c6c4e209651e5e9ea937e02">QgsVector3D::dotProduct</a>( u2, d );</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keywordflow">if</span> ( !( std::fabs( b1 ) &gt; epsilon ) )</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="comment">// Denominator is close to zero.</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  }</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keywordflow">if</span> ( !( a2 != -1 &amp;&amp; a2 != 1 ) )</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  {</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="comment">// Lines are parallel</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  }</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordtype">double</span> r1 = ( c2 - b2 * c1 / b1 ) / ( a2 - b2 * a1 / b1 );</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  X1 = P1 + u1 * r1;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a055483cc861bce8b843a0efd570a28d3"> 1397</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a055483cc861bce8b843a0efd570a28d3">QgsGeometryUtils::linesIntersection3D</a>( <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;La1, <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;La2,</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;Lb1, <span class="keyword">const</span> <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;Lb2,</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> &amp;intersection )</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;{</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// if all Vector are on the same plane (have the same Z), use the 2D intersection</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="comment">// else return a false result</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( La1.<a class="code" href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">z</a>(), La2.<a class="code" href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">z</a>() ) &amp;&amp; <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( La1.<a class="code" href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">z</a>(), Lb1.<a class="code" href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">z</a>() ) &amp;&amp; <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( La1.<a class="code" href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">z</a>(), Lb2.<a class="code" href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">z</a>() ) )</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="classQgsPoint.html">QgsPoint</a> ptInter;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordtype">bool</span> isIntersection;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="classQgsGeometryUtils.html#a470d7ca2f6790424432d32145e553999">segmentIntersection</a>( <a class="code" href="classQgsPoint.html">QgsPoint</a>( La1.<a class="code" href="classQgsVector3D.html#a7b42b1f4219553982cd61a54683010e7">x</a>(), La1.<a class="code" href="classQgsVector3D.html#a253665002bc4e353628927fa773b4aac">y</a>() ),</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                         <a class="code" href="classQgsPoint.html">QgsPoint</a>( La2.<a class="code" href="classQgsVector3D.html#a7b42b1f4219553982cd61a54683010e7">x</a>(), La2.<a class="code" href="classQgsVector3D.html#a253665002bc4e353628927fa773b4aac">y</a>() ),</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                         <a class="code" href="classQgsPoint.html">QgsPoint</a>( Lb1.<a class="code" href="classQgsVector3D.html#a7b42b1f4219553982cd61a54683010e7">x</a>(), Lb1.<a class="code" href="classQgsVector3D.html#a253665002bc4e353628927fa773b4aac">y</a>() ),</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                         <a class="code" href="classQgsPoint.html">QgsPoint</a>( Lb2.<a class="code" href="classQgsVector3D.html#a7b42b1f4219553982cd61a54683010e7">x</a>(), Lb2.<a class="code" href="classQgsVector3D.html#a253665002bc4e353628927fa773b4aac">y</a>() ),</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                         ptInter,</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                         isIntersection,</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                         1e-8,</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                         <span class="keyword">true</span> );</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    intersection.<a class="code" href="classQgsVector3D.html#ad7e4f6281f56ae0f49b8fe8718f88125">set</a>( ptInter.<a class="code" href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">x</a>(), ptInter.<a class="code" href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">y</a>(), La1.<a class="code" href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">z</a>() );</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  }</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="comment">// first check if lines have an exact intersection point</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// do it by checking if the shortest distance is exactly 0</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keywordtype">float</span> distance = <a class="code" href="classQgsGeometryUtils.html#ac61ea6321323405cbe982fa28259171c">skewLinesDistance</a>( La1, La2, Lb1, Lb2 );</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( distance, 0.0 ) )</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  {</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">// 3d lines have exact intersection point.</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> C = La2;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> D = Lb2;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> e = La1 - La2;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> f = Lb1 - Lb2;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> g = D - C;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( ( <a class="code" href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a>( f, g ) ).<a class="code" href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">length</a>(), 0.0 ) || <a class="code" href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a>( ( <a class="code" href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a>( f, e ) ).<a class="code" href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">length</a>(), 0.0 ) )</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    {</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="comment">// Lines have no intersection, are they parallel?</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> fgn = <a class="code" href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a>( f, g );</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    fgn.<a class="code" href="classQgsVector3D.html#aaa5d8b6db2381a505eae70e9a0f60b38">normalize</a>();</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="classQgsVector3D.html">QgsVector3D</a> fen = <a class="code" href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a>( f, e );</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    fen.<a class="code" href="classQgsVector3D.html#aaa5d8b6db2381a505eae70e9a0f60b38">normalize</a>();</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordtype">int</span> di = -1;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">if</span> ( fgn == fen ) <span class="comment">// same direction?</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      di *= -1;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    intersection = C + e * di * ( <a class="code" href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a>( f, g ).<a class="code" href="classQgsVector3D.html#ae81a794d3bd8434469fb31ae365f8c06">length</a>() / <a class="code" href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a>( f, e ).<a class="code" href="classQgsVector3D.html#ae81a794d3bd8434469fb31ae365f8c06">length</a>() );</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">// try to calculate the approximate intersection point</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <a class="code" href="classQgsVector3D.html">QgsVector3D</a> X1, X2;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="keywordtype">bool</span> firstIsDone = <a class="code" href="classQgsGeometryUtils.html#aeb3be402938d206cce4e2dac9307fe31">skewLinesProjection</a>( La1, La2, Lb1, Lb2, X1 );</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keywordtype">bool</span> secondIsDone = <a class="code" href="classQgsGeometryUtils.html#aeb3be402938d206cce4e2dac9307fe31">skewLinesProjection</a>( Lb1, Lb2, La1, La2, X2 );</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="keywordflow">if</span> ( !firstIsDone || !secondIsDone )</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  {</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="comment">// Could not obtain projection point.</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  }</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  intersection = ( X1 + X2 ) / 2.0;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;}</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"><a class="line" href="classQgsGeometryUtils.html#a629b530ec92320ac21c8b3c3ecc7374d"> 1466</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsGeometryUtils.html#a629b530ec92320ac21c8b3c3ecc7374d">QgsGeometryUtils::setZValueFromPoints</a>( <span class="keyword">const</span> <a class="code" href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a> &amp;points, <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;point )</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;{</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="keywordtype">bool</span> rc = <span class="keyword">false</span>;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="keywordflow">for</span> ( <span class="keyword">const</span> <a class="code" href="classQgsPoint.html">QgsPoint</a> &amp;pt : points )</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  {</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">if</span> ( pt.is3D() )</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    {</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      point.<a class="code" href="classQgsPoint.html#a5675e2867176a1c48cde703ab2d9ba57">convertTo</a>( <a class="code" href="classQgsWkbTypes.html#ad9273a12c511e00949293a0f5b212763">QgsWkbTypes::addZ</a>( point.<a class="code" href="classQgsAbstractGeometry.html#a8b8706728c90bc5c0e9c3ea3925b4453">wkbType</a>() ) );</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      point.<a class="code" href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">setZ</a>( pt.z() );</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      rc = <span class="keyword">true</span>;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  }</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;}</div><div class="ttc" id="classQgsAbstractGeometry_html_a244df46423e297f76e6f8f0cbc39db6d"><div class="ttname"><a href="classQgsAbstractGeometry.html#a244df46423e297f76e6f8f0cbc39db6d">QgsAbstractGeometry::isMeasure</a></div><div class="ttdeci">bool isMeasure() const</div><div class="ttdoc">Returns true if the geometry contains m values. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00193">qgsabstractgeometry.h:193</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a0ad4bdf6c9a37daa3be14cb41fc38d96a366917a4d314a51392c2e04686aad8d2"><div class="ttname"><a href="classQgsAbstractGeometry.html#a0ad4bdf6c9a37daa3be14cb41fc38d96a366917a4d314a51392c2e04686aad8d2">QgsAbstractGeometry::MaximumDifference</a></div><div class="ttdoc">Maximum distance between an arbitrary point on the original curve and closest point on its approximat...</div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00105">qgsabstractgeometry.h:105</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a7bfe096677b3d7e91e697f077795ab10"><div class="ttname"><a href="classQgsGeometryUtils.html#a7bfe096677b3d7e91e697f077795ab10">QgsGeometryUtils::lineCircleIntersection</a></div><div class="ttdeci">static bool lineCircleIntersection(const QgsPointXY &amp;center, double radius, const QgsPointXY &amp;linePoint1, const QgsPointXY &amp;linePoint2, QgsPointXY &amp;intersection)</div><div class="ttdoc">Compute the intersection of a line and a circle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00317">qgsgeometryutils.cpp:317</a></div></div>
<div class="ttc" id="classQgsVector3D_html"><div class="ttname"><a href="classQgsVector3D.html">QgsVector3D</a></div><div class="ttdoc">3 Class for storage of 3D vectors similar to QVector3D, with the difference that it uses double preci...</div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00029">qgsvector3d.h:29</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_ac61ea6321323405cbe982fa28259171c"><div class="ttname"><a href="classQgsGeometryUtils.html#ac61ea6321323405cbe982fa28259171c">QgsGeometryUtils::skewLinesDistance</a></div><div class="ttdeci">static double skewLinesDistance(const QgsVector3D &amp;P1, const QgsVector3D &amp;P12, const QgsVector3D &amp;P2, const QgsVector3D &amp;P22)</div><div class="ttdoc">An algorithm to calculate the shortest distance between two skew lines. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01343">qgsgeometryutils.cpp:1343</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a07240ad18cc55657f2dd1c3c0625f935"><div class="ttname"><a href="classQgsGeometryUtils.html#a07240ad18cc55657f2dd1c3c0625f935">QgsGeometryUtils::pointsToJSON</a></div><div class="ttdeci">static QString pointsToJSON(const QgsPointSequence &amp;points, int precision)</div><div class="ttdoc">Returns a geoJSON coordinates string. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01087">qgsgeometryutils.cpp:1087</a></div></div>
<div class="ttc" id="classQgsPointXY_html_a9c127bd5c55c3c987fe6e4a8b895927b"><div class="ttname"><a href="classQgsPointXY.html#a9c127bd5c55c3c987fe6e4a8b895927b">QgsPointXY::set</a></div><div class="ttdeci">void set(double x, double y)</div><div class="ttdoc">Sets the x and y value of the point. </div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00119">qgspointxy.h:119</a></div></div>
<div class="ttc" id="structQgsGeometryUtils_1_1SelfIntersection_html_ac5b050f46e47e889576159eb1efc7f21"><div class="ttname"><a href="structQgsGeometryUtils_1_1SelfIntersection.html#ac5b050f46e47e889576159eb1efc7f21">QgsGeometryUtils::SelfIntersection::segment2</a></div><div class="ttdeci">int segment2</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8h_source.html#l00224">qgsgeometryutils.h:224</a></div></div>
<div class="ttc" id="classQgsPoint_html_ae7c99caa3ae034dc4521fe4a09a907ea"><div class="ttname"><a href="classQgsPoint.html#ae7c99caa3ae034dc4521fe4a09a907ea">QgsPoint::y</a></div><div class="ttdeci">double y</div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00042">qgspoint.h:42</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_ab0e4af53b00b02365ba1884fe346fd6a"><div class="ttname"><a href="classQgsGeometryUtils.html#ab0e4af53b00b02365ba1884fe346fd6a">QgsGeometryUtils::circleAngleBetween</a></div><div class="ttdeci">static bool circleAngleBetween(double angle, double angle1, double angle2, bool clockwise)</div><div class="ttdoc">Returns true if, in a circle, angle is between angle1 and angle2. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00622">qgsgeometryutils.cpp:622</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a2af83f4149ee076e6e6de01ab08017a9"><div class="ttname"><a href="classQgsGeometryUtils.html#a2af83f4149ee076e6e6de01ab08017a9">QgsGeometryUtils::interpolateArcValue</a></div><div class="ttdeci">static double interpolateArcValue(double angle, double a1, double a2, double a3, double zm1, double zm2, double zm3)</div><div class="ttdoc">Interpolate a value at given angle on circular arc given values (zm1, zm2, zm3) at three different an...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00914">qgsgeometryutils.cpp:914</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_ac133dc939c3a11150c181ee19e48c25d"><div class="ttname"><a href="classQgsGeometryUtils.html#ac133dc939c3a11150c181ee19e48c25d">QgsGeometryUtils::ccwAngle</a></div><div class="ttdeci">static double ccwAngle(double dy, double dx)</div><div class="ttdoc">Returns the counter clockwise angle between a line with components dx, dy and the line with dx &gt; 0 an...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00558">qgsgeometryutils.cpp:558</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a4eb7af49a21c2d18bc12416ddbc37fba"><div class="ttname"><a href="classQgsGeometryUtils.html#a4eb7af49a21c2d18bc12416ddbc37fba">QgsGeometryUtils::verticesAtDistance</a></div><div class="ttdeci">static bool verticesAtDistance(const QgsAbstractGeometry &amp;geometry, double distance, QgsVertexId &amp;previousVertex, QgsVertexId &amp;nextVertex)</div><div class="ttdoc">Retrieves the vertices which are before and after the interpolated point at a specified distance alon...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00149">qgsgeometryutils.cpp:149</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a470d7ca2f6790424432d32145e553999"><div class="ttname"><a href="classQgsGeometryUtils.html#a470d7ca2f6790424432d32145e553999">QgsGeometryUtils::segmentIntersection</a></div><div class="ttdeci">static bool segmentIntersection(const QgsPoint &amp;p1, const QgsPoint &amp;p2, const QgsPoint &amp;q1, const QgsPoint &amp;q2, QgsPoint &amp;intersectionPoint, bool &amp;isIntersection, double tolerance=1e-8, bool acceptImproperIntersection=false)</div><div class="ttdoc">Compute the intersection between two segments. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00257">qgsgeometryutils.cpp:257</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a3d7b691bba93e6637b181b601aff85d7"><div class="ttname"><a href="classQgsGeometryUtils.html#a3d7b691bba93e6637b181b601aff85d7">QgsGeometryUtils::selfIntersections</a></div><div class="ttdeci">static QVector&lt; SelfIntersection &gt; selfIntersections(const QgsAbstractGeometry *geom, int part, int ring, double tolerance)</div><div class="ttdoc">Find self intersections in a polyline. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00492">qgsgeometryutils.cpp:492</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a64471f7abd516f4ff9608fdcdd5d0105"><div class="ttname"><a href="classQgsGeometryUtils.html#a64471f7abd516f4ff9608fdcdd5d0105">QgsGeometryUtils::segmentSide</a></div><div class="ttdeci">static int segmentSide(const QgsPoint &amp;pt1, const QgsPoint &amp;pt3, const QgsPoint &amp;pt2)</div><div class="ttdoc">For line defined by points pt1 and pt3, find out on which side of the line is point pt3...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00893">qgsgeometryutils.cpp:893</a></div></div>
<div class="ttc" id="classQgsPoint_html_a31a943ac0ab4256bc6a0012e370effb4"><div class="ttname"><a href="classQgsPoint.html#a31a943ac0ab4256bc6a0012e370effb4">QgsPoint::addZValue</a></div><div class="ttdeci">bool addZValue(double zValue=0) override</div><div class="ttdoc">Adds a z-dimension to the geometry, initialized to a preset value. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8cpp_source.html#l00469">qgspoint.cpp:469</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a80338278314402db75aee233de2c010b"><div class="ttname"><a href="classQgsGeometryUtils.html#a80338278314402db75aee233de2c010b">QgsGeometryUtils::lineAngle</a></div><div class="ttdeci">static double lineAngle(double x1, double y1, double x2, double y2)</div><div class="ttdoc">Calculates the direction of line joining two points in radians, clockwise from the north direction...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01287">qgsgeometryutils.cpp:1287</a></div></div>
<div class="ttc" id="structQgsVertexId_html_a103a806ea38b111017a9fa30ec93d60e"><div class="ttname"><a href="structQgsVertexId.html#a103a806ea38b111017a9fa30ec93d60e">QgsVertexId::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Returns true if the vertex id is valid. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00750">qgsabstractgeometry.h:750</a></div></div>
<div class="ttc" id="classQgsPoint_html_acf221ee34a130f9e7f24476401f29d4e"><div class="ttname"><a href="classQgsPoint.html#acf221ee34a130f9e7f24476401f29d4e">QgsPoint::setZ</a></div><div class="ttdeci">void setZ(double z)</div><div class="ttdoc">Sets the point&amp;#39;s z-coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00237">qgspoint.h:237</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a004420650407f52fc2337ef539d2b05a"><div class="ttname"><a href="classQgsGeometryUtils.html#a004420650407f52fc2337ef539d2b05a">QgsGeometryUtils::wktReadBlock</a></div><div class="ttdeci">static QPair&lt; QgsWkbTypes::Type, QString &gt; wktReadBlock(const QString &amp;wkt)</div><div class="ttdoc">Parses a WKT block of the format &quot;TYPE( contents )&quot; and returns a pair of geometry type to contents (...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01116">qgsgeometryutils.cpp:1116</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_af38ff91a0c328424a2bc058ceb027ee8"><div class="ttname"><a href="classQgsGeometryUtils.html#af38ff91a0c328424a2bc058ceb027ee8">QgsGeometryUtils::averageAngle</a></div><div class="ttdeci">static double averageAngle(double x1, double y1, double x2, double y2, double x3, double y3)</div><div class="ttdoc">Calculates the average angle (in radians) between the two linear segments from (x1, y1) to (x2, y2) and (x2, y2) to (x3, y3). </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01308">qgsgeometryutils.cpp:1308</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_ab19886e042dd8b70558b4a137666122b"><div class="ttname"><a href="classQgsGeometryUtils.html#ab19886e042dd8b70558b4a137666122b">QgsGeometryUtils::angleBetweenThreePoints</a></div><div class="ttdeci">static double angleBetweenThreePoints(double x1, double y1, double x2, double y2, double x3, double y3)</div><div class="ttdoc">Calculates the angle between the lines AB and BC, where AB and BC described by points a...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01294">qgsgeometryutils.cpp:1294</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a6ce1f0cd40ebbb41cfb868bac3b6fa37"><div class="ttname"><a href="classQgsGeometryUtils.html#a6ce1f0cd40ebbb41cfb868bac3b6fa37">QgsGeometryUtils::pointsToGML2</a></div><div class="ttdeci">static QDomElement pointsToGML2(const QgsPointSequence &amp;points, QDomDocument &amp;doc, int precision, const QString &amp;ns, const QgsAbstractGeometry::AxisOrder &amp;axisOrder=QgsAbstractGeometry::AxisOrder::XY)</div><div class="ttdoc">Returns a gml::coordinates DOM element. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01038">qgsgeometryutils.cpp:1038</a></div></div>
<div class="ttc" id="classQgsPoint_html_ac7a87dbf3c7517d335222b8e2fc8fdba"><div class="ttname"><a href="classQgsPoint.html#ac7a87dbf3c7517d335222b8e2fc8fdba">QgsPoint::distance</a></div><div class="ttdeci">double distance(double x, double y) const</div><div class="ttdoc">Returns the distance between this point and a specified x, y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00276">qgspoint.h:276</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a2665fb5f1da1ac0d3f91fdc226d70f18"><div class="ttname"><a href="classQgsGeometryUtils.html#a2665fb5f1da1ac0d3f91fdc226d70f18">QgsGeometryUtils::gradient</a></div><div class="ttdeci">static double gradient(const QgsPoint &amp;pt1, const QgsPoint &amp;pt2)</div><div class="ttdoc">Returns the gradient of a line defined by points pt1 and pt2. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01214">qgsgeometryutils.cpp:1214</a></div></div>
<div class="ttc" id="classQgsVector3D_html_ae81a794d3bd8434469fb31ae365f8c06"><div class="ttname"><a href="classQgsVector3D.html#ae81a794d3bd8434469fb31ae365f8c06">QgsVector3D::length</a></div><div class="ttdeci">double length() const</div><div class="ttdoc">Returns the length of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00106">qgsvector3d.h:106</a></div></div>
<div class="ttc" id="classQgsPointXY_html_a9e9cb74ed22e845f91d5d7a5e8e3fa08"><div class="ttname"><a href="classQgsPointXY.html#a9e9cb74ed22e845f91d5d7a5e8e3fa08">QgsPointXY::y</a></div><div class="ttdeci">double y</div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00048">qgspointxy.h:48</a></div></div>
<div class="ttc" id="classQgsPointXY_html"><div class="ttname"><a href="classQgsPointXY.html">QgsPointXY</a></div><div class="ttdoc">A class to represent a 2D point. </div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00043">qgspointxy.h:43</a></div></div>
<div class="ttc" id="qgis_8h_html_a8f7c73b548b20ab548d5d064e8ed4f5c"><div class="ttname"><a href="qgis_8h.html#a8f7c73b548b20ab548d5d064e8ed4f5c">qgsDoubleNear</a></div><div class="ttdeci">bool qgsDoubleNear(double a, double b, double epsilon=4 *std::numeric_limits&lt; double &gt;::epsilon())</div><div class="ttdoc">Compare two doubles (but allow some difference) </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00251">qgis.h:251</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a70dff7aceefd4b16909f038e32aece11a28b2733de642d6d326fcf0f91b52ce9e"><div class="ttname"><a href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a28b2733de642d6d326fcf0f91b52ce9e">QgsWkbTypes::Point</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00070">qgswkbtypes.h:70</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_aefc107e7fb672b96cda84bdf264a6803"><div class="ttname"><a href="classQgsGeometryUtils.html#aefc107e7fb672b96cda84bdf264a6803">QgsGeometryUtils::segmentMidPointFromCenter</a></div><div class="ttdeci">static QgsPoint segmentMidPointFromCenter(const QgsPoint &amp;p1, const QgsPoint &amp;p2, const QgsPoint &amp;center, bool useShortestArc=true)</div><div class="ttdoc">Calculates the midpoint on the circle passing through p1 and p2, with the specified center coordinate...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00743">qgsgeometryutils.cpp:743</a></div></div>
<div class="ttc" id="classQgsCurvePolygon_html"><div class="ttname"><a href="classQgsCurvePolygon.html">QgsCurvePolygon</a></div><div class="ttdoc">Curve polygon geometry type. </div><div class="ttdef"><b>Definition:</b> <a href="qgscurvepolygon_8h_source.html#l00034">qgscurvepolygon.h:34</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a898e1dd6d90612e36bcb4090566fceaf"><div class="ttname"><a href="classQgsGeometryUtils.html#a898e1dd6d90612e36bcb4090566fceaf">QgsGeometryUtils::linePerpendicularAngle</a></div><div class="ttdeci">static double linePerpendicularAngle(double x1, double y1, double x2, double y2)</div><div class="ttdoc">Calculates the perpendicular angle to a line joining two points. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01301">qgsgeometryutils.cpp:1301</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a70dff7aceefd4b16909f038e32aece11a9051ba2136de707a2c82d2a5a73e54ba"><div class="ttname"><a href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a9051ba2136de707a2c82d2a5a73e54ba">QgsWkbTypes::PointM</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00097">qgswkbtypes.h:97</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a493206d2135d8dd371e104e5c4cbe76a"><div class="ttname"><a href="classQgsWkbTypes.html#a493206d2135d8dd371e104e5c4cbe76a">QgsWkbTypes::parseType</a></div><div class="ttdeci">static Type parseType(const QString &amp;wktStr)</div><div class="ttdoc">Attempts to extract the WKB type from a WKT string. </div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8cpp_source.html#l00104">qgswkbtypes.cpp:104</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a3e594a769fa61050f23701028592d20f"><div class="ttname"><a href="classQgsGeometryUtils.html#a3e594a769fa61050f23701028592d20f">QgsGeometryUtils::segmentMidPoint</a></div><div class="ttdeci">static bool segmentMidPoint(const QgsPoint &amp;p1, const QgsPoint &amp;p2, QgsPoint &amp;result, double radius, const QgsPoint &amp;mousePos)</div><div class="ttdoc">Calculates midpoint on circle passing through p1 and p2, closest to the given coordinate mousePos...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00696">qgsgeometryutils.cpp:696</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a5d4030841d90e62d97faaa6001f2ce47"><div class="ttname"><a href="classQgsGeometryUtils.html#a5d4030841d90e62d97faaa6001f2ce47">QgsGeometryUtils::circleLength</a></div><div class="ttdeci">static double circleLength(double x1, double y1, double x2, double y2, double x3, double y3)</div><div class="ttdoc">Length of a circular string segment defined by pt1, pt2, pt3. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00654">qgsgeometryutils.cpp:654</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a0ad4bdf6c9a37daa3be14cb41fc38d96"><div class="ttname"><a href="classQgsAbstractGeometry.html#a0ad4bdf6c9a37daa3be14cb41fc38d96">QgsAbstractGeometry::SegmentationToleranceType</a></div><div class="ttdeci">SegmentationToleranceType</div><div class="ttdoc">Segmentation tolerance as maximum angle or maximum difference between approximation and circle...</div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00094">qgsabstractgeometry.h:94</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_aa080c3faa7f3ec792ba1de170067edd1"><div class="ttname"><a href="classQgsGeometryUtils.html#aa080c3faa7f3ec792ba1de170067edd1">QgsGeometryUtils::closestVertex</a></div><div class="ttdeci">static QgsPoint closestVertex(const QgsAbstractGeometry &amp;geom, const QgsPoint &amp;pt, QgsVertexId &amp;id)</div><div class="ttdoc">Returns the closest vertex to a geometry for a specified point. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00066">qgsgeometryutils.cpp:66</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_af5ec97c5568c257e0284b733a1c86d82"><div class="ttname"><a href="classQgsAbstractGeometry.html#af5ec97c5568c257e0284b733a1c86d82">QgsAbstractGeometry::nextVertex</a></div><div class="ttdeci">virtual bool nextVertex(QgsVertexId &amp;id, QgsPoint &amp;vertex) const =0</div><div class="ttdoc">Returns next vertex id and coordinates. </div></div>
<div class="ttc" id="classQgsVector3D_html_a253665002bc4e353628927fa773b4aac"><div class="ttname"><a href="classQgsVector3D.html#a253665002bc4e353628927fa773b4aac">QgsVector3D::y</a></div><div class="ttdeci">double y() const</div><div class="ttdoc">Returns Y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00045">qgsvector3d.h:45</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a7d06b78c1092f48bd0391631c4d99a75"><div class="ttname"><a href="classQgsWkbTypes.html#a7d06b78c1092f48bd0391631c4d99a75">QgsWkbTypes::hasZ</a></div><div class="ttdeci">static bool hasZ(Type type)</div><div class="ttdoc">Tests whether a WKB type contains the z-dimension. </div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00768">qgswkbtypes.h:768</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_ac175d0754be043c64b52f09394e6f8f2"><div class="ttname"><a href="classQgsGeometryUtils.html#ac175d0754be043c64b52f09394e6f8f2">QgsGeometryUtils::circleCircleOuterTangents</a></div><div class="ttdeci">static int circleCircleOuterTangents(const QgsPointXY &amp;center1, double radius1, const QgsPointXY &amp;center2, double radius2, QgsPointXY &amp;line1P1, QgsPointXY &amp;line1P2, QgsPointXY &amp;line2P1, QgsPointXY &amp;line2P2)</div><div class="ttdoc">Calculates the outer tangent points for two circles, centered at center1 and center2 and with radii o...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00457">qgsgeometryutils.cpp:457</a></div></div>
<div class="ttc" id="namespaceMathUtils_html_a54d06f819763561d0b251e1b1151dfc4"><div class="ttname"><a href="namespaceMathUtils.html#a54d06f819763561d0b251e1b1151dfc4">MathUtils::angle</a></div><div class="ttdeci">double ANALYSIS_EXPORT angle(QgsPoint *p1, QgsPoint *p2, QgsPoint *p3, QgsPoint *p4)</div><div class="ttdoc">Calculates the angle between two segments (in 2 dimension, z-values are ignored) </div><div class="ttdef"><b>Definition:</b> <a href="MathUtils_8cpp_source.html#l00786">MathUtils.cpp:786</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a504ac13c428f8ab1563e9da67a0a592c"><div class="ttname"><a href="classQgsGeometryUtils.html#a504ac13c428f8ab1563e9da67a0a592c">QgsGeometryUtils::wktGetChildBlocks</a></div><div class="ttdeci">static QStringList wktGetChildBlocks(const QString &amp;wkt, const QString &amp;defaultType=QString())</div><div class="ttdoc">Parses a WKT string and returns of list of blocks contained in the WKT. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01127">qgsgeometryutils.cpp:1127</a></div></div>
<div class="ttc" id="structQgsVertexId_html_a087b27093477d27f29eb430af5f2d7da"><div class="ttname"><a href="structQgsVertexId.html#a087b27093477d27f29eb430af5f2d7da">QgsVertexId::vertex</a></div><div class="ttdeci">int vertex</div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00781">qgsabstractgeometry.h:781</a></div></div>
<div class="ttc" id="classQgsVector3D_html_ad7e4f6281f56ae0f49b8fe8718f88125"><div class="ttname"><a href="classQgsVector3D.html#ad7e4f6281f56ae0f49b8fe8718f88125">QgsVector3D::set</a></div><div class="ttdeci">void set(double x, double y, double z)</div><div class="ttdoc">Sets vector coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00050">qgsvector3d.h:50</a></div></div>
<div class="ttc" id="classQgsVector3D_html_a7a1123f05c6c4e209651e5e9ea937e02"><div class="ttname"><a href="classQgsVector3D.html#a7a1123f05c6c4e209651e5e9ea937e02">QgsVector3D::dotProduct</a></div><div class="ttdeci">static double dotProduct(const QgsVector3D &amp;v1, const QgsVector3D &amp;v2)</div><div class="ttdoc">Returns the dot product of two vectors. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00092">qgsvector3d.h:92</a></div></div>
<div class="ttc" id="classQgsVector3D_html_acefccda601360a7931c4241866369336"><div class="ttname"><a href="classQgsVector3D.html#acefccda601360a7931c4241866369336">QgsVector3D::crossProduct</a></div><div class="ttdeci">static QgsVector3D crossProduct(const QgsVector3D &amp;v1, const QgsVector3D &amp;v2)</div><div class="ttdoc">Returns the cross product of two vectors. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00098">qgsvector3d.h:98</a></div></div>
<div class="ttc" id="structQgsVertexId_html_a15b583fbfa250d2515c40681ca6c5df9"><div class="ttname"><a href="structQgsVertexId.html#a15b583fbfa250d2515c40681ca6c5df9">QgsVertexId::part</a></div><div class="ttdeci">int part</div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00779">qgsabstractgeometry.h:779</a></div></div>
<div class="ttc" id="classQgsVector3D_html_aaa5d8b6db2381a505eae70e9a0f60b38"><div class="ttname"><a href="classQgsVector3D.html#aaa5d8b6db2381a505eae70e9a0f60b38">QgsVector3D::normalize</a></div><div class="ttdeci">void normalize()</div><div class="ttdoc">Normalizes the current vector in place. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00112">qgsvector3d.h:112</a></div></div>
<div class="ttc" id="structQgsGeometryUtils_1_1SelfIntersection_html_a7db0da87c5689dbace93aa8a1e481836"><div class="ttname"><a href="structQgsGeometryUtils_1_1SelfIntersection.html#a7db0da87c5689dbace93aa8a1e481836">QgsGeometryUtils::SelfIntersection::segment1</a></div><div class="ttdeci">int segment1</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8h_source.html#l00223">qgsgeometryutils.h:223</a></div></div>
<div class="ttc" id="qgswkbptr_8h_html"><div class="ttname"><a href="qgswkbptr_8h.html">qgswkbptr.h</a></div></div>
<div class="ttc" id="classQgsPointXY_html_a2a65e8984c72a1b8d09efbf4d098ac58"><div class="ttname"><a href="classQgsPointXY.html#a2a65e8984c72a1b8d09efbf4d098ac58">QgsPointXY::sqrDist</a></div><div class="ttdeci">double sqrDist(double x, double y) const</div><div class="ttdoc">Returns the squared distance between this point a specified x, y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00169">qgspointxy.h:169</a></div></div>
<div class="ttc" id="porting__processing_8dox_html_ac34f8cede000dff1f5b0b47d22fa9070"><div class="ttname"><a href="porting__processing_8dox.html#ac34f8cede000dff1f5b0b47d22fa9070">c</a></div><div class="ttdeci">As part of the API refactoring and improvements which landed in the Processing API was substantially reworked from the x version This was done in order to allow much of the underlying Processing framework to be ported into c</div><div class="ttdef"><b>Definition:</b> <a href="porting__processing_8dox_source.html#l00001">porting_processing.dox:1</a></div></div>
<div class="ttc" id="qgscurvepolygon_8h_html"><div class="ttname"><a href="qgscurvepolygon_8h.html">qgscurvepolygon.h</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a92a705bc19d95e1d6c0fc1bc407ab783"><div class="ttname"><a href="classQgsAbstractGeometry.html#a92a705bc19d95e1d6c0fc1bc407ab783">QgsAbstractGeometry::length</a></div><div class="ttdeci">virtual double length() const</div><div class="ttdoc">Returns the length of the geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8cpp_source.html#l00130">qgsabstractgeometry.cpp:130</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a4a8616d9e6a701b7a050eee9882575f0"><div class="ttname"><a href="classQgsGeometryUtils.html#a4a8616d9e6a701b7a050eee9882575f0">QgsGeometryUtils::circleClockwise</a></div><div class="ttdeci">static bool circleClockwise(double angle1, double angle2, double angle3)</div><div class="ttdoc">Returns true if circle is ordered clockwise. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00610">qgsgeometryutils.cpp:610</a></div></div>
<div class="ttc" id="classQgsVector3D_html_a41d7d3a3cc0dc5f14c1c44fae2cd0df2"><div class="ttname"><a href="classQgsVector3D.html#a41d7d3a3cc0dc5f14c1c44fae2cd0df2">QgsVector3D::z</a></div><div class="ttdeci">double z() const</div><div class="ttdoc">Returns Z coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00047">qgsvector3d.h:47</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_aee5c8ee3cd87f06d4ab3f02e2b9afe5e"><div class="ttname"><a href="classQgsGeometryUtils.html#aee5c8ee3cd87f06d4ab3f02e2b9afe5e">QgsGeometryUtils::pointsToWKT</a></div><div class="ttdeci">static QString pointsToWKT(const QgsPointSequence &amp;points, int precision, bool is3D, bool isMeasure)</div><div class="ttdoc">Returns a WKT coordinate list. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01019">qgsgeometryutils.cpp:1019</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a70dff7aceefd4b16909f038e32aece11"><div class="ttname"><a href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11">QgsWkbTypes::Type</a></div><div class="ttdeci">Type</div><div class="ttdoc">The WKB type describes the number of dimensions a geometry has. </div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00067">qgswkbtypes.h:67</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_afb4026bdd44aec81bbbfb232b267f812"><div class="ttname"><a href="classQgsAbstractGeometry.html#afb4026bdd44aec81bbbfb232b267f812">QgsAbstractGeometry::closestSegment</a></div><div class="ttdeci">virtual double closestSegment(const QgsPoint &amp;pt, QgsPoint &amp;segmentPt, QgsVertexId &amp;vertexAfter, int *leftOf=nullptr, double epsilon=4 *std::numeric_limits&lt; double &gt;::epsilon()) const =0</div><div class="ttdoc">Searches for the closest segment of the geometry to a given point. </div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a629b530ec92320ac21c8b3c3ecc7374d"><div class="ttname"><a href="classQgsGeometryUtils.html#a629b530ec92320ac21c8b3c3ecc7374d">QgsGeometryUtils::setZValueFromPoints</a></div><div class="ttdeci">static bool setZValueFromPoints(const QgsPointSequence &amp;points, QgsPoint &amp;point)</div><div class="ttdoc">A Z dimension is added to point if one of the point in the list points is in 3D. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01466">qgsgeometryutils.cpp:1466</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_ae1afc6e953981f8929312ad6b558fe2d"><div class="ttname"><a href="classQgsAbstractGeometry.html#ae1afc6e953981f8929312ad6b558fe2d">QgsAbstractGeometry::segmentLength</a></div><div class="ttdeci">virtual double segmentLength(QgsVertexId startVertex) const =0</div><div class="ttdoc">Returns the length of the segment of the geometry which begins at startVertex. </div></div>
<div class="ttc" id="classQgsWkbTypes_html_a70dff7aceefd4b16909f038e32aece11a53c800ce9bc3507d2eabd6ed1e1f7c29"><div class="ttname"><a href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11a53c800ce9bc3507d2eabd6ed1e1f7c29">QgsWkbTypes::PointZ</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00084">qgswkbtypes.h:84</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a2ca1e4874d2d0c31898ee96f2dd88939"><div class="ttname"><a href="classQgsWkbTypes.html#a2ca1e4874d2d0c31898ee96f2dd88939">QgsWkbTypes::addM</a></div><div class="ttdeci">static Type addM(Type type)</div><div class="ttdoc">Adds the m dimension to a WKB type and returns the new type. </div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00889">qgswkbtypes.h:889</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_a70dff7aceefd4b16909f038e32aece11af451e9e8aeada4ee3f0847ea6abdf861"><div class="ttname"><a href="classQgsWkbTypes.html#a70dff7aceefd4b16909f038e32aece11af451e9e8aeada4ee3f0847ea6abdf861">QgsWkbTypes::PointZM</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00110">qgswkbtypes.h:110</a></div></div>
<div class="ttc" id="classQgsLineString_html_acc649e8d3737ff8aca805a36de870929"><div class="ttname"><a href="classQgsLineString.html#acc649e8d3737ff8aca805a36de870929">QgsLineString::addVertex</a></div><div class="ttdeci">void addVertex(const QgsPoint &amp;pt)</div><div class="ttdoc">Adds a new vertex to the end of the line string. </div><div class="ttdef"><b>Definition:</b> <a href="qgslinestring_8cpp_source.html#l00935">qgslinestring.cpp:935</a></div></div>
<div class="ttc" id="structQgsVertexId_html"><div class="ttname"><a href="structQgsVertexId.html">QgsVertexId</a></div><div class="ttdoc">Utility class for identifying a unique vertex within a geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00732">qgsabstractgeometry.h:732</a></div></div>
<div class="ttc" id="qgis_8h_html_aaa5bc30d33a49f3a38e8a5d7664f870c"><div class="ttname"><a href="qgis_8h.html#aaa5bc30d33a49f3a38e8a5d7664f870c">DEFAULT_SEGMENT_EPSILON</a></div><div class="ttdeci">const double DEFAULT_SEGMENT_EPSILON</div><div class="ttdoc">Default snapping tolerance for segments. </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00487">qgis.h:487</a></div></div>
<div class="ttc" id="classQgsGeometryCollection_html"><div class="ttname"><a href="classQgsGeometryCollection.html">QgsGeometryCollection</a></div><div class="ttdoc">Geometry collection. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometrycollection_8h_source.html#l00034">qgsgeometrycollection.h:34</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a9106a89b89d754332b067bbcf0a6aa0f"><div class="ttname"><a href="classQgsGeometryUtils.html#a9106a89b89d754332b067bbcf0a6aa0f">QgsGeometryUtils::midpoint</a></div><div class="ttdeci">static QgsPoint midpoint(const QgsPoint &amp;pt1, const QgsPoint &amp;pt2)</div><div class="ttdoc">Returns a middle point between points pt1 and pt2. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01163">qgsgeometryutils.cpp:1163</a></div></div>
<div class="ttc" id="qgis_8h_html_a3959144cd0579312fd39fd1bed94743b"><div class="ttname"><a href="qgis_8h.html#a3959144cd0579312fd39fd1bed94743b">qgsDoubleToString</a></div><div class="ttdeci">QString qgsDoubleToString(double a, int precision=17)</div><div class="ttdoc">Returns a string representation of a double. </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00237">qgis.h:237</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a04a21154737a5f1d03cf916838d18158"><div class="ttname"><a href="classQgsGeometryUtils.html#a04a21154737a5f1d03cf916838d18158">QgsGeometryUtils::pointsToGML3</a></div><div class="ttdeci">static QDomElement pointsToGML3(const QgsPointSequence &amp;points, QDomDocument &amp;doc, int precision, const QString &amp;ns, bool is3D, const QgsAbstractGeometry::AxisOrder &amp;axisOrder=QgsAbstractGeometry::AxisOrder::XY)</div><div class="ttdoc">Returns a gml::posList DOM element. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01065">qgsgeometryutils.cpp:1065</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_ad9273a12c511e00949293a0f5b212763"><div class="ttname"><a href="classQgsWkbTypes.html#ad9273a12c511e00949293a0f5b212763">QgsWkbTypes::addZ</a></div><div class="ttdeci">static Type addZ(Type type)</div><div class="ttdoc">Adds the z dimension to a WKB type and returns the new type. </div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00864">qgswkbtypes.h:864</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a1a561c0c6fc83213e04d481e11513366"><div class="ttname"><a href="classQgsGeometryUtils.html#a1a561c0c6fc83213e04d481e11513366">QgsGeometryUtils::circleTangentDirection</a></div><div class="ttdeci">static double circleTangentDirection(const QgsPoint &amp;tangentPoint, const QgsPoint &amp;cp1, const QgsPoint &amp;cp2, const QgsPoint &amp;cp3)</div><div class="ttdoc">Calculates the direction angle of a circle tangent (clockwise from north in radians) ...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00752">qgsgeometryutils.cpp:752</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a3830ad4ee3d544c852e7439c34b279ed"><div class="ttname"><a href="classQgsGeometryUtils.html#a3830ad4ee3d544c852e7439c34b279ed">QgsGeometryUtils::angleOnCircle</a></div><div class="ttdeci">static bool angleOnCircle(double angle, double angle1, double angle2, double angle3)</div><div class="ttdoc">Returns true if an angle is between angle1 and angle3 on a circle described by angle1, angle2 and angle3. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00648">qgsgeometryutils.cpp:648</a></div></div>
<div class="ttc" id="classQgsCurve_html"><div class="ttname"><a href="classQgsCurve.html">QgsCurve</a></div><div class="ttdoc">Abstract base class for curved geometry type. </div><div class="ttdef"><b>Definition:</b> <a href="qgscurve_8h_source.html#l00035">qgscurve.h:35</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a055483cc861bce8b843a0efd570a28d3"><div class="ttname"><a href="classQgsGeometryUtils.html#a055483cc861bce8b843a0efd570a28d3">QgsGeometryUtils::linesIntersection3D</a></div><div class="ttdeci">static bool linesIntersection3D(const QgsVector3D &amp;La1, const QgsVector3D &amp;La2, const QgsVector3D &amp;Lb1, const QgsVector3D &amp;Lb2, QgsVector3D &amp;intersection)</div><div class="ttdoc">An algorithm to calculate an (approximate) intersection of two lines in 3D. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01397">qgsgeometryutils.cpp:1397</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a14d201050669ccc6c5e3c9c835c9292f"><div class="ttname"><a href="classQgsGeometryUtils.html#a14d201050669ccc6c5e3c9c835c9292f">QgsGeometryUtils::interpolatePointOnLine</a></div><div class="ttdeci">static QgsPointXY interpolatePointOnLine(double x1, double y1, double x2, double y2, double fraction)</div><div class="ttdoc">Interpolates the position of a point a fraction of the way along the line from (x1, y1) to (x2, y2). </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01198">qgsgeometryutils.cpp:1198</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html"><div class="ttname"><a href="classQgsAbstractGeometry.html">QgsAbstractGeometry</a></div><div class="ttdoc">Abstract base class for all geometries. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00053">qgsabstractgeometry.h:53</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a30ee2268427404a01163a6875fb6a45d"><div class="ttname"><a href="classQgsGeometryUtils.html#a30ee2268427404a01163a6875fb6a45d">QgsGeometryUtils::extractLineStrings</a></div><div class="ttdeci">static QVector&lt; QgsLineString * &gt; extractLineStrings(const QgsAbstractGeometry *geom)</div><div class="ttdoc">Returns list of linestrings extracted from the passed geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00030">qgsgeometryutils.cpp:30</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a2239e2b962b9819960ffeefb1dc92ba9"><div class="ttname"><a href="classQgsGeometryUtils.html#a2239e2b962b9819960ffeefb1dc92ba9">QgsGeometryUtils::normalizedAngle</a></div><div class="ttdeci">static double normalizedAngle(double angle)</div><div class="ttdoc">Ensures that an angle is in the range 0 &lt;= angle &lt; 2 pi. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01102">qgsgeometryutils.cpp:1102</a></div></div>
<div class="ttc" id="qgsgeometrycollection_8h_html"><div class="ttname"><a href="qgsgeometrycollection_8h.html">qgsgeometrycollection.h</a></div></div>
<div class="ttc" id="classQgsPointXY_html_a2c0482148f1ca052c7f38d762e0072ac"><div class="ttname"><a href="classQgsPointXY.html#a2c0482148f1ca052c7f38d762e0072ac">QgsPointXY::distance</a></div><div class="ttdeci">double distance(double x, double y) const</div><div class="ttdoc">Returns the distance between this point and a specified x, y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00190">qgspointxy.h:190</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a8b8706728c90bc5c0e9c3ea3925b4453"><div class="ttname"><a href="classQgsAbstractGeometry.html#a8b8706728c90bc5c0e9c3ea3925b4453">QgsAbstractGeometry::wkbType</a></div><div class="ttdeci">QgsWkbTypes::Type wkbType() const</div><div class="ttdoc">Returns the WKB type of the geometry. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00171">qgsabstractgeometry.h:171</a></div></div>
<div class="ttc" id="classQgsPoint_html_ae5b591ac604024fdb873e4ca4a209e1f"><div class="ttname"><a href="classQgsPoint.html#ae5b591ac604024fdb873e4ca4a209e1f">QgsPoint::project</a></div><div class="ttdeci">QgsPoint project(double distance, double azimuth, double inclination=90.0) const</div><div class="ttdoc">Returns a new point which correspond to this point projected by a specified distance with specified a...</div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8cpp_source.html#l00631">qgspoint.cpp:631</a></div></div>
<div class="ttc" id="classQgsPoint_html"><div class="ttname"><a href="classQgsPoint.html">QgsPoint</a></div><div class="ttdoc">Point geometry type, with support for z-dimension and m-values. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00037">qgspoint.h:37</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a429cf06290bd0bdb2134a30c16d4d2a7"><div class="ttname"><a href="classQgsAbstractGeometry.html#a429cf06290bd0bdb2134a30c16d4d2a7">QgsAbstractGeometry::AxisOrder</a></div><div class="ttdeci">AxisOrder</div><div class="ttdoc">Axis order for GML generation. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00110">qgsabstractgeometry.h:110</a></div></div>
<div class="ttc" id="classQgsVector_html_ae069e031d42ece48a235716e85791ae6"><div class="ttname"><a href="classQgsVector.html#ae069e031d42ece48a235716e85791ae6">QgsVector::length</a></div><div class="ttdeci">double length() const</div><div class="ttdoc">Returns the length of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector_8cpp_source.html#l00071">qgsvector.cpp:71</a></div></div>
<div class="ttc" id="structQgsGeometryUtils_1_1SelfIntersection_html"><div class="ttname"><a href="structQgsGeometryUtils_1_1SelfIntersection.html">QgsGeometryUtils::SelfIntersection</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8h_source.html#l00221">qgsgeometryutils.h:221</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a3656c360046728a78651f08274fa6e5c"><div class="ttname"><a href="classQgsGeometryUtils.html#a3656c360046728a78651f08274fa6e5c">QgsGeometryUtils::lineIntersection</a></div><div class="ttdeci">static bool lineIntersection(const QgsPoint &amp;p1, QgsVector v1, const QgsPoint &amp;p2, QgsVector v2, QgsPoint &amp;intersection)</div><div class="ttdoc">Computes the intersection between two lines. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00238">qgsgeometryutils.cpp:238</a></div></div>
<div class="ttc" id="qgsgeometryutils_8h_html"><div class="ttname"><a href="qgsgeometryutils_8h.html">qgsgeometryutils.h</a></div></div>
<div class="ttc" id="classQgsPointXY_html_ac39fe3e623259485edcc42fbb77ab328"><div class="ttname"><a href="classQgsPointXY.html#ac39fe3e623259485edcc42fbb77ab328">QgsPointXY::x</a></div><div class="ttdeci">double x</div><div class="ttdef"><b>Definition:</b> <a href="qgspointxy_8h_source.html#l00047">qgspointxy.h:47</a></div></div>
<div class="ttc" id="classQgsVector_html"><div class="ttname"><a href="classQgsVector.html">QgsVector</a></div><div class="ttdoc">A class to represent a vector. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector_8h_source.html#l00028">qgsvector.h:28</a></div></div>
<div class="ttc" id="structQgsGeometryUtils_1_1SelfIntersection_html_ab3c38c8b997b597112cb0350ff4ba316"><div class="ttname"><a href="structQgsGeometryUtils_1_1SelfIntersection.html#ab3c38c8b997b597112cb0350ff4ba316">QgsGeometryUtils::SelfIntersection::point</a></div><div class="ttdeci">QgsPoint point</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8h_source.html#l00225">qgsgeometryutils.h:225</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_aeb3be402938d206cce4e2dac9307fe31"><div class="ttname"><a href="classQgsGeometryUtils.html#aeb3be402938d206cce4e2dac9307fe31">QgsGeometryUtils::skewLinesProjection</a></div><div class="ttdeci">static bool skewLinesProjection(const QgsVector3D &amp;P1, const QgsVector3D &amp;P12, const QgsVector3D &amp;P2, const QgsVector3D &amp;P22, QgsVector3D &amp;X1, double epsilon=0.0001)</div><div class="ttdoc">A method to project one skew line onto another. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01355">qgsgeometryutils.cpp:1355</a></div></div>
<div class="ttc" id="classQgsWkbPtr_html"><div class="ttname"><a href="classQgsWkbPtr.html">QgsWkbPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="qgswkbptr_8h_source.html#l00043">qgswkbptr.h:43</a></div></div>
<div class="ttc" id="qgsabstractgeometry_8h_html_a998c0c2a807f73c4412fdab61e278f21"><div class="ttname"><a href="qgsabstractgeometry_8h.html#a998c0c2a807f73c4412fdab61e278f21">QgsPointSequence</a></div><div class="ttdeci">QVector&lt; QgsPoint &gt; QgsPointSequence</div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00036">qgsabstractgeometry.h:36</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a22b89067f9fc24ace0776bfdcdb02d32"><div class="ttname"><a href="classQgsGeometryUtils.html#a22b89067f9fc24ace0776bfdcdb02d32">QgsGeometryUtils::pointOnLineWithDistance</a></div><div class="ttdeci">static QgsPoint pointOnLineWithDistance(const QgsPoint &amp;startPoint, const QgsPoint &amp;directionPoint, double distance)</div><div class="ttdoc">Returns a point a specified distance toward a second point. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00543">qgsgeometryutils.cpp:543</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a144dde0ca4aae2957f574013d1c46fee"><div class="ttname"><a href="classQgsGeometryUtils.html#a144dde0ca4aae2957f574013d1c46fee">QgsGeometryUtils::sqrDistance2D</a></div><div class="ttdeci">static double sqrDistance2D(const QgsPoint &amp;pt1, const QgsPoint &amp;pt2)</div><div class="ttdoc">Returns the squared 2D distance between two points. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00194">qgsgeometryutils.cpp:194</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a4e467f58b82e16d7d106e64ec5507d41"><div class="ttname"><a href="classQgsGeometryUtils.html#a4e467f58b82e16d7d106e64ec5507d41">QgsGeometryUtils::sweepAngle</a></div><div class="ttdeci">static double sweepAngle(double centerX, double centerY, double x1, double y1, double x2, double y2, double x3, double y3)</div><div class="ttdoc">Calculates angle of a circular string part defined by pt1, pt2, pt3. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00666">qgsgeometryutils.cpp:666</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a61134ca2bbdc99e4c8518a980ae801e3"><div class="ttname"><a href="classQgsGeometryUtils.html#a61134ca2bbdc99e4c8518a980ae801e3">QgsGeometryUtils::perpendicularSegment</a></div><div class="ttdeci">static QgsLineString perpendicularSegment(const QgsPoint &amp;p, const QgsPoint &amp;s1, const QgsPoint &amp;s2)</div><div class="ttdoc">Create a perpendicular line segment from p to segment [s1, s2]. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01249">qgsgeometryutils.cpp:1249</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_ac9635bdbebe1ce52b755d2928ae7053b"><div class="ttname"><a href="classQgsGeometryUtils.html#ac9635bdbebe1ce52b755d2928ae7053b">QgsGeometryUtils::pointsFromWKT</a></div><div class="ttdeci">static QgsPointSequence pointsFromWKT(const QString &amp;wktCoordinateList, bool is3D, bool isMeasure)</div><div class="ttdoc">Returns a list of points contained in a WKT string. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00934">qgsgeometryutils.cpp:934</a></div></div>
<div class="ttc" id="structQgsVertexId_html_a182f4d9812961538bd62c58c032dd049"><div class="ttname"><a href="structQgsVertexId.html#a182f4d9812961538bd62c58c032dd049">QgsVertexId::type</a></div><div class="ttdeci">VertexType type</div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00782">qgsabstractgeometry.h:782</a></div></div>
<div class="ttc" id="classQgsLineString_html"><div class="ttname"><a href="classQgsLineString.html">QgsLineString</a></div><div class="ttdoc">Line string geometry type, with support for z-dimension and m-values. </div><div class="ttdef"><b>Definition:</b> <a href="qgslinestring_8h_source.html#l00043">qgslinestring.h:43</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a234be132c5f849e44001a998e239fc3f"><div class="ttname"><a href="classQgsAbstractGeometry.html#a234be132c5f849e44001a998e239fc3f">QgsAbstractGeometry::vertexCount</a></div><div class="ttdeci">virtual int vertexCount(int part=0, int ring=0) const =0</div><div class="ttdoc">Returns the number of vertices of which this geometry is built. </div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a13c58d52e2e34e9d5c61a2ee274256cf"><div class="ttname"><a href="classQgsGeometryUtils.html#a13c58d52e2e34e9d5c61a2ee274256cf">QgsGeometryUtils::leftOfLine</a></div><div class="ttdeci">static int leftOfLine(double x, double y, double x1, double y1, double x2, double y2)</div><div class="ttdoc">Returns a value &lt; 0 if the point (x, y) is left of the line from (x1, y1) -&gt; ( x2, y2). </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00532">qgsgeometryutils.cpp:532</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_ab57a8ffe2e0c40ffd0be9425072db5da"><div class="ttname"><a href="classQgsGeometryUtils.html#ab57a8ffe2e0c40ffd0be9425072db5da">QgsGeometryUtils::tangentPointAndCircle</a></div><div class="ttdeci">static bool tangentPointAndCircle(const QgsPointXY &amp;center, double radius, const QgsPointXY &amp;p, QgsPointXY &amp;pt1, QgsPointXY &amp;pt2)</div><div class="ttdoc">Calculates the tangent points between the circle with the specified center and radius and the point p...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00433">qgsgeometryutils.cpp:433</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_af76638035bdd789ecf79a3e4dd64c28b"><div class="ttname"><a href="classQgsGeometryUtils.html#af76638035bdd789ecf79a3e4dd64c28b">QgsGeometryUtils::circleCenterRadius</a></div><div class="ttdeci">static void circleCenterRadius(const QgsPoint &amp;pt1, const QgsPoint &amp;pt2, const QgsPoint &amp;pt3, double &amp;radius, double &amp;centerX, double &amp;centerY)</div><div class="ttdoc">Returns radius and center of the circle through pt1, pt2, pt3. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00572">qgsgeometryutils.cpp:572</a></div></div>
<div class="ttc" id="classQgsPoint_html_a5675e2867176a1c48cde703ab2d9ba57"><div class="ttname"><a href="classQgsPoint.html#a5675e2867176a1c48cde703ab2d9ba57">QgsPoint::convertTo</a></div><div class="ttdeci">bool convertTo(QgsWkbTypes::Type type) override</div><div class="ttdoc">Converts the geometry to a specified type. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8cpp_source.html#l00538">qgspoint.cpp:538</a></div></div>
<div class="ttc" id="classQgsPoint_html_a1a22f2bc353403e5b607c6f5f36d5410"><div class="ttname"><a href="classQgsPoint.html#a1a22f2bc353403e5b607c6f5f36d5410">QgsPoint::addMValue</a></div><div class="ttdeci">bool addMValue(double mValue=0) override</div><div class="ttdoc">Adds a measure to the geometry, initialized to a preset value. </div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8cpp_source.html#l00480">qgspoint.cpp:480</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a3964b6cc15536a0df0280b833a5ec1fa"><div class="ttname"><a href="classQgsGeometryUtils.html#a3964b6cc15536a0df0280b833a5ec1fa">QgsGeometryUtils::pointsToWKB</a></div><div class="ttdeci">static void pointsToWKB(QgsWkbPtr &amp;wkb, const QgsPointSequence &amp;points, bool is3D, bool isMeasure)</div><div class="ttdoc">Returns a LinearRing { uint32 numPoints; Point points[numPoints]; }. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01002">qgsgeometryutils.cpp:1002</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a50c030f40ed9f9c8d2bda60f18a77cc5"><div class="ttname"><a href="classQgsGeometryUtils.html#a50c030f40ed9f9c8d2bda60f18a77cc5">QgsGeometryUtils::circleCircleIntersections</a></div><div class="ttdeci">static int circleCircleIntersections(QgsPointXY center1, double radius1, QgsPointXY center2, double radius2, QgsPointXY &amp;intersection1, QgsPointXY &amp;intersection2)</div><div class="ttdoc">Calculates the intersections points between the circle with center center1 and radius radius1 and the...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00369">qgsgeometryutils.cpp:369</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a62d279644f48048f879cd033bebab085"><div class="ttname"><a href="classQgsGeometryUtils.html#a62d279644f48048f879cd033bebab085">QgsGeometryUtils::sqrDistToLine</a></div><div class="ttdeci">static double sqrDistToLine(double ptX, double ptY, double x1, double y1, double x2, double y2, double &amp;minDistX, double &amp;minDistY, double epsilon)</div><div class="ttdoc">Returns the squared distance between a point and a line. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00199">qgsgeometryutils.cpp:199</a></div></div>
<div class="ttc" id="classQgsPoint_html_a9fac72ae2899169a3ee353fb62d63139"><div class="ttname"><a href="classQgsPoint.html#a9fac72ae2899169a3ee353fb62d63139">QgsPoint::z</a></div><div class="ttdeci">double z</div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00043">qgspoint.h:43</a></div></div>
<div class="ttc" id="classQgsWkbTypes_html_ac3b831ff06608f829f4f99f76d71516b"><div class="ttname"><a href="classQgsWkbTypes.html#ac3b831ff06608f829f4f99f76d71516b">QgsWkbTypes::hasM</a></div><div class="ttdeci">static bool hasM(Type type)</div><div class="ttdoc">Tests whether a WKB type contains m values. </div><div class="ttdef"><b>Definition:</b> <a href="qgswkbtypes_8h_source.html#l00818">qgswkbtypes.h:818</a></div></div>
<div class="ttc" id="classQgsVector_html_aa1cd72557be74dec1a3bfa2836e1db84"><div class="ttname"><a href="classQgsVector.html#aa1cd72557be74dec1a3bfa2836e1db84">QgsVector::x</a></div><div class="ttdeci">double x() const</div><div class="ttdoc">Returns the vector&amp;#39;s x-component. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector_8cpp_source.html#l00076">qgsvector.cpp:76</a></div></div>
<div class="ttc" id="qgscurve_8h_html"><div class="ttname"><a href="qgscurve_8h.html">qgscurve.h</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a49e289c3f558d60ca4c22d1bf6b85be8"><div class="ttname"><a href="classQgsGeometryUtils.html#a49e289c3f558d60ca4c22d1bf6b85be8">QgsGeometryUtils::closestPoint</a></div><div class="ttdeci">static QgsPoint closestPoint(const QgsAbstractGeometry &amp;geometry, const QgsPoint &amp;point)</div><div class="ttdoc">Returns the nearest point on a segment of a geometry for the specified point. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00097">qgsgeometryutils.cpp:97</a></div></div>
<div class="ttc" id="qgslinestring_8h_html"><div class="ttname"><a href="qgslinestring_8h.html">qgslinestring.h</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a665ef655c903c02e6ae5d0d211a04ecb"><div class="ttname"><a href="classQgsAbstractGeometry.html#a665ef655c903c02e6ae5d0d211a04ecb">QgsAbstractGeometry::vertexAt</a></div><div class="ttdeci">virtual QgsPoint vertexAt(QgsVertexId id) const =0</div><div class="ttdoc">Returns the point corresponding to a specified vertex id. </div></div>
<div class="ttc" id="classQgsVector_html_a14ec897a1119a7c1204d1c9bd3597b36"><div class="ttname"><a href="classQgsVector.html#a14ec897a1119a7c1204d1c9bd3597b36">QgsVector::y</a></div><div class="ttdeci">double y() const</div><div class="ttdoc">Returns the vector&amp;#39;s y-component. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector_8cpp_source.html#l00081">qgsvector.cpp:81</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a7180a1c445d69d8a98c7347befd6e8b5"><div class="ttname"><a href="classQgsGeometryUtils.html#a7180a1c445d69d8a98c7347befd6e8b5">QgsGeometryUtils::distanceToVertex</a></div><div class="ttdeci">static double distanceToVertex(const QgsAbstractGeometry &amp;geom, QgsVertexId id)</div><div class="ttdoc">Returns the distance along a geometry from its first vertex to the specified vertex. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00130">qgsgeometryutils.cpp:130</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a41ecee21ba106861e168a3b594cd6bb1"><div class="ttname"><a href="classQgsGeometryUtils.html#a41ecee21ba106861e168a3b594cd6bb1">QgsGeometryUtils::interpolatePointOnLineByValue</a></div><div class="ttdeci">static QgsPointXY interpolatePointOnLineByValue(double x1, double y1, double v1, double x2, double y2, double v2, double value)</div><div class="ttdoc">Interpolates the position of a point along the line from (x1, y1) to (x2, y2). </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01205">qgsgeometryutils.cpp:1205</a></div></div>
<div class="ttc" id="classQgsAbstractGeometry_html_a414275940aae6a3a8a7f0adeeefcfdee"><div class="ttname"><a href="classQgsAbstractGeometry.html#a414275940aae6a3a8a7f0adeeefcfdee">QgsAbstractGeometry::is3D</a></div><div class="ttdeci">bool is3D() const</div><div class="ttdoc">Returns true if the geometry is 3D and contains a z-value. </div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00184">qgsabstractgeometry.h:184</a></div></div>
<div class="ttc" id="structQgsVertexId_html_a3a1c1efa2cd2432a69b21460c901d2a5"><div class="ttname"><a href="structQgsVertexId.html#a3a1c1efa2cd2432a69b21460c901d2a5">QgsVertexId::ring</a></div><div class="ttdeci">int ring</div><div class="ttdef"><b>Definition:</b> <a href="qgsabstractgeometry_8h_source.html#l00780">qgsabstractgeometry.h:780</a></div></div>
<div class="ttc" id="classQgsVector3D_html_a7b42b1f4219553982cd61a54683010e7"><div class="ttname"><a href="classQgsVector3D.html#a7b42b1f4219553982cd61a54683010e7">QgsVector3D::x</a></div><div class="ttdeci">double x() const</div><div class="ttdoc">Returns X coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="qgsvector3d_8h_source.html#l00043">qgsvector3d.h:43</a></div></div>
<div class="ttc" id="classQgsPoint_html_ae4de56605f876418cd59f318a79ddb82"><div class="ttname"><a href="classQgsPoint.html#ae4de56605f876418cd59f318a79ddb82">QgsPoint::m</a></div><div class="ttdeci">double m</div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00044">qgspoint.h:44</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_acd1fde5712c49daae3e148a7fad90409"><div class="ttname"><a href="classQgsGeometryUtils.html#acd1fde5712c49daae3e148a7fad90409">QgsGeometryUtils::segmentizeArc</a></div><div class="ttdeci">static void segmentizeArc(const QgsPoint &amp;p1, const QgsPoint &amp;p2, const QgsPoint &amp;p3, QgsPointSequence &amp;points, double tolerance=M_PI_2/90, QgsAbstractGeometry::SegmentationToleranceType toleranceType=QgsAbstractGeometry::MaximumAngle, bool hasZ=false, bool hasM=false)</div><div class="ttdoc">Convert circular arc defined by p1, p2, p3 (p1/p3 being start resp. </div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l00776">qgsgeometryutils.cpp:776</a></div></div>
<div class="ttc" id="qgslogger_8h_html"><div class="ttname"><a href="qgslogger_8h.html">qgslogger.h</a></div></div>
<div class="ttc" id="classQgsGeometryUtils_html_a87fb039bff7972b8cd86ce938c1c1fd7"><div class="ttname"><a href="classQgsGeometryUtils.html#a87fb039bff7972b8cd86ce938c1c1fd7">QgsGeometryUtils::coefficients</a></div><div class="ttdeci">static void coefficients(const QgsPoint &amp;pt1, const QgsPoint &amp;pt2, double &amp;a, double &amp;b, double &amp;c)</div><div class="ttdoc">Returns the coefficients (a, b, c for equation &quot;ax + by + c = 0&quot;) of a line defined by points pt1 and...</div><div class="ttdef"><b>Definition:</b> <a href="qgsgeometryutils_8cpp_source.html#l01226">qgsgeometryutils.cpp:1226</a></div></div>
<div class="ttc" id="classQgsPoint_html_aab5c56479f3f9131deb1998a0768ea03"><div class="ttname"><a href="classQgsPoint.html#aab5c56479f3f9131deb1998a0768ea03">QgsPoint::x</a></div><div class="ttdeci">double x</div><div class="ttdef"><b>Definition:</b> <a href="qgspoint_8h_source.html#l00041">qgspoint.h:41</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 23 2018 20:58:15 for QGIS API Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
