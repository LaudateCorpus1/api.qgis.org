<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QGIS API Documentation: /tmp/buildd/qgis-3.2.0+99unstable/src/core/raster/qgsrasterinterface.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="api_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QGIS API Documentation
   &#160;<span id="projectnumber">3.2.0-Bonn (bc43194)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li><li class="navelem"><a class="el" href="dir_9c6ee9f03b9e988497f6ae786e4b3f28.html">raster</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qgsrasterinterface.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qgsrasterinterface_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">    qgsrasterface.cpp - Internal raster processing modules interface</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">     --------------------------------------</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    Date                 : Jun 21, 2012</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    Copyright            : (C) 2012 by Radim Blazek</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    email                : radim dot blazek at gmail dot com</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *   (at your option) any later version.                                   *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *                                                                         *</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;typeinfo&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;QByteArray&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;QTime&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;QStringList&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgslogger_8h.html">qgslogger.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrasterbandstats_8h.html">qgsrasterbandstats.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrasterhistogram_8h.html">qgsrasterhistogram.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrasterinterface_8h.html">qgsrasterinterface.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qgsrectangle_8h.html">qgsrectangle.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#a82a99df2f1820281227aed8a3545679c">   31</a></span>&#160;<a class="code" href="classQgsRasterInterface.html#a82a99df2f1820281227aed8a3545679c">QgsRasterInterface::QgsRasterInterface</a>( <a class="code" href="classQgsRasterInterface.html">QgsRasterInterface</a> *input )</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  : mInput( input )</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#a9068892452454f5437f4f4d159a956e1">   36</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsRasterInterface.html#a9068892452454f5437f4f4d159a956e1">QgsRasterInterface::initStatistics</a>( <a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> &amp;statistics,</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordtype">int</span> bandNo,</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordtype">int</span> stats,</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a> &amp;boundingBox,</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">int</span> sampleSize )</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theBandNo = %1 sampleSize = %2&quot;</span> ).arg( bandNo ).arg( sampleSize ), 4 );</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  statistics.<a class="code" href="classQgsRasterBandStats.html#a228156d6d27ef316461fed77cbd8bc38">bandNumber</a> = bandNo;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  statistics.<a class="code" href="classQgsRasterBandStats.html#a559b136bfc312c6e27a48d9dc801df12">statsGathered</a> = stats;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="classQgsRectangle.html">QgsRectangle</a> finalExtent;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> ( boundingBox.<a class="code" href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">isEmpty</a>() )</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    finalExtent = <a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    finalExtent = <a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>().<a class="code" href="classQgsRectangle.html#ad62419b14bc17f923346f8a233383382">intersect</a>( boundingBox );</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  statistics.<a class="code" href="classQgsRasterBandStats.html#a61b2023b06fe4eab1a4af85ae8dff11b">extent</a> = finalExtent;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">if</span> ( sampleSize &gt; 0 )</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// Calc resolution from theSampleSize</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">double</span> xRes, yRes;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    xRes = yRes = std::sqrt( ( finalExtent.<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() * finalExtent.<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() ) / sampleSize );</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// But limit by physical resolution</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classQgsRasterInterface.html#adb432fe846c0ca47321636f606128b99">capabilities</a>() &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05aadc59abc8f2b2c71d9297613e18261b5">Size</a> )</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keywordtype">double</span> srcXRes = <a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>().<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / <a class="code" href="classQgsRasterInterface.html#a6024da23ab7abf219925b505a956526b">xSize</a>();</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordtype">double</span> srcYRes = <a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>().<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() / <a class="code" href="classQgsRasterInterface.html#ae1812389c8815fae851ca3eaffef5265">ySize</a>();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">if</span> ( xRes &lt; srcXRes ) xRes = srcXRes;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">if</span> ( yRes &lt; srcYRes ) yRes = srcYRes;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;xRes = %1 yRes = %2&quot;</span> ).arg( xRes ).arg( yRes ), 4 );</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    statistics.<a class="code" href="classQgsRasterBandStats.html#a7a2636178ecf0a13254f89be976b0797">width</a> = static_cast &lt;<span class="keywordtype">int</span>&gt;( finalExtent.<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / xRes );</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    statistics.<a class="code" href="classQgsRasterBandStats.html#a3c0bf8d3ad5fc762bf6bdf3787b1ffbc">height</a> = static_cast &lt;<span class="keywordtype">int</span>&gt;( finalExtent.<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() / yRes );</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classQgsRasterInterface.html#adb432fe846c0ca47321636f606128b99">capabilities</a>() &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05aadc59abc8f2b2c71d9297613e18261b5">Size</a> )</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      statistics.<a class="code" href="classQgsRasterBandStats.html#a7a2636178ecf0a13254f89be976b0797">width</a> = <a class="code" href="classQgsRasterInterface.html#a6024da23ab7abf219925b505a956526b">xSize</a>();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      statistics.<a class="code" href="classQgsRasterBandStats.html#a3c0bf8d3ad5fc762bf6bdf3787b1ffbc">height</a> = <a class="code" href="classQgsRasterInterface.html#ae1812389c8815fae851ca3eaffef5265">ySize</a>();</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      statistics.<a class="code" href="classQgsRasterBandStats.html#a7a2636178ecf0a13254f89be976b0797">width</a> = 1000;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      statistics.<a class="code" href="classQgsRasterBandStats.html#a3c0bf8d3ad5fc762bf6bdf3787b1ffbc">height</a> = 1000;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theStatistics.width = %1 statistics.height = %2&quot;</span> ).arg( statistics.<a class="code" href="classQgsRasterBandStats.html#a7a2636178ecf0a13254f89be976b0797">width</a> ).arg( statistics.<a class="code" href="classQgsRasterBandStats.html#a3c0bf8d3ad5fc762bf6bdf3787b1ffbc">height</a> ), 4 );</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#ad14d9430addc4dc547f157b11b1b2765">   93</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsRasterInterface.html#ad14d9430addc4dc547f157b11b1b2765">QgsRasterInterface::hasStatistics</a>( <span class="keywordtype">int</span> bandNo,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                        <span class="keywordtype">int</span> stats,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a> &amp;<a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                        <span class="keywordtype">int</span> sampleSize )</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theBandNo = %1 stats = %2 sampleSize = %3&quot;</span> ).arg( bandNo ).arg( stats ).arg( sampleSize ), 4 );</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classQgsRasterInterface.html#a462c9ae3fde5e7896deb047ff78cfa2c">mStatistics</a>.isEmpty() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> myRasterBandStats;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classQgsRasterInterface.html#a9068892452454f5437f4f4d159a956e1">initStatistics</a>( myRasterBandStats, bandNo, stats, extent, sampleSize );</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> &amp;stats, <a class="code" href="classQgsRasterInterface.html#a462c9ae3fde5e7896deb047ff78cfa2c">mStatistics</a> )</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span> ( stats.<a class="code" href="classQgsRasterBandStats.html#aef5b1b1e54e8a990cf5b333438684977">contains</a>( myRasterBandStats ) )</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( <span class="stringliteral">&quot;Has cached statistics.&quot;</span>, 4 );</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#aaa39473935ac32b7b38970fed2ffaaac">  115</a></span>&#160;<a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> <a class="code" href="classQgsRasterInterface.html#aaa39473935ac32b7b38970fed2ffaaac">QgsRasterInterface::bandStatistics</a>( <span class="keywordtype">int</span> bandNo,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">int</span> stats,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a> &amp;<a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">int</span> sampleSize, <a class="code" href="classQgsRasterBlockFeedback.html">QgsRasterBlockFeedback</a> *feedback )</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theBandNo = %1 stats = %2 sampleSize = %3&quot;</span> ).arg( bandNo ).arg( stats ).arg( sampleSize ), 4 );</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// TODO: null values set on raster layer!!!</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> myRasterBandStats;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <a class="code" href="classQgsRasterInterface.html#a9068892452454f5437f4f4d159a956e1">initStatistics</a>( myRasterBandStats, bandNo, stats, extent, sampleSize );</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> &amp;stats, <a class="code" href="classQgsRasterInterface.html#a462c9ae3fde5e7896deb047ff78cfa2c">mStatistics</a> )</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> ( stats.<a class="code" href="classQgsRasterBandStats.html#aef5b1b1e54e8a990cf5b333438684977">contains</a>( myRasterBandStats ) )</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( <span class="stringliteral">&quot;Using cached statistics.&quot;</span>, 4 );</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">return</span> stats;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="classQgsRectangle.html">QgsRectangle</a> myExtent = myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a61b2023b06fe4eab1a4af85ae8dff11b">extent</a>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">int</span> myWidth = myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a7a2636178ecf0a13254f89be976b0797">width</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">int</span> myHeight = myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a3c0bf8d3ad5fc762bf6bdf3787b1ffbc">height</a>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">//int myDataType = dataType( bandNo );</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">int</span> myXBlockSize = <a class="code" href="classQgsRasterInterface.html#a8e8027c88f4f0ab5bc634da41a588edf">xBlockSize</a>();</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">int</span> myYBlockSize = <a class="code" href="classQgsRasterInterface.html#a212328b3ab8c1eeeca03785c0a38c715">yBlockSize</a>();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> ( myXBlockSize == 0 ) <span class="comment">// should not happen, but happens</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    myXBlockSize = 500;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> ( myYBlockSize == 0 ) <span class="comment">// should not happen, but happens</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    myYBlockSize = 500;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordtype">int</span> myNXBlocks = ( myWidth + myXBlockSize - 1 ) / myXBlockSize;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordtype">int</span> myNYBlocks = ( myHeight + myYBlockSize - 1 ) / myYBlockSize;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordtype">double</span> myXRes = myExtent.<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / myWidth;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordtype">double</span> myYRes = myExtent.<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() / myHeight;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// TODO: progress signals</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// used by single pass stdev</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordtype">double</span> myMean = 0;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordtype">double</span> mySumOfSquares = 0;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">bool</span> myFirstIterationFlag = <span class="keyword">true</span>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> myYBlock = 0; myYBlock &lt; myNYBlocks; myYBlock++ )</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> myXBlock = 0; myXBlock &lt; myNXBlocks; myXBlock++ )</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordflow">if</span> ( feedback &amp;&amp; feedback-&gt;<a class="code" href="classQgsFeedback.html#a166e5fb87ddb57e86de791b14b6a6ce4">isCanceled</a>() )</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">return</span> myRasterBandStats;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;myYBlock = %1 myXBlock = %2&quot;</span> ).arg( myYBlock ).arg( myXBlock ), 4 );</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordtype">int</span> myBlockWidth = std::min( myXBlockSize, myWidth - myXBlock * myXBlockSize );</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordtype">int</span> myBlockHeight = std::min( myYBlockSize, myHeight - myYBlock * myYBlockSize );</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordtype">double</span> xmin = myExtent.<a class="code" href="classQgsRectangle.html#a3186f5474a5fa3ced21e8204d339c301">xMinimum</a>() + myXBlock * myXBlockSize * myXRes;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordtype">double</span> xmax = xmin + myBlockWidth * myXRes;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordtype">double</span> ymin = myExtent.<a class="code" href="classQgsRectangle.html#a87a5cf3ee2fe6494c04a9e88876cc54e">yMaximum</a>() - myYBlock * myYBlockSize * myYRes;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordtype">double</span> ymax = ymin - myBlockHeight * myYRes;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <a class="code" href="classQgsRectangle.html">QgsRectangle</a> myPartExtent( xmin, ymin, xmax, ymax );</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="classQgsRasterBlock.html">QgsRasterBlock</a> *blk = <a class="code" href="classQgsRasterInterface.html#a0f28ed600d4fabd86c88c520652b8ae6">block</a>( bandNo, myPartExtent, myBlockWidth, myBlockHeight, feedback );</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="comment">// Collect the histogram counts.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">for</span> ( <a class="code" href="qgis_8h.html#a5c6bee998e17d0cafeff24eb7953750e">qgssize</a> i = 0; i &lt; ( static_cast&lt; qgssize &gt;( myBlockHeight ) ) * myBlockWidth; i++ )</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">if</span> ( blk-&gt;<a class="code" href="classQgsRasterBlock.html#ad4fd7cfc1b3c578000a26093e5e5e094">isNoData</a>( i ) ) <span class="keywordflow">continue</span>; <span class="comment">// NULL</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordtype">double</span> myValue = blk-&gt;<a class="code" href="classQgsRasterBlock.html#a0b7b6170b3ed583015f5fcf574e3e794">value</a>( i );</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a900f14441254cf9ce534986b958f907d">sum</a> += myValue;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a1a006e4d0a603d74614ff0d2a0c9d30c">elementCount</a>++;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> ( !std::isfinite( myValue ) ) <span class="keywordflow">continue</span>; <span class="comment">// inf</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span> ( myFirstIterationFlag )</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;          myFirstIterationFlag = <span class="keyword">false</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;          myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a> = myValue;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;          myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a> = myValue;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          <span class="keywordflow">if</span> ( myValue &lt; myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a> )</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a> = myValue;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          <span class="keywordflow">if</span> ( myValue &gt; myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a> )</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a> = myValue;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="comment">// Single pass stdev</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordtype">double</span> myDelta = myValue - myMean;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        myMean += myDelta / myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a1a006e4d0a603d74614ff0d2a0c9d30c">elementCount</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        mySumOfSquares += myDelta * ( myValue - myMean );</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keyword">delete</span> blk;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#ae8c5f2232fa4d2258ea21dc6f025ad71">range</a> = myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a> - myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a59c31d267e0ce60e43a6b8615fc4ab5a">mean</a> = myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a900f14441254cf9ce534986b958f907d">sum</a> / myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a1a006e4d0a603d74614ff0d2a0c9d30c">elementCount</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a289d975432420054ce7166d569bd7847">sumOfSquares</a> = mySumOfSquares; <span class="comment">// OK with single pass?</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// stdDev may differ  from GDAL stats, because GDAL is using naive single pass</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// algorithm which is more error prone (because of rounding errors)</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Divide result by sample size - 1 and get square root to get stdev</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a6250415bdfeefdb851763a24f7f30026">stdDev</a> = std::sqrt( mySumOfSquares / ( myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a1a006e4d0a603d74614ff0d2a0c9d30c">elementCount</a> - 1 ) );</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( <span class="stringliteral">&quot;************ STATS **************&quot;</span>, 4 );</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;MIN %1&quot;</span> ).arg( myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a> ), 4 );</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;MAX %1&quot;</span> ).arg( myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a> ), 4 );</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;RANGE %1&quot;</span> ).arg( myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#ae8c5f2232fa4d2258ea21dc6f025ad71">range</a> ), 4 );</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;MEAN %1&quot;</span> ).arg( myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a59c31d267e0ce60e43a6b8615fc4ab5a">mean</a> ), 4 );</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;STDDEV %1&quot;</span> ).arg( myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a6250415bdfeefdb851763a24f7f30026">stdDev</a> ), 4 );</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  myRasterBandStats.<a class="code" href="classQgsRasterBandStats.html#a559b136bfc312c6e27a48d9dc801df12">statsGathered</a> = <a class="code" href="classQgsRasterBandStats.html#a7c29f50c8a8cf36e5a1174cffaf9be8babe38d36291e813925651b877fcc1c4e1">QgsRasterBandStats::All</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="classQgsRasterInterface.html#a462c9ae3fde5e7896deb047ff78cfa2c">mStatistics</a>.append( myRasterBandStats );</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">return</span> myRasterBandStats;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#a5676bc47dd66917d489d1aa1857943d1">  246</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsRasterInterface.html#a5676bc47dd66917d489d1aa1857943d1">QgsRasterInterface::initHistogram</a>( <a class="code" href="classQgsRasterHistogram.html">QgsRasterHistogram</a> &amp;<a class="code" href="classQgsRasterInterface.html#af8aecc430f757bbfd2a3ad19640f0bff">histogram</a>,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                        <span class="keywordtype">int</span> bandNo,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                        <span class="keywordtype">int</span> binCount,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                        <span class="keywordtype">double</span> minimum, <span class="keywordtype">double</span> maximum,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a> &amp;boundingBox,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                        <span class="keywordtype">int</span> sampleSize,</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                        <span class="keywordtype">bool</span> includeOutOfRange )</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;{</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  histogram.<a class="code" href="classQgsRasterHistogram.html#a661a36a7d6202165514cd15e5907228a">bandNumber</a> = bandNo;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  histogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> = minimum;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  histogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a> = maximum;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  histogram.<a class="code" href="classQgsRasterHistogram.html#aa5059393bb80a08419d867542d874acf">includeOutOfRange</a> = includeOutOfRange;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordtype">int</span> mySrcDataType = <a class="code" href="classQgsRasterInterface.html#a8c551f46c2eb3908bb407bda3ddd9f97">sourceDataType</a>( bandNo );</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">if</span> ( std::isnan( histogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> ) )</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// TODO: this was OK when stats/histogram were calced in provider,</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// but what TODO in other interfaces? Check for mInput for now.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="classQgsRasterInterface.html#ad9ac7504d704cf5681691da269fc7a98">mInput</a> &amp;&amp; mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5aff09d65e170dc3ceb704a912eaf1ddee">Qgis::Byte</a> )</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      histogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> = 0; <span class="comment">// see histogram() for shift for rounding</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">// We need statistics -&gt; avoid histogramDefaults in hasHistogram if possible</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="comment">// TODO: use approximated statistics if approximated histogram is requested</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="comment">// (theSampleSize &gt; 0)</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> stats = <a class="code" href="classQgsRasterInterface.html#aaa39473935ac32b7b38970fed2ffaaac">bandStatistics</a>( bandNo, <a class="code" href="classQgsRasterBandStats.html#a7c29f50c8a8cf36e5a1174cffaf9be8ba193d01dc9542f4d5f8b268da23bfac4f">QgsRasterBandStats::Min</a>, boundingBox, sampleSize );</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      histogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> = stats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">if</span> ( std::isnan( histogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a> ) )</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="classQgsRasterInterface.html#ad9ac7504d704cf5681691da269fc7a98">mInput</a> &amp;&amp; mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5aff09d65e170dc3ceb704a912eaf1ddee">Qgis::Byte</a> )</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      histogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a> = 255;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> stats = <a class="code" href="classQgsRasterInterface.html#aaa39473935ac32b7b38970fed2ffaaac">bandStatistics</a>( bandNo, <a class="code" href="classQgsRasterBandStats.html#a7c29f50c8a8cf36e5a1174cffaf9be8ba0d18f9b8691953850284e098d20fe739">QgsRasterBandStats::Max</a>, boundingBox, sampleSize );</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      histogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a> = stats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="classQgsRectangle.html">QgsRectangle</a> finalExtent;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">if</span> ( boundingBox.<a class="code" href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">isEmpty</a>() )</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    finalExtent = <a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    finalExtent = <a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>().<a class="code" href="classQgsRectangle.html#ad62419b14bc17f923346f8a233383382">intersect</a>( boundingBox );</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  histogram.<a class="code" href="classQgsRasterHistogram.html#aa64a01577c2bcd69c6d7c9277e96448f">extent</a> = finalExtent;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">if</span> ( sampleSize &gt; 0 )</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// Calc resolution from theSampleSize</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">double</span> xRes, yRes;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    xRes = yRes = std::sqrt( ( finalExtent.<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() * finalExtent.<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() ) / sampleSize );</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// But limit by physical resolution</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classQgsRasterInterface.html#adb432fe846c0ca47321636f606128b99">capabilities</a>() &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05aadc59abc8f2b2c71d9297613e18261b5">Size</a> )</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordtype">double</span> srcXRes = <a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>().<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / <a class="code" href="classQgsRasterInterface.html#a6024da23ab7abf219925b505a956526b">xSize</a>();</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordtype">double</span> srcYRes = <a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>().<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() / <a class="code" href="classQgsRasterInterface.html#ae1812389c8815fae851ca3eaffef5265">ySize</a>();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">if</span> ( xRes &lt; srcXRes ) xRes = srcXRes;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">if</span> ( yRes &lt; srcYRes ) yRes = srcYRes;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;xRes = %1 yRes = %2&quot;</span> ).arg( xRes ).arg( yRes ), 4 );</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    histogram.<a class="code" href="classQgsRasterHistogram.html#adf24745911e27d1d43b05cdca3db5f91">width</a> = static_cast &lt;<span class="keywordtype">int</span>&gt;( finalExtent.<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / xRes );</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    histogram.<a class="code" href="classQgsRasterHistogram.html#adcc75aaef40ffaa6cf4501a37afcd2ea">height</a> = static_cast &lt;<span class="keywordtype">int</span>&gt;( finalExtent.<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() / yRes );</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classQgsRasterInterface.html#adb432fe846c0ca47321636f606128b99">capabilities</a>() &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05aadc59abc8f2b2c71d9297613e18261b5">Size</a> )</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      histogram.<a class="code" href="classQgsRasterHistogram.html#adf24745911e27d1d43b05cdca3db5f91">width</a> = <a class="code" href="classQgsRasterInterface.html#a6024da23ab7abf219925b505a956526b">xSize</a>();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      histogram.<a class="code" href="classQgsRasterHistogram.html#adcc75aaef40ffaa6cf4501a37afcd2ea">height</a> = <a class="code" href="classQgsRasterInterface.html#ae1812389c8815fae851ca3eaffef5265">ySize</a>();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      histogram.<a class="code" href="classQgsRasterHistogram.html#adf24745911e27d1d43b05cdca3db5f91">width</a> = 1000;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      histogram.<a class="code" href="classQgsRasterHistogram.html#adcc75aaef40ffaa6cf4501a37afcd2ea">height</a> = 1000;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theHistogram.width = %1 histogram.height = %2&quot;</span> ).arg( histogram.<a class="code" href="classQgsRasterHistogram.html#adf24745911e27d1d43b05cdca3db5f91">width</a> ).arg( histogram.<a class="code" href="classQgsRasterHistogram.html#adcc75aaef40ffaa6cf4501a37afcd2ea">height</a> ), 4 );</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">int</span> myBinCount = binCount;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">if</span> ( myBinCount == 0 )</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// TODO: this was OK when stats/histogram were calced in provider,</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// but what TODO in other interfaces? Check for mInput for now.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="classQgsRasterInterface.html#ad9ac7504d704cf5681691da269fc7a98">mInput</a> &amp;&amp; mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5aff09d65e170dc3ceb704a912eaf1ddee">Qgis::Byte</a> )</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      myBinCount = 256; <span class="comment">// Cannot store more values in byte</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="comment">// There is no best default value, to display something reasonable in histogram chart, binCount should be small, OTOH, to get precise data for cumulative cut, the number should be big. Because it is easier to define fixed lower value for the chart, we calc optimum binCount for higher resolution (to avoid calculating that where histogram() is used. In any any case, it does not make sense to use more than width*height;</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      myBinCount = histogram.<a class="code" href="classQgsRasterHistogram.html#adf24745911e27d1d43b05cdca3db5f91">width</a> * histogram.<a class="code" href="classQgsRasterHistogram.html#adcc75aaef40ffaa6cf4501a37afcd2ea">height</a>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">if</span> ( myBinCount &gt; 1000 )  myBinCount = 1000;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">// for Int16/Int32 make sure bin count &lt;= actual range, because there is no sense in having</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="comment">// bins at fractional values</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">if</span> ( !<a class="code" href="classQgsRasterInterface.html#ad9ac7504d704cf5681691da269fc7a98">mInput</a> &amp;&amp; (</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;             mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a006c63325c05c307af9a285a910bbaba">Qgis::Int16</a> || mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a42b15140f8f53733863648154562fb88">Qgis::Int32</a> ||</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;             mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5ad58c30e559800fdfc3448a593a982486">Qgis::UInt16</a> || mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a26f69286c48f415893d2eeb5ca7395c2">Qgis::UInt32</a> ) )</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span> ( myBinCount &gt; histogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a> - histogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> + 1 )</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          myBinCount = int( std::ceil( histogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a> - histogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> + 1 ) );</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  histogram.<a class="code" href="classQgsRasterHistogram.html#aeacc97367a04eb5fa47b1e8234a3b3d9">binCount</a> = myBinCount;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theHistogram.binCount = %1&quot;</span> ).arg( histogram.<a class="code" href="classQgsRasterHistogram.html#aeacc97367a04eb5fa47b1e8234a3b3d9">binCount</a> ), 4 );</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#a96e3b90944051463689fd94291f64d59">  367</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classQgsRasterInterface.html#a96e3b90944051463689fd94291f64d59">QgsRasterInterface::hasHistogram</a>( <span class="keywordtype">int</span> bandNo,</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                       <span class="keywordtype">int</span> binCount,</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                       <span class="keywordtype">double</span> minimum, <span class="keywordtype">double</span> maximum,</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a> &amp;<a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>,</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                       <span class="keywordtype">int</span> sampleSize,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                       <span class="keywordtype">bool</span> includeOutOfRange )</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;{</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theBandNo = %1 binCount = %2 minimum = %3 maximum = %4 sampleSize = %5&quot;</span> ).arg( bandNo ).arg( binCount ).arg( minimum ).arg( maximum ).arg( sampleSize ), 4 );</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// histogramDefaults() needs statistics if minimum or maximum is NaN -&gt;</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// do other checks which don&#39;t need statistics before histogramDefaults()</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classQgsRasterInterface.html#ae62adab6db8d26dc8e04ba136ba819c8">mHistograms</a>.isEmpty() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="classQgsRasterHistogram.html">QgsRasterHistogram</a> myHistogram;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="classQgsRasterInterface.html#a5676bc47dd66917d489d1aa1857943d1">initHistogram</a>( myHistogram, bandNo, binCount, minimum, maximum, extent, sampleSize, includeOutOfRange );</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsRasterHistogram.html">QgsRasterHistogram</a> &amp;<a class="code" href="classQgsRasterInterface.html#af8aecc430f757bbfd2a3ad19640f0bff">histogram</a>, <a class="code" href="classQgsRasterInterface.html#ae62adab6db8d26dc8e04ba136ba819c8">mHistograms</a> )</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> ( histogram == myHistogram )</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( <span class="stringliteral">&quot;Has cached histogram.&quot;</span>, 4 );</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#af8aecc430f757bbfd2a3ad19640f0bff">  393</a></span>&#160;<a class="code" href="classQgsRasterHistogram.html">QgsRasterHistogram</a> <a class="code" href="classQgsRasterInterface.html#af8aecc430f757bbfd2a3ad19640f0bff">QgsRasterInterface::histogram</a>( <span class="keywordtype">int</span> bandNo,</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordtype">int</span> binCount,</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">double</span> minimum, <span class="keywordtype">double</span> maximum,</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a> &amp;<a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>,</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">int</span> sampleSize,</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">bool</span> includeOutOfRange, <a class="code" href="classQgsRasterBlockFeedback.html">QgsRasterBlockFeedback</a> *feedback )</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theBandNo = %1 binCount = %2 minimum = %3 maximum = %4 sampleSize = %5&quot;</span> ).arg( bandNo ).arg( binCount ).arg( minimum ).arg( maximum ).arg( sampleSize ), 4 );</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="classQgsRasterHistogram.html">QgsRasterHistogram</a> myHistogram;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="classQgsRasterInterface.html#a5676bc47dd66917d489d1aa1857943d1">initHistogram</a>( myHistogram, bandNo, binCount, minimum, maximum, extent, sampleSize, includeOutOfRange );</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// Find cached</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  Q_FOREACH ( <span class="keyword">const</span> <a class="code" href="classQgsRasterHistogram.html">QgsRasterHistogram</a> &amp;<a class="code" href="classQgsRasterInterface.html#af8aecc430f757bbfd2a3ad19640f0bff">histogram</a>, <a class="code" href="classQgsRasterInterface.html#ae62adab6db8d26dc8e04ba136ba819c8">mHistograms</a> )</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> ( histogram == myHistogram )</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( <span class="stringliteral">&quot;Using cached histogram.&quot;</span>, 4 );</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classQgsRasterInterface.html#af8aecc430f757bbfd2a3ad19640f0bff">histogram</a>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordtype">int</span> myBinCount = myHistogram.<a class="code" href="classQgsRasterHistogram.html#aeacc97367a04eb5fa47b1e8234a3b3d9">binCount</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordtype">int</span> myWidth = myHistogram.<a class="code" href="classQgsRasterHistogram.html#adf24745911e27d1d43b05cdca3db5f91">width</a>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordtype">int</span> myHeight = myHistogram.<a class="code" href="classQgsRasterHistogram.html#adcc75aaef40ffaa6cf4501a37afcd2ea">height</a>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classQgsRectangle.html">QgsRectangle</a> myExtent = myHistogram.<a class="code" href="classQgsRasterHistogram.html#aa64a01577c2bcd69c6d7c9277e96448f">extent</a>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  myHistogram.<a class="code" href="classQgsRasterHistogram.html#ac219fe982376fc00e46a15a3b84e90bf">histogramVector</a>.resize( myBinCount );</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordtype">int</span> myXBlockSize = <a class="code" href="classQgsRasterInterface.html#a8e8027c88f4f0ab5bc634da41a588edf">xBlockSize</a>();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordtype">int</span> myYBlockSize = <a class="code" href="classQgsRasterInterface.html#a212328b3ab8c1eeeca03785c0a38c715">yBlockSize</a>();</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">if</span> ( myXBlockSize == 0 ) <span class="comment">// should not happen, but happens</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    myXBlockSize = 500;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">if</span> ( myYBlockSize == 0 ) <span class="comment">// should not happen, but happens</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    myYBlockSize = 500;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordtype">int</span> myNXBlocks = ( myWidth + myXBlockSize - 1 ) / myXBlockSize;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordtype">int</span> myNYBlocks = ( myHeight + myYBlockSize - 1 ) / myYBlockSize;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordtype">double</span> myXRes = myExtent.<a class="code" href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">width</a>() / myWidth;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordtype">double</span> myYRes = myExtent.<a class="code" href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">height</a>() / myHeight;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordtype">double</span> myMinimum = myHistogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordtype">double</span> myMaximum = myHistogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">// To avoid rounding errors</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// TODO: check this</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordtype">double</span> myerval = ( myMaximum - myMinimum ) / myHistogram.<a class="code" href="classQgsRasterHistogram.html#aeacc97367a04eb5fa47b1e8234a3b3d9">binCount</a>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  myMinimum -= 0.1 * myerval;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  myMaximum += 0.1 * myerval;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;binCount = %1 myMinimum = %2 myMaximum = %3&quot;</span> ).arg( myHistogram.<a class="code" href="classQgsRasterHistogram.html#aeacc97367a04eb5fa47b1e8234a3b3d9">binCount</a> ).arg( myMinimum ).arg( myMaximum ), 4 );</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordtype">double</span> myBinSize = ( myMaximum - myMinimum ) / myBinCount;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// TODO: progress signals</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> myYBlock = 0; myYBlock &lt; myNYBlocks; myYBlock++ )</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> myXBlock = 0; myXBlock &lt; myNXBlocks; myXBlock++ )</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> ( feedback &amp;&amp; feedback-&gt;<a class="code" href="classQgsFeedback.html#a166e5fb87ddb57e86de791b14b6a6ce4">isCanceled</a>() )</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">return</span> myHistogram;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordtype">int</span> myBlockWidth = std::min( myXBlockSize, myWidth - myXBlock * myXBlockSize );</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordtype">int</span> myBlockHeight = std::min( myYBlockSize, myHeight - myYBlock * myYBlockSize );</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keywordtype">double</span> xmin = myExtent.<a class="code" href="classQgsRectangle.html#a3186f5474a5fa3ced21e8204d339c301">xMinimum</a>() + myXBlock * myXBlockSize * myXRes;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordtype">double</span> xmax = xmin + myBlockWidth * myXRes;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordtype">double</span> ymin = myExtent.<a class="code" href="classQgsRectangle.html#a87a5cf3ee2fe6494c04a9e88876cc54e">yMaximum</a>() - myYBlock * myYBlockSize * myYRes;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordtype">double</span> ymax = ymin - myBlockHeight * myYRes;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <a class="code" href="classQgsRectangle.html">QgsRectangle</a> myPartExtent( xmin, ymin, xmax, ymax );</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <a class="code" href="classQgsRasterBlock.html">QgsRasterBlock</a> *blk = <a class="code" href="classQgsRasterInterface.html#a0f28ed600d4fabd86c88c520652b8ae6">block</a>( bandNo, myPartExtent, myBlockWidth, myBlockHeight, feedback );</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="comment">// Collect the histogram counts.</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="keywordflow">for</span> ( <a class="code" href="qgis_8h.html#a5c6bee998e17d0cafeff24eb7953750e">qgssize</a> i = 0; i &lt; ( static_cast&lt; qgssize &gt;( myBlockHeight ) ) * myBlockWidth; i++ )</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">if</span> ( blk-&gt;<a class="code" href="classQgsRasterBlock.html#ad4fd7cfc1b3c578000a26093e5e5e094">isNoData</a>( i ) )</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <span class="keywordflow">continue</span>; <span class="comment">// NULL</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordtype">double</span> myValue = blk-&gt;<a class="code" href="classQgsRasterBlock.html#a0b7b6170b3ed583015f5fcf574e3e794">value</a>( i );</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordtype">int</span> myBinIndex = static_cast &lt;<span class="keywordtype">int</span>&gt;( std::floor( ( myValue - myMinimum ) /  myBinSize ) );</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span> ( ( myBinIndex &lt; 0 || myBinIndex &gt; ( myBinCount - 1 ) ) &amp;&amp; !includeOutOfRange )</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">if</span> ( myBinIndex &lt; 0 ) myBinIndex = 0;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">if</span> ( myBinIndex &gt; ( myBinCount - 1 ) ) myBinIndex = myBinCount - 1;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        myHistogram.<a class="code" href="classQgsRasterHistogram.html#ac219fe982376fc00e46a15a3b84e90bf">histogramVector</a>[myBinIndex] += 1;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        myHistogram.<a class="code" href="classQgsRasterHistogram.html#ab5437eb7e1d1a9c1c5dea141e4c083e3">nonNullCount</a>++;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keyword">delete</span> blk;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  myHistogram.<a class="code" href="classQgsRasterHistogram.html#ae10ea19198e1d1209f563219afb2e776">valid</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <a class="code" href="classQgsRasterInterface.html#ae62adab6db8d26dc8e04ba136ba819c8">mHistograms</a>.append( myHistogram );</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">#ifdef QGISDEBUG</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  QString hist;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; std::min( myHistogram.<a class="code" href="classQgsRasterHistogram.html#ac219fe982376fc00e46a15a3b84e90bf">histogramVector</a>.size(), 500 ); i++ )</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    hist += QString::number( myHistogram.<a class="code" href="classQgsRasterHistogram.html#ac219fe982376fc00e46a15a3b84e90bf">histogramVector</a>.value( i ) ) + <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( <span class="stringliteral">&quot;Histogram (max first 500 bins): &quot;</span> + hist, 4 );</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">return</span> myHistogram;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#a0754453f6588941a102e9c5effb7423c">  511</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classQgsRasterInterface.html#a0754453f6588941a102e9c5effb7423c">QgsRasterInterface::cumulativeCut</a>( <span class="keywordtype">int</span> bandNo,</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                                        <span class="keywordtype">double</span> lowerCount, <span class="keywordtype">double</span> upperCount,</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                                        <span class="keywordtype">double</span> &amp;lowerValue, <span class="keywordtype">double</span> &amp;upperValue,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classQgsRectangle.html">QgsRectangle</a> &amp;<a class="code" href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">extent</a>,</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                        <span class="keywordtype">int</span> sampleSize )</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;{</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;theBandNo = %1 lowerCount = %2 upperCount = %3 sampleSize = %4&quot;</span> ).arg( bandNo ).arg( lowerCount ).arg( upperCount ).arg( sampleSize ), 4 );</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordtype">int</span> mySrcDataType = <a class="code" href="classQgsRasterInterface.html#a8c551f46c2eb3908bb407bda3ddd9f97">sourceDataType</a>( bandNo );</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Init to NaN is better than histogram min/max to catch errors</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  lowerValue = std::numeric_limits&lt;double&gt;::quiet_NaN();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  upperValue = std::numeric_limits&lt;double&gt;::quiet_NaN();</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">//get band stats to specify real histogram min/max (fix #9793 Byte bands)</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="classQgsRasterBandStats.html">QgsRasterBandStats</a> stats = <a class="code" href="classQgsRasterInterface.html#aaa39473935ac32b7b38970fed2ffaaac">bandStatistics</a>( bandNo, <a class="code" href="classQgsRasterBandStats.html#a7c29f50c8a8cf36e5a1174cffaf9be8ba193d01dc9542f4d5f8b268da23bfac4f">QgsRasterBandStats::Min</a>, extent, sampleSize );</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">if</span> ( stats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a> &lt; stats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a> )</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// for byte bands make sure bin count == actual range</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordtype">int</span> myBinCount = ( mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5aff09d65e170dc3ceb704a912eaf1ddee">Qgis::Byte</a> ) ? <span class="keywordtype">int</span>( std::ceil( stats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a> - stats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a> + 1 ) ) : 0;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="classQgsRasterHistogram.html">QgsRasterHistogram</a> myHistogram = <a class="code" href="classQgsRasterInterface.html#af8aecc430f757bbfd2a3ad19640f0bff">histogram</a>( bandNo, myBinCount, stats.<a class="code" href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">minimumValue</a>, stats.<a class="code" href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">maximumValue</a>, extent, sampleSize );</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">//QgsRasterHistogram myHistogram = histogram( bandNo, 0, std::numeric_limits&lt;double&gt;::quiet_NaN(), std::numeric_limits&lt;double&gt;::quiet_NaN(), extent, sampleSize );</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordtype">double</span> myBinXStep = ( myHistogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a> - myHistogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> ) / myHistogram.<a class="code" href="classQgsRasterHistogram.html#aeacc97367a04eb5fa47b1e8234a3b3d9">binCount</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordtype">int</span> myCount = 0;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordtype">int</span> myMinCount = static_cast&lt; int &gt;( std::round( lowerCount * myHistogram.<a class="code" href="classQgsRasterHistogram.html#ab5437eb7e1d1a9c1c5dea141e4c083e3">nonNullCount</a> ) );</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="keywordtype">int</span> myMaxCount = <span class="keyword">static_cast&lt;</span> <span class="keywordtype">int</span> <span class="keyword">&gt;</span>( std::round( upperCount * myHistogram.<a class="code" href="classQgsRasterHistogram.html#ab5437eb7e1d1a9c1c5dea141e4c083e3">nonNullCount</a> ) );</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordtype">bool</span> myLowerFound = <span class="keyword">false</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;binCount = %1 minimum = %2 maximum = %3 myBinXStep = %4&quot;</span> ).arg( myHistogram.<a class="code" href="classQgsRasterHistogram.html#aeacc97367a04eb5fa47b1e8234a3b3d9">binCount</a> ).arg( myHistogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> ).arg( myHistogram.<a class="code" href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">maximum</a> ).arg( myBinXStep ), 4 );</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;myMinCount = %1 myMaxCount = %2&quot;</span> ).arg( myMinCount ).arg( myMaxCount ), 4 );</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> myBin = 0; myBin &lt; myHistogram.<a class="code" href="classQgsRasterHistogram.html#ac219fe982376fc00e46a15a3b84e90bf">histogramVector</a>.size(); myBin++ )</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">int</span> myBinValue = myHistogram.<a class="code" href="classQgsRasterHistogram.html#ac219fe982376fc00e46a15a3b84e90bf">histogramVector</a>.value( myBin );</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    myCount += myBinValue;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> ( !myLowerFound &amp;&amp; myCount &gt; myMinCount )</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      lowerValue = myHistogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> + myBin * myBinXStep;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      myLowerFound = <span class="keyword">true</span>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;found lowerValue %1 at bin %2&quot;</span> ).arg( lowerValue ).arg( myBin ), 4 );</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> ( myCount &gt;= myMaxCount )</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      upperValue = myHistogram.<a class="code" href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">minimum</a> + myBin * myBinXStep;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( QString( <span class="stringliteral">&quot;found upperValue %1 at bin %2&quot;</span> ).arg( upperValue ).arg( myBin ), 4 );</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// fix integer data - round down/up</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">if</span> ( mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5aff09d65e170dc3ceb704a912eaf1ddee">Qgis::Byte</a> ||</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;       mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a006c63325c05c307af9a285a910bbaba">Qgis::Int16</a> || mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a42b15140f8f53733863648154562fb88">Qgis::Int32</a> ||</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;       mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5ad58c30e559800fdfc3448a593a982486">Qgis::UInt16</a> || mySrcDataType == <a class="code" href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a26f69286c48f415893d2eeb5ca7395c2">Qgis::UInt32</a> )</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">if</span> ( lowerValue != std::numeric_limits&lt;double&gt;::quiet_NaN() )</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      lowerValue = std::floor( lowerValue );</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> ( upperValue != std::numeric_limits&lt;double&gt;::quiet_NaN() )</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      upperValue = std::ceil( upperValue );</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;}</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="classQgsRasterInterface.html#a473e08e19842141c0502065b91ce807b">  573</a></span>&#160;QString <a class="code" href="classQgsRasterInterface.html#a473e08e19842141c0502065b91ce807b">QgsRasterInterface::capabilitiesString</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  QStringList abilitiesList;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordtype">int</span> abilities = <a class="code" href="classQgsRasterInterface.html#adb432fe846c0ca47321636f606128b99">capabilities</a>();</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// Not all all capabilities are here (Size, IdentifyValue, IdentifyText,</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment">// IdentifyHtml, IdentifyFeature) because those are quite technical and probably</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// would be confusing for users</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordflow">if</span> ( abilities &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a395b13b3e726868979d953dce4e359ba">QgsRasterInterface::Identify</a> )</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    abilitiesList += tr( <span class="stringliteral">&quot;Identify&quot;</span> );</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordflow">if</span> ( abilities &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a584740055ac9d887a713d013243b62a2">QgsRasterInterface::Create</a> )</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    abilitiesList += tr( <span class="stringliteral">&quot;Create Datasources&quot;</span> );</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">if</span> ( abilities &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a167967c4e816c3601a3b5e0b44fff2f4">QgsRasterInterface::Remove</a> )</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    abilitiesList += tr( <span class="stringliteral">&quot;Remove Datasources&quot;</span> );</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">if</span> ( abilities &amp; <a class="code" href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a1089f3b5f33d01c4b60a89d7f62fed6c">QgsRasterInterface::BuildPyramids</a> )</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    abilitiesList += tr( <span class="stringliteral">&quot;Build Pyramids&quot;</span> );</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a>( <span class="stringliteral">&quot;Capability: &quot;</span> + abilitiesList.join( <span class="stringliteral">&quot;, &quot;</span> ), 4 );</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">return</span> abilitiesList.join( QStringLiteral( <span class="stringliteral">&quot;, &quot;</span> ) );</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="ttc" id="classQgsRectangle_html"><div class="ttname"><a href="classQgsRectangle.html">QgsRectangle</a></div><div class="ttdoc">A rectangle specified with double values. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00040">qgsrectangle.h:40</a></div></div>
<div class="ttc" id="classQgis_html_aeb8e0dfb7dc6eb09e552bf3dff9c84d5a42b15140f8f53733863648154562fb88"><div class="ttname"><a href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a42b15140f8f53733863648154562fb88">Qgis::Int32</a></div><div class="ttdoc">Thirty two bit signed integer (qint32) </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00098">qgis.h:98</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a96e3b90944051463689fd94291f64d59"><div class="ttname"><a href="classQgsRasterInterface.html#a96e3b90944051463689fd94291f64d59">QgsRasterInterface::hasHistogram</a></div><div class="ttdeci">virtual bool hasHistogram(int bandNo, int binCount, double minimum=std::numeric_limits&lt; double &gt;::quiet_NaN(), double maximum=std::numeric_limits&lt; double &gt;::quiet_NaN(), const QgsRectangle &amp;extent=QgsRectangle(), int sampleSize=0, bool includeOutOfRange=false)</div><div class="ttdoc">Returns true if histogram is available (cached, already calculated) </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00367">qgsrasterinterface.cpp:367</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a900f14441254cf9ce534986b958f907d"><div class="ttname"><a href="classQgsRasterBandStats.html#a900f14441254cf9ce534986b958f907d">QgsRasterBandStats::sum</a></div><div class="ttdeci">double sum</div><div class="ttdoc">The sum of all cells in the band. NO_DATA values are excluded. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00106">qgsrasterbandstats.h:106</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_ae1860edc92ef6534c48987ee0e647df7"><div class="ttname"><a href="classQgsRasterInterface.html#ae1860edc92ef6534c48987ee0e647df7">QgsRasterInterface::extent</a></div><div class="ttdeci">virtual QgsRectangle extent() const</div><div class="ttdoc">Gets the extent of the interface. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00208">qgsrasterinterface.h:208</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a7c29f50c8a8cf36e5a1174cffaf9be8babe38d36291e813925651b877fcc1c4e1"><div class="ttname"><a href="classQgsRasterBandStats.html#a7c29f50c8a8cf36e5a1174cffaf9be8babe38d36291e813925651b877fcc1c4e1">QgsRasterBandStats::All</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00047">qgsrasterbandstats.h:47</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_a661a36a7d6202165514cd15e5907228a"><div class="ttname"><a href="classQgsRasterHistogram.html#a661a36a7d6202165514cd15e5907228a">QgsRasterHistogram::bandNumber</a></div><div class="ttdeci">int bandNumber</div><div class="ttdoc">The gdal band number (starts at 1) </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00064">qgsrasterhistogram.h:64</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_adf24745911e27d1d43b05cdca3db5f91"><div class="ttname"><a href="classQgsRasterHistogram.html#adf24745911e27d1d43b05cdca3db5f91">QgsRasterHistogram::width</a></div><div class="ttdeci">int width</div><div class="ttdoc">Number of columns used to calc histogram. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00088">qgsrasterhistogram.h:88</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a3c0bf8d3ad5fc762bf6bdf3787b1ffbc"><div class="ttname"><a href="classQgsRasterBandStats.html#a3c0bf8d3ad5fc762bf6bdf3787b1ffbc">QgsRasterBandStats::height</a></div><div class="ttdeci">int height</div><div class="ttdoc">Number of rows used to calc statistics. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00115">qgsrasterbandstats.h:115</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a228156d6d27ef316461fed77cbd8bc38"><div class="ttname"><a href="classQgsRasterBandStats.html#a228156d6d27ef316461fed77cbd8bc38">QgsRasterBandStats::bandNumber</a></div><div class="ttdeci">int bandNumber</div><div class="ttdoc">The gdal band number (starts at 1) </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00077">qgsrasterbandstats.h:77</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a508c8cf96ed6925d12a33085612f9b05a395b13b3e726868979d953dce4e359ba"><div class="ttname"><a href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a395b13b3e726868979d953dce4e359ba">QgsRasterInterface::Identify</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00171">qgsrasterinterface.h:171</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_a21478ae57af0b41c0fd2e72b9f845d0f"><div class="ttname"><a href="classQgsRasterHistogram.html#a21478ae57af0b41c0fd2e72b9f845d0f">QgsRasterHistogram::minimum</a></div><div class="ttdeci">double minimum</div><div class="ttdoc">The minimum histogram value. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00085">qgsrasterhistogram.h:85</a></div></div>
<div class="ttc" id="classQgis_html_aeb8e0dfb7dc6eb09e552bf3dff9c84d5a26f69286c48f415893d2eeb5ca7395c2"><div class="ttname"><a href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a26f69286c48f415893d2eeb5ca7395c2">Qgis::UInt32</a></div><div class="ttdoc">Thirty two bit unsigned integer (quint32) </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00097">qgis.h:97</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_aa80ae5e17e931f82f32a7d3702f42588"><div class="ttname"><a href="classQgsRasterBandStats.html#aa80ae5e17e931f82f32a7d3702f42588">QgsRasterBandStats::maximumValue</a></div><div class="ttdeci">double maximumValue</div><div class="ttdoc">The maximum cell value in the raster band. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00086">qgsrasterbandstats.h:86</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_ae1812389c8815fae851ca3eaffef5265"><div class="ttname"><a href="classQgsRasterInterface.html#ae1812389c8815fae851ca3eaffef5265">QgsRasterInterface::ySize</a></div><div class="ttdeci">virtual int ySize() const</div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00221">qgsrasterinterface.h:221</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a7c29f50c8a8cf36e5a1174cffaf9be8ba193d01dc9542f4d5f8b268da23bfac4f"><div class="ttname"><a href="classQgsRasterBandStats.html#a7c29f50c8a8cf36e5a1174cffaf9be8ba193d01dc9542f4d5f8b268da23bfac4f">QgsRasterBandStats::Min</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00040">qgsrasterbandstats.h:40</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_adcc75aaef40ffaa6cf4501a37afcd2ea"><div class="ttname"><a href="classQgsRasterHistogram.html#adcc75aaef40ffaa6cf4501a37afcd2ea">QgsRasterHistogram::height</a></div><div class="ttdeci">int height</div><div class="ttdoc">Number of rows used to calc histogram. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00091">qgsrasterhistogram.h:91</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_af8aecc430f757bbfd2a3ad19640f0bff"><div class="ttname"><a href="classQgsRasterInterface.html#af8aecc430f757bbfd2a3ad19640f0bff">QgsRasterInterface::histogram</a></div><div class="ttdeci">virtual QgsRasterHistogram histogram(int bandNo, int binCount=0, double minimum=std::numeric_limits&lt; double &gt;::quiet_NaN(), double maximum=std::numeric_limits&lt; double &gt;::quiet_NaN(), const QgsRectangle &amp;extent=QgsRectangle(), int sampleSize=0, bool includeOutOfRange=false, QgsRasterBlockFeedback *feedback=nullptr)</div><div class="ttdoc">Returns a band histogram. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00393">qgsrasterinterface.cpp:393</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a0754453f6588941a102e9c5effb7423c"><div class="ttname"><a href="classQgsRasterInterface.html#a0754453f6588941a102e9c5effb7423c">QgsRasterInterface::cumulativeCut</a></div><div class="ttdeci">virtual void cumulativeCut(int bandNo, double lowerCount, double upperCount, double &amp;lowerValue, double &amp;upperValue, const QgsRectangle &amp;extent=QgsRectangle(), int sampleSize=0)</div><div class="ttdoc">Find values for cumulative pixel count cut. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00511">qgsrasterinterface.cpp:511</a></div></div>
<div class="ttc" id="classQgis_html_aeb8e0dfb7dc6eb09e552bf3dff9c84d5a006c63325c05c307af9a285a910bbaba"><div class="ttname"><a href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5a006c63325c05c307af9a285a910bbaba">Qgis::Int16</a></div><div class="ttdoc">Sixteen bit signed integer (qint16) </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00096">qgis.h:96</a></div></div>
<div class="ttc" id="classQgsRasterBlock_html_ad4fd7cfc1b3c578000a26093e5e5e094"><div class="ttname"><a href="classQgsRasterBlock.html#ad4fd7cfc1b3c578000a26093e5e5e094">QgsRasterBlock::isNoData</a></div><div class="ttdeci">bool isNoData(int row, int column)</div><div class="ttdoc">Check if value at position is no data. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterblock_8h_source.html#l00227">qgsrasterblock.h:227</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_aef5b1b1e54e8a990cf5b333438684977"><div class="ttname"><a href="classQgsRasterBandStats.html#aef5b1b1e54e8a990cf5b333438684977">QgsRasterBandStats::contains</a></div><div class="ttdeci">bool contains(const QgsRasterBandStats &amp;s) const</div><div class="ttdoc">Compares region, size etc. not collected statistics. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00067">qgsrasterbandstats.h:67</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a8e8027c88f4f0ab5bc634da41a588edf"><div class="ttname"><a href="classQgsRasterInterface.html#a8e8027c88f4f0ab5bc634da41a588edf">QgsRasterInterface::xBlockSize</a></div><div class="ttdeci">virtual int xBlockSize() const</div><div class="ttdoc">Gets block size. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00216">qgsrasterinterface.h:216</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a61b2023b06fe4eab1a4af85ae8dff11b"><div class="ttname"><a href="classQgsRasterBandStats.html#a61b2023b06fe4eab1a4af85ae8dff11b">QgsRasterBandStats::extent</a></div><div class="ttdeci">QgsRectangle extent</div><div class="ttdoc">Extent used to calc statistics. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00118">qgsrasterbandstats.h:118</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a6250415bdfeefdb851763a24f7f30026"><div class="ttname"><a href="classQgsRasterBandStats.html#a6250415bdfeefdb851763a24f7f30026">QgsRasterBandStats::stdDev</a></div><div class="ttdeci">double stdDev</div><div class="ttdoc">The standard deviation of the cell values. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00100">qgsrasterbandstats.h:100</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html"><div class="ttname"><a href="classQgsRasterBandStats.html">QgsRasterBandStats</a></div><div class="ttdoc">The RasterBandStats struct is a container for statistics about a single raster band. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00034">qgsrasterbandstats.h:34</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a59c31d267e0ce60e43a6b8615fc4ab5a"><div class="ttname"><a href="classQgsRasterBandStats.html#a59c31d267e0ce60e43a6b8615fc4ab5a">QgsRasterBandStats::mean</a></div><div class="ttdeci">double mean</div><div class="ttdoc">The mean cell value for the band. NO_DATA values are excluded. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00094">qgsrasterbandstats.h:94</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a9068892452454f5437f4f4d159a956e1"><div class="ttname"><a href="classQgsRasterInterface.html#a9068892452454f5437f4f4d159a956e1">QgsRasterInterface::initStatistics</a></div><div class="ttdeci">void initStatistics(QgsRasterBandStats &amp;statistics, int bandNo, int stats=QgsRasterBandStats::All, const QgsRectangle &amp;boundingBox=QgsRectangle(), int binCount=0)</div><div class="ttdoc">Fill in statistics defaults if not specified. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00036">qgsrasterinterface.cpp:36</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a82a99df2f1820281227aed8a3545679c"><div class="ttname"><a href="classQgsRasterInterface.html#a82a99df2f1820281227aed8a3545679c">QgsRasterInterface::QgsRasterInterface</a></div><div class="ttdeci">QgsRasterInterface(QgsRasterInterface *input=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00031">qgsrasterinterface.cpp:31</a></div></div>
<div class="ttc" id="classQgsRasterBlock_html"><div class="ttname"><a href="classQgsRasterBlock.html">QgsRasterBlock</a></div><div class="ttdoc">Raster data container. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterblock_8h_source.html#l00036">qgsrasterblock.h:36</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a508c8cf96ed6925d12a33085612f9b05aadc59abc8f2b2c71d9297613e18261b5"><div class="ttname"><a href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05aadc59abc8f2b2c71d9297613e18261b5">QgsRasterInterface::Size</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00167">qgsrasterinterface.h:167</a></div></div>
<div class="ttc" id="qgslogger_8h_html_a795a1fcfb1c61b988bbd999396411d13"><div class="ttname"><a href="qgslogger_8h.html#a795a1fcfb1c61b988bbd999396411d13">QgsDebugMsgLevel</a></div><div class="ttdeci">#define QgsDebugMsgLevel(str, level)</div><div class="ttdef"><b>Definition:</b> <a href="qgslogger_8h_source.html#l00039">qgslogger.h:39</a></div></div>
<div class="ttc" id="classQgsRectangle_html_ac5d660b2ad11bf1e1db7f61e03e12ba6"><div class="ttname"><a href="classQgsRectangle.html#ac5d660b2ad11bf1e1db7f61e03e12ba6">QgsRectangle::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div><div class="ttdoc">Returns true if the rectangle is empty. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00419">qgsrectangle.h:419</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a0f28ed600d4fabd86c88c520652b8ae6"><div class="ttname"><a href="classQgsRasterInterface.html#a0f28ed600d4fabd86c88c520652b8ae6">QgsRasterInterface::block</a></div><div class="ttdeci">virtual QgsRasterBlock * block(int bandNo, const QgsRectangle &amp;extent, int width, int height, QgsRasterBlockFeedback *feedback=nullptr)=0</div><div class="ttdoc">Read block of data using given extent and size. </div></div>
<div class="ttc" id="classQgsRasterInterface_html_adb432fe846c0ca47321636f606128b99"><div class="ttname"><a href="classQgsRasterInterface.html#adb432fe846c0ca47321636f606128b99">QgsRasterInterface::capabilities</a></div><div class="ttdeci">virtual int capabilities() const</div><div class="ttdoc">Returns a bitmask containing the supported capabilities. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00186">qgsrasterinterface.h:186</a></div></div>
<div class="ttc" id="qgsrasterinterface_8h_html"><div class="ttname"><a href="qgsrasterinterface_8h.html">qgsrasterinterface.h</a></div></div>
<div class="ttc" id="qgsrasterbandstats_8h_html"><div class="ttname"><a href="qgsrasterbandstats_8h.html">qgsrasterbandstats.h</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a7f80945a6f9149707a29d16706b3bafd"><div class="ttname"><a href="classQgsRectangle.html#a7f80945a6f9149707a29d16706b3bafd">QgsRectangle::width</a></div><div class="ttdeci">double width() const</div><div class="ttdoc">Returns the width of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00201">qgsrectangle.h:201</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a508c8cf96ed6925d12a33085612f9b05a584740055ac9d887a713d013243b62a2"><div class="ttname"><a href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a584740055ac9d887a713d013243b62a2">QgsRasterInterface::Create</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00168">qgsrasterinterface.h:168</a></div></div>
<div class="ttc" id="classQgsRectangle_html_ad62419b14bc17f923346f8a233383382"><div class="ttname"><a href="classQgsRectangle.html#ad62419b14bc17f923346f8a233383382">QgsRectangle::intersect</a></div><div class="ttdeci">QgsRectangle intersect(const QgsRectangle &amp;rect) const</div><div class="ttdoc">Returns the intersection with the given rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00305">qgsrectangle.h:305</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_ae62adab6db8d26dc8e04ba136ba819c8"><div class="ttname"><a href="classQgsRasterInterface.html#ae62adab6db8d26dc8e04ba136ba819c8">QgsRasterInterface::mHistograms</a></div><div class="ttdeci">QList&lt; QgsRasterHistogram &gt; mHistograms</div><div class="ttdoc">List of cached histograms, all bands mixed. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00451">qgsrasterinterface.h:451</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a1a006e4d0a603d74614ff0d2a0c9d30c"><div class="ttname"><a href="classQgsRasterBandStats.html#a1a006e4d0a603d74614ff0d2a0c9d30c">QgsRasterBandStats::elementCount</a></div><div class="ttdeci">qgssize elementCount</div><div class="ttdoc">The number of not no data cells in the band. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00081">qgsrasterbandstats.h:81</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_ad14d9430addc4dc547f157b11b1b2765"><div class="ttname"><a href="classQgsRasterInterface.html#ad14d9430addc4dc547f157b11b1b2765">QgsRasterInterface::hasStatistics</a></div><div class="ttdeci">virtual bool hasStatistics(int bandNo, int stats=QgsRasterBandStats::All, const QgsRectangle &amp;extent=QgsRectangle(), int sampleSize=0)</div><div class="ttdoc">Returns true if histogram is available (cached, already calculated). </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00093">qgsrasterinterface.cpp:93</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a559b136bfc312c6e27a48d9dc801df12"><div class="ttname"><a href="classQgsRasterBandStats.html#a559b136bfc312c6e27a48d9dc801df12">QgsRasterBandStats::statsGathered</a></div><div class="ttdeci">int statsGathered</div><div class="ttdoc">Collected statistics. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00103">qgsrasterbandstats.h:103</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a473e08e19842141c0502065b91ce807b"><div class="ttname"><a href="classQgsRasterInterface.html#a473e08e19842141c0502065b91ce807b">QgsRasterInterface::capabilitiesString</a></div><div class="ttdeci">QString capabilitiesString() const</div><div class="ttdoc">Returns the above in friendly format. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00573">qgsrasterinterface.cpp:573</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a508c8cf96ed6925d12a33085612f9b05a1089f3b5f33d01c4b60a89d7f62fed6c"><div class="ttname"><a href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a1089f3b5f33d01c4b60a89d7f62fed6c">QgsRasterInterface::BuildPyramids</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00170">qgsrasterinterface.h:170</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_ac219fe982376fc00e46a15a3b84e90bf"><div class="ttname"><a href="classQgsRasterHistogram.html#ac219fe982376fc00e46a15a3b84e90bf">QgsRasterHistogram::histogramVector</a></div><div class="ttdeci">QgsRasterHistogram::HistogramVector histogramVector</div><div class="ttdoc">Store the histogram for a given layer. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00079">qgsrasterhistogram.h:79</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a508c8cf96ed6925d12a33085612f9b05a167967c4e816c3601a3b5e0b44fff2f4"><div class="ttname"><a href="classQgsRasterInterface.html#a508c8cf96ed6925d12a33085612f9b05a167967c4e816c3601a3b5e0b44fff2f4">QgsRasterInterface::Remove</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00169">qgsrasterinterface.h:169</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a8c551f46c2eb3908bb407bda3ddd9f97"><div class="ttname"><a href="classQgsRasterInterface.html#a8c551f46c2eb3908bb407bda3ddd9f97">QgsRasterInterface::sourceDataType</a></div><div class="ttdeci">virtual Qgis::DataType sourceDataType(int bandNo) const</div><div class="ttdoc">Returns source data type for the band specified by number, source data type may be shorter than dataT...</div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00202">qgsrasterinterface.h:202</a></div></div>
<div class="ttc" id="qgsrectangle_8h_html"><div class="ttname"><a href="qgsrectangle_8h.html">qgsrectangle.h</a></div></div>
<div class="ttc" id="classQgis_html_aeb8e0dfb7dc6eb09e552bf3dff9c84d5ad58c30e559800fdfc3448a593a982486"><div class="ttname"><a href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5ad58c30e559800fdfc3448a593a982486">Qgis::UInt16</a></div><div class="ttdoc">Sixteen bit unsigned integer (quint16) </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00095">qgis.h:95</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html"><div class="ttname"><a href="classQgsRasterInterface.html">QgsRasterInterface</a></div><div class="ttdoc">Base class for processing filters like renderers, reprojector, resampler etc. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00097">qgsrasterinterface.h:97</a></div></div>
<div class="ttc" id="qgis_8h_html_a5c6bee998e17d0cafeff24eb7953750e"><div class="ttname"><a href="qgis_8h.html#a5c6bee998e17d0cafeff24eb7953750e">qgssize</a></div><div class="ttdeci">unsigned long long qgssize</div><div class="ttdoc">Qgssize is used instead of size_t, because size_t is stdlib type, unknown by SIP, and it would be har...</div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00510">qgis.h:510</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_a7f5c1e4ea71e77ad5d86250d6a80489a"><div class="ttname"><a href="classQgsRasterHistogram.html#a7f5c1e4ea71e77ad5d86250d6a80489a">QgsRasterHistogram::maximum</a></div><div class="ttdeci">double maximum</div><div class="ttdoc">The maximum histogram value. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00082">qgsrasterhistogram.h:82</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_aaa39473935ac32b7b38970fed2ffaaac"><div class="ttname"><a href="classQgsRasterInterface.html#aaa39473935ac32b7b38970fed2ffaaac">QgsRasterInterface::bandStatistics</a></div><div class="ttdeci">virtual QgsRasterBandStats bandStatistics(int bandNo, int stats=QgsRasterBandStats::All, const QgsRectangle &amp;extent=QgsRectangle(), int sampleSize=0, QgsRasterBlockFeedback *feedback=nullptr)</div><div class="ttdoc">Returns the band statistics. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00115">qgsrasterinterface.cpp:115</a></div></div>
<div class="ttc" id="classQgsFeedback_html_a166e5fb87ddb57e86de791b14b6a6ce4"><div class="ttname"><a href="classQgsFeedback.html#a166e5fb87ddb57e86de791b14b6a6ce4">QgsFeedback::isCanceled</a></div><div class="ttdeci">bool isCanceled() const</div><div class="ttdoc">Tells whether the operation has been canceled already. </div><div class="ttdef"><b>Definition:</b> <a href="qgsfeedback_8h_source.html#l00054">qgsfeedback.h:54</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a212328b3ab8c1eeeca03785c0a38c715"><div class="ttname"><a href="classQgsRasterInterface.html#a212328b3ab8c1eeeca03785c0a38c715">QgsRasterInterface::yBlockSize</a></div><div class="ttdeci">virtual int yBlockSize() const</div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00217">qgsrasterinterface.h:217</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_ae8c5f2232fa4d2258ea21dc6f025ad71"><div class="ttname"><a href="classQgsRasterBandStats.html#ae8c5f2232fa4d2258ea21dc6f025ad71">QgsRasterBandStats::range</a></div><div class="ttdeci">double range</div><div class="ttdoc">The range is the distance between min &amp; max. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00097">qgsrasterbandstats.h:97</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a7c29f50c8a8cf36e5a1174cffaf9be8ba0d18f9b8691953850284e098d20fe739"><div class="ttname"><a href="classQgsRasterBandStats.html#a7c29f50c8a8cf36e5a1174cffaf9be8ba0d18f9b8691953850284e098d20fe739">QgsRasterBandStats::Max</a></div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00041">qgsrasterbandstats.h:41</a></div></div>
<div class="ttc" id="classQgsRasterBlock_html_a0b7b6170b3ed583015f5fcf574e3e794"><div class="ttname"><a href="classQgsRasterBlock.html#a0b7b6170b3ed583015f5fcf574e3e794">QgsRasterBlock::value</a></div><div class="ttdeci">double value(int row, int column) const</div><div class="ttdoc">Read a single value if type of block is numeric. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterblock_8h_source.html#l00187">qgsrasterblock.h:187</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a3186f5474a5fa3ced21e8204d339c301"><div class="ttname"><a href="classQgsRectangle.html#a3186f5474a5fa3ced21e8204d339c301">QgsRectangle::xMinimum</a></div><div class="ttdeci">double xMinimum() const</div><div class="ttdoc">Returns the x minimum value (left side of rectangle). </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00166">qgsrectangle.h:166</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a64e79039aa1fd84ea84a494da8d025ed"><div class="ttname"><a href="classQgsRasterBandStats.html#a64e79039aa1fd84ea84a494da8d025ed">QgsRasterBandStats::minimumValue</a></div><div class="ttdeci">double minimumValue</div><div class="ttdoc">The minimum cell value in the raster band. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00091">qgsrasterbandstats.h:91</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html"><div class="ttname"><a href="classQgsRasterHistogram.html">QgsRasterHistogram</a></div><div class="ttdoc">The QgsRasterHistogram is a container for histogram of a single raster band. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00032">qgsrasterhistogram.h:32</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_aeacc97367a04eb5fa47b1e8234a3b3d9"><div class="ttname"><a href="classQgsRasterHistogram.html#aeacc97367a04eb5fa47b1e8234a3b3d9">QgsRasterHistogram::binCount</a></div><div class="ttdeci">int binCount</div><div class="ttdoc">Number of bins (intervals,buckets) in histogram. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00067">qgsrasterhistogram.h:67</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a5676bc47dd66917d489d1aa1857943d1"><div class="ttname"><a href="classQgsRasterInterface.html#a5676bc47dd66917d489d1aa1857943d1">QgsRasterInterface::initHistogram</a></div><div class="ttdeci">void initHistogram(QgsRasterHistogram &amp;histogram, int bandNo, int binCount, double minimum=std::numeric_limits&lt; double &gt;::quiet_NaN(), double maximum=std::numeric_limits&lt; double &gt;::quiet_NaN(), const QgsRectangle &amp;boundingBox=QgsRectangle(), int sampleSize=0, bool includeOutOfRange=false)</div><div class="ttdoc">Fill in histogram defaults if not specified. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8cpp_source.html#l00246">qgsrasterinterface.cpp:246</a></div></div>
<div class="ttc" id="classQgsRectangle_html_a87a5cf3ee2fe6494c04a9e88876cc54e"><div class="ttname"><a href="classQgsRectangle.html#a87a5cf3ee2fe6494c04a9e88876cc54e">QgsRectangle::yMaximum</a></div><div class="ttdeci">double yMaximum() const</div><div class="ttdoc">Returns the y maximum value (top side of rectangle). </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00171">qgsrectangle.h:171</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a462c9ae3fde5e7896deb047ff78cfa2c"><div class="ttname"><a href="classQgsRasterInterface.html#a462c9ae3fde5e7896deb047ff78cfa2c">QgsRasterInterface::mStatistics</a></div><div class="ttdeci">QList&lt; QgsRasterBandStats &gt; mStatistics</div><div class="ttdoc">List of cached statistics, all bands mixed. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00448">qgsrasterinterface.h:448</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_ae10ea19198e1d1209f563219afb2e776"><div class="ttname"><a href="classQgsRasterHistogram.html#ae10ea19198e1d1209f563219afb2e776">QgsRasterHistogram::valid</a></div><div class="ttdeci">bool valid</div><div class="ttdoc">Histogram is valid. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00097">qgsrasterhistogram.h:97</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_ad9ac7504d704cf5681691da269fc7a98"><div class="ttname"><a href="classQgsRasterInterface.html#ad9ac7504d704cf5681691da269fc7a98">QgsRasterInterface::mInput</a></div><div class="ttdeci">QgsRasterInterface * mInput</div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00445">qgsrasterinterface.h:445</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_aa64a01577c2bcd69c6d7c9277e96448f"><div class="ttname"><a href="classQgsRasterHistogram.html#aa64a01577c2bcd69c6d7c9277e96448f">QgsRasterHistogram::extent</a></div><div class="ttdeci">QgsRectangle extent</div><div class="ttdoc">Extent used to calc histogram. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00094">qgsrasterhistogram.h:94</a></div></div>
<div class="ttc" id="classQgsRasterBlockFeedback_html"><div class="ttname"><a href="classQgsRasterBlockFeedback.html">QgsRasterBlockFeedback</a></div><div class="ttdoc">Feedback object tailored for raster block reading. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00041">qgsrasterinterface.h:41</a></div></div>
<div class="ttc" id="classQgsRasterInterface_html_a6024da23ab7abf219925b505a956526b"><div class="ttname"><a href="classQgsRasterInterface.html#a6024da23ab7abf219925b505a956526b">QgsRasterInterface::xSize</a></div><div class="ttdeci">virtual int xSize() const</div><div class="ttdoc">Gets raster size. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterinterface_8h_source.html#l00220">qgsrasterinterface.h:220</a></div></div>
<div class="ttc" id="qgsrasterhistogram_8h_html"><div class="ttname"><a href="qgsrasterhistogram_8h.html">qgsrasterhistogram.h</a></div></div>
<div class="ttc" id="classQgis_html_aeb8e0dfb7dc6eb09e552bf3dff9c84d5aff09d65e170dc3ceb704a912eaf1ddee"><div class="ttname"><a href="classQgis.html#aeb8e0dfb7dc6eb09e552bf3dff9c84d5aff09d65e170dc3ceb704a912eaf1ddee">Qgis::Byte</a></div><div class="ttdoc">Eight bit unsigned integer (quint8) </div><div class="ttdef"><b>Definition:</b> <a href="qgis_8h_source.html#l00094">qgis.h:94</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_aa5059393bb80a08419d867542d874acf"><div class="ttname"><a href="classQgsRasterHistogram.html#aa5059393bb80a08419d867542d874acf">QgsRasterHistogram::includeOutOfRange</a></div><div class="ttdeci">bool includeOutOfRange</div><div class="ttdoc">Whether histogram includes out of range values (in first and last bin) </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00073">qgsrasterhistogram.h:73</a></div></div>
<div class="ttc" id="classQgsRectangle_html_ad0a64f974edb994e38e3c418e48396d8"><div class="ttname"><a href="classQgsRectangle.html#ad0a64f974edb994e38e3c418e48396d8">QgsRectangle::height</a></div><div class="ttdeci">double height() const</div><div class="ttdoc">Returns the height of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrectangle_8h_source.html#l00208">qgsrectangle.h:208</a></div></div>
<div class="ttc" id="qgslogger_8h_html"><div class="ttname"><a href="qgslogger_8h.html">qgslogger.h</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a289d975432420054ce7166d569bd7847"><div class="ttname"><a href="classQgsRasterBandStats.html#a289d975432420054ce7166d569bd7847">QgsRasterBandStats::sumOfSquares</a></div><div class="ttdeci">double sumOfSquares</div><div class="ttdoc">The sum of the squares. Used to calculate standard deviation. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00109">qgsrasterbandstats.h:109</a></div></div>
<div class="ttc" id="classQgsRasterBandStats_html_a7a2636178ecf0a13254f89be976b0797"><div class="ttname"><a href="classQgsRasterBandStats.html#a7a2636178ecf0a13254f89be976b0797">QgsRasterBandStats::width</a></div><div class="ttdeci">int width</div><div class="ttdoc">Number of columns used to calc statistics. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterbandstats_8h_source.html#l00112">qgsrasterbandstats.h:112</a></div></div>
<div class="ttc" id="classQgsRasterHistogram_html_ab5437eb7e1d1a9c1c5dea141e4c083e3"><div class="ttname"><a href="classQgsRasterHistogram.html#ab5437eb7e1d1a9c1c5dea141e4c083e3">QgsRasterHistogram::nonNullCount</a></div><div class="ttdeci">int nonNullCount</div><div class="ttdoc">The number of non NULL cells used to calculate histogram. </div><div class="ttdef"><b>Definition:</b> <a href="qgsrasterhistogram_8h_source.html#l00070">qgsrasterhistogram.h:70</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 23 2018 20:58:15 for QGIS API Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
